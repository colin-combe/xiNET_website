!function(){function c(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function g(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function e(a){return null===a?NaN:+a}function h(a){return!isNaN(a)}function m(a){return{left:function(b,d,k,f){3>arguments.length&&(k=0);4>arguments.length&&(f=b.length);for(;k<f;){var l=k+f>>>1;0>a(b[l],d)?k=l+1:f=l}return k},right:function(b,d,k,f){3>arguments.length&&(k=0);4>arguments.length&&(f=b.length);for(;k<f;){var l=k+f>>>1;0<a(b[l],
d)?f=l:k=l+1}return k}}}function p(a){return a.length}function q(a,b){for(var d in b)Object.defineProperty(a.prototype,d,{value:b[d],enumerable:!1})}function t(){this._=Object.create(null)}function u(a){return"__proto__"===(a+="")||"\x00"===a[0]?"\x00"+a:a}function v(a){return"\x00"===(a+="")[0]?a.slice(1):a}function x(a){return u(a)in this._}function y(a){return(a=u(a))in this._&&delete this._[a]}function D(){var a=[],b;for(b in this._)a.push(v(b));return a}function J(){var a=0,b;for(b in this._)++a;
return a}function R(){for(var a in this._)return!1;return!0}function M(){this._=Object.create(null)}function P(a){return a}function ca(a,b,d){return function(){var k=d.apply(b,arguments);return k===b?a:k}}function $(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var d=0,k=Pd.length;d<k;++d){var f=Pd[d]+b;if(f in a)return f}}function L(){}function G(){}function U(a){function b(){for(var b=d,k=-1,c=b.length,r;++k<c;)(r=b[k].on)&&r.apply(this,arguments);return a}var d=[],k=new t;
b.on=function(b,l){var c=k.get(b),r;if(2>arguments.length)return c&&c.on;c&&(c.on=null,d=d.slice(0,r=d.indexOf(c)).concat(d.slice(r+1)),k.remove(b));l&&d.push(k.set(b,{on:l}));return a};return b}function C(){n.event.preventDefault()}function E(){for(var a=n.event,b;b=a.sourceEvent;)a=b;return a}function Y(a){for(var b=new G,d=0,k=arguments.length;++d<k;)b[arguments[d]]=U(b);b.of=function(d,k){return function(c){try{var r=c.sourceEvent=n.event;c.target=a;n.event=c;b[c.type].apply(d,k)}finally{n.event=
r}}};return b}function T(a){Eb(a,S);return a}function Ea(a){return"function"===typeof a?a:function(){return Fc(a,this)}}function cb(a){return"function"===typeof a?a:function(){return Gc(a,this)}}function Qd(a,b){function d(){this.removeAttribute(a)}function k(){this.removeAttributeNS(a.space,a.local)}function f(){this.setAttribute(a,b)}function l(){this.setAttributeNS(a.space,a.local,b)}function c(){var d=b.apply(this,arguments);null==d?this.removeAttribute(a):this.setAttribute(a,d)}function r(){var d=
b.apply(this,arguments);null==d?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,d)}a=n.ns.qualify(a);return null==b?a.local?k:d:"function"===typeof b?a.local?r:c:a.local?l:f}function Rd(a){return a.trim().replace(/\s+/g," ")}function Sd(a){return new RegExp("(?:^|\\s+)"+n.requote(a)+"(?:\\s+|$)","g")}function Td(a,b){function d(){for(var d=-1;++d<f;)a[d](this,b)}function k(){for(var d=-1,k=b.apply(this,arguments);++d<f;)a[d](this,k)}a=(a+"").trim().split(/^|\s+/).map(wg);
var f=a.length;return"function"===typeof b?k:d}function wg(a){var b=Sd(a);return function(d,k){if(f=d.classList)return k?f.add(a):f.remove(a);var f=d.getAttribute("class")||"";k?(b.lastIndex=0,b.test(f)||d.setAttribute("class",Rd(f+" "+a))):d.setAttribute("class",Rd(f.replace(b," ")))}}function Ud(a,b,d){function k(){this.style.removeProperty(a)}function f(){this.style.setProperty(a,b,d)}function l(){var k=b.apply(this,arguments);null==k?this.style.removeProperty(a):this.style.setProperty(a,k,d)}
return null==b?k:"function"===typeof b?l:f}function Vd(a,b){function d(){delete this[a]}function k(){this[a]=b}function f(){var d=b.apply(this,arguments);null==d?delete this[a]:this[a]=d}return null==b?d:"function"===typeof b?f:k}function Wd(a){function b(){var b=this.ownerDocument,d=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===d&&"http://www.w3.org/1999/xhtml"===b.documentElement.namespaceURI?b.createElement(a):b.createElementNS(d,a)}function d(){return this.ownerDocument.createElementNS(a.space,
a.local)}return"function"===typeof a?a:(a=n.ns.qualify(a)).local?d:b}function xg(){var a=this.parentNode;a&&a.removeChild(this)}function Xd(a){return function(){return Fb(this,a)}}function yg(a){arguments.length||(a=g);return function(b,d){return b&&d?a(b.__data__,d.__data__):!b-!d}}function la(a,b){for(var d=0,k=a.length;d<k;d++)for(var f=a[d],l=0,c=f.length,r;l<c;l++)(r=f[l])&&b(r,l,d);return a}function Yd(a){Eb(a,Fa);return a}function zg(a){var b,d;return function(k,f,l){k=a[l].update;var c=k.length;
l!=d&&(d=l,b=0);for(f>=b&&(b=f+1);!(f=k[b])&&++b<c;);return f}}function Zd(a,b,d){function k(){var b=this[c];b&&(this.removeEventListener(a,b,b.$),delete this[c])}function f(){var f=w(b,za(arguments));k.call(this);this.addEventListener(a,this[c]=f,f.$=d);f._=b}function l(){var b=new RegExp("^__on([^.]+)"+n.requote(a)+"$"),d,k;for(k in this)if(d=k.match(b)){var f=this[k];this.removeEventListener(d[1],f,f.$);delete this[k]}}var c="__on"+a,r=a.indexOf("."),w=ae;0<r&&(a=a.slice(0,r));var s=Hc.get(a);
s&&(a=s,w=Ag);return r?b?f:k:b?L:l}function ae(a,b){return function(d){var k=n.event;n.event=d;b[0]=this.__data__;try{a.apply(this,b)}finally{n.event=k}}}function Ag(a,b){var d=ae(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||b.compareDocumentPosition(this)&8)||d.call(this,a)}}function Gb(a){var b=".dragsuppress-"+ ++Bg,d="click"+b,k=n.select(c(a)).on("touchmove"+b,C).on("dragstart"+b,C).on("selectstart"+b,C);null==Ta&&(Ta="onselectstart"in a?!1:$(a.style,"userSelect"));if(Ta){var f=
(a&&(a.ownerDocument||a.document||a).documentElement).style,l=f[Ta];f[Ta]="none"}return function(a){k.on(b,null);Ta&&(f[Ta]=l);if(a){var r=function(){k.on(d,null)};k.on(d,function(){C();r()},!0);setTimeout(r,0)}}}function Ic(a,b){b.changedTouches&&(b=b.changedTouches[0]);var d=a.ownerSVGElement||a;if(d.createSVGPoint){var k=d.createSVGPoint();if(0>Jc&&(d=c(a),d.scrollX||d.scrollY)){var d=n.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),
f=d[0][0].getScreenCTM();Jc=!(f.f||f.e);d.remove()}Jc?(k.x=b.pageX,k.y=b.pageY):(k.x=b.clientX,k.y=b.clientY);k=k.matrixTransform(a.getScreenCTM().inverse());return[k.x,k.y]}k=a.getBoundingClientRect();return[b.clientX-k.left-a.clientLeft,b.clientY-k.top-a.clientTop]}function Cg(){return n.event.changedTouches[0].identifier}function Kc(a,b,d){return(b[0]-a[0])*(d[1]-a[1])-(b[1]-a[1])*(d[0]-a[0])}function be(a){return 1<a?0:-1>a?H:Math.acos(a)}function Ma(a){return 1<a?aa:-1>a?-aa:Math.asin(a)}function ce(a){return((a=
Math.exp(a))+1/a)/2}function de(a){return(a=Math.sin(a/2))*a}function Ua(){}function Aa(a,b,d){return this instanceof Aa?void(this.h=+a,this.s=+b,this.l=+d):2>arguments.length?a instanceof Aa?new Aa(a.h,a.s,a.l):ee(""+a,fe,Aa):new Aa(a,b,d)}function Lc(a,b,d){function k(a){360<a?a-=360:0>a&&(a+=360);return 60>a?f+(l-f)*a/60:180>a?l:240>a?f+(l-f)*(240-a)/60:f}var f,l;a=isNaN(a)?0:0>(a%=360)?a+360:a;b=isNaN(b)?0:0>b?0:1<b?1:b;d=0>d?0:1<d?1:d;l=.5>=d?d*(1+b):d+b-d*b;f=2*d-l;return new ja(Math.round(255*
k(a+120)),Math.round(255*k(a)),Math.round(255*k(a-120)))}function ua(a,b,d){return this instanceof ua?void(this.h=+a,this.c=+b,this.l=+d):2>arguments.length?a instanceof ua?new ua(a.h,a.c,a.l):a instanceof va?ge(a.l,a.a,a.b):ge((a=he((a=n.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ua(a,b,d)}function Mc(a,b,d){isNaN(a)&&(a=0);isNaN(b)&&(b=0);return new va(d,Math.cos(a*=N)*b,Math.sin(a)*b)}function va(a,b,d){return this instanceof va?void(this.l=+a,this.a=+b,this.b=+d):2>arguments.length?a instanceof va?new va(a.l,
a.a,a.b):a instanceof ua?Mc(a.h,a.c,a.l):he((a=ja(a)).r,a.g,a.b):new va(a,b,d)}function ie(a,b,d){a=(a+16)/116;d=a-d/200;b=Nc(a+b/500)*je;a=Nc(a)*ke;d=Nc(d)*le;return new ja(Oc(3.2404542*b-1.5371385*a-.4985314*d),Oc(-.969266*b+1.8760108*a+.041556*d),Oc(.0556434*b-.2040259*a+1.0572252*d))}function ge(a,b,d){return 0<a?new ua(Math.atan2(d,b)*X,Math.sqrt(b*b+d*d),a):new ua(NaN,NaN,a)}function Nc(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Pc(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/
29}function Oc(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function ja(a,b,d){return this instanceof ja?void(this.r=~~a,this.g=~~b,this.b=~~d):2>arguments.length?a instanceof ja?new ja(a.r,a.g,a.b):ee(""+a,ja,Lc):new ja(a,b,d)}function Hb(a){return new ja(a>>16,a>>8&255,a&255)+""}function db(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function ee(a,b,d){var k=0,f=0,l=0,c,r;if(c=/([a-z]+)\((.*)\)/.exec(a=a.toLowerCase()))switch(r=c[2].split(","),
c[1]){case "hsl":return d(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case "rgb":return b(Qc(r[0]),Qc(r[1]),Qc(r[2]))}if(d=Ib.get(a))return b(d.r,d.g,d.b);null==a||"#"!==a.charAt(0)||isNaN(d=parseInt(a.slice(1),16))||(4===a.length?(k=(d&3840)>>4,k|=k>>4,f=d&240,f|=f>>4,l=d&15,l|=l<<4):7===a.length&&(k=(d&16711680)>>16,f=(d&65280)>>8,l=d&255));return b(k,f,l)}function fe(a,b,d){var k=Math.min(a/=255,b/=255,d/=255),f=Math.max(a,b,d),l=f-k,c=(f+k)/2;l?(k=.5>c?l/(f+k):l/(2-f-k),a=60*(a==
f?(b-d)/l+(b<d?6:0):b==f?(d-a)/l+2:(a-b)/l+4)):(a=NaN,k=0<c&&1>c?0:a);return new Aa(a,k,c)}function he(a,b,d){a=Rc(a);b=Rc(b);d=Rc(d);var k=Pc((.4124564*a+.3575761*b+.1804375*d)/je),f=Pc((.2126729*a+.7151522*b+.072175*d)/ke);a=Pc((.0193339*a+.119192*b+.9503041*d)/le);return va(116*f-16,500*(k-f),200*(f-a))}function Rc(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Qc(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function W(a){return"function"===
typeof a?a:function(){return a}}function Sc(a){return function(b,d,k){2===arguments.length&&"function"===typeof d&&(k=d,d=null);return Jb(b,d,a,k)}}function Jb(a,b,d,k){function f(){var a=w.status,b,k;if(k=!a)k=(k=w.responseType)&&"text"!==k?w.response:w.responseText;if(k||200<=a&&300>a||304===a){try{b=d.call(l,w)}catch(f){c.error.call(l,f);return}c.load.call(l,b)}else c.error.call(l,w)}var l={},c=n.dispatch("beforesend","progress","load","error"),r={},w=new XMLHttpRequest,s=null;!this.XDomainRequest||
"withCredentials"in w||!/^(http(s)?:)?\/\//.test(a)||(w=new XDomainRequest);"onload"in w?w.onload=w.onerror=f:w.onreadystatechange=function(){3<w.readyState&&f()};w.onprogress=function(a){var b=n.event;n.event=a;try{c.progress.call(l,w)}finally{n.event=b}};l.header=function(a,b){a=(a+"").toLowerCase();if(2>arguments.length)return r[a];null==b?delete r[a]:r[a]=b+"";return l};l.mimeType=function(a){if(!arguments.length)return b;b=null==a?null:a+"";return l};l.responseType=function(a){if(!arguments.length)return s;
s=a;return l};l.response=function(a){d=a;return l};["get","post"].forEach(function(a){l[a]=function(){return l.send.apply(l,[a].concat(za(arguments)))}});l.send=function(d,k,f){2===arguments.length&&"function"===typeof k&&(f=k,k=null);w.open(d,a,!0);null==b||"accept"in r||(r.accept=b+",*/*");if(w.setRequestHeader)for(var e in r)w.setRequestHeader(e,r[e]);null!=b&&w.overrideMimeType&&w.overrideMimeType(b);null!=s&&(w.responseType=s);if(null!=f)l.on("error",f).on("load",function(a){f(null,a)});c.beforesend.call(l,
w);w.send(null==k?null:k);return l};l.abort=function(){w.abort();return l};n.rebind(l,c,"on");return null==k?l:l.get(Dg(k))}function Dg(a){return 1===a.length?function(b,d){a(null==b?d:null)}:a}function Kb(a,b,d){var k=arguments.length;2>k&&(b=0);3>k&&(d=Date.now());k={c:a,t:d+b,n:null};Lb?Lb.n=k:Mb=k;Lb=k;Nb||(Ob=clearTimeout(Ob),Nb=1,ne(Tc));return k}function Tc(){var a=oe(),a=pe()-a;24<a?(isFinite(a)&&(clearTimeout(Ob),Ob=setTimeout(Tc,a)),Nb=0):(Nb=1,ne(Tc))}function oe(){for(var a=Date.now(),
b=Mb;b;)a>=b.t&&b.c(a-b.t)&&(b.c=null),b=b.n;return a}function pe(){for(var a,b=Mb,d=Infinity;b;)b.c?(b.t<d&&(d=b.t),b=(a=b).n):b=a?a.n=b.n:Mb=b.n;Lb=a;return d}function Uc(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Eg(a){var b=a.decimal,d=a.thousands,k=a.grouping,f=a.currency,l=k&&d?function(a,b){for(var f=a.length,l=[],c=0,V=k[0],e=0;0<f&&0<V;){e+V+1>b&&(V=Math.max(1,b-e));l.push(a.substring(f-=V,f+V));if((e+=V+1)>b)break;V=k[c=(c+1)%k.length]}return l.reverse().join(d)}:P;return function(a){a=
qe.exec(a);var d=a[1]||" ",k=a[2]||">",c=a[3]||"-",K=a[4]||"",V=a[5],e=+a[6],g=a[7],h=a[8],F=a[9],B=1,z="",m="",p=!1,q=!0;h&&(h=+h.substring(1));if(V||"0"===d&&"="===k)V=d="0",k="=";switch(F){case "n":g=!0;F="g";break;case "%":B=100;m="%";F="f";break;case "p":B=100;m="%";F="r";break;case "b":case "o":case "x":case "X":"#"===K&&(z="0"+F.toLowerCase());case "c":q=!1;case "d":p=!0;h=0;break;case "s":B=-1,F="r"}"$"===K&&(z=f[0],m=f[1]);"r"!=F||h||(F="g");if(null!=h)if("g"==F)h=Math.max(1,Math.min(21,
h));else if("e"==F||"f"==F)h=Math.max(0,Math.min(20,h));var F=Fg.get(F)||Gg,t=V&&g;return function(a){var f=m;if(p&&a%1)return"";var I=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===c?"":c;0>B?(f=n.formatPrefix(a,h),a=f.scale(a),f=f.symbol+m):a*=B;a=F(a,h);var K=a.lastIndexOf("."),Ga;0>K?(K=q?a.lastIndexOf("e"):-1,0>K?(Ga=a,a=""):(Ga=a.substring(0,K),a=a.substring(K))):(Ga=a.substring(0,K),a=b+a.substring(K+1));!V&&g&&(Ga=l(Ga,Infinity));var K=z.length+Ga.length+a.length+(t?0:I.length),u=K<e?Array(K=e-K+1).join(d):
"";t&&(Ga=l(u+Ga,u.length?e-a.length:Infinity));I+=z;a=Ga+a;return("<"===k?I+a+u:">"===k?u+I+a:"^"===k?u.substring(0,K>>=1)+I+a+u.substring(K):I+(t?a:u+a))+f}}}function Gg(a){return a+""}function Ha(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Va(a,b,d){function k(b){var d=a(b),k=l(d,1);return b-d<k-b?d:k}function f(d){b(d=a(new ga(d-1)),1);return d}function l(a,d){b(a=new ga(+a),d);return a}function c(a,k,l){a=f(a);var r=[];if(1<l)for(;a<k;)d(a)%l||r.push(new Date(+a)),
b(a,1);else for(;a<k;)r.push(new Date(+a)),b(a,1);return r}a.floor=a;a.round=k;a.ceil=f;a.offset=l;a.range=c;var r=a.utc=Qb(a);r.floor=r;r.round=Qb(k);r.ceil=Qb(f);r.offset=Qb(l);r.range=function(a,b,d){try{ga=Ha;var k=new Ha;k._=a;return c(k,b,d)}finally{ga=Date}};return a}function Qb(a){return function(b,d){try{ga=Ha;var k=new Ha;k._=b;return a(k,d)._}finally{ga=Date}}}function Hg(a){function b(a){function b(d){for(var f=[],l=-1,c=0,r,w;++l<k;)if(37===a.charCodeAt(l)){f.push(a.slice(c,l));null!=
(r=se[c=a.charAt(++l)])&&(c=a.charAt(++l));if(w=q[c])c=w(d,null==r?"e"===c?" ":"0":r);f.push(c);c=l+1}f.push(a.slice(c,l));return f.join("")}var k=a.length;b.parse=function(b){var k={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(d(k,a,b,0)!=b.length)return null;"p"in k&&(k.H=k.H%12+12*k.p);b=null!=k.Z&&ga!==Ha;var f=new (b?Ha:ga);"j"in k?f.setFullYear(k.y,0,k.j):"W"in k||"U"in k?("w"in k||(k.w="W"in k?1:0),f.setFullYear(k.y,0,1),f.setFullYear(k.y,0,"W"in k?(k.w+6)%7+7*k.W-(f.getDay()+5)%7:k.w+7*k.U-(f.getDay()+
6)%7)):f.setFullYear(k.y,k.m,k.d);f.setHours(k.H+(k.Z/100|0),k.M+k.Z%100,k.S,k.L);return b?f._:f};b.toString=function(){return a};return b}function d(a,b,d,k){for(var f,l=0,c=b.length,r=d.length;l<c;){if(k>=r)return-1;f=b.charCodeAt(l++);if(37===f){if(f=b.charAt(l++),f=t[f in se?b.charAt(l++):f],!f||0>(k=f(a,d,k)))return-1}else if(f!=d.charCodeAt(k++))return-1}return k}var k=a.dateTime,f=a.date,l=a.time,c=a.periods,r=a.days,w=a.shortDays,s=a.months,K=a.shortMonths;b.utc=function(a){function d(a){try{ga=
Ha;var b=new ga;b._=a;return k(b)}finally{ga=Date}}var k=b(a);d.parse=function(a){try{ga=Ha;var b=k.parse(a);return b&&b._}finally{ga=Date}};d.toString=k.toString;return d};b.multi=b.utc.multi=Ig;var V=n.map(),e=Rb(r),g=Sb(r),h=Rb(w),F=Sb(w),B=Rb(s),z=Sb(s),m=Rb(K),p=Sb(K);c.forEach(function(a,b){V.set(a.toLowerCase(),b)});var q={a:function(a){return w[a.getDay()]},A:function(a){return r[a.getDay()]},b:function(a){return K[a.getMonth()]},B:function(a){return s[a.getMonth()]},c:b(k),d:function(a,b){return ka(a.getDate(),
b,2)},e:function(a,b){return ka(a.getDate(),b,2)},H:function(a,b){return ka(a.getHours(),b,2)},I:function(a,b){return ka(a.getHours()%12||12,b,2)},j:function(a,b){return ka(1+A.dayOfYear(a),b,3)},L:function(a,b){return ka(a.getMilliseconds(),b,3)},m:function(a,b){return ka(a.getMonth()+1,b,2)},M:function(a,b){return ka(a.getMinutes(),b,2)},p:function(a){return c[+(12<=a.getHours())]},S:function(a,b){return ka(a.getSeconds(),b,2)},U:function(a,b){return ka(A.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},
W:function(a,b){return ka(A.mondayOfYear(a),b,2)},x:b(f),X:b(l),y:function(a,b){return ka(a.getFullYear()%100,b,2)},Y:function(a,b){return ka(a.getFullYear()%1E4,b,4)},Z:Jg,"%":function(){return"%"}},t={a:function(a,b,d){h.lastIndex=0;return(b=h.exec(b.slice(d)))?(a.w=F.get(b[0].toLowerCase()),d+b[0].length):-1},A:function(a,b,d){e.lastIndex=0;return(b=e.exec(b.slice(d)))?(a.w=g.get(b[0].toLowerCase()),d+b[0].length):-1},b:function(a,b,d){m.lastIndex=0;return(b=m.exec(b.slice(d)))?(a.m=p.get(b[0].toLowerCase()),
d+b[0].length):-1},B:function(a,b,d){B.lastIndex=0;return(b=B.exec(b.slice(d)))?(a.m=z.get(b[0].toLowerCase()),d+b[0].length):-1},c:function(a,b,k){return d(a,q.c.toString(),b,k)},d:te,e:te,H:ue,I:ue,j:Kg,L:Lg,m:Mg,M:Ng,p:function(a,b,d){b=V.get(b.slice(d,d+=2).toLowerCase());return null==b?-1:(a.p=b,d)},S:Og,U:Pg,w:Qg,W:Rg,x:function(a,b,k){return d(a,q.x.toString(),b,k)},X:function(a,b,k){return d(a,q.X.toString(),b,k)},y:Sg,Y:Tg,Z:Ug,"%":Vg};return b}function ka(a,b,d){var k=0>a?"-":"";a=(k?-a:
a)+"";var f=a.length;return k+(f<d?Array(d-f+1).join(b)+a:a)}function Rb(a){return new RegExp("^(?:"+a.map(n.requote).join("|")+")","i")}function Sb(a){for(var b=new t,d=-1,k=a.length;++d<k;)b.set(a[d].toLowerCase(),d);return b}function Qg(a,b,d){ba.lastIndex=0;return(b=ba.exec(b.slice(d,d+1)))?(a.w=+b[0],d+b[0].length):-1}function Pg(a,b,d){ba.lastIndex=0;return(b=ba.exec(b.slice(d)))?(a.U=+b[0],d+b[0].length):-1}function Rg(a,b,d){ba.lastIndex=0;return(b=ba.exec(b.slice(d)))?(a.W=+b[0],d+b[0].length):
-1}function Tg(a,b,d){ba.lastIndex=0;return(b=ba.exec(b.slice(d,d+4)))?(a.y=+b[0],d+b[0].length):-1}function Sg(a,b,d){ba.lastIndex=0;if(b=ba.exec(b.slice(d,d+2))){var k=+b[0];a=(a.y=k+(68<k?1900:2E3),d+b[0].length)}else a=-1;return a}function Ug(a,b,d){return/^[+-]\d{4}$/.test(b=b.slice(d,d+5))?(a.Z=-b,d+5):-1}function Mg(a,b,d){ba.lastIndex=0;return(b=ba.exec(b.slice(d,d+2)))?(a.m=b[0]-1,d+b[0].length):-1}function te(a,b,d){ba.lastIndex=0;return(b=ba.exec(b.slice(d,d+2)))?(a.d=+b[0],d+b[0].length):
-1}function Kg(a,b,d){ba.lastIndex=0;return(b=ba.exec(b.slice(d,d+3)))?(a.j=+b[0],d+b[0].length):-1}function ue(a,b,d){ba.lastIndex=0;return(b=ba.exec(b.slice(d,d+2)))?(a.H=+b[0],d+b[0].length):-1}function Ng(a,b,d){ba.lastIndex=0;return(b=ba.exec(b.slice(d,d+2)))?(a.M=+b[0],d+b[0].length):-1}function Og(a,b,d){ba.lastIndex=0;return(b=ba.exec(b.slice(d,d+2)))?(a.S=+b[0],d+b[0].length):-1}function Lg(a,b,d){ba.lastIndex=0;return(b=ba.exec(b.slice(d,d+3)))?(a.L=+b[0],d+b[0].length):-1}function Jg(a){var b=
a.getTimezoneOffset();a=0<b?"-":"+";var d=O(b)/60|0,b=O(b)%60;return a+ka(d,"0",2)+ka(b,"0",2)}function Vg(a,b,d){ve.lastIndex=0;return(a=ve.exec(b.slice(d,d+1)))?d+a[0].length:-1}function Ig(a){for(var b=a.length,d=-1;++d<b;)a[d][0]=this(a[d][0]);return function(b){for(var d=0,l=a[d];!l[1](b);)l=a[++d];return l[0](b)}}function Wc(){}function we(a,b,d){var k=d.s=a+b,f=k-a;d.t=a-(k-f)+(b-f)}function Tb(a,b){if(a&&xe.hasOwnProperty(a.type))xe[a.type](a,b)}function Xc(a,b,d){var k=-1;d=a.length-d;var f;
for(b.lineStart();++k<d;)f=a[k],b.point(f[0],f[1],f[2]);b.lineEnd()}function ye(a,b){var d=-1,k=a.length;for(b.polygonStart();++d<k;)Xc(a[d],b,1);b.polygonEnd()}function Wg(){function a(a,b){a*=N;b=b*N/2+H/4;var d=a-k,c=0<=d?1:-1,K=c*d,d=Math.cos(b),V=Math.sin(b),e=l*V,g=f*d+e*Math.cos(K),c=e*c*Math.sin(K);Wa.add(Math.atan2(c,g));k=a;f=d;l=V}var b,d,k,f,l;oa.point=function(c,r){oa.point=a;k=(b=c)*N;f=Math.cos(r=(d=r)*N/2+H/4);l=Math.sin(r)};oa.lineEnd=function(){a(b,d)}}function Xa(a){var b=a[0];
a=a[1];var d=Math.cos(a);return[d*Math.cos(b),d*Math.sin(b),Math.sin(a)]}function Ub(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function eb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Yc(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function Vb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Wb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function Xb(a){return[Math.atan2(a[1],a[0]),Ma(a[2])]}function Yb(a,b){return 1E-6>O(a[0]-b[0])&&1E-6>O(a[1]-
b[1])}function Zc(a,b){a*=N;var d=Math.cos(b*=N);pb(d*Math.cos(a),d*Math.sin(a),Math.sin(b))}function pb(a,b,d){++qb;Ia+=(a-Ia)/qb;Ja+=(b-Ja)/qb;Ba+=(d-Ba)/qb}function ze(){function a(a,l){a*=N;var c=Math.cos(l*=N),r=c*Math.cos(a),c=c*Math.sin(a),w=Math.sin(l),s=Math.atan2(Math.sqrt((s=d*w-k*c)*s+(s=k*r-b*w)*s+(s=b*c-d*r)*s),b*r+d*c+k*w);fb+=s;ra+=s*(b+(b=r));sa+=s*(d+(d=c));ma+=s*(k+(k=w));pb(b,d,k)}var b,d,k;wa.point=function(f,l){f*=N;var c=Math.cos(l*=N);b=c*Math.cos(f);d=c*Math.sin(f);k=Math.sin(l);
wa.point=a;pb(b,d,k)}}function Ae(){wa.point=Zc}function Xg(){function a(a,b){a*=N;var d=Math.cos(b*=N),c=d*Math.cos(a),d=d*Math.sin(a),K=Math.sin(b),V=f*K-l*d,e=l*c-k*K,g=k*d-f*c,h=Math.sqrt(V*V+e*e+g*g),n=k*c+f*d+l*K,B=h&&-be(n)/h,h=Math.atan2(h,n);Na+=B*V;Oa+=B*e;Ca+=B*g;fb+=h;ra+=h*(k+(k=c));sa+=h*(f+(f=d));ma+=h*(l+(l=K));pb(k,f,l)}var b,d,k,f,l;wa.point=function(c,r){b=c;d=r;wa.point=a;c*=N;var w=Math.cos(r*=N);k=w*Math.cos(c);f=w*Math.sin(c);l=Math.sin(r);pb(k,f,l)};wa.lineEnd=function(){a(b,
d);wa.lineEnd=Ae;wa.point=Zc}}function Be(a,b){function d(d,f){return d=a(d,f),b(d[0],d[1])}a.invert&&b.invert&&(d.invert=function(d,f){return d=b.invert(d,f),d&&a.invert(d[0],d[1])});return d}function rb(){return!0}function Ce(a,b,d,k,f){var l=[],c=[];a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,d=a[0],k=a[b];if(Yb(d,k)){f.lineStart();for(k=0;k<b;++k)f.point((d=a[k])[0],d[1]);f.lineEnd()}else b=new Zb(d,a,null,!0),d=new Zb(d,null,b,!1),b.o=d,l.push(b),c.push(d),b=new Zb(k,a,null,!1),d=new Zb(k,
null,b,!0),b.o=d,l.push(b),c.push(d)}});c.sort(b);De(l);De(c);if(l.length){a=0;b=d;for(d=c.length;a<d;++a)c[a].e=b=!b;b=l[0];for(var r,w;;){for(var s=b,K=!0;s.v;)if((s=s.n)===b)return;r=s.z;f.lineStart();do{s.v=s.o.v=!0;if(s.e){if(K)for(a=0,d=r.length;a<d;++a)f.point((w=r[a])[0],w[1]);else k(s.x,s.n.x,1,f);s=s.n}else{if(K)for(r=s.p.z,a=r.length-1;0<=a;--a)f.point((w=r[a])[0],w[1]);else k(s.x,s.p.x,-1,f);s=s.p}s=s.o;r=s.z;K=!K}while(!s.v);f.lineEnd()}}}function De(a){if(b=a.length){for(var b,d=0,k=
a[0],f;++d<b;)k.n=f=a[d],f.p=k,k=f;k.n=f=a[0];f.p=k}}function Zb(a,b,d,k){this.x=a;this.z=b;this.o=d;this.e=k;this.v=!1;this.n=this.p=null}function Ee(a,b,d,k){return function(f,l){function c(b,d){var k=f(b,d);a(b=k[0],d=k[1])&&l.point(b,d)}function r(a,b){var d=f(a,b);g.point(d[0],d[1])}function w(){F.point=r;g.lineStart()}function s(){F.point=c;g.lineEnd()}function K(a,b){t.push([a,b]);var d=f(a,b);m.point(d[0],d[1])}function V(){m.lineStart();t=[]}function e(){K(t[0][0],t[0][1]);m.lineEnd();var a=
m.clean(),b=z.buffer(),d=b.length;t.pop();q.push(t);t=null;if(d)if(a&1){var a=b[0],d=a.length-1,b=-1,k;if(0<d){p||(l.polygonStart(),p=!0);for(l.lineStart();++b<d;)l.point((k=a[b])[0],k[1]);l.lineEnd()}}else 1<d&&a&2&&b.push(b.pop().concat(b.shift())),B.push(b.filter(Yg))}var g=b(l),h=f.invert(k[0],k[1]),F={point:c,lineStart:w,lineEnd:s,polygonStart:function(){F.point=K;F.lineStart=V;F.lineEnd=e;B=[];q=[]},polygonEnd:function(){F.point=c;F.lineStart=w;F.lineEnd=s;B=n.merge(B);var a,b=h;a=q;var k=b[0],
f=b[1],r=[Math.sin(k),-Math.cos(k),0],K=0,e=0;Wa.reset();for(var V=0,g=a.length;V<g;++V){var qa=a[V],$d=qa.length;if($d)for(var z=qa[0],m=z[0],b=z[1]/2+H/4,t=Math.sin(b),re=Math.cos(b),u=1;;){u===$d&&(u=0);var b=qa[u],Z=b[0],v=b[1]/2+H/4,x=Math.sin(v),v=Math.cos(v),y=Z-m,A=0<=y?1:-1,C=A*y,J=C>H,t=t*x;Wa.add(Math.atan2(t*A*Math.sin(C),re*v+t*Math.cos(C)));K+=J?y+A*pa:y;J^m>=k^Z>=k&&(z=eb(Xa(z),Xa(b)),Wb(z),m=eb(r,z),Wb(m),m=(J^0<=y?-1:1)*Ma(m[2]),f>m||f===m&&(z[0]||z[1]))&&(e+=J^0<=y?1:-1);if(!u++)break;
m=Z;t=x;re=v;z=b}}a=(-1E-6>K||1E-6>K&&-1E-6>Wa)^e&1;B.length?(p||(l.polygonStart(),p=!0),Ce(B,Zg,a,d,l)):a&&(p||(l.polygonStart(),p=!0),l.lineStart(),d(null,null,1,l),l.lineEnd());p&&(l.polygonEnd(),p=!1);B=q=null},sphere:function(){l.polygonStart();l.lineStart();d(null,null,1,l);l.lineEnd();l.polygonEnd()}},B,z=Fe(),m=b(z),p=!1,q,t;return F}}function Yg(a){return 1<a.length}function Fe(){var a=[],b;return{lineStart:function(){a.push(b=[])},point:function(a,k){b.push([a,k])},lineEnd:L,buffer:function(){var d=
a;a=[];b=null;return d},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function Zg(a,b){return(0>(a=a.x)[0]?a[1]-aa-1E-6:aa-a[1])-(0>(b=b.x)[0]?b[1]-aa-1E-6:aa-b[1])}function $g(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function d(a,b,d){var k=Xa(a),l=Xa(b),c=[1,0,0],l=eb(k,l),r=Ub(l,l),k=l[0],I=r-k*k;if(!I)return!d&&a;r=f*r/I;I=-f*k/I;k=eb(c,l);c=Vb(c,r);l=Vb(l,I);Yc(c,l);l=Ub(c,k);r=Ub(k,k);I=l*l-r*(Ub(c,c)-1);if(!(0>I)){var e=Math.sqrt(I),I=Vb(k,(-l-e)/r);Yc(I,c);I=
Xb(I);if(!d)return I;d=a[0];var g=b[0];a=a[1];b=b[1];var h;g<d&&(h=d,d=g,g=h);var n=g-d,m=1E-6>O(n-H);!m&&b<a&&(h=a,a=b,b=h);if(m||1E-6>n?m?0<a+b^I[1]<(1E-6>O(I[0]-d)?a:b):a<=I[1]&&I[1]<=b:n>H^(d<=I[0]&&I[0]<=g))return b=Vb(k,(-l+e)/r),Yc(b,c),[I,Xb(b)]}}function k(b,d){var k=l?a:H-a,f=0;b<-k?f|=1:b>k&&(f|=2);d<-k?f|=4:d>k&&(f|=8);return f}var f=Math.cos(a),l=0<f,c=1E-6<O(f),r=$c(a,6*N);return Ee(b,function(a){var f,r,e,g,h;return{lineStart:function(){g=e=!1;h=1},point:function(n,F){var B=[n,F],z,
m=b(n,F),p=l?m?0:k(n,F):m?k(n+(0>n?H:-H),F):0;!f&&(g=e=m)&&a.lineStart();m!==e&&(z=d(f,B),Yb(f,z)||Yb(B,z))&&(B[0]+=1E-6,B[1]+=1E-6,m=b(B[0],B[1]));if(m!==e)h=0,m?(a.lineStart(),z=d(B,f),a.point(z[0],z[1])):(z=d(f,B),a.point(z[0],z[1]),a.lineEnd()),f=z;else if(c&&f&&l^m){var q;p&r||!(q=d(B,f,!0))||(h=0,l?(a.lineStart(),a.point(q[0][0],q[0][1]),a.point(q[1][0],q[1][1]),a.lineEnd()):(a.point(q[1][0],q[1][1]),a.lineEnd(),a.lineStart(),a.point(q[0][0],q[0][1])))}!m||f&&Yb(f,B)||a.point(B[0],B[1]);f=B;
e=m;r=p},lineEnd:function(){e&&a.lineEnd();f=null},clean:function(){return h|(g&&e)<<1}}},r,l?[0,-a]:[-H,a-H])}function Ge(a,b,d,k){return function(f){var l=f.a,c=f.b,r=l.x,l=l.y,w=0,s=1,K=c.x-r,c=c.y-l,e;e=a-r;if(K||!(0<e)){e/=K;if(0>K){if(e<w)return;e<s&&(s=e)}else if(0<K){if(e>s)return;e>w&&(w=e)}e=d-r;if(K||!(0>e)){e/=K;if(0>K){if(e>s)return;e>w&&(w=e)}else if(0<K){if(e<w)return;e<s&&(s=e)}e=b-l;if(c||!(0<e)){e/=c;if(0>c){if(e<w)return;e<s&&(s=e)}else if(0<c){if(e>s)return;e>w&&(w=e)}e=k-l;if(c||
!(0>e)){e/=c;if(0>c){if(e>s)return;e>w&&(w=e)}else if(0<c){if(e<w)return;e<s&&(s=e)}0<w&&(f.a={x:r+w*K,y:l+w*c});1>s&&(f.b={x:r+s*K,y:l+s*c});return f}}}}}}function He(a,b,d,k){function f(k,f){return 1E-6>O(k[0]-a)?0<f?0:3:1E-6>O(k[0]-d)?0<f?2:1:1E-6>O(k[1]-b)?0<f?1:0:0<f?3:2}function l(a,b){return c(a.x,b.x)}function c(a,b){var d=f(a,1),k=f(b,1);return d!==k?d-k:0===d?b[1]-a[1]:1===d?a[0]-b[0]:2===d?a[1]-b[1]:b[0]-a[0]}return function(r){function w(l,r,w,s){var e=0,K=0;if(null==l||(e=f(l,w))!==(K=
f(r,w))||0>c(l,r)^0<w){do s.point(0===e||3===e?a:d,1<e?k:b);while((e=(e+w+4)%4)!==K)}else s.point(r[0],r[1])}function s(f,l){a<=f&&f<=d&&b<=l&&l<=k&&r.point(f,l)}function e(f,l){f=Math.max(-1E9,Math.min(1E9,f));l=Math.max(-1E9,Math.min(1E9,l));var c=a<=f&&f<=d&&b<=l&&l<=k;F&&B.push([f,l]);if(Vc)q=f,t=l,ha=c,Vc=!1,c&&(r.lineStart(),r.point(f,l));else if(c&&Q)r.point(f,l);else{var w={a:{x:u,y:ea},b:{x:f,y:l}};m(w)?(Q||(r.lineStart(),r.point(w.a.x,w.a.y)),r.point(w.b.x,w.b.y),c||r.lineEnd(),v=!1):c&&
(r.lineStart(),r.point(f,l),v=!1)}u=f;ea=l;Q=c}var g=r,h=Fe(),m=Ge(a,b,d,k),p,F,B,z={point:s,lineStart:function(){z.point=e;F&&F.push(B=[]);Vc=!0;Q=!1;u=ea=NaN},lineEnd:function(){p&&(e(q,t),ha&&Q&&h.rejoin(),p.push(h.buffer()));z.point=s;Q&&r.lineEnd()},polygonStart:function(){r=h;p=[];F=[];v=!0},polygonEnd:function(){r=g;p=n.merge(p);var b;b=[a,k];for(var d=0,f=F.length,c=b[1],I=0;I<f;++I)for(var s=1,e=F[I],K=e.length,h=e[0],qa;s<K;++s)qa=e[s],h[1]<=c?qa[1]>c&&0<Kc(h,qa,b)&&++d:qa[1]<=c&&0>Kc(h,
qa,b)&&--d,h=qa;b=0!==d;d=v&&b;f=p.length;if(d||f)r.polygonStart(),d&&(r.lineStart(),w(null,null,1,r),r.lineEnd()),f&&Ce(p,l,b,w,r),r.polygonEnd();p=F=B=null}},q,t,ha,u,ea,Q,Vc,v;return z}}function ad(a){var b=0,d=H/3,k=bd(a);a=k(b,d);a.parallels=function(a){return arguments.length?k(b=a[0]*H/180,d=a[1]*H/180):[b/H*180,d/H*180]};return a}function Ie(a,b){function d(a,b){var d=Math.sqrt(l-2*f*Math.sin(b))/f;return[d*Math.sin(a*=f),c-d*Math.cos(a)]}var k=Math.sin(a),f=(k+Math.sin(b))/2,l=1+k*(2*f-k),
c=Math.sqrt(l)/f;d.invert=function(a,b){var d=c-b;return[Math.atan2(a,d)/f,Ma((l-(a*a+d*d)*f*f)/(2*f))]};return d}function ah(){function a(a,b){$b+=f*a-k*b;k=a;f=b}var b,d,k,f;Pa.point=function(l,c){Pa.point=a;b=k=l;d=f=c};Pa.lineEnd=function(){a(b,d)}}function bh(){function a(a,b){c.push("M",a,",",b,l)}function b(a,b){c.push("M",a,",",b);r.point=d}function d(a,b){c.push("L",a,",",b)}function k(){r.point=a}function f(){c.push("Z")}var l=Je(4.5),c=[],r={point:a,lineStart:function(){r.point=b},lineEnd:k,
polygonStart:function(){r.lineEnd=f},polygonEnd:function(){r.lineEnd=k;r.point=a},pointRadius:function(a){l=Je(a);return r},result:function(){if(c.length){var a=c.join("");c=[];return a}}};return r}function Je(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Ya(a,b){Ia+=a;Ja+=b;++Ba}function Ke(){function a(a,f){var l=a-b,c=f-d,l=Math.sqrt(l*l+c*c);ra+=l*(b+a)/2;sa+=l*(d+f)/2;ma+=l;Ya(b=a,d=f)}var b,d;xa.point=function(k,f){xa.point=a;Ya(b=k,d=f)}}function Le(){xa.point=
Ya}function ch(){function a(a,b){var d=a-k,c=b-f,d=Math.sqrt(d*d+c*c);ra+=d*(k+a)/2;sa+=d*(f+b)/2;ma+=d;d=f*a-k*b;Na+=d*(k+a);Oa+=d*(f+b);Ca+=3*d;Ya(k=a,f=b)}var b,d,k,f;xa.point=function(l,c){xa.point=a;Ya(b=k=l,d=f=c)};xa.lineEnd=function(){a(b,d)}}function dh(a){function b(b,d){a.moveTo(b+c,d);a.arc(b,d,c,0,pa)}function d(b,d){a.moveTo(b,d);r.point=k}function k(b,d){a.lineTo(b,d)}function f(){r.point=b}function l(){a.closePath()}var c=4.5,r={point:b,lineStart:function(){r.point=d},lineEnd:f,polygonStart:function(){r.lineEnd=
l},polygonEnd:function(){r.lineEnd=f;r.point=b},pointRadius:function(a){c=a;return r},result:L};return r}function Me(a){function b(a){return(r?k:d)(a)}function d(b){return Ne(b,function(d,k){d=a(d,k);b.point(d[0],d[1])})}function k(b){function d(k,f){k=a(k,f);b.point(k[0],k[1])}function k(){Q=NaN;na.point=l;b.lineStart()}function l(d,k){var c=Xa([d,k]),I=a(d,k);f(Q,v,u,x,y,fa,Q=I[0],v=I[1],u=d,x=c[0],y=c[1],fa=c[2],r,b);b.point(Q,v)}function c(){na.point=d;b.lineEnd()}function I(){k();na.point=e;
na.lineEnd=g}function e(a,b){l(h=a,b);n=Q;m=v;p=x;q=y;t=fa;na.point=l}function g(){f(Q,v,u,x,y,fa,n,m,h,p,q,t,r,b);na.lineEnd=c;c()}var h,n,m,p,q,t,u,Q,v,x,y,fa,na={point:d,lineStart:k,lineEnd:c,polygonStart:function(){b.polygonStart();na.lineStart=I},polygonEnd:function(){b.polygonEnd();na.lineStart=k}};return na}function f(b,d,k,r,e,g,h,n,m,z,p,q,t,u){var ea=h-b,Q=n-d,v=ea*ea+Q*Q;if(v>4*l&&t--){var x=r+z,y=e+p,fa=g+q,na=Math.sqrt(x*x+y*y+fa*fa),A=Math.asin(fa/=na),J=1E-6>O(O(fa)-1)||1E-6>O(k-m)?
(k+m)/2:Math.atan2(y,x),C=a(J,A),A=C[0],C=C[1],G=A-b,M=C-d,E=Q*G-ea*M;if(E*E/v>l||.3<O((ea*G+Q*M)/v-.5)||r*z+e*p+g*q<c)f(b,d,k,r,e,g,A,C,J,x/=na,y/=na,fa,t,u),u.point(A,C),f(A,C,J,x,y,fa,h,n,m,z,p,q,t,u)}}var l=.5,c=Math.cos(30*N),r=16;b.precision=function(a){if(!arguments.length)return Math.sqrt(l);r=0<(l=a*a)&&16;return b};return b}function eh(a){var b=Me(function(b,k){return a([b*X,k*X])});return function(a){return Oe(b(a))}}function Pe(a){this.stream=a}function Ne(a,b){return{point:b,sphere:function(){a.sphere()},
lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Qa(a){return bd(function(){return a})()}function bd(a){function b(a){a=r(a[0]*N,a[1]*N);return[a[0]*s+z,q-a[1]*s]}function d(a){return(a=r.invert((a[0]-z)/s,(q-a[1])/s))&&[a[0]*X,a[1]*X]}function k(){r=Be(c=cd(p,F,B),l);var a=l(h,m);z=e-a[0]*s;q=g+a[1]*s;return f()}function f(){Q&&(Q.valid=!1,Q=null);return b}var l,c,r,w=Me(function(a,b){a=l(a,
b);return[a[0]*s+z,q-a[1]*s]}),s=150,e=480,g=250,h=0,m=0,p=0,F=0,B=0,z,q,t=Qe,u=P,v=null,ea=null,Q;b.stream=function(a){Q&&(Q.valid=!1);Q=Oe(t(c,w(u(a))));Q.valid=!0;return Q};b.clipAngle=function(a){if(!arguments.length)return v;t=null==a?(v=a,Qe):$g((v=+a)*N);return f()};b.clipExtent=function(a){if(!arguments.length)return ea;u=(ea=a)?He(a[0][0],a[0][1],a[1][0],a[1][1]):P;return f()};b.scale=function(a){if(!arguments.length)return s;s=+a;return k()};b.translate=function(a){if(!arguments.length)return[e,
g];e=+a[0];g=+a[1];return k()};b.center=function(a){if(!arguments.length)return[h*X,m*X];h=a[0]%360*N;m=a[1]%360*N;return k()};b.rotate=function(a){if(!arguments.length)return[p*X,F*X,B*X];p=a[0]%360*N;F=a[1]%360*N;B=2<a.length?a[2]%360*N:0;return k()};n.rebind(b,w,"precision");return function(){l=a.apply(this,arguments);b.invert=l.invert&&d;return k()}}function Oe(a){return Ne(a,function(b,d){a.point(b*N,d*N)})}function sb(a,b){return[a,b]}function Re(a,b){return[a>H?a-pa:a<-H?a+pa:a,b]}function cd(a,
b,d){return a?b||d?Be(Se(a),Te(b,d)):Se(a):b||d?Te(b,d):Re}function Ue(a){return function(b,d){return b+=a,[b>H?b-pa:b<-H?b+pa:b,d]}}function Se(a){var b=Ue(a);b.invert=Ue(-a);return b}function Te(a,b){function d(a,b){var d=Math.cos(b),e=Math.cos(a)*d,d=Math.sin(a)*d,g=Math.sin(b),h=g*k+e*f;return[Math.atan2(d*l-h*c,e*k-g*f),Ma(h*l+d*c)]}var k=Math.cos(a),f=Math.sin(a),l=Math.cos(b),c=Math.sin(b);d.invert=function(a,b){var d=Math.cos(b),e=Math.cos(a)*d,d=Math.sin(a)*d,g=Math.sin(b),h=g*l-d*c;return[Math.atan2(d*
l+g*c,e*k+h*f),Ma(h*k-e*f)]};return d}function $c(a,b){var d=Math.cos(a),k=Math.sin(a);return function(f,l,c,r){var w=c*b;if(null!=f){if(f=Ve(d,f),l=Ve(d,l),0<c?f<l:f>l)f+=c*pa}else f=a+c*pa,l=a-.5*w;for(var s;0<c?f>l:f<l;f-=w)r.point((s=Xb([d,-k*Math.cos(f),-k*Math.sin(f)]))[0],s[1])}}function Ve(a,b){var d=Xa(b);d[0]-=a;Wb(d);var k=be(-d[1]);return((0>-d[2]?-k:k)+2*Math.PI-1E-6)%(2*Math.PI)}function We(a,b,d){var k=n.range(a,b-1E-6,d).concat(b);return function(a){return k.map(function(b){return[a,
b]})}}function Xe(a,b,d){var k=n.range(a,b-1E-6,d).concat(b);return function(a){return k.map(function(b){return[b,a]})}}function dd(a){return a.source}function ed(a){return a.target}function fh(a,b,d,k){var f=Math.cos(b),l=Math.sin(b),c=Math.cos(k),r=Math.sin(k),w=f*Math.cos(a),s=f*Math.sin(a),e=c*Math.cos(d),g=c*Math.sin(d),h=2*Math.asin(Math.sqrt(de(k-b)+f*c*de(d-a))),n=1/Math.sin(h);d=h?function(a){var b=Math.sin(a*=h)*n,d=Math.sin(h-a)*n;a=d*w+b*e;var k=d*s+b*g,b=d*l+b*r;return[Math.atan2(k,a)*
X,Math.atan2(b,Math.sqrt(a*a+k*k))*X]}:function(){return[a*X,b*X]};d.distance=h;return d}function tb(a,b){function d(b,d){var l=Math.cos(b),c=Math.cos(d),l=a(l*c);return[l*c*Math.sin(b),l*Math.sin(d)]}d.invert=function(a,d){var l=Math.sqrt(a*a+d*d),c=b(l),r=Math.sin(c),c=Math.cos(c);return[Math.atan2(a*r,l*c),Math.asin(l&&d*r/l)]};return d}function Ye(a,b){function d(a,b){0<l?b<-aa+1E-6&&(b=-aa+1E-6):b>aa-1E-6&&(b=aa-1E-6);var d=l/Math.pow(Math.tan(H/4+b/2),f);return[d*Math.sin(f*a),l-d*Math.cos(f*
a)]}var k=Math.cos(a),f=a===b?Math.sin(a):Math.log(k/Math.cos(b))/Math.log(Math.tan(H/4+b/2)/Math.tan(H/4+a/2)),l=k*Math.pow(Math.tan(H/4+a/2),f)/f;if(!f)return ac;d.invert=function(a,b){var d=l-b,k=(0<f?1:0>f?-1:0)*Math.sqrt(a*a+d*d);return[Math.atan2(a,d)/f,2*Math.atan(Math.pow(l/k,1/f))-aa]};return d}function Ze(a,b){function d(a,b){var d=l-b;return[d*Math.sin(f*a),l-d*Math.cos(f*a)]}var k=Math.cos(a),f=a===b?Math.sin(a):(k-Math.cos(b))/(b-a),l=k/f+a;if(1E-6>O(f))return sb;d.invert=function(a,
b){var d=l-b;return[Math.atan2(a,d)/f,l-(0<f?1:0>f?-1:0)*Math.sqrt(a*a+d*d)]};return d}function ac(a,b){return[a,Math.log(Math.tan(H/4+b/2))]}function $e(a){var b=Qa(a),d=b.scale,k=b.translate,f=b.clipExtent,l;b.scale=function(){var a=d.apply(b,arguments);return a===b?l?b.clipExtent(null):b:a};b.translate=function(){var a=k.apply(b,arguments);return a===b?l?b.clipExtent(null):b:a};b.clipExtent=function(a){var c=f.apply(b,arguments);if(c===b){if(l=null==a){var w=H*d(),s=k();f([[s[0]-w,s[1]-w],[s[0]+
w,s[1]+w]])}}else l&&(c=null);return c};return b.clipExtent(null)}function fd(a,b){return[Math.log(Math.tan(H/4+b/2)),-a]}function gb(a){return a[0]}function ub(a){return a[1]}function af(a){for(var b=a.length,d=[0,1],k=2,f=2;f<b;f++){for(;1<k&&0>=Kc(a[d[k-2]],a[d[k-1]],a[f]);)--k;d[k++]=f}return d.slice(0,k)}function gh(a,b){return a[0]-b[0]||a[1]-b[1]}function gd(a,b,d){return(d[0]-b[0])*(a[1]-b[1])<(d[1]-b[1])*(a[0]-b[0])}function hd(a,b,d,k){var f=a[0],l=d[0],c=b[0]-f,r=k[0]-l;a=a[1];d=d[1];b=
b[1]-a;k=k[1]-d;l=(r*(a-d)-k*(f-l))/(k*c-r*b);return[f+l*c,a+l*b]}function bf(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function hh(){bc(this);this.edge=this.site=this.circle=null}function cf(a){var b=df.pop()||new hh;b.site=a;return b}function id(a){hb(a);ib.remove(a);df.push(a);bc(a)}function ef(a,b){var d=a.site,k=d.x,f=d.y,l=f-b;if(!l)return k;var c=a.P;if(!c)return-Infinity;var d=c.site,c=d.x,d=d.y,r=d-b;if(!r)return c;var w=c-k,s=1/l-1/r,e=w/r;return s?(-e+Math.sqrt(e*e-2*
s*(w*w/(-2*r)-d+r/2+f-l/2)))/s+k:(k+c)/2}function ff(a){this.site=a;this.edges=[]}function gf(a,b){return b.angle-a.angle}function ih(){bc(this);this.x=this.y=this.arc=this.site=this.cy=null}function jb(a){var b=a.P,d=a.N;if(b&&d){var k=b.site,b=a.site,f=d.site;if(k!==f){var d=b.x,l=b.y,c=k.x-d,r=k.y-l,k=f.x-d,f=f.y-l,w=2*(c*f-r*k);if(!(-1E-12<=w)){var s=c*c+r*r,e=k*k+f*f,r=(f*s-r*e)/w,c=(c*e-k*s)/w,f=c+l,l=hf.pop()||new ih;l.arc=a;l.site=b;l.x=r+d;l.y=f+Math.sqrt(r*r+c*c);l.cy=f;a.circle=l;a=null;
for(b=vb._;b;)if(l.y<b.y||l.y===b.y&&l.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}vb.insert(a,l);a||(jd=l)}}}}function hb(a){var b=a.circle;b&&(b.P||(jd=b.N),vb.remove(b),hf.push(b),bc(b),a.circle=null)}function jh(a,b){var d=a.b;if(d)return!0;var k=a.a,d=b[0][0],f=b[1][0],l=b[0][1],c=b[1][1],r=a.l,w=a.r,s=r.x,r=r.y,e=w.x,w=w.y,g=(s+e)/2,h;if(w===r){if(g<d||g>=f)return;if(s>e){if(!k)k={x:g,y:l};else if(k.y>=c)return;d={x:g,y:c}}else{if(!k)k={x:g,y:c};else if(k.y<l)return;
d={x:g,y:l}}}else if(h=(s-e)/(w-r),g=(r+w)/2-h*g,-1>h||1<h)if(s>e){if(!k)k={x:(l-g)/h,y:l};else if(k.y>=c)return;d={x:(c-g)/h,y:c}}else{if(!k)k={x:(c-g)/h,y:c};else if(k.y<l)return;d={x:(l-g)/h,y:l}}else if(r<w){if(!k)k={x:d,y:h*d+g};else if(k.x>=f)return;d={x:f,y:h*f+g}}else{if(!k)k={x:f,y:h*f+g};else if(k.x<d)return;d={x:d,y:h*d+g}}a.a=k;a.b=d;return!0}function jf(a,b){this.l=a;this.r=b;this.a=this.b=null}function wb(a,b,d,k){var f=new jf(a,b);kb.push(f);d&&cc(f,a,b,d);k&&cc(f,b,a,k);Za[a.i].edges.push(new dc(f,
a,b));Za[b.i].edges.push(new dc(f,b,a));return f}function kh(a,b,d){a=new jf(a,null);a.a=b;a.b=d;kb.push(a);return a}function cc(a,b,d,k){a.a||a.b?a.l===d?a.b=k:a.a=k:(a.a=k,a.l=b,a.r=d)}function dc(a,b,d){var k=a.a,f=a.b;this.edge=a;this.site=b;this.angle=d?Math.atan2(d.y-b.y,d.x-b.x):a.l===b?Math.atan2(f.x-k.x,k.y-f.y):Math.atan2(k.x-f.x,f.y-k.y)}function kd(){this._=null}function bc(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function xb(a,b){var d=b.R,k=b.U;k?k.L===b?k.L=d:k.R=d:a._=d;d.U=k;b.U=d;b.R=d.L;
b.R&&(b.R.U=b);d.L=b}function yb(a,b){var d=b.L,k=b.U;k?k.L===b?k.L=d:k.R=d:a._=d;d.U=k;b.U=d;b.L=d.R;b.L&&(b.L.U=b);d.R=b}function kf(a){for(;a.L;)a=a.L;return a}function ld(a,b){var d=a.sort(lh).pop(),k,f,l;kb=[];Za=Array(a.length);ib=new kd;for(vb=new kd;;)if(l=jd,d&&(!l||d.y<l.y||d.y===l.y&&d.x<l.x)){if(d.x!==k||d.y!==f){Za[d.i]=new ff(d);k=d;for(var c=k.x,r=k.y,w=l=f=void 0,s=void 0,e=ib._;e;)if(w=ef(e,r)-c,1E-6<w)e=e.L;else{var g=e,s=r,h=g.N;h?s=ef(h,s):(g=g.site,s=g.y===s?g.x:Infinity);s=c-
s;if(1E-6<s){if(!e.R){f=e;break}e=e.R}else{-1E-6<w?(f=e.P,l=e):-1E-6<s?(f=e,l=e.N):f=l=e;break}}c=cf(k);ib.insert(f,c);if(f||l)if(f===l)hb(f),l=cf(f.site),ib.insert(c,l),c.edge=l.edge=wb(f.site,c.site),jb(f),jb(l);else if(l){hb(f);hb(l);var r=f.site,e=r.x,s=r.y,g=k.x-e,h=k.y-s,w=l.site,n=w.x-e,m=w.y-s,F=2*(g*m-h*n),B=g*g+h*h,z=n*n+m*m,e={x:(m*B-h*z)/F+e,y:(g*z-n*B)/F+s};cc(l.edge,r,w,e);c.edge=wb(r,k,null,e);l.edge=wb(k,w,null,e);jb(f);jb(l)}else c.edge=wb(f.site,c.site);k=d.x;f=d.y}d=a.pop()}else if(l){w=
l.arc;l=w.circle;r=l.x;e=l.cy;l={x:r,y:e};g=w.P;s=w.N;c=[w];id(w);for(w=g;w.circle&&1E-6>O(r-w.circle.x)&&1E-6>O(e-w.circle.cy);)g=w.P,c.unshift(w),id(w),w=g;c.unshift(w);hb(w);for(g=s;g.circle&&1E-6>O(r-g.circle.x)&&1E-6>O(e-g.circle.cy);)s=g.N,c.push(g),id(g),g=s;c.push(g);hb(g);r=c.length;e=void 0;for(e=1;e<r;++e)g=c[e],w=c[e-1],cc(g.edge,w.site,g.site,l);w=c[0];g=c[r-1];g.edge=wb(w.site,g.site,null,l);jb(w);jb(g)}else break;if(b){d=kb;k=Ge(b[0][0],b[0][1],b[1][0],b[1][1]);for(f=d.length;f--;)if(l=
d[f],!jh(l,b)||!k(l)||1E-6>O(l.a.x-l.b.x)&&1E-6>O(l.a.y-l.b.y))l.a=l.b=null,d.splice(f,1);d=b[0][0];k=b[1][0];f=b[0][1];l=b[1][1];e=Za;for(s=e.length;s--;)if((g=e[s])&&g.prepare())for(n=g.edges,m=n.length,h=0;h<m;)if(F=n[h].end(),r=F.x,w=F.y,B=n[++h%m].start(),c=B.x,B=B.y,1E-6<O(r-c)||1E-6<O(w-B))n.splice(h,0,new dc(kh(g.site,F,1E-6>O(r-d)&&1E-6<l-w?{x:d,y:1E-6>O(c-d)?B:l}:1E-6>O(w-l)&&1E-6<k-r?{x:1E-6>O(B-l)?c:k,y:l}:1E-6>O(r-k)&&1E-6<w-f?{x:k,y:1E-6>O(c-k)?B:f}:1E-6>O(w-f)&&1E-6<r-d?{x:1E-6>O(B-
f)?c:d,y:f}:null),g.site,null)),++m}d={cells:Za,edges:kb};ib=vb=kb=Za=null;return d}function lh(a,b){return b.y-a.y||b.x-a.x}function mh(a){return a.x}function nh(a){return a.y}function lf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function zb(a,b,d,k,f,l){if(!a(b,d,k,f,l)){var c=.5*(d+f),r=.5*(k+l);b=b.nodes;b[0]&&zb(a,b[0],d,k,c,r);b[1]&&zb(a,b[1],c,k,f,r);b[2]&&zb(a,b[2],d,r,c,l);b[3]&&zb(a,b[3],c,r,f,l)}}function oh(a,b,d,k,f,c,e){var r=Infinity,w;(function K(a,g,h,n,m){if(!(g>c||h>e||
n<k||m<f)){if(B=a.point){var B,z=b-a.x,p=d-a.y,z=z*z+p*p;z<r&&(z=Math.sqrt(r=z),k=b-z,f=d-z,c=b+z,e=d+z,w=B)}B=a.nodes;for(var z=.5*(g+n),p=.5*(h+m),q=(d>=p)<<1|b>=z,t=q+4;q<t;++q)if(a=B[q&3])switch(q&3){case 0:K(a,g,h,z,p);break;case 1:K(a,z,h,n,p);break;case 2:K(a,g,p,z,m);break;case 3:K(a,z,p,n,m)}}})(a,k,f,c,e);return w}function md(a,b){a=n.rgb(a);b=n.rgb(b);var d=a.r,k=a.g,f=a.b,c=b.r-d,e=b.g-k,r=b.b-f;return function(a){return"#"+db(Math.round(d+c*a))+db(Math.round(k+e*a))+db(Math.round(f+r*
a))}}function mf(a,b){var d={},k={},f;for(f in a)f in b?d[f]=$a(a[f],b[f]):k[f]=a[f];for(f in b)f in a||(k[f]=b[f]);return function(a){for(f in d)k[f]=d[f](a);return k}}function Ka(a,b){a=+a;b=+b;return function(d){return a*(1-d)+b*d}}function nf(a,b){var d=nd.lastIndex=od.lastIndex=0,k,f,c,e=-1,r=[],w=[];a+="";for(b+="";(k=nd.exec(a))&&(f=od.exec(b));)(c=f.index)>d&&(c=b.slice(d,c),r[e]?r[e]+=c:r[++e]=c),(k=k[0])===(f=f[0])?r[e]?r[e]+=f:r[++e]=f:(r[++e]=null,w.push({i:e,x:Ka(k,f)})),d=od.lastIndex;
d<b.length&&(c=b.slice(d),r[e]?r[e]+=c:r[++e]=c);return 2>r.length?w[0]?(b=w[0].x,function(a){return b(a)+""}):function(){return b}:(b=w.length,function(a){for(var d=0,k;d<b;++d)r[(k=w[d]).i]=k.x(a);return r.join("")})}function $a(a,b){for(var d=n.interpolators.length,k;0<=--d&&!(k=n.interpolators[d](a,b)););return k}function ec(a,b){var d=[],k=[],f=a.length,c=b.length,e=Math.min(a.length,b.length),r;for(r=0;r<e;++r)d.push($a(a[r],b[r]));for(;r<f;++r)k[r]=a[r];for(;r<c;++r)k[r]=b[r];return function(a){for(r=
0;r<e;++r)k[r]=d[r](a);return k}}function ph(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function of(a){return function(b){return 1-a(1-b)}}function pf(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function qh(a){return a*a}function rh(a){return a*a*a}function sh(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,d=b*a;return 4*(.5>a?d:3*(a-b)+d-.75)}function th(a){return 1-Math.cos(a*aa)}function uh(a){return Math.pow(2,10*(a-1))}function vh(a){return 1-Math.sqrt(1-a*a)}function wh(a){return a<
1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function qf(a,b){b-=a;return function(d){return Math.round(a+b*d)}}function rf(a){var b=[a.a,a.b],d=[a.c,a.d],k=sf(b),f=b[0]*d[0]+b[1]*d[1],c=-f;d[0]+=c*b[0];d[1]+=c*b[1];c=sf(d)||0;b[0]*d[1]<d[0]*b[1]&&(b[0]*=-1,b[1]*=-1,k*=-1,f*=-1);this.rotate=(k?Math.atan2(b[1],b[0]):Math.atan2(-d[0],d[1]))*X;this.translate=[a.e,a.f];this.scale=[k,c];this.skew=c?Math.atan2(f,c)*X:0}function sf(a){var b=
Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=b);return b}function lb(a){return a.length?a.pop()+",":""}function xh(a,b,d,k){a[0]!==b[0]||a[1]!==b[1]?(d=d.push("translate(",null,",",null,")"),k.push({i:d-4,x:Ka(a[0],b[0])},{i:d-2,x:Ka(a[1],b[1])})):(b[0]||b[1])&&d.push("translate("+b+")")}function yh(a,b,d,k){a!==b?(180<a-b?b+=360:180<b-a&&(a+=360),k.push({i:d.push(lb(d)+"rotate(",null,")")-2,x:Ka(a,b)})):b&&d.push(lb(d)+"rotate("+b+")")}function zh(a,b,d,k){a!==b?k.push({i:d.push(lb(d)+"skewX(",
null,")")-2,x:Ka(a,b)}):b&&d.push(lb(d)+"skewX("+b+")")}function Ah(a,b,d,k){a[0]!==b[0]||a[1]!==b[1]?(d=d.push(lb(d)+"scale(",null,",",null,")"),k.push({i:d-4,x:Ka(a[0],b[0])},{i:d-2,x:Ka(a[1],b[1])})):1===b[0]&&1===b[1]||d.push(lb(d)+"scale("+b+")")}function tf(a,b){var d=[],k=[];a=n.transform(a);b=n.transform(b);xh(a.translate,b.translate,d,k);yh(a.rotate,b.rotate,d,k);zh(a.skew,b.skew,d,k);Ah(a.scale,b.scale,d,k);a=b=null;return function(a){for(var b=-1,c=k.length,r;++b<c;)d[(r=k[b]).i]=r.x(a);
return d.join("")}}function Bh(a,b){b=(b-=a=+a)||1/b;return function(d){return(d-a)/b}}function Ch(a,b){b=(b-=a=+a)||1/b;return function(d){return Math.max(0,Math.min(1,(d-a)/b))}}function Dh(a){var b=a.source;a=a.target;var d;var k=a;if(b===k)d=b;else{d=uf(b);for(var k=uf(k),f=d.pop(),c=k.pop(),e=null;f===c;)e=f,f=d.pop(),c=k.pop();d=e}for(k=[b];b!==d;)b=b.parent,k.push(b);for(b=k.length;a!==d;)k.splice(b,0,a),a=a.parent;return k}function uf(a){for(var b=[],d=a.parent;null!=d;)b.push(a),a=d,d=d.parent;
b.push(a);return b}function Eh(a){a.fixed|=2}function Fh(a){a.fixed&=-7}function Gh(a){a.fixed|=4;a.px=a.x;a.py=a.y}function Hh(a){a.fixed&=-5}function vf(a,b,d){var k=0,f=0;a.charge=0;if(!a.leaf)for(var c=a.nodes,e=c.length,r=-1,w;++r<e;)w=c[r],null!=w&&(vf(w,b,d),a.charge+=w.charge,k+=w.charge*w.cx,f+=w.charge*w.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),b*=d[a.point.index],a.charge+=a.pointCharge=b,k+=b*a.point.x,f+=b*a.point.y);a.cx=k/a.charge;a.cy=f/a.charge}
function Ab(a,b){n.rebind(a,b,"sort","children","value");a.nodes=a;a.links=Ih;return a}function Bb(a,b){for(var d=[a];null!=(a=d.pop());)if(b(a),(f=a.children)&&(k=f.length))for(var k,f;0<=--k;)d.push(f[k])}function Da(a,b){for(var d=[a],k=[];null!=(a=d.pop());)if(k.push(a),(e=a.children)&&(c=e.length))for(var f=-1,c,e;++f<c;)d.push(e[f]);for(;null!=(a=k.pop());)b(a)}function Jh(a){return a.children}function Kh(a){return a.value}function Lh(a,b){return b.value-a.value}function Ih(a){return n.merge(a.map(function(a){return(a.children||
[]).map(function(d){return{source:a,target:d}})}))}function Mh(a){return a.x}function Nh(a){return a.y}function Oh(a,b,d){a.y0=b;a.y=d}function pd(a){return n.range(a.length)}function qd(a){var b=-1;a=a[0].length;for(var d=[];++b<a;)d[b]=0;return d}function Ph(a){for(var b=1,d=0,k=a[0][1],f,c=a.length;b<c;++b)(f=a[b][1])>k&&(d=b,k=f);return d}function Qh(a){return a.reduce(Rh,0)}function Rh(a,b){return a+b[1]}function Sh(a,b){return wf(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function wf(a,b){for(var d=
-1,k=+a[0],f=(a[1]-k)/b,c=[];++d<=b;)c[d]=f*d+k;return c}function Th(a){return[n.min(a),n.max(a)]}function Uh(a,b){return a.value-b.value}function rd(a,b){var d=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=d;d._pack_prev=b}function xf(a,b){a._pack_next=b;b._pack_prev=a}function yf(a,b){var d=b.x-a.x,k=b.y-a.y,f=a.r+b.r;return.999*f*f>d*d+k*k}function zf(a){function b(a){k=Math.min(a.x-a.r,k);f=Math.max(a.x+a.r,f);c=Math.min(a.y-a.r,c);e=Math.max(a.y+a.r,e)}if((d=a.children)&&(m=d.length)){var d,
k=Infinity,f=-Infinity,c=Infinity,e=-Infinity,r,w,s,g,h,n,m;d.forEach(Vh);r=d[0];r.x=-r.r;r.y=0;b(r);if(1<m&&(w=d[1],w.x=w.r,w.y=0,b(w),2<m))for(s=d[2],Af(r,w,s),b(s),rd(r,s),r._pack_prev=s,rd(s,w),w=r._pack_next,g=3;g<m;g++){Af(r,w,s=d[g]);var p=0,F=1,B=1;for(h=w._pack_next;h!==w;h=h._pack_next,F++)if(yf(h,s)){p=1;break}if(1==p)for(n=r._pack_prev;n!==h._pack_prev&&!yf(n,s);n=n._pack_prev,B++);p?(F<B||F==B&&w.r<r.r?xf(r,w=h):xf(r=n,w),g--):(rd(r,s),w=s,b(s))}r=(k+f)/2;w=(c+e)/2;for(g=h=0;g<m;g++)s=
d[g],s.x-=r,s.y-=w,h=Math.max(h,s.r+Math.sqrt(s.x*s.x+s.y*s.y));a.r=h;d.forEach(Wh)}}function Vh(a){a._pack_next=a._pack_prev=a}function Wh(a){delete a._pack_next;delete a._pack_prev}function Bf(a,b,d,k){var f=a.children;a.x=b+=k*a.x;a.y=d+=k*a.y;a.r*=k;if(f){a=-1;for(var c=f.length;++a<c;)Bf(f[a],b,d,k)}}function Af(a,b,d){var k=a.r+d.r,f=b.x-a.x,c=b.y-a.y;if(k&&(f||c)){var e=b.r+d.r,r=f*f+c*c,e=e*e,k=k*k;b=.5+(k-e)/(2*r);e=Math.sqrt(Math.max(0,2*e*(k+r)-(k-=r)*k-e*e))/(2*r);d.x=a.x+b*f+e*c;d.y=
a.y+b*c-e*f}else d.x=a.x+k,d.y=a.y}function Cf(a,b){return a.parent==b.parent?1:2}function sd(a){var b=a.children;return b.length?b[0]:a.t}function td(a){var b=a.children,d;return(d=b.length)?b[d-1]:a.t}function Xh(a){return 1+n.max(a,function(a){return a.y})}function Yh(a){return a.reduce(function(a,d){return a+d.x},0)/a.length}function Df(a){var b=a.children;return b&&b.length?Df(b[0]):a}function Ef(a){var b=a.children,d;return b&&(d=b.length)?Ef(b[d-1]):a}function ud(a){return{x:a.x,y:a.y,dx:a.dx,
dy:a.dy}}function Ff(a,b){var d=a.x+b[3],k=a.y+b[0],f=a.dx-b[1]-b[3],c=a.dy-b[0]-b[2];0>f&&(d+=f/2,f=0);0>c&&(k+=c/2,c=0);return{x:d,y:k,dx:f,dy:c}}function mb(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function fc(a){return a.rangeExtent?a.rangeExtent():mb(a.range())}function Zh(a,b,d,k){var f=d(a[0],a[1]),c=k(b[0],b[1]);return function(a){return c(f(a))}}function gc(a,b){var d=0,k=a.length-1,f=a[d],c=a[k],e;c<f&&(e=d,d=k,k=e,e=f,f=c,c=e);a[d]=b.floor(f);a[k]=b.ceil(c);return a}function Gf(a){return a?
{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:$h}function ai(a,b,d,k){var f=[],c=[],e=0,r=Math.min(a.length,b.length)-1;a[r]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++e<=r;)f.push(d(a[e-1],a[e])),c.push(k(b[e-1],b[e]));return function(b){var d=n.bisect(a,b,1,r)-1;return c[d](f[d](b))}}function Hf(a,b,d,k){function f(){var f=2<Math.min(a.length,b.length)?ai:Zh,s=k?Ch:Bh;e=f(a,b,s,d);r=f(b,a,s,$a);return c}function c(a){return e(a)}var e,r;
c.invert=function(a){return r(a)};c.domain=function(b){if(!arguments.length)return a;a=b.map(Number);return f()};c.range=function(a){if(!arguments.length)return b;b=a;return f()};c.rangeRound=function(a){return c.range(a).interpolate(qf)};c.clamp=function(a){if(!arguments.length)return k;k=a;return f()};c.interpolate=function(a){if(!arguments.length)return d;d=a;return f()};c.ticks=function(b){return n.range.apply(n,Ra(a,b))};c.tickFormat=function(b,d){return vd(a,b,d)};c.nice=function(b){If(a,b);
return f()};c.copy=function(){return Hf(a,b,d,k)};return f()}function wd(a,b){return n.rebind(a,b,"range","rangeRound","interpolate","clamp")}function If(a,b){gc(a,Gf(Ra(a,b)[2]));gc(a,Gf(Ra(a,b)[2]));return a}function Ra(a,b){null==b&&(b=10);var d=mb(a),k=d[1]-d[0],c=Math.pow(10,Math.floor(Math.log(k/b)/Math.LN10)),k=b/k*c;.15>=k?c*=10:.35>=k?c*=5:.75>=k&&(c*=2);d[0]=Math.ceil(d[0]/c)*c;d[1]=Math.floor(d[1]/c)*c+.5*c;d[2]=c;return d}function vd(a,b,d){a=Ra(a,b);if(d){b=qe.exec(d);b.shift();if("s"===
b[8]){var k=n.formatPrefix(Math.max(O(a[0]),O(a[1])));b[7]||(b[7]="."+hc(k.scale(a[2])));b[8]="f";d=n.format(b.join(""));return function(a){return d(k.scale(a))+k.symbol}}b[7]||(b[7]="."+bi(b[8],a));d=b.join("")}else d=",."+hc(a[2])+"f";return n.format(d)}function hc(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function bi(a,b){var d=hc(b[2]);return a in ci?Math.abs(d-hc(Math.max(O(b[0]),O(b[1]))))+ +("e"!==a):d-2*("%"===a)}function Jf(a,b,d,k){function c(a){return(d?Math.log(0>a?0:a):-Math.log(0<
a?0:-a))/Math.log(b)}function l(a){return d?Math.pow(b,a):-Math.pow(b,-a)}function e(b){return a(c(b))}e.invert=function(b){return l(a.invert(b))};e.domain=function(b){if(!arguments.length)return k;d=0<=b[0];a.domain((k=b.map(Number)).map(c));return e};e.base=function(d){if(!arguments.length)return b;b=+d;a.domain(k.map(c));return e};e.nice=function(){var b=gc(k.map(c),d?Math:di);a.domain(b);k=b.map(l);return e};e.ticks=function(){var a=mb(k),e=[],s=a[0],a=a[1],g=Math.floor(c(s)),h=Math.ceil(c(a)),
I=b%1?2:b;if(isFinite(h-g)){if(d){for(;g<h;g++)for(var n=1;n<I;n++)e.push(l(g)*n);e.push(l(g))}else for(e.push(l(g));g++<h;)for(n=I-1;0<n;n--)e.push(l(g)*n);for(g=0;e[g]<s;g++);for(h=e.length;e[h-1]>a;h--);e=e.slice(g,h)}return e};e.tickFormat=function(a,d){if(!arguments.length)return Kf;2>arguments.length?d=Kf:"function"!==typeof d&&(d=n.format(d));var k=Math.max(1,b*a/e.ticks().length);return function(a){var r=a/l(Math.round(c(a)));r*b<b-.5&&(r*=b);return r<=k?d(a):""}};e.copy=function(){return Jf(a.copy(),
b,d,k)};return wd(e,a)}function Lf(a,b,d){function k(b){return a(c(b))}var c=ic(b),l=ic(1/b);k.invert=function(b){return l(a.invert(b))};k.domain=function(b){if(!arguments.length)return d;a.domain((d=b.map(Number)).map(c));return k};k.ticks=function(a){return n.range.apply(n,Ra(d,a))};k.tickFormat=function(a,b){return vd(d,a,b)};k.nice=function(a){return k.domain(If(d,a))};k.exponent=function(e){if(!arguments.length)return b;c=ic(b=e);l=ic(1/b);a.domain(d.map(c));return k};k.copy=function(){return Lf(a.copy(),
b,d)};return wd(k,a)}function ic(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function Mf(a,b){function d(d){return l[((c.get(d)||("range"===b.t?c.set(d,a.push(d)):NaN))-1)%l.length]}function k(b,d){return n.range(a.length).map(function(a){return b+d*a})}var c,l,e;d.domain=function(k){if(!arguments.length)return a;a=[];c=new t;for(var l=-1,e=k.length,g;++l<e;)c.has(g=k[l])||c.set(g,a.push(g));return d[b.t].apply(d,b.a)};d.range=function(a){if(!arguments.length)return l;l=a;e=0;
b={t:"range",a:arguments};return d};d.rangePoints=function(c,f){2>arguments.length&&(f=0);var s=c[0],g=c[1],g=2>a.length?(s=(s+g)/2,0):(g-s)/(a.length-1+f);l=k(s+g*f/2,g);e=0;b={t:"rangePoints",a:arguments};return d};d.rangeRoundPoints=function(c,f){2>arguments.length&&(f=0);var s=c[0],g=c[1],h=2>a.length?(s=g=Math.round((s+g)/2),0):(g-s)/(a.length-1+f)|0;l=k(s+Math.round(h*f/2+(g-s-(a.length-1+f)*h)/2),h);e=0;b={t:"rangeRoundPoints",a:arguments};return d};d.rangeBands=function(c,f,s){2>arguments.length&&
(f=0);3>arguments.length&&(s=f);var g=c[1]<c[0],h=c[g-0],n=(c[1-g]-h)/(a.length-f+2*s);l=k(h+n*s,n);g&&l.reverse();e=n*(1-f);b={t:"rangeBands",a:arguments};return d};d.rangeRoundBands=function(c,f,s){2>arguments.length&&(f=0);3>arguments.length&&(s=f);var g=c[1]<c[0],h=c[g-0],n=c[1-g],m=Math.floor((n-h)/(a.length-f+2*s));l=k(h+Math.round((n-h-(a.length-f)*m)/2),m);g&&l.reverse();e=Math.round(m*(1-f));b={t:"rangeRoundBands",a:arguments};return d};d.rangeBand=function(){return e};d.rangeExtent=function(){return mb(b.a[0])};
d.copy=function(){return Mf(a,b)};return d.domain(a)}function Nf(a,b){function d(){var d=0,e=b.length;for(c=[];++d<e;)c[d-1]=n.quantile(a,d/e);return k}function k(a){if(!isNaN(a=+a))return b[n.bisect(c,a)]}var c;k.domain=function(b){if(!arguments.length)return a;a=b.map(e).filter(h).sort(g);return d()};k.range=function(a){if(!arguments.length)return b;b=a;return d()};k.quantiles=function(){return c};k.invertExtent=function(d){d=b.indexOf(d);return 0>d?[NaN,NaN]:[0<d?c[d-1]:a[0],d<c.length?c[d]:a[a.length-
1]]};k.copy=function(){return Nf(a,b)};return d()}function Of(a,b,d){function k(b){return d[Math.max(0,Math.min(e,Math.floor(l*(b-a))))]}function c(){l=d.length/(b-a);e=d.length-1;return k}var l,e;k.domain=function(d){if(!arguments.length)return[a,b];a=+d[0];b=+d[d.length-1];return c()};k.range=function(a){if(!arguments.length)return d;d=a;return c()};k.invertExtent=function(b){b=d.indexOf(b);b=0>b?NaN:b/l+a;return[b,b+1/l]};k.copy=function(){return Of(a,b,d)};return c()}function Pf(a,b){function d(d){if(d<=
d)return b[n.bisect(a,d)]}d.domain=function(b){if(!arguments.length)return a;a=b;return d};d.range=function(a){if(!arguments.length)return b;b=a;return d};d.invertExtent=function(d){d=b.indexOf(d);return[a[d-1],a[d]]};d.copy=function(){return Pf(a,b)};return d}function Qf(a){function b(a){return+a}b.invert=b;b.domain=b.range=function(d){if(!arguments.length)return a;a=d.map(b);return b};b.ticks=function(b){return n.range.apply(n,Ra(a,b))};b.tickFormat=function(b,k){return vd(a,b,k)};b.copy=function(){return Qf(a)};
return b}function ei(){return 0}function fi(a){return a.innerRadius}function gi(a){return a.outerRadius}function Rf(a){return a.startAngle}function Sf(a){return a.endAngle}function hi(a){return a&&a.padAngle}function jc(a,b,d,k){return 0<(a-d)*b-(b-k)*a?0:1}function kc(a,b,d,k,c){var l=a[0]-b[0],e=a[1]-b[1];c=(c?k:-k)/Math.sqrt(l*l+e*e);var e=c*e,l=-c*l,r=a[0]+e,w=a[1]+l,s=b[0]+e,g=b[1]+l;a=(r+s)/2;b=(w+g)/2;c=s-r;var h=g-w,n=c*c+h*h;k=d-k;var g=r*g-s*w,m=(0>h?-1:1)*Math.sqrt(Math.max(0,k*k*n-g*g)),
r=(g*h-c*m)/n,w=(-g*c-h*m)/n,s=(g*h+c*m)/n;c=(-g*c+h*m)/n;h=r-a;n=w-b;a=s-a;b=c-b;h*h+n*n>a*a+b*b&&(r=s,w=c);return[[r-e,w-l],[r*d/k,w*d/k]]}function Tf(a){function b(b){function e(){g.push("M",l(a(h),r))}for(var g=[],h=[],I=-1,n=b.length,m,p=W(d),B=W(k);++I<n;)c.call(this,m=b[I],I)?h.push([+p.call(this,m,I),+B.call(this,m,I)]):h.length&&(e(),h=[]);h.length&&e();return g.length?g.join(""):null}var d=gb,k=ub,c=rb,l=ya,e=l.key,r=.7;b.x=function(a){if(!arguments.length)return d;d=a;return b};b.y=function(a){if(!arguments.length)return k;
k=a;return b};b.defined=function(a){if(!arguments.length)return c;c=a;return b};b.interpolate=function(a){if(!arguments.length)return e;e="function"===typeof a?l=a:(l=xd.get(a)||ya).key;return b};b.tension=function(a){if(!arguments.length)return r;r=a;return b};return b}function ya(a){return 1<a.length?a.join("L"):a+"Z"}function Uf(a){return a.join("L")+"Z"}function yd(a){for(var b=0,d=a.length,k=a[0],c=[k[0],",",k[1]];++b<d;)c.push("V",(k=a[b])[1],"H",k[0]);return c.join("")}function zd(a){for(var b=
0,d=a.length,k=a[0],c=[k[0],",",k[1]];++b<d;)c.push("H",(k=a[b])[0],"V",k[1]);return c.join("")}function lc(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return ya(a);var d=a.length!=b.length,k="",c=a[0],l=a[1],e=b[0],r=e,g=1;d&&(k+="Q"+(l[0]-2*e[0]/3)+","+(l[1]-2*e[1]/3)+","+l[0]+","+l[1],c=a[1],g=2);if(1<b.length)for(r=b[1],l=a[g],g++,k+="C"+(c[0]+e[0])+","+(c[1]+e[1])+","+(l[0]-r[0])+","+(l[1]-r[1])+","+l[0]+","+l[1],c=2;c<b.length;c++,g++)l=a[g],r=b[c],k+="S"+(l[0]-r[0])+","+(l[1]-
r[1])+","+l[0]+","+l[1];d&&(d=a[g],k+="Q"+(l[0]+2*r[0]/3)+","+(l[1]+2*r[1]/3)+","+d[0]+","+d[1]);return k}function Ad(a,b){for(var d=[],k=(1-b)/2,c,l=a[0],e=a[1],r=1,g=a.length;++r<g;)c=l,l=e,e=a[r],d.push([k*(e[0]-c[0]),k*(e[1]-c[1])]);return d}function Vf(a){if(3>a.length)return ya(a);var b=1,d=a.length,k=a[0],c=k[0],l=k[1],e=[c,c,c,(k=a[1])[0]],r=[l,l,l,k[1]],c=[c,",",l,"L",ta(Sa,e),",",ta(Sa,r)];for(a.push(a[d-1]);++b<=d;)k=a[b],e.shift(),e.push(k[0]),r.shift(),r.push(k[1]),Bd(c,e,r);a.pop();
c.push("L",k);return c.join("")}function ta(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Bd(a,b,d){a.push("C",ta(Wf,b),",",ta(Wf,d),",",ta(Xf,b),",",ta(Xf,d),",",ta(Sa,b),",",ta(Sa,d))}function Cd(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Yf(a){for(var b,d=-1,k=a.length,c,l;++d<k;)b=a[d],c=b[0],l=b[1]-aa,b[0]=c*Math.cos(l),b[1]=c*Math.sin(l);return a}function Zf(a){function b(b){function g(){w.push("M",r(a(p),n),h,s(a(m.reverse()),n),"Z")}for(var w=[],m=[],p=[],z=-1,q=b.length,t,
u=W(d),v=W(c),ea=d===k?function(){return x}:W(k),Q=c===l?function(){return y}:W(l),x,y;++z<q;)e.call(this,t=b[z],z)?(m.push([x=+u.call(this,t,z),y=+v.call(this,t,z)]),p.push([+ea.call(this,t,z),+Q.call(this,t,z)])):m.length&&(g(),m=[],p=[]);m.length&&g();return w.length?w.join(""):null}var d=gb,k=gb,c=0,l=ub,e=rb,r=ya,g=r.key,s=r,h="L",n=.7;b.x=function(a){if(!arguments.length)return k;d=k=a;return b};b.x0=function(a){if(!arguments.length)return d;d=a;return b};b.x1=function(a){if(!arguments.length)return k;
k=a;return b};b.y=function(a){if(!arguments.length)return l;c=l=a;return b};b.y0=function(a){if(!arguments.length)return c;c=a;return b};b.y1=function(a){if(!arguments.length)return l;l=a;return b};b.defined=function(a){if(!arguments.length)return e;e=a;return b};b.interpolate=function(a){if(!arguments.length)return g;g="function"===typeof a?r=a:(r=xd.get(a)||ya).key;s=r.reverse||r;h=r.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return n;n=a;return b};return b}function ii(a){return a.radius}
function $f(a){return[a.x,a.y]}function ji(a){return function(){var b=a.apply(this,arguments),d=b[0],b=b[1]-aa;return[d*Math.cos(b),d*Math.sin(b)]}}function ki(){return 64}function li(){return"circle"}function ag(a){a=Math.sqrt(a/H);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function bg(a){return function(){var b,d,k;(b=this[a])&&(k=b[d=b.active])&&(k.timer.c=null,k.timer.t=NaN,--b.count?delete b[d]:delete this[a],b.active+=.5,k.event&&k.event.interrupt.call(this,this.__data__,
k.index))}}function Cb(a,b,d){Eb(a,da);a.namespace=b;a.id=d;return a}function Dd(a,b,d,k){var c=a.id,l=a.namespace;return la(a,"function"===typeof d?function(a,e,g){a[l][c].tween.set(b,k(d.call(a,a.__data__,e,g)))}:(d=k(d),function(a){a[l][c].tween.set(b,d)}))}function mi(a){null==a&&(a="");return function(){this.textContent=a}}function Ed(a){return null==a?"__transition__":"__transition_"+a+"__"}function mc(a,b,d,k,c){function l(a){var b=s.delay;n.t=b+h;if(b<=a)return e(a-b);n.c=e}function e(d){var c=
g.active,f=g[c];f&&(f.timer.c=null,f.timer.t=NaN,--g.count,delete g[c],f.event&&f.event.interrupt.call(a,a.__data__,f.index));for(var l in g)+l<k&&(c=g[l],c.timer.c=null,c.timer.t=NaN,--g.count,delete g[l]);n.c=r;Kb(function(){n.c&&r(d||1)&&(n.c=null,n.t=NaN);return 1},0,h);g.active=k;s.event&&s.event.start.call(a,a.__data__,b);q=[];s.tween.forEach(function(d,k){(k=k.call(a,a.__data__,b))&&q.push(k)});p=s.ease;m=s.duration}function r(c){c/=m;for(var f=p(c),l=q.length;0<l;)q[--l].call(a,f);if(1<=c)return s.event&&
s.event.end.call(a,a.__data__,b),--g.count?delete g[k]:delete a[d],1}var g=a[d]||(a[d]={active:0,count:0}),s=g[k],h,n,m,p,q;s||(h=c.time,n=Kb(l,0,h),s=g[k]={tween:new t,time:h,timer:n,delay:c.delay,duration:c.duration,ease:c.ease,index:b},c=null,++g.count)}function ni(a,b,d){a.attr("transform",function(a){var c=b(a);return"translate("+(isFinite(c)?c:d(a))+",0)"})}function oi(a,b,d){a.attr("transform",function(a){var c=b(a);return"translate(0,"+(isFinite(c)?c:d(a))+")"})}function Fd(a){return a.toISOString()}
function Gd(a,b,d){function k(b){return a(b)}function c(a,d){var k=(a[1]-a[0])/d,f=n.bisect(nc,k);return f==nc.length?[b.year,Ra(a.map(function(a){return a/31536E6}),d)[2]]:f?b[k/nc[f-1]<nc[f]/k?f-1:f]:[pi,Ra(a,d)[2]]}k.invert=function(b){return ab(a.invert(b))};k.domain=function(b){if(!arguments.length)return a.domain().map(ab);a.domain(b);return k};k.nice=function(a,b){function d(k){return!isNaN(k)&&!a.range(k,ab(+k+1),b).length}var e=k.domain(),g=mb(e);if(g=null==a?c(g,10):"number"===typeof a&&
c(g,a))a=g[0],b=g[1];return k.domain(gc(e,1<b?{floor:function(b){for(;d(b=a.floor(b));)b=ab(b-1);return b},ceil:function(b){for(;d(b=a.ceil(b));)b=ab(+b+1);return b}}:a))};k.ticks=function(a,b){var d=mb(k.domain()),e=null==a?c(d,10):"number"===typeof a?c(d,a):!a.range&&[{range:a},b];e&&(a=e[0],b=e[1]);return a.range(d[0],ab(+d[1]+1),1>b?1:b)};k.tickFormat=function(){return d};k.copy=function(){return Gd(a.copy(),b,d)};return wd(k,a)}function ab(a){return new Date(a)}function qi(a){return JSON.parse(a.responseText)}
function ri(a){var b=ia.createRange();b.selectNode(ia.body);return b.createContextualFragment(a.responseText)}var n={version:"3.5.17"},cg=[].slice,za=function(a){return cg.call(a)},ia=this.document;if(ia)try{za(ia.documentElement.childNodes)[0].nodeType}catch(Pi){za=function(a){for(var b=a.length,d=Array(b);b--;)d[b]=a[b];return d}}Date.now||(Date.now=function(){return+new Date});if(ia)try{ia.createElement("DIV").style.setProperty("opacity",0,"")}catch(Qi){var oc=this.Element.prototype,si=oc.setAttribute,
ti=oc.setAttributeNS,dg=this.CSSStyleDeclaration.prototype,ui=dg.setProperty;oc.setAttribute=function(a,b){si.call(this,a,b+"")};oc.setAttributeNS=function(a,b,d){ti.call(this,a,b,d+"")};dg.setProperty=function(a,b,d){ui.call(this,a,b+"",d)}}n.ascending=g;n.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};n.min=function(a,b){var d=-1,k=a.length,c,l;if(1===arguments.length){for(;++d<k;)if(null!=(l=a[d])&&l>=l){c=l;break}for(;++d<k;)null!=(l=a[d])&&c>l&&(c=l)}else{for(;++d<k;)if(null!=(l=b.call(a,
a[d],d))&&l>=l){c=l;break}for(;++d<k;)null!=(l=b.call(a,a[d],d))&&c>l&&(c=l)}return c};n.max=function(a,b){var d=-1,c=a.length,f,l;if(1===arguments.length){for(;++d<c;)if(null!=(l=a[d])&&l>=l){f=l;break}for(;++d<c;)null!=(l=a[d])&&l>f&&(f=l)}else{for(;++d<c;)if(null!=(l=b.call(a,a[d],d))&&l>=l){f=l;break}for(;++d<c;)null!=(l=b.call(a,a[d],d))&&l>f&&(f=l)}return f};n.extent=function(a,b){var d=-1,c=a.length,f,l,e;if(1===arguments.length){for(;++d<c;)if(null!=(l=a[d])&&l>=l){f=e=l;break}for(;++d<c;)null!=
(l=a[d])&&(f>l&&(f=l),e<l&&(e=l))}else{for(;++d<c;)if(null!=(l=b.call(a,a[d],d))&&l>=l){f=e=l;break}for(;++d<c;)null!=(l=b.call(a,a[d],d))&&(f>l&&(f=l),e<l&&(e=l))}return[f,e]};n.sum=function(a,b){var d=0,c=a.length,f,l=-1;if(1===arguments.length)for(;++l<c;)h(f=+a[l])&&(d+=f);else for(;++l<c;)h(f=+b.call(a,a[l],l))&&(d+=f);return d};n.mean=function(a,b){var d=0,c=a.length,f,l=-1,g=c;if(1===arguments.length)for(;++l<c;)h(f=e(a[l]))?d+=f:--g;else for(;++l<c;)h(f=e(b.call(a,a[l],l)))?d+=f:--g;if(g)return d/
g};n.quantile=function(a,b){var d=(a.length-1)*b+1,c=Math.floor(d),f=+a[c-1];return(d-=c)?f+d*(a[c]-f):f};n.median=function(a,b){var d=[],c=a.length,f,l=-1;if(1===arguments.length)for(;++l<c;)h(f=e(a[l]))&&d.push(f);else for(;++l<c;)h(f=e(b.call(a,a[l],l)))&&d.push(f);if(d.length)return n.quantile(d.sort(g),.5)};n.variance=function(a,b){var d=a.length,c=0,f,l,g=0,r=-1,w=0;if(1===arguments.length)for(;++r<d;)h(f=e(a[r]))&&(l=f-c,c+=l/++w,g+=l*(f-c));else for(;++r<d;)h(f=e(b.call(a,a[r],r)))&&(l=f-
c,c+=l/++w,g+=l*(f-c));if(1<w)return g/(w-1)};n.deviation=function(){var a=n.variance.apply(this,arguments);return a?Math.sqrt(a):a};var eg=m(g);n.bisectLeft=eg.left;n.bisect=n.bisectRight=eg.right;n.bisector=function(a){return m(1===a.length?function(b,d){return g(a(b),d)}:a)};n.shuffle=function(a,b,d){3>(c=arguments.length)&&(d=a.length,2>c&&(b=0));for(var c=d-b,f,l;c;)l=Math.random()*c--|0,f=a[c+b],a[c+b]=a[l+b],a[l+b]=f;return a};n.permute=function(a,b){for(var d=b.length,c=Array(d);d--;)c[d]=
a[b[d]];return c};n.pairs=function(a){for(var b=0,d=a.length-1,c=a[0],f=Array(0>d?0:d);b<d;)f[b]=[c,c=a[++b]];return f};n.transpose=function(a){if(!(l=a.length))return[];for(var b=-1,d=n.min(a,p),c=Array(d);++b<d;)for(var f=-1,l,e=c[b]=Array(l);++f<l;)e[f]=a[f][b];return c};n.zip=function(){return n.transpose(arguments)};n.keys=function(a){var b=[],d;for(d in a)b.push(d);return b};n.values=function(a){var b=[],d;for(d in a)b.push(a[d]);return b};n.entries=function(a){var b=[],d;for(d in a)b.push({key:d,
value:a[d]});return b};n.merge=function(a){var b=a.length,d;d=-1;for(var c=0,f,l;++d<b;)c+=a[d].length;for(f=Array(c);0<=--b;)for(l=a[b],d=l.length;0<=--d;)f[--c]=l[d];return f};var O=Math.abs;n.range=function(a,b,d){3>arguments.length&&(d=1,2>arguments.length&&(b=a,a=0));if(Infinity===(b-a)/d)throw Error("infinite range");var c=[],f;f=O(d);for(var l=1;f*l%1;)l*=10;f=l;var l=-1,e;a*=f;b*=f;d*=f;if(0>d)for(;(e=a+d*++l)>b;)c.push(e/f);else for(;(e=a+d*++l)<b;)c.push(e/f);return c};n.map=function(a,
b){var d=new t;if(a instanceof t)a.forEach(function(a,b){d.set(a,b)});else if(Array.isArray(a)){var c=-1,f=a.length,l;if(1===arguments.length)for(;++c<f;)d.set(c,a[c]);else for(;++c<f;)d.set(b.call(a,l=a[c],c),l)}else for(c in a)d.set(c,a[c]);return d};q(t,{has:x,get:function(a){return this._[u(a)]},set:function(a,b){return this._[u(a)]=b},remove:y,keys:D,values:function(){var a=[],b;for(b in this._)a.push(this._[b]);return a},entries:function(){var a=[],b;for(b in this._)a.push({key:v(b),value:this._[b]});
return a},size:J,empty:R,forEach:function(a){for(var b in this._)a.call(this,v(b),this._[b])}});n.nest=function(){function a(b,f,g){if(g>=c.length)return e?e.call(d,f):l?f.sort(l):f;for(var h=-1,n=f.length,m=c[g++],p,q,F=new t,B;++h<n;)(B=F.get(p=m(q=f[h])))?B.push(q):F.set(p,[q]);b?(q=b(),f=function(d,c){q.set(d,a(b,c,g))}):(q={},f=function(d,c){q[d]=a(b,c,g)});F.forEach(f);return q}function b(a,d){if(d>=c.length)return a;var l=[],e=f[d++];a.forEach(function(a,c){l.push({key:a,values:b(c,d)})});
return e?l.sort(function(a,b){return e(a.key,b.key)}):l}var d={},c=[],f=[],l,e;d.map=function(b,d){return a(d,b,0)};d.entries=function(d){return b(a(n.map,d,0),0)};d.key=function(a){c.push(a);return d};d.sortKeys=function(a){f[c.length-1]=a;return d};d.sortValues=function(a){l=a;return d};d.rollup=function(a){e=a;return d};return d};n.set=function(a){var b=new M;if(a)for(var d=0,c=a.length;d<c;++d)b.add(a[d]);return b};q(M,{has:x,add:function(a){this._[u(a+="")]=!0;return a},remove:y,values:D,size:J,
empty:R,forEach:function(a){for(var b in this._)a.call(this,v(b))}});n.behavior={};n.rebind=function(a,b){for(var d=1,c=arguments.length,f;++d<c;)a[f=arguments[d]]=ca(a,b,b[f]);return a};var Pd="webkit ms moz Moz o O".split(" ");n.dispatch=function(){for(var a=new G,b=-1,d=arguments.length;++b<d;)a[arguments[b]]=U(a);return a};G.prototype.on=function(a,b){var d=a.indexOf("."),c="";0<=d&&(c=a.slice(d+1),a=a.slice(0,d));if(a)return 2>arguments.length?this[a].on(c):this[a].on(c,b);if(2===arguments.length){if(null==
b)for(a in this)if(this.hasOwnProperty(a))this[a].on(c,null);return this}};n.event=null;n.requote=function(a){return a.replace(vi,"\\$&")};var vi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Eb={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var d in b)a[d]=b[d]},Fc=function(a,b){return b.querySelector(a)},Gc=function(a,b){return b.querySelectorAll(a)},Fb=function(a,b){var d=a.matches||a[$(a,"matchesSelector")];Fb=function(a,b){return d.call(a,b)};return Fb(a,b)};"function"===typeof Sizzle&&(Fc=
function(a,b){return Sizzle(a,b)[0]||null},Gc=Sizzle,Fb=Sizzle.matchesSelector);n.selection=function(){return n.select(ia.documentElement)};var S=n.selection.prototype=[];S.select=function(a){var b=[],d,c,f,l;a=Ea(a);for(var e=-1,r=this.length;++e<r;){b.push(d=[]);d.parentNode=(f=this[e]).parentNode;for(var g=-1,s=f.length;++g<s;)(l=f[g])?(d.push(c=a.call(l,l.__data__,g,e)),c&&"__data__"in l&&(c.__data__=l.__data__)):d.push(null)}return T(b)};S.selectAll=function(a){var b=[],d,c;a=cb(a);for(var f=
-1,l=this.length;++f<l;)for(var e=this[f],r=-1,g=e.length;++r<g;)if(c=e[r])b.push(d=za(a.call(c,c.__data__,r,f))),d.parentNode=c;return T(b)};var Hd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};n.ns={prefix:Hd,qualify:function(a){var b=a.indexOf(":"),d=a;0<=b&&"xmlns"!==(d=a.slice(0,b))&&(a=a.slice(b+1));return Hd.hasOwnProperty(d)?{space:Hd[d],local:a}:
a}};S.attr=function(a,b){if(2>arguments.length){if("string"===typeof a){var d=this.node();a=n.ns.qualify(a);return a.local?d.getAttributeNS(a.space,a.local):d.getAttribute(a)}for(b in a)this.each(Qd(b,a[b]));return this}return this.each(Qd(a,b))};S.classed=function(a,b){if(2>arguments.length){if("string"===typeof a){var d=this.node(),c=(a=(a+"").trim().split(/^|\s+/)).length,f=-1;if(b=d.classList)for(;++f<c;){if(!b.contains(a[f]))return!1}else for(b=d.getAttribute("class");++f<c;)if(!Sd(a[f]).test(b))return!1;
return!0}for(b in a)this.each(Td(b,a[b]));return this}return this.each(Td(a,b))};S.style=function(a,b,d){var k=arguments.length;if(3>k){if("string"!==typeof a){2>k&&(b="");for(d in a)this.each(Ud(d,a[d],b));return this}if(2>k)return k=this.node(),c(k).getComputedStyle(k,null).getPropertyValue(a);d=""}return this.each(Ud(a,b,d))};S.property=function(a,b){if(2>arguments.length){if("string"===typeof a)return this.node()[a];for(b in a)this.each(Vd(b,a[b]));return this}return this.each(Vd(a,b))};S.text=
function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};S.html=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};S.append=function(a){a=Wd(a);
return this.select(function(){return this.appendChild(a.apply(this,arguments))})};S.insert=function(a,b){a=Wd(a);b=Ea(b);return this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})};S.remove=function(){return this.each(xg)};S.data=function(a,b){function d(a,d){var c,k=a.length,f=d.length,l=Math.min(k,f),e=Array(f),h=Array(f),n=Array(k),I,m;if(b){var l=new t,p=Array(k),q;for(c=-1;++c<k;)if(I=a[c])l.has(q=b.call(I,I.__data__,c))?n[c]=I:l.set(q,I),
p[c]=q;for(c=-1;++c<f;)(I=l.get(q=b.call(d,m=d[c],c)))?!0!==I&&(e[c]=I,I.__data__=m):h[c]={__data__:m},l.set(q,!0);for(c=-1;++c<k;)c in p&&!0!==l.get(p[c])&&(n[c]=a[c])}else{for(c=-1;++c<l;)I=a[c],m=d[c],I?(I.__data__=m,e[c]=I):h[c]={__data__:m};for(;c<f;++c)h[c]={__data__:d[c]};for(;c<k;++c)n[c]=a[c]}h.update=e;h.parentNode=e.parentNode=n.parentNode=a.parentNode;r.push(h);g.push(e);s.push(n)}var c=-1,f=this.length,l,e;if(!arguments.length){for(a=Array(f=(l=this[0]).length);++c<f;)if(e=l[c])a[c]=
e.__data__;return a}var r=Yd([]),g=T([]),s=T([]);if("function"===typeof a)for(;++c<f;)d(l=this[c],a.call(l,l.parentNode.__data__,c));else for(;++c<f;)d(l=this[c],a);g.enter=function(){return r};g.exit=function(){return s};return g};S.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};S.filter=function(a){var b=[],d,c,f;"function"!==typeof a&&(a=Xd(a));for(var l=0,e=this.length;l<e;l++){b.push(d=[]);d.parentNode=(c=this[l]).parentNode;for(var r=0,g=c.length;r<
g;r++)(f=c[r])&&a.call(f,f.__data__,r,l)&&d.push(f)}return T(b)};S.order=function(){for(var a=-1,b=this.length;++a<b;)for(var d=this[a],c=d.length-1,f=d[c],l;0<=--c;)if(l=d[c])f&&f!==l.nextSibling&&f.parentNode.insertBefore(l,f),f=l;return this};S.sort=function(a){a=yg.apply(this,arguments);for(var b=-1,d=this.length;++b<d;)this[b].sort(a);return this.order()};S.each=function(a){return la(this,function(b,d,c){a.call(b,b.__data__,d,c)})};S.call=function(a){var b=za(arguments);a.apply(b[0]=this,b);
return this};S.empty=function(){return!this.node()};S.node=function(){for(var a=0,b=this.length;a<b;a++)for(var d=this[a],c=0,f=d.length;c<f;c++){var l=d[c];if(l)return l}return null};S.size=function(){var a=0;la(this,function(){++a});return a};var Fa=[];n.selection.enter=Yd;n.selection.enter.prototype=Fa;Fa.append=S.append;Fa.empty=S.empty;Fa.node=S.node;Fa.call=S.call;Fa.size=S.size;Fa.select=function(a){for(var b=[],d,c,f,l,e,r=-1,g=this.length;++r<g;){f=(l=this[r]).update;b.push(d=[]);d.parentNode=
l.parentNode;for(var s=-1,h=l.length;++s<h;)(e=l[s])?(d.push(f[s]=c=a.call(l.parentNode,e.__data__,s,r)),c.__data__=e.__data__):d.push(null)}return T(b)};Fa.insert=function(a,b){2>arguments.length&&(b=zg(this));return S.insert.call(this,a,b)};n.select=function(a){var b;"string"===typeof a?(b=[Fc(a,ia)],b.parentNode=ia.documentElement):(b=[a],b.parentNode=a&&(a.ownerDocument||a.document||a).documentElement);return T([b])};n.selectAll=function(a){"string"===typeof a?(a=za(Gc(a,ia)),a.parentNode=ia.documentElement):
(a=za(a),a.parentNode=null);return T([a])};S.on=function(a,b,d){var c=arguments.length;if(3>c){if("string"!==typeof a){2>c&&(b=!1);for(d in a)this.each(Zd(d,a[d],b));return this}if(2>c)return(c=this.node()["__on"+a])&&c._;d=!1}return this.each(Zd(a,b,d))};var Hc=n.map({mouseenter:"mouseover",mouseleave:"mouseout"});ia&&Hc.forEach(function(a){"on"+a in ia&&Hc.remove(a)});var Ta,Bg=0;n.mouse=function(a){return Ic(a,E())};var Jc=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;n.touch=function(a,
b,d){3>arguments.length&&(d=b,b=E().changedTouches);if(b)for(var c=0,f=b.length,l;c<f;++c)if((l=b[c]).identifier===d)return Ic(a,l)};n.behavior.drag=function(){function a(){this.on("mousedown.drag",f).on("touchstart.drag",l)}function b(a,b,c,f,l){return function(){var e=n.event.target.correspondingElement||n.event.target,g=this.parentNode,h=d.of(this,arguments),m=0,p=a(),q=".drag"+(null==p?"":"-"+p),z,t=n.select(c(e)).on(f+q,function(){var a=b(g,p),d,c;a&&(d=a[0]-v[0],c=a[1]-v[1],m=m|d|c,v=a,h({type:"drag",
x:a[0]+z[0],y:a[1]+z[1],dx:d,dy:c}))}).on(l+q,function(){b(g,p)&&(t.on(f+q,null).on(l+q,null),u(m),h({type:"dragend"}))}),u=Gb(e),v=b(g,p);k?(z=k.apply(this,arguments),z=[z.x-v[0],z.y-v[1]]):z=[0,0];h({type:"dragstart"})}}var d=Y(a,"drag","dragstart","dragend"),k=null,f=b(L,n.mouse,c,"mousemove","mouseup"),l=b(Cg,n.touch,P,"touchmove","touchend");a.origin=function(b){if(!arguments.length)return k;k=b;return a};return n.rebind(a,d,"on")};n.touches=function(a,b){2>arguments.length&&(b=E().touches);
return b?za(b).map(function(b){var c=Ic(a,b);c.identifier=b.identifier;return c}):[]};var H=Math.PI,pa=2*H,wi=pa-1E-6,aa=H/2,N=H/180,X=180/H,Db=Math.SQRT2;n.interpolateZoom=function(a,b){var d=a[0],c=a[1],f=a[2],l=b[2],e=b[0]-d,r=b[1]-c,g=e*e+r*r,s,h;if(1E-12>g)h=Math.log(l/f)/Db,s=function(a){return[d+a*e,c+a*r,f*Math.exp(Db*a*h)]};else{var n=Math.sqrt(g);s=(l*l-f*f+4*g)/(4*f*n);var l=(l*l-f*f-4*g)/(4*l*n),m=Math.log(Math.sqrt(s*s+1)-s);h=(Math.log(Math.sqrt(l*l+1)-l)-m)/Db;s=function(a){a*=h;var b=
ce(m),l,g=Db*a+m;l=((g=Math.exp(2*g))-1)/(g+1);l*=b;var s=m,g=((s=Math.exp(s))-1/s)/2;l=f/(2*n)*(l-g);return[d+l*e,c+l*r,f*b/ce(Db*a+m)]}}s.duration=1E3*h;return s};n.behavior.zoom=function(){function a(a){a.on("mousedown.zoom",s).on(Id+".zoom",m).on("dblclick.zoom",p).on("touchstart.zoom",h)}function b(a){return[(a[0]-q.x)/q.k,(a[1]-q.y)/q.k]}function d(a){q.k=Math.max(u[0],Math.min(u[1],a))}function k(a,b){b=[b[0]*q.k+q.x,b[1]*q.k+q.y];q.x+=a[0]-b[0];q.y+=a[1]-b[1]}function f(b,c,f,l){b.__chart__=
{x:q.x,y:q.y,k:q.k};d(Math.pow(2,l));k(F=c,f);b=n.select(b);0<v&&(b=b.transition().duration(v));b.call(a.event)}function l(){Pb&&Pb.domain(y.range().map(function(a){return(a-q.x)/q.k}).map(y.invert));fa&&fa.domain(A.range().map(function(a){return(a-q.y)/q.k}).map(A.invert))}function e(a){ha++||a({type:"zoomstart"})}function r(a){l();a({type:"zoom",scale:q.k,translate:[q.x,q.y]})}function g(a){--ha||(a({type:"zoomend"}),F=null)}function s(){var a=this,d=Q.of(a,arguments),f=0,l=n.select(c(a)).on("mousemove.zoom",
function(){f=1;k(n.mouse(a),s);r(d)}).on("mouseup.zoom",function(){l.on("mousemove.zoom",null).on("mouseup.zoom",null);h(f);g(d)}),s=b(n.mouse(a)),h=Gb(a);pc.call(a);e(d)}function h(){function a(){var d=n.touches(p);V=q.k;d.forEach(function(a){a.identifier in z&&(z[a.identifier]=b(a))});return d}function c(){var b=n.event.target;n.select(b).on(qa,l).on(u,m);v.push(b);for(var b=n.event.changedTouches,d=0,k=b.length;d<k;++d)z[b[d].identifier]=null;d=a();k=Date.now();1===d.length?(500>k-ea&&(b=d[0],
f(p,b,z[b.identifier],Math.floor(Math.log(q.k)/Math.LN2)+1),C()),ea=k):1<d.length&&(b=d[0],k=d[1],d=b[0]-k[0],b=b[1]-k[1],t=d*d+b*b)}function l(){var a=n.touches(p),b,c,f,e;pc.call(p);for(var g=0,s=a.length;g<s;++g,e=null)if(f=a[g],e=z[f.identifier]){if(c)break;b=f;c=e}if(e){var h=(h=f[0]-b[0])*h+(h=f[1]-b[1])*h,a=t&&Math.sqrt(h/t);b=[(b[0]+f[0])/2,(b[1]+f[1])/2];c=[(c[0]+e[0])/2,(c[1]+e[1])/2];d(a*V)}ea=null;k(b,c);r(B)}function m(){if(n.event.touches.length){for(var b=n.event.changedTouches,d=0,
c=b.length;d<c;++d)delete z[b[d].identifier];for(var k in z)return void a()}n.selectAll(v).on(F,null);me.on("mousedown.zoom",s).on("touchstart.zoom",h);ha();g(B)}var p=this,B=Q.of(p,arguments),z={},t=0,V,F=".zoom-"+n.event.changedTouches[0].identifier,qa="touchmove"+F,u="touchend"+F,v=[],me=n.select(p),ha=Gb(p);c();e(B);me.on("mousedown.zoom",null).on("touchstart.zoom",c)}function m(){var a=Q.of(this,arguments);x?clearTimeout(x):(pc.call(this),t=b(F=B||n.mouse(this)),e(a));x=setTimeout(function(){x=
null;g(a)},50);C();d(Math.pow(2,.002*qc())*q.k);k(F,t);r(a)}function p(){var a=n.mouse(this),d=Math.log(q.k)/Math.LN2;f(this,a,b(a),n.event.shiftKey?Math.ceil(d)-1:Math.floor(d)+1)}var q={x:0,y:0,k:1},t,F,B,z=[960,500],u=fg,v=250,ha=0,x,ea,Q=Y(a,"zoomstart","zoom","zoomend"),y,Pb,A,fa;Id||(Id="onwheel"in ia?(qc=function(){return-n.event.deltaY*(n.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ia?(qc=function(){return n.event.wheelDelta},"mousewheel"):(qc=function(){return-n.event.detail},"MozMousePixelScroll"));
a.event=function(a){a.each(function(){var a=Q.of(this,arguments),b=q;bb?n.select(this).transition().each("start.zoom",function(){q=this.__chart__||{x:0,y:0,k:1};e(a)}).tween("zoom:zoom",function(){var d=z[0],c=z[1],k=F?F[0]:d/2,f=F?F[1]:c/2,l=n.interpolateZoom([(k-q.x)/q.k,(f-q.y)/q.k,d/q.k],[(k-b.x)/b.k,(f-b.y)/b.k,d/b.k]);return function(b){b=l(b);var c=d/b[2];this.__chart__=q={x:k-b[0]*c,y:f-b[1]*c,k:c};r(a)}}).each("interrupt.zoom",function(){g(a)}).each("end.zoom",function(){g(a)}):(this.__chart__=
q,e(a),r(a),g(a))})};a.translate=function(b){if(!arguments.length)return[q.x,q.y];q={x:+b[0],y:+b[1],k:q.k};l();return a};a.scale=function(b){if(!arguments.length)return q.k;q={x:q.x,y:q.y,k:null};d(+b);l();return a};a.scaleExtent=function(b){if(!arguments.length)return u;u=null==b?fg:[+b[0],+b[1]];return a};a.center=function(b){if(!arguments.length)return B;B=b&&[+b[0],+b[1]];return a};a.size=function(b){if(!arguments.length)return z;z=b&&[+b[0],+b[1]];return a};a.duration=function(b){if(!arguments.length)return v;
v=+b;return a};a.x=function(b){if(!arguments.length)return Pb;Pb=b;y=b.copy();q={x:0,y:0,k:1};return a};a.y=function(b){if(!arguments.length)return fa;fa=b;A=b.copy();q={x:0,y:0,k:1};return a};return n.rebind(a,Q,"on")};var fg=[0,Infinity],qc,Id;n.color=Ua;Ua.prototype.toString=function(){return this.rgb()+""};n.hsl=Aa;var Jd=Aa.prototype=new Ua;Jd.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);return new Aa(this.h,this.s,this.l/a)};Jd.darker=function(a){a=Math.pow(.7,arguments.length?a:
1);return new Aa(this.h,this.s,a*this.l)};Jd.rgb=function(){return Lc(this.h,this.s,this.l)};n.hcl=ua;var Kd=ua.prototype=new Ua;Kd.brighter=function(a){return new ua(this.h,this.c,Math.min(100,this.l+rc*(arguments.length?a:1)))};Kd.darker=function(a){return new ua(this.h,this.c,Math.max(0,this.l-rc*(arguments.length?a:1)))};Kd.rgb=function(){return Mc(this.h,this.c,this.l).rgb()};n.lab=va;var rc=18,je=.95047,ke=1,le=1.08883,Ld=va.prototype=new Ua;Ld.brighter=function(a){return new va(Math.min(100,
this.l+rc*(arguments.length?a:1)),this.a,this.b)};Ld.darker=function(a){return new va(Math.max(0,this.l-rc*(arguments.length?a:1)),this.a,this.b)};Ld.rgb=function(){return ie(this.l,this.a,this.b)};n.rgb=ja;var sc=ja.prototype=new Ua;sc.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,d=this.g,c=this.b;if(!b&&!d&&!c)return new ja(30,30,30);b&&30>b&&(b=30);d&&30>d&&(d=30);c&&30>c&&(c=30);return new ja(Math.min(255,b/a),Math.min(255,d/a),Math.min(255,c/a))};sc.darker=function(a){a=
Math.pow(.7,arguments.length?a:1);return new ja(a*this.r,a*this.g,a*this.b)};sc.hsl=function(){return fe(this.r,this.g,this.b)};sc.toString=function(){return"#"+db(this.r)+db(this.g)+db(this.b)};var Ib=n.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,
cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,
moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,
sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ib.forEach(function(a,b){Ib.set(a,new ja(b>>16,b>>8&255,b&255))});n.functor=W;n.xhr=Sc(P);n.dsv=function(a,b){function d(a,d,l){3>arguments.length&&(l=d,d=null);var e=Jb(a,
b,null==d?c:f(d),l);e.row=function(a){return arguments.length?e.response(null==(d=a)?c:f(a)):d};return e}function c(a){return d.parse(a.responseText)}function f(a){return function(b){return d.parse(b.responseText,a)}}function l(b){return b.map(e).join(a)}function e(a){return g.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var g=new RegExp('["'+a+"\n]"),h=a.charCodeAt(0);d.parse=function(a,b){var c;return d.parseRows(a,function(a,d){if(c)return c(a,d-1);var k=new Function("d","return {"+a.map(function(a,
b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");c=b?function(a,d){return b(k(a),d)}:k})};d.parseRows=function(a,b){function d(){if(e>=l)return k;if(n)return n=!1,c;var b=e;if(34===a.charCodeAt(b)){for(var f=b;f++<l;)if(34===a.charCodeAt(f)){if(34!==a.charCodeAt(f+1))break;++f}e=f+2;var g=a.charCodeAt(f+1);13===g?(n=!0,10===a.charCodeAt(f+2)&&++e):10===g&&(n=!0);return a.slice(b+1,f).replace(/""/g,'"')}for(;e<l;){g=a.charCodeAt(e++);f=1;if(10===g)n=!0;else if(13===g)n=!0,10===a.charCodeAt(e)&&
(++e,++f);else if(g!==h)continue;return a.slice(b,e-f)}return a.slice(b)}for(var c={},k={},f=[],l=a.length,e=0,g=0,r,n;(r=d())!==k;){for(var m=[];r!==c&&r!==k;)m.push(r),r=d();b&&null==(m=b(m,g++))||f.push(m)}return f};d.format=function(b){if(Array.isArray(b[0]))return d.formatRows(b);var c=new M,k=[];b.forEach(function(a){for(var b in a)c.has(b)||k.push(c.add(b))});return[k.map(e).join(a)].concat(b.map(function(b){return k.map(function(a){return e(b[a])}).join(a)})).join("\n")};d.formatRows=function(a){return a.map(l).join("\n")};
return d};n.csv=n.dsv(",","text/csv");n.tsv=n.dsv("\t","text/tab-separated-values");var Mb,Lb,Nb,Ob,ne=this[$(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};n.timer=function(){Kb.apply(this,arguments)};n.timer.flush=function(){oe();pe()};n.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var xi="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var d=Math.pow(10,3*O(8-b));return{scale:8<b?function(a){return a/d}:function(a){return a*d},
symbol:a}});n.formatPrefix=function(a,b){var d=0;if(a=+a)0>a&&(a*=-1),b&&(a=n.round(a,Uc(a,b))),d=1+Math.floor(1E-12+Math.log(a)/Math.LN10),d=Math.max(-24,Math.min(24,3*Math.floor((d-1)/3)));return xi[8+d/3]};var qe=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Fg=n.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},
g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=n.round(a,Uc(a,b))).toFixed(Math.max(0,Math.min(20,Uc(a*(1+1E-15),b))))}}),A=n.time={},ga=Date;Ha.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},
getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){La.setUTCDate.apply(this._,arguments)},setDay:function(){La.setUTCDay.apply(this._,arguments)},setFullYear:function(){La.setUTCFullYear.apply(this._,arguments)},setHours:function(){La.setUTCHours.apply(this._,
arguments)},setMilliseconds:function(){La.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){La.setUTCMinutes.apply(this._,arguments)},setMonth:function(){La.setUTCMonth.apply(this._,arguments)},setSeconds:function(){La.setUTCSeconds.apply(this._,arguments)},setTime:function(){La.setTime.apply(this._,arguments)}};var La=Date.prototype;A.year=Va(function(a){a=A.day(a);a.setMonth(0,1);return a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});A.years=
A.year.range;A.years.utc=A.year.utc.range;A.day=Va(function(a){var b=new ga(2E3,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});A.days=A.day.range;A.days.utc=A.day.utc.range;A.dayOfYear=function(a){var b=A.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,b){b=7-b;var d=A[a]=
Va(function(a){(a=A.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var d=A.year(a).getDay();return Math.floor((A.dayOfYear(a)+(d+b)%7)/7)-(d!==b)});A[a+"s"]=d.range;A[a+"s"].utc=d.utc.range;A[a+"OfYear"]=function(a){var d=A.year(a).getDay();return Math.floor((A.dayOfYear(a)+(d+b)%7)/7)}});A.week=A.sunday;A.weeks=A.sunday.range;A.weeks.utc=A.sunday.utc.range;A.weekOfYear=A.sundayOfYear;var se={"-":"",_:" ",0:"0"},ba=/^\s*\d+/,
ve=/^%/;n.locale=function(a){return{numberFormat:Eg(a),timeFormat:Hg(a)}};var gg=n.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
n.format=gg.numberFormat;n.geo={};Wc.prototype={s:0,t:0,add:function(a){we(a,this.t,tc);we(tc.s,this.s,this);this.s?this.t+=tc.t:this.s=tc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var tc=new Wc;n.geo.stream=function(a,b){if(a&&hg.hasOwnProperty(a.type))hg[a.type](a,b);else Tb(a,b)};var hg={Feature:function(a,b){Tb(a.geometry,b)},FeatureCollection:function(a,b){for(var d=a.features,c=-1,f=d.length;++c<f;)Tb(d[c].geometry,b)}},xe={Sphere:function(a,b){b.sphere()},Point:function(a,
b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var d=a.coordinates,c=-1,f=d.length;++c<f;)a=d[c],b.point(a[0],a[1],a[2])},LineString:function(a,b){Xc(a.coordinates,b,0)},MultiLineString:function(a,b){for(var d=a.coordinates,c=-1,f=d.length;++c<f;)Xc(d[c],b,0)},Polygon:function(a,b){ye(a.coordinates,b)},MultiPolygon:function(a,b){for(var d=a.coordinates,c=-1,f=d.length;++c<f;)ye(d[c],b)},GeometryCollection:function(a,b){for(var d=a.geometries,c=-1,f=d.length;++c<f;)Tb(d[c],
b)}};n.geo.area=function(a){nb=0;n.geo.stream(a,oa);return nb};var nb,Wa=new Wc,oa={sphere:function(){nb+=4*H},point:L,lineStart:L,lineEnd:L,polygonStart:function(){Wa.reset();oa.lineStart=Wg},polygonEnd:function(){var a=2*Wa;nb+=0>a?4*H+a:a;oa.lineStart=oa.lineEnd=oa.point=L}};n.geo.bounds=function(){function a(a,b){x.push(ha=[m=a,p=a]);b<q&&(q=b);b>t&&(t=b)}function b(b,d){var c=Xa([b*N,d*N]);if(z){var k=eb(z,c),k=eb([k[1],-k[0],0],k);Wb(k);var k=Xb(k),f=b-u,l=0<f?1:-1,e=k[0]*X*l,f=180<O(f);f^(l*
u<e&&e<l*b)?(k=k[1]*X,k>t&&(t=k)):(e=(e+360)%360-180,f^(l*u<e&&e<l*b))?(k=-k[1]*X,k<q&&(q=k)):(d<q&&(q=d),d>t&&(t=d));f?b<u?g(m,b)>g(m,p)&&(p=b):g(b,p)>g(m,p)&&(m=b):p>=m?(b<m&&(m=b),b>p&&(p=b)):b>u?g(m,b)>g(m,p)&&(p=b):g(b,p)>g(m,p)&&(m=b)}else a(b,d);z=c;u=b}function d(){Z.point=b}function c(){ha[0]=m;ha[1]=p;Z.point=a;z=null}function f(a,d){if(z){var c=a-u;v+=180<O(c)?c+(0<c?360:-360):c}else F=a,B=d;oa.point(a,d);b(a,d)}function l(){oa.lineStart()}function e(){f(F,B);oa.lineEnd();1E-6<O(v)&&(m=
-(p=180));ha[0]=m;ha[1]=p;z=null}function g(a,b){return 0>(b-=a)?b+360:b}function h(a,b){return a[0]-b[0]}function s(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var m,q,p,t,u,F,B,z,v,x,ha,Z={point:a,lineStart:d,lineEnd:c,polygonStart:function(){Z.point=f;Z.lineStart=l;Z.lineEnd=e;v=0;oa.polygonStart()},polygonEnd:function(){oa.polygonEnd();Z.point=a;Z.lineStart=d;Z.lineEnd=c;0>Wa?(m=-(p=180),q=-(t=90)):1E-6<v?t=90:-1E-6>v&&(q=-90);ha[0]=m;ha[1]=p}};return function(a){t=p=-(m=q=Infinity);
x=[];n.geo.stream(a,Z);if(a=x.length){x.sort(h);for(var b=1,d=x[0],c,k=[d];b<a;++b)c=x[b],s(c[0],d)||s(c[1],d)?(g(d[0],c[1])>g(d[0],d[1])&&(d[1]=c[1]),g(c[0],d[1])>g(d[0],d[1])&&(d[0]=c[0])):k.push(d=c);var f=-Infinity,l;a=k.length-1;b=0;for(d=k[a];b<=a;d=c,++b)c=k[b],(l=g(d[1],c[0]))>f&&(f=l,m=c[0],p=d[1])}x=ha=null;return Infinity===m||Infinity===q?[[NaN,NaN],[NaN,NaN]]:[[m,q],[p,t]]}}();n.geo.centroid=function(a){qb=fb=Ia=Ja=Ba=ra=sa=ma=Na=Oa=Ca=0;n.geo.stream(a,wa);a=Na;var b=Oa,d=Ca,c=a*a+b*
b+d*d;return 1E-12>c&&(a=ra,b=sa,d=ma,1E-6>fb&&(a=Ia,b=Ja,d=Ba),c=a*a+b*b+d*d,1E-12>c)?[NaN,NaN]:[Math.atan2(b,a)*X,Ma(d/Math.sqrt(c))*X]};var qb,fb,Ia,Ja,Ba,ra,sa,ma,Na,Oa,Ca,wa={sphere:L,point:Zc,lineStart:ze,lineEnd:Ae,polygonStart:function(){wa.lineStart=Xg},polygonEnd:function(){wa.lineStart=ze}},Qe=Ee(rb,function(a){var b=NaN,d=NaN,c=NaN,f;return{lineStart:function(){a.lineStart();f=1},point:function(l,e){var g=0<l?H:-H,h=O(l-b);if(1E-6>O(h-H))a.point(b,d=0<(d+e)/2?aa:-aa),a.point(c,d),a.lineEnd(),
a.lineStart(),a.point(g,d),a.point(l,d),f=0;else if(c!==g&&h>=H){1E-6>O(b-c)&&(b-=1E-6*c);1E-6>O(l-g)&&(l-=1E-6*g);var h=b,s=d,n=l,m,q,p=Math.sin(h-n);d=1E-6<O(p)?Math.atan((Math.sin(s)*(q=Math.cos(e))*Math.sin(n)-Math.sin(e)*(m=Math.cos(s))*Math.sin(h))/(m*q*p)):(s+e)/2;a.point(c,d);a.lineEnd();a.lineStart();a.point(g,d);f=0}a.point(b=l,d=e);c=g},lineEnd:function(){a.lineEnd();b=d=NaN},clean:function(){return 2-f}}},function(a,b,d,c){null==a?(d*=aa,c.point(-H,d),c.point(0,d),c.point(H,d),c.point(H,
0),c.point(H,-d),c.point(0,-d),c.point(-H,-d),c.point(-H,0),c.point(-H,d)):1E-6<O(a[0]-b[0])?(a=a[0]<b[0]?H:-H,d=d*a/2,c.point(-a,d),c.point(0,d),c.point(a,d)):c.point(b[0],b[1])},[-H,-H/2]);n.geo.clipExtent=function(){var a,b,d,c,f,l,e={stream:function(a){f&&(f.valid=!1);f=l(a);f.valid=!0;return f},extent:function(g){if(!arguments.length)return[[a,b],[d,c]];l=He(a=+g[0][0],b=+g[0][1],d=+g[1][0],c=+g[1][1]);f&&(f.valid=!1,f=null);return e}};return e.extent([[0,0],[960,500]])};(n.geo.conicEqualArea=
function(){return ad(Ie)}).raw=Ie;n.geo.albers=function(){return n.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};n.geo.albersUsa=function(){function a(a){var b=a[0];a=a[1];f=null;(e(b,a),f)||(g(b,a),f)||h(b,a);return f}var b=n.geo.albers(),d=n.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=n.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,l={point:function(a,b){f=[a,b]}},e,g,h;a.invert=function(a){var f=
b.scale(),l=b.translate(),e=(a[0]-l[0])/f,f=(a[1]-l[1])/f;return(.12<=f&&.234>f&&-.425<=e&&-.214>e?d:.166<=f&&.234>f&&-.214<=e&&-.115>e?c:b).invert(a)};a.stream=function(a){var f=b.stream(a),l=d.stream(a),e=c.stream(a);return{point:function(a,b){f.point(a,b);l.point(a,b);e.point(a,b)},sphere:function(){f.sphere();l.sphere();e.sphere()},lineStart:function(){f.lineStart();l.lineStart();e.lineStart()},lineEnd:function(){f.lineEnd();l.lineEnd();e.lineEnd()},polygonStart:function(){f.polygonStart();l.polygonStart();
e.polygonStart()},polygonEnd:function(){f.polygonEnd();l.polygonEnd();e.polygonEnd()}}};a.precision=function(f){if(!arguments.length)return b.precision();b.precision(f);d.precision(f);c.precision(f);return a};a.scale=function(f){if(!arguments.length)return b.scale();b.scale(f);d.scale(.35*f);c.scale(f);return a.translate(b.translate())};a.translate=function(f){if(!arguments.length)return b.translate();var n=b.scale(),m=+f[0],q=+f[1];e=b.translate(f).clipExtent([[m-.455*n,q-.238*n],[m+.455*n,q+.238*
n]]).stream(l).point;g=d.translate([m-.307*n,q+.201*n]).clipExtent([[m-.425*n+1E-6,q+.12*n+1E-6],[m-.214*n-1E-6,q+.234*n-1E-6]]).stream(l).point;h=c.translate([m-.205*n,q+.212*n]).clipExtent([[m-.214*n+1E-6,q+.166*n+1E-6],[m-.115*n-1E-6,q+.234*n-1E-6]]).stream(l).point;return a};return a.scale(1070)};var uc,$b,Pa={point:L,lineStart:L,lineEnd:L,polygonStart:function(){$b=0;Pa.lineStart=ah},polygonEnd:function(){Pa.lineStart=Pa.lineEnd=Pa.point=L;uc+=O($b/2)}},vc,wc,xc,yc,yi={point:function(a,b){a<
vc&&(vc=a);a>xc&&(xc=a);b<wc&&(wc=b);b>yc&&(yc=b)},lineStart:L,lineEnd:L,polygonStart:L,polygonEnd:L},xa={point:Ya,lineStart:Ke,lineEnd:Le,polygonStart:function(){xa.lineStart=ch},polygonEnd:function(){xa.point=Ya;xa.lineStart=Ke;xa.lineEnd=Le}};n.geo.path=function(){function a(a){a&&("function"===typeof d&&e.pointRadius(+d.apply(this,arguments)),g&&g.valid||(g=l(e)),n.geo.stream(a,g));return e.result()}function b(){g=null;return a}var d=4.5,c,f,l,e,g;a.area=function(a){uc=0;n.geo.stream(a,l(Pa));
return uc};a.centroid=function(a){Ia=Ja=Ba=ra=sa=ma=Na=Oa=Ca=0;n.geo.stream(a,l(xa));return Ca?[Na/Ca,Oa/Ca]:ma?[ra/ma,sa/ma]:Ba?[Ia/Ba,Ja/Ba]:[NaN,NaN]};a.bounds=function(a){xc=yc=-(vc=wc=Infinity);n.geo.stream(a,l(yi));return[[vc,wc],[xc,yc]]};a.projection=function(a){if(!arguments.length)return c;l=(c=a)?a.stream||eh(a):P;return b()};a.context=function(a){if(!arguments.length)return f;e=null==(f=a)?new bh:new dh(a);"function"!==typeof d&&e.pointRadius(d);return b()};a.pointRadius=function(b){if(!arguments.length)return d;
d="function"===typeof b?b:(e.pointRadius(+b),+b);return a};return a.projection(n.geo.albersUsa()).context(null)};n.geo.transform=function(a){return{stream:function(b){b=new Pe(b);for(var d in a)b[d]=a[d];return b}}};Pe.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
n.geo.projection=Qa;n.geo.projectionMutator=bd;(n.geo.equirectangular=function(){return Qa(sb)}).raw=sb.invert=sb;n.geo.rotation=function(a){function b(b){b=a(b[0]*N,b[1]*N);return b[0]*=X,b[1]*=X,b}a=cd(a[0]%360*N,a[1]*N,2<a.length?a[2]*N:0);b.invert=function(b){b=a.invert(b[0]*N,b[1]*N);return b[0]*=X,b[1]*=X,b};return b};Re.invert=sb;n.geo.circle=function(){function a(){var a="function"===typeof b?b.apply(this,arguments):b,d=cd(-a[0]*N,-a[1]*N,0).invert,c=[];f(null,null,1,{point:function(a,b){c.push(a=
d(a,b));a[0]*=X;a[1]*=X}});return{type:"Polygon",coordinates:[c]}}var b=[0,0],d,c=6,f;a.origin=function(d){if(!arguments.length)return b;b=d;return a};a.angle=function(b){if(!arguments.length)return d;f=$c((d=+b)*N,c*N);return a};a.precision=function(b){if(!arguments.length)return c;f=$c(d*N,(c=+b)*N);return a};return a.angle(90)};n.geo.distance=function(a,b){var d=(b[0]-a[0])*N,c=a[1]*N,f=b[1]*N,l=Math.sin(d),d=Math.cos(d),e=Math.sin(c),c=Math.cos(c),g=Math.sin(f),f=Math.cos(f),h;return Math.atan2(Math.sqrt((h=
f*l)*h+(h=c*g-e*f*d)*h),e*g+c*f*d)};n.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return n.range(Math.ceil(l/p)*p,f,p).map(B).concat(n.range(Math.ceil(s/t)*t,h,t).map(z)).concat(n.range(Math.ceil(c/m)*m,d,m).filter(function(a){return 1E-6<O(a%p)}).map(u)).concat(n.range(Math.ceil(g/q)*q,e,q).filter(function(a){return 1E-6<O(a%t)}).map(F))}var d,c,f,l,e,g,h,s,m=10,q=m,p=90,t=360,u,F,B,z,v=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",
coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[B(l).concat(z(h).slice(1),B(f).reverse().slice(1),z(s).reverse().slice(1))]}};a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()};a.majorExtent=function(b){if(!arguments.length)return[[l,s],[f,h]];l=+b[0][0];f=+b[1][0];s=+b[0][1];h=+b[1][1];l>f&&(b=l,l=f,f=b);s>h&&(b=s,s=h,h=b);return a.precision(v)};a.minorExtent=function(b){if(!arguments.length)return[[c,g],[d,e]];c=+b[0][0];d=+b[1][0];
g=+b[0][1];e=+b[1][1];c>d&&(b=c,c=d,d=b);g>e&&(b=g,g=e,e=b);return a.precision(v)};a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()};a.majorStep=function(b){if(!arguments.length)return[p,t];p=+b[0];t=+b[1];return a};a.minorStep=function(b){if(!arguments.length)return[m,q];m=+b[0];q=+b[1];return a};a.precision=function(b){if(!arguments.length)return v;v=+b;u=We(g,e,90);F=Xe(c,d,v);B=We(s,h,90);z=Xe(l,f,v);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,
-80.000001],[180,80.000001]])};n.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[d||b.apply(this,arguments),f||c.apply(this,arguments)]}}var b=dd,d,c=ed,f;a.distance=function(){return n.geo.distance(d||b.apply(this,arguments),f||c.apply(this,arguments))};a.source=function(c){if(!arguments.length)return b;b=c;d="function"===typeof c?null:c;return a};a.target=function(b){if(!arguments.length)return c;c=b;f="function"===typeof b?null:b;return a};a.precision=function(){return arguments.length?
a:0};return a};n.geo.interpolate=function(a,b){return fh(a[0]*N,a[1]*N,b[0]*N,b[1]*N)};n.geo.length=function(a){zc=0;n.geo.stream(a,ob);return zc};var zc,ob={sphere:L,point:L,lineStart:function(){function a(a,l){var e=Math.sin(l*=N),g=Math.cos(l),h=O((a*=N)-b),s=Math.cos(h);zc+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=c*e-d*g*s)*h),d*e+c*g*s);b=a;d=e;c=g}var b,d,c;ob.point=function(f,l){b=f*N;d=Math.sin(l*=N);c=Math.cos(l);ob.point=a};ob.lineEnd=function(){ob.point=ob.lineEnd=L}},lineEnd:L,polygonStart:L,
polygonEnd:L},ig=tb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(n.geo.azimuthalEqualArea=function(){return Qa(ig)}).raw=ig;var jg=tb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},P);(n.geo.azimuthalEquidistant=function(){return Qa(jg)}).raw=jg;(n.geo.conicConformal=function(){return ad(Ye)}).raw=Ye;(n.geo.conicEquidistant=function(){return ad(Ze)}).raw=Ze;var kg=tb(function(a){return 1/a},Math.atan);(n.geo.gnomonic=function(){return Qa(kg)}).raw=kg;ac.invert=
function(a,b){return[a,2*Math.atan(Math.exp(b))-aa]};(n.geo.mercator=function(){return $e(ac)}).raw=ac;var lg=tb(function(){return 1},Math.asin);(n.geo.orthographic=function(){return Qa(lg)}).raw=lg;var mg=tb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(n.geo.stereographic=function(){return Qa(mg)}).raw=mg;fd.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-aa]};(n.geo.transverseMercator=function(){var a=$e(fd),b=a.center,d=a.rotate;a.center=function(a){return a?b([-a[1],
a[0]]):(a=b(),[a[1],-a[0]])};a.rotate=function(a){return a?d([a[0],a[1],2<a.length?a[2]+90:90]):(a=d(),[a[0],a[1],a[2]-90])};return d([0,0,90])}).raw=fd;n.geom={};n.geom.hull=function(a){function b(a){if(3>a.length)return[];var b=W(d),e=W(c),g,h=a.length,s=[],n=[];for(g=0;g<h;g++)s.push([+b.call(this,a[g],g),+e.call(this,a[g],g),g]);s.sort(gh);for(g=0;g<h;g++)n.push([s[g][0],-s[g][1]]);var b=af(s),n=af(n),e=n[0]===b[0],h=n[n.length-1]===b[b.length-1],m=[];for(g=b.length-1;0<=g;--g)m.push(a[s[b[g]][2]]);
for(g=+e;g<n.length-h;++g)m.push(a[s[n[g]][2]]);return m}var d=gb,c=ub;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(d=a,b):d};b.y=function(a){return arguments.length?(c=a,b):c};return b};n.geom.polygon=function(a){Eb(a,Ac);return a};var Ac=n.geom.polygon.prototype=[];Ac.area=function(){for(var a=-1,b=this.length,d,c=this[b-1],f=0;++a<b;)d=c,c=this[a],f+=d[1]*c[0]-d[0]*c[1];return.5*f};Ac.centroid=function(a){var b=-1,d=this.length,c=0,f=0,l,e=this[d-1],g;for(arguments.length||
(a=-1/(6*this.area()));++b<d;)l=e,e=this[b],g=l[0]*e[1]-e[0]*l[1],c+=(l[0]+e[0])*g,f+=(l[1]+e[1])*g;return[c*a,f*a]};Ac.clip=function(a){for(var b,d=bf(a),c=-1,f=this.length-bf(this),l,e,g=this[f-1],h,s,n;++c<f;){b=a.slice();a.length=0;h=this[c];s=b[(e=b.length-d)-1];for(l=-1;++l<e;)n=b[l],gd(n,g,h)?(gd(s,g,h)||a.push(hd(s,n,g,h)),a.push(n)):gd(s,g,h)&&a.push(hd(s,n,g,h)),s=n;d&&a.push(a[0]);g=h}return a};var kb,Za,ib,df=[],jd,vb,hf=[];ff.prototype.prepare=function(){for(var a=this.edges,b=a.length,
d;b--;)d=a[b].edge,d.b&&d.a||a.splice(b,1);a.sort(gf);return a.length};dc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};kd.prototype={insert:function(a,b){var d,c,f;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;d=a}else this._?(a=kf(this._),b.P=null,b.N=a,a.P=a.L=b,d=a):(b.P=b.N=null,this._=b,d=null);b.L=b.R=null;b.U=d;b.C=!0;for(a=b;d&&d.C;)c=d.U,d===
c.L?(f=c.R)&&f.C?(d.C=f.C=!1,c.C=!0,a=c):(a===d.R&&(xb(this,d),a=d,d=a.U),d.C=!1,c.C=!0,yb(this,c)):(f=c.L)&&f.C?(d.C=f.C=!1,c.C=!0,a=c):(a===d.L&&(yb(this,d),a=d,d=a.U),d.C=!1,c.C=!0,xb(this,c)),d=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,d=a.L,c=a.R,f,l;f=d?c?kf(c):d:c;b?b.L===a?b.L=f:b.R=f:this._=f;d&&c?(l=f.C,f.C=a.C,f.L=d,d.U=f,f!==c?(b=f.U,f.U=a.U,a=f.R,b.L=a,f.R=c,c.U=f):(f.U=b,b=f,a=f.R)):(l=a.C,a=f);a&&(a.U=b);if(!l)if(a&&a.C)a.C=!1;else{do{if(a===
this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,xb(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,yb(this,a),a=b.R);a.C=b.C;b.C=a.R.C=!1;xb(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,yb(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,xb(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;yb(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};n.geom.voronoi=function(a){function b(a){var b=Array(a.length),c=g[0][0],f=g[0][1],k=g[1][0],l=g[1][1];
ld(d(a),g).cells.forEach(function(d,e){var g=d.edges,h=d.site;(b[e]=g.length?g.map(function(a){a=a.start();return[a.x,a.y]}):h.x>=c&&h.x<=k&&h.y>=f&&h.y<=l?[[c,l],[k,l],[k,f],[c,f]]:[]).point=a[e]});return b}function d(a){return a.map(function(a,b){return{x:1E-6*Math.round(l(a,b)/1E-6),y:1E-6*Math.round(e(a,b)/1E-6),i:b}})}var c=gb,f=ub,l=c,e=f,g=Bc;if(a)return b(a);b.links=function(a){return ld(d(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})};
b.triangles=function(a){var b=[];ld(d(a)).cells.forEach(function(d,c){for(var f=d.site,k=d.edges.sort(gf),l=-1,e=k.length,g,h=k[e-1].edge,h=h.l===f?h.r:h.l;++l<e;)g=h,h=k[l].edge,h=h.l===f?h.r:h.l,c<g.i&&c<h.i&&0>(f.x-h.x)*(g.y-f.y)-(f.x-g.x)*(h.y-f.y)&&b.push([a[c],a[g.i],a[h.i]])});return b};b.x=function(a){return arguments.length?(l=W(c=a),b):c};b.y=function(a){return arguments.length?(e=W(f=a),b):f};b.clipExtent=function(a){if(!arguments.length)return g===Bc?null:g;g=null==a?Bc:a;return b};b.size=
function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):g===Bc?null:g&&g[1]};return b};var Bc=[[-1E6,-1E6],[1E6,1E6]];n.geom.delaunay=function(a){return n.geom.voronoi().triangles(a)};n.geom.quadtree=function(a,b,d,c,f){function l(a){function l(a,b,d,c,f,k,e,g){if(!isNaN(d)&&!isNaN(c))if(a.leaf){var h=a.x,r=a.y;if(null!=h){if(!(.01>O(h-d)+O(r-c))){var s=a.point;a.x=a.y=a.point=null;n(a,s,h,r,f,k,e,g)}n(a,b,d,c,f,k,e,g)}else a.x=d,a.y=c,a.point=b}else n(a,b,d,c,f,k,e,g)}function n(a,b,d,c,f,
k,e,g){var h=.5*(f+e),r=.5*(k+g),s=d>=h,m=c>=r,w=m<<1|s;a.leaf=!1;a=a.nodes[w]||(a.nodes[w]=lf());s?f=h:e=h;m?k=r:g=r;l(a,b,d,c,f,k,e,g)}var m,q=W(e),p=W(g),t,B,z,u,v,x,Z,y;if(null!=b)v=b,x=d,Z=c,y=f;else if(Z=y=-(v=x=Infinity),t=[],B=[],u=a.length,h)for(z=0;z<u;++z)m=a[z],m.x<v&&(v=m.x),m.y<x&&(x=m.y),m.x>Z&&(Z=m.x),m.y>y&&(y=m.y),t.push(m.x),B.push(m.y);else for(z=0;z<u;++z){var Q=+q(m=a[z],z);m=+p(m,z);Q<v&&(v=Q);m<x&&(x=m);Q>Z&&(Z=Q);m>y&&(y=m);t.push(Q);B.push(m)}Q=Z-v;m=y-x;Q>m?y=x+Q:Z=v+m;
var A=lf();A.add=function(a){l(A,a,+q(a,++z),+p(a,z),v,x,Z,y)};A.visit=function(a){zb(a,A,v,x,Z,y)};A.find=function(a){return oh(A,a[0],a[1],v,x,Z,y)};z=-1;if(null==b){for(;++z<u;)l(A,a[z],t[z],B[z],v,x,Z,y);--z}else a.forEach(A.add);t=B=a=m=null;return A}var e=gb,g=ub,h;if(h=arguments.length)return e=mh,g=nh,3===h&&(f=d,c=b,d=b=0),l(a);l.x=function(a){return arguments.length?(e=a,l):e};l.y=function(a){return arguments.length?(g=a,l):g};l.extent=function(a){if(!arguments.length)return null==b?null:
[[b,d],[c,f]];null==a?b=d=c=f=null:(b=+a[0][0],d=+a[0][1],c=+a[1][0],f=+a[1][1]);return l};l.size=function(a){if(!arguments.length)return null==b?null:[c-b,f-d];null==a?b=d=c=f=null:(b=d=0,c=+a[0],f=+a[1]);return l};return l};n.interpolateRgb=md;n.interpolateObject=mf;n.interpolateNumber=Ka;n.interpolateString=nf;var nd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,od=new RegExp(nd.source,"g");n.interpolate=$a;n.interpolators=[function(a,b){var d=typeof b;return("string"===d?Ib.has(b.toLowerCase())||
/^(#|rgb\(|hsl\()/i.test(b)?md:nf:b instanceof Ua?md:Array.isArray(b)?ec:"object"===d&&isNaN(b)?mf:Ka)(a,b)}];n.interpolateArray=ec;var ng=function(){return P},zi=n.map({linear:ng,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return qh},cubic:function(){return rh},sin:function(){return th},exp:function(){return uh},circle:function(){return vh},elastic:function(a,b){var d;2>arguments.length&&(b=.45);arguments.length?d=b/pa*Math.asin(1/a):(a=1,d=b/4);return function(c){return 1+
a*Math.pow(2,-10*c)*Math.sin((c-d)*pa/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return wh}}),Ai=n.map({"in":P,out:of,"in-out":pf,"out-in":function(a){return pf(of(a))}});n.ease=function(a){var b=a.indexOf("-"),d=0<=b?a.slice(0,b):a,b=0<=b?a.slice(b+1):"in",d=zi.get(d)||ng,b=Ai.get(b)||P;return ph(b(d.apply(null,cg.call(arguments,1))))};n.interpolateHcl=function(a,b){a=n.hcl(a);b=n.hcl(b);var d=a.h,c=a.c,f=a.l,l=b.h-d,e=b.c-c,g=b.l-f;isNaN(e)&&
(e=0,c=isNaN(c)?b.c:c);isNaN(l)?(l=0,d=isNaN(d)?b.h:d):180<l?l-=360:-180>l&&(l+=360);return function(a){return Mc(d+l*a,c+e*a,f+g*a)+""}};n.interpolateHsl=function(a,b){a=n.hsl(a);b=n.hsl(b);var d=a.h,c=a.s,f=a.l,l=b.h-d,e=b.s-c,g=b.l-f;isNaN(e)&&(e=0,c=isNaN(c)?b.s:c);isNaN(l)?(l=0,d=isNaN(d)?b.h:d):180<l?l-=360:-180>l&&(l+=360);return function(a){return Lc(d+l*a,c+e*a,f+g*a)+""}};n.interpolateLab=function(a,b){a=n.lab(a);b=n.lab(b);var d=a.l,c=a.a,f=a.b,l=b.l-d,e=b.a-c,g=b.b-f;return function(a){return ie(d+
l*a,c+e*a,f+g*a)+""}};n.interpolateRound=qf;n.transform=function(a){var b=ia.createElementNS(n.ns.prefix.svg,"g");return(n.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new rf(c?c.matrix:Bi)})(a)};rf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Bi={a:1,b:0,c:0,d:1,e:0,f:0};n.interpolateTransform=tf;n.layout={};n.layout.bundle=function(){return function(a){for(var b=
[],d=-1,c=a.length;++d<c;)b.push(Dh(a[d]));return b}};n.layout.chord=function(){function a(){var a={},d=[],q=n.range(e),p=[],t,B,z,u,v;c=[];f=[];t=0;for(u=-1;++u<e;){B=0;for(v=-1;++v<e;)B+=l[u][v];d.push(B);p.push(n.range(e));t+=B}h&&q.sort(function(a,b){return h(d[a],d[b])});s&&p.forEach(function(a,b){a.sort(function(a,d){return s(l[b][a],l[b][d])})});t=(pa-g*e)/t;B=0;for(u=-1;++u<e;){z=B;for(v=-1;++v<e;){var x=q[u],y=p[x][v],ea=l[x][y],Q=B,A=B+=ea*t;a[x+"-"+y]={index:x,subindex:y,startAngle:Q,endAngle:A,
value:ea}}f[x]={index:x,startAngle:z,endAngle:B,value:d[x]};B+=g}for(u=-1;++u<e;)for(v=u-1;++v<e;)q=a[u+"-"+v],p=a[v+"-"+u],(q.value||p.value)&&c.push(q.value<p.value?{source:p,target:q}:{source:q,target:p});m&&b()}function b(){c.sort(function(a,b){return m((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var d={},c,f,l,e,g=0,h,s,m;d.matrix=function(a){if(!arguments.length)return l;e=(l=a)&&l.length;c=f=null;return d};d.padding=function(a){if(!arguments.length)return g;g=a;c=
f=null;return d};d.sortGroups=function(a){if(!arguments.length)return h;h=a;c=f=null;return d};d.sortSubgroups=function(a){if(!arguments.length)return s;s=a;c=null;return d};d.sortChords=function(a){if(!arguments.length)return m;m=a;c&&b();return d};d.chords=function(){c||a();return c};d.groups=function(){f||a();return f};return d};n.layout.force=function(){function a(a){return function(b,d,c,f){if(b.point!==a){c=b.cx-a.x;var k=b.cy-a.y;d=f-d;f=c*c+k*k;if(d*d/u<f)return f<p&&(d=b.charge/f,a.px-=c*
d,a.py-=k*d),!0;b.point&&f&&f<p&&(d=b.pointCharge/f,a.px-=c*d,a.py-=k*d)}return!b.charge}}function b(a){a.px=n.event.x;a.py=n.event.y;d.resume()}var d={},c=n.dispatch("start","tick","end"),f,l=[1,1],e,g,h=.9,s=Ci,m=Di,q=-30,p=Ei,t=.1,u=.64,v=[],B=[],z,x,y;d.tick=function(){if(.005>(g*=.99))return f=null,c.end({type:"end",alpha:g=0}),!0;var b=v.length,d=B.length,e,s,m,p,I,u,K;for(e=0;e<d;++e)if(s=B[e],m=s.source,p=s.target,u=p.x-m.x,K=p.y-m.y,I=u*u+K*K)I=g*x[e]*((I=Math.sqrt(I))-z[e])/I,u*=I,K*=I,
p.x-=u*(I=m.weight+p.weight?m.weight/(m.weight+p.weight):.5),p.y-=K*I,m.x+=u*(I=1-I),m.y+=K*I;if(I=g*t)if(u=l[0]/2,K=l[1]/2,e=-1,I)for(;++e<b;)s=v[e],s.x+=(u-s.x)*I,s.y+=(K-s.y)*I;if(q)for(vf(d=n.geom.quadtree(v),g,y),e=-1;++e<b;)(s=v[e]).fixed||d.visit(a(s));for(e=-1;++e<b;)s=v[e],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*h,s.y-=(s.py-(s.py=s.y))*h);c.tick({type:"tick",alpha:g})};d.nodes=function(a){if(!arguments.length)return v;v=a;return d};d.links=function(a){if(!arguments.length)return B;
B=a;return d};d.size=function(a){if(!arguments.length)return l;l=a;return d};d.linkDistance=function(a){if(!arguments.length)return s;s="function"===typeof a?a:+a;return d};d.distance=d.linkDistance;d.linkStrength=function(a){if(!arguments.length)return m;m="function"===typeof a?a:+a;return d};d.friction=function(a){if(!arguments.length)return h;h=+a;return d};d.charge=function(a){if(!arguments.length)return q;q="function"===typeof a?a:+a;return d};d.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(p);
p=a*a;return d};d.gravity=function(a){if(!arguments.length)return t;t=+a;return d};d.theta=function(a){if(!arguments.length)return Math.sqrt(u);u=a*a;return d};d.alpha=function(a){if(!arguments.length)return g;a=+a;g?0<a?g=a:(f.c=null,f.t=NaN,f=null,c.end({type:"end",alpha:g=0})):0<a&&(c.start({type:"start",alpha:g=a}),f=Kb(d.tick));return d};d.start=function(){function a(d,k){if(!g){g=Array(c);for(l=0;l<c;++l)g[l]=[];for(l=0;l<f;++l){var e=B[l];g[e.source.index].push(e.target);g[e.target.index].push(e.source)}}for(var e=
g[b],l=-1,h=e.length,r;++l<h;)if(!isNaN(r=e[l][d]))return r;return Math.random()*k}var b,c=v.length,f=B.length,k=l[0],e=l[1],g,h;for(b=0;b<c;++b)(h=v[b]).index=b,h.weight=0;for(b=0;b<f;++b)h=B[b],"number"==typeof h.source&&(h.source=v[h.source]),"number"==typeof h.target&&(h.target=v[h.target]),++h.source.weight,++h.target.weight;for(b=0;b<c;++b)h=v[b],isNaN(h.x)&&(h.x=a("x",k)),isNaN(h.y)&&(h.y=a("y",e)),isNaN(h.px)&&(h.px=h.x),isNaN(h.py)&&(h.py=h.y);z=[];if("function"===typeof s)for(b=0;b<f;++b)z[b]=
+s.call(this,B[b],b);else for(b=0;b<f;++b)z[b]=s;x=[];if("function"===typeof m)for(b=0;b<f;++b)x[b]=+m.call(this,B[b],b);else for(b=0;b<f;++b)x[b]=m;y=[];if("function"===typeof q)for(b=0;b<c;++b)y[b]=+q.call(this,v[b],b);else for(b=0;b<c;++b)y[b]=q;return d.resume()};d.resume=function(){return d.alpha(.1)};d.stop=function(){return d.alpha(0)};d.drag=function(){e||(e=n.behavior.drag().origin(P).on("dragstart.force",Eh).on("drag.force",b).on("dragend.force",Fh));if(!arguments.length)return e;this.on("mouseover.force",
Gh).on("mouseout.force",Hh).call(e)};return n.rebind(d,c,"on")};var Ci=20,Di=1,Ei=Infinity;n.layout.hierarchy=function(){function a(f){var e=[f],g=[],h;for(f.depth=0;null!=(h=e.pop());)if(g.push(h),(s=d.call(a,h,h.depth))&&(n=s.length)){for(var n,s,m;0<=--n;)e.push(m=s[n]),m.parent=h,m.depth=h.depth+1;c&&(h.value=0);h.children=s}else c&&(h.value=+c.call(a,h,h.depth)||0),delete h.children;Da(f,function(a){var d,f;b&&(d=a.children)&&d.sort(b);c&&(f=a.parent)&&(f.value+=a.value)});return g}var b=Lh,
d=Jh,c=Kh;a.sort=function(d){if(!arguments.length)return b;b=d;return a};a.children=function(b){if(!arguments.length)return d;d=b;return a};a.value=function(b){if(!arguments.length)return c;c=b;return a};a.revalue=function(b){c&&(Bb(b,function(a){a.children&&(a.value=0)}),Da(b,function(b){var d;b.children||(b.value=+c.call(a,b,b.depth)||0);if(d=b.parent)d.value+=b.value}));return b};return a};n.layout.partition=function(){function a(b,d,c,f){var k=b.children;b.x=d;b.y=b.depth*f;b.dx=c;b.dy=f;if(k&&
(g=k.length)){var e=-1,g,h;for(c=b.value?c/b.value:0;++e<g;)a(h=k[e],d,b=h.value*c,f),d+=b}}function b(a){a=a.children;var d=0;if(a&&(f=a.length))for(var c=-1,f;++c<f;)d=Math.max(d,b(a[c]));return 1+d}function d(d,e){var g=c.call(this,d,e);a(g[0],0,f[0],f[1]/b(g[0]));return g}var c=n.layout.hierarchy(),f=[1,1];d.size=function(a){if(!arguments.length)return f;f=a;return d};return Ab(d,c)};n.layout.pie=function(){function a(g){var h=g.length,m=g.map(function(d,c){return+b.call(a,d,c)}),s=+("function"===
typeof c?c.apply(this,arguments):c),q=("function"===typeof f?f.apply(this,arguments):f)-s,p=Math.min(Math.abs(q)/h,+("function"===typeof e?e.apply(this,arguments):e)),t=p*(0>q?-1:1),u=n.sum(m),v=u?(q-h*t)/u:0,h=n.range(h),F=[],B;null!=d&&h.sort(d===og?function(a,b){return m[b]-m[a]}:function(a,b){return d(g[a],g[b])});h.forEach(function(a){F[a]={data:g[a],value:B=m[a],startAngle:s,endAngle:s+=B*v+t,padAngle:p}});return F}var b=Number,d=og,c=0,f=pa,e=0;a.value=function(d){if(!arguments.length)return b;
b=d;return a};a.sort=function(b){if(!arguments.length)return d;d=b;return a};a.startAngle=function(b){if(!arguments.length)return c;c=b;return a};a.endAngle=function(b){if(!arguments.length)return f;f=b;return a};a.padAngle=function(b){if(!arguments.length)return e;e=b;return a};return a};var og={};n.layout.stack=function(){function a(h,m){if(!(u=h.length))return h;var s=h.map(function(d,c){return b.call(a,d,c)}),q=s.map(function(b){return b.map(function(b,d){return[e.call(a,b,d),g.call(a,b,d)]})}),
p=d.call(a,q,m),s=n.permute(s,p),q=n.permute(q,p),p=c.call(a,q,m),t=s[0].length,u,v,F,B;for(F=0;F<t;++F)for(f.call(a,s[0][F],B=p[F],q[0][F][1]),v=1;v<u;++v)f.call(a,s[v][F],B+=q[v-1][F][1],q[v][F][1]);return h}var b=P,d=pd,c=qd,f=Oh,e=Mh,g=Nh;a.values=function(d){if(!arguments.length)return b;b=d;return a};a.order=function(b){if(!arguments.length)return d;d="function"===typeof b?b:Fi.get(b)||pd;return a};a.offset=function(b){if(!arguments.length)return c;c="function"===typeof b?b:Gi.get(b)||qd;return a};
a.x=function(b){if(!arguments.length)return e;e=b;return a};a.y=function(b){if(!arguments.length)return g;g=b;return a};a.out=function(b){if(!arguments.length)return f;f=b;return a};return a};var Fi=n.map({"inside-out":function(a){var b=a.length,d,c=a.map(Ph),f=a.map(Qh),e=n.range(b).sort(function(a,b){return c[a]-c[b]}),g=0,h=0,m=[],s=[];for(a=0;a<b;++a)d=e[a],g<h?(g+=f[d],m.push(d)):(h+=f[d],s.push(d));return s.reverse().concat(m)},reverse:function(a){return n.range(a.length).reverse()},"default":pd}),
Gi=n.map({silhouette:function(a){var b=a.length,d=a[0].length,c=[],f=0,e,g,h,n=[];for(g=0;g<d;++g){for(h=e=0;e<b;e++)h+=a[e][g][1];h>f&&(f=h);c.push(h)}for(g=0;g<d;++g)n[g]=(f-c[g])/2;return n},wiggle:function(a){var b=a.length,d=a[0],c=d.length,f,e,g,h,n,s,m,q,p,t=[];t[0]=q=p=0;for(e=1;e<c;++e){for(h=f=0;f<b;++f)h+=a[f][e][1];n=f=0;for(m=d[e][0]-d[e-1][0];f<b;++f){g=0;for(s=(a[f][e][1]-a[f][e-1][1])/(2*m);g<f;++g)s+=(a[g][e][1]-a[g][e-1][1])/m;n+=s*a[f][e][1]}t[e]=q-=h?n/h*m:0;q<p&&(p=q)}for(e=0;e<
c;++e)t[e]-=p;return t},expand:function(a){var b=a.length,d=a[0].length,c=1/b,f,e,g,h=[];for(e=0;e<d;++e){for(g=f=0;f<b;f++)g+=a[f][e][1];if(g)for(f=0;f<b;f++)a[f][e][1]/=g;else for(f=0;f<b;f++)a[f][e][1]=c}for(e=0;e<d;++e)h[e]=0;return h},zero:qd});n.layout.histogram=function(){function a(a,e){var g=[],h=a.map(d,this),s=c.call(this,h,e),m=f.call(this,s,h,e),q;e=-1;for(var p=h.length,t=m.length-1,u=b?1:1/p;++e<t;)q=g[e]=[],q.dx=m[e+1]-(q.x=m[e]),q.y=0;if(0<t)for(e=-1;++e<p;)q=h[e],q>=s[0]&&q<=s[1]&&
(q=g[n.bisect(m,q,1,t)-1],q.y+=u,q.push(a[e]));return g}var b=!0,d=Number,c=Th,f=Sh;a.value=function(b){if(!arguments.length)return d;d=b;return a};a.range=function(b){if(!arguments.length)return c;c=W(b);return a};a.bins=function(b){if(!arguments.length)return f;f="number"===typeof b?function(a){return wf(a,b)}:W(b);return a};a.frequency=function(d){if(!arguments.length)return b;b=!!d;return a};return a};n.layout.pack=function(){function a(a,e){var g=b.call(this,a,e),h=g[0],s=c[0],n=c[1],m=null==
f?Math.sqrt:"function"===typeof f?f:function(){return f};h.x=h.y=0;Da(h,function(a){a.r=+m(a.value)});Da(h,zf);if(d){var q=d*(f?1:Math.max(2*h.r/s,2*h.r/n))/2;Da(h,function(a){a.r+=q});Da(h,zf);Da(h,function(a){a.r-=q})}Bf(h,s/2,n/2,f?1:1/Math.max(2*h.r/s,2*h.r/n));return g}var b=n.layout.hierarchy().sort(Uh),d=0,c=[1,1],f;a.size=function(b){if(!arguments.length)return c;c=b;return a};a.radius=function(b){if(!arguments.length)return f;f=null==b||"function"===typeof b?b:+b;return a};a.padding=function(b){if(!arguments.length)return d;
d=+b;return a};return Ab(a,b)};n.layout.tree=function(){function a(a,n){var q=e.call(this,a,n),p=q[0],t=b(p);Da(t,d);t.parent.m=-t.z;Bb(t,c);if(m)Bb(p,f);else{var u=p,v=p,B=p;Bb(p,function(a){a.x<u.x&&(u=a);a.x>v.x&&(v=a);a.depth>B.depth&&(B=a)});var z=g(u,v)/2-u.x,x=h[0]/(v.x+g(v,u)/2+z),y=h[1]/(B.depth||1);Bb(p,function(a){a.x=(a.x+z)*x;a.y=a.depth*y})}return q}function b(a){a={A:null,children:[a]};for(var b=[a],d;null!=(d=b.pop());)for(var c=d.children,f,e=0,k=c.length;e<k;++e)b.push((c[e]=f={_:c[e],
parent:d,children:(f=c[e].children)&&f.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:e}).a=f);return a.children[0]}function d(a){var b=a.children,d=a.parent.children,c=a.i?d[a.i-1]:null;if(b.length){for(var f=0,e=0,k=a.children,l=k.length,h;0<=--l;)h=k[l],h.z+=f,h.m+=f,f+=h.s+(e+=h.c);b=(b[0].z+b[b.length-1].z)/2;c?(a.z=c.z+g(a._,c._),a.m=a.z-b):a.z=b}else c&&(a.z=c.z+g(a._,c._));b=a.parent;d=a.parent.A||d[0];if(c){e=f=a;k=f.parent.children[0];l=f.m;h=e.m;for(var n=c.m,m=k.m,r;c=td(c),f=sd(f),
c&&f;){k=sd(k);e=td(e);e.a=a;r=c.z+n-f.z-l+g(c._,f._);if(0<r){var q=c.a.parent===a.parent?c.a:d,p=a,w=r,t=w/(p.i-q.i);p.c-=t;p.s+=w;q.c+=t;p.z+=w;p.m+=w;l+=r;h+=r}n+=c.m;l+=f.m;m+=k.m;h+=e.m}c&&!td(e)&&(e.t=c,e.m+=n-h);f&&!sd(k)&&(k.t=f,k.m+=l-m,d=a)}b.A=d}function c(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function f(a){a.x*=h[0];a.y=a.depth*h[1]}var e=n.layout.hierarchy().sort(null).value(null),g=Cf,h=[1,1],m=null;a.separation=function(b){if(!arguments.length)return g;g=b;return a};a.size=function(b){if(!arguments.length)return m?
null:h;m=null==(h=b)?f:null;return a};a.nodeSize=function(b){if(!arguments.length)return m?h:null;m=null==(h=b)?null:f;return a};return Ab(a,e)};n.layout.cluster=function(){function a(a,e){var g=b.call(this,a,e),h=g[0],n,m=0;Da(h,function(a){var b=a.children;b&&b.length?(a.x=Yh(b),a.y=Xh(b)):(a.x=n?m+=d(a,n):0,a.y=0,n=a)});var q=Df(h),p=Ef(h),t=q.x-d(q,p)/2,u=p.x+d(p,q)/2;Da(h,f?function(a){a.x=(a.x-h.x)*c[0];a.y=(h.y-a.y)*c[1]}:function(a){a.x=(a.x-t)/(u-t)*c[0];a.y=(1-(h.y?a.y/h.y:1))*c[1]});return g}
var b=n.layout.hierarchy().sort(null).value(null),d=Cf,c=[1,1],f=!1;a.separation=function(b){if(!arguments.length)return d;d=b;return a};a.size=function(b){if(!arguments.length)return f?null:c;f=null==(c=b);return a};a.nodeSize=function(b){if(!arguments.length)return f?c:null;f=null!=(c=b);return a};return Ab(a,b)};n.layout.treemap=function(){function a(a,b){for(var d=-1,c=a.length,f,e;++d<c;)e=(f=a[d]).value*(0>b?0:b),f.area=isNaN(e)||0>=e?0:e}function b(d){var f=d.children;if(f&&f.length){var e=
s(d),g=[],l=f.slice(),h=Infinity,n,m="slice"===t?e.dx:"dice"===t?e.dy:"slice-dice"===t?d.depth&1?e.dy:e.dx:Math.min(e.dx,e.dy);a(l,e.dx*e.dy/d.value);for(g.area=0;0<(d=l.length);){g.push(d=l[d-1]);g.area+=d.area;if(!(d="squarify"!==t)){n=m;d=g.area;for(var r=void 0,q=0,p=Infinity,w=-1,v=g.length;++w<v;)if(r=g[w].area)r<p&&(p=r),r>q&&(q=r);d*=d;n*=n;d=(n=d?Math.max(n*q*u/d,d/(n*p*u)):Infinity)<=h}d?(l.pop(),h=n):(g.area-=g.pop().area,c(g,m,e,!1),m=Math.min(e.dx,e.dy),g.length=g.area=0,h=Infinity)}g.length&&
(c(g,m,e,!0),g.length=g.area=0);f.forEach(b)}}function d(b){var f=b.children;if(f&&f.length){var e=s(b),g=f.slice(),l=[];a(g,e.dx*e.dy/b.value);for(l.area=0;b=g.pop();)l.push(b),l.area+=b.area,null!=b.z&&(c(l,b.z?e.dx:e.dy,e,!g.length),l.length=l.area=0);f.forEach(d)}}function c(a,b,d,f){var e=-1,k=a.length,l=d.x,h=d.y,n=b?g(a.area/b):0,m;if(b==d.dx){if(f||n>d.dy)n=d.dy;for(;++e<k;)m=a[e],m.x=l,m.y=h,m.dy=n,l+=m.dx=Math.min(d.x+d.dx-l,n?g(m.area/n):0);m.z=!0;m.dx+=d.x+d.dx-l;d.y+=n;d.dy-=n}else{if(f||
n>d.dx)n=d.dx;for(;++e<k;)m=a[e],m.x=l,m.y=h,m.dx=n,h+=m.dy=Math.min(d.y+d.dy-h,n?g(m.area/n):0);m.z=!1;m.dy+=d.y+d.dy-h;d.x+=n;d.dx-=n}}function f(c){c=p||e(c);var f=c[0];f.x=f.y=0;f.value?(f.dx=h[0],f.dy=h[1]):f.dx=f.dy=0;p&&e.revalue(f);a([f],f.dx*f.dy/f.value);(p?d:b)(f);q&&(p=c);return c}var e=n.layout.hierarchy(),g=Math.round,h=[1,1],m=null,s=ud,q=!1,p,t="squarify",u=.5*(1+Math.sqrt(5));f.size=function(a){if(!arguments.length)return h;h=a;return f};f.padding=function(a){function b(d){var c=
a.call(f,d,d.depth);return null==c?ud(d):Ff(d,"number"===typeof c?[c,c,c,c]:c)}function d(b){return Ff(b,a)}if(!arguments.length)return m;var c;s=null==(m=a)?ud:"function"===(c=typeof a)?b:"number"===c?(a=[a,a,a,a],d):d;return f};f.round=function(a){if(!arguments.length)return g!=Number;g=a?Math.round:Number;return f};f.sticky=function(a){if(!arguments.length)return q;q=a;p=null;return f};f.ratio=function(a){if(!arguments.length)return u;u=a;return f};f.mode=function(a){if(!arguments.length)return t;
t=a+"";return f};return Ab(f,e)};n.random={normal:function(a,b){var d=arguments.length;2>d&&(b=1);1>d&&(a=0);return function(){var d,c;do d=2*Math.random()-1,c=2*Math.random()-1,c=d*d+c*c;while(!c||1<c);return a+b*d*Math.sqrt(-2*Math.log(c)/c)}},logNormal:function(){var a=n.random.normal.apply(n,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=n.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,d=0;d<a;d++)b+=Math.random();
return b}}};n.scale={};var $h={floor:P,ceil:P};n.scale.linear=function(){return Hf([0,1],[0,1],$a,!1)};var ci={s:1,g:1,p:1,r:1,e:1};n.scale.log=function(){return Jf(n.scale.linear().domain([0,1]),10,!0,[1,10])};var Kf=n.format(".0e"),di={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};n.scale.pow=function(){return Lf(n.scale.linear(),1,[0,1])};n.scale.sqrt=function(){return n.scale.pow().exponent(.5)};n.scale.ordinal=function(){return Mf([],{t:"range",a:[[]]})};n.scale.category10=
function(){return n.scale.ordinal().range(Hi)};n.scale.category20=function(){return n.scale.ordinal().range(Ii)};n.scale.category20b=function(){return n.scale.ordinal().range(Ji)};n.scale.category20c=function(){return n.scale.ordinal().range(Ki)};var Hi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Hb),Ii=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,
1556175,10410725].map(Hb),Ji=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Hb),Ki=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Hb);n.scale.quantile=function(){return Nf([],[])};n.scale.quantize=function(){return Of(0,1,[0,1])};n.scale.threshold=
function(){return Pf([.5],[0,1])};n.scale.identity=function(){return Qf([0,1])};n.svg={};n.svg.arc=function(){function a(){var a=Math.max(0,+d.apply(this,arguments)),m=Math.max(0,+c.apply(this,arguments)),q=g.apply(this,arguments)-aa,p=h.apply(this,arguments)-aa,t=Math.abs(p-q),u=q>p?0:1;m<a&&(v=m,m=a,a=v);if(t>=wi)return b(m,u)+(a?b(a,1-u):"")+"Z";var v,x,z,y,A=0,C=0,J,G,M,E,D,P=[];if(y=(+n.apply(this,arguments)||0)/2)z=e===Cc?Math.sqrt(a*a+m*m):+e.apply(this,arguments),u||(C*=-1),m&&(C=Ma(z/m*Math.sin(y))),
a&&(A=Ma(z/a*Math.sin(y)));m?(z=m*Math.cos(q+C),y=m*Math.sin(q+C),J=m*Math.cos(p-C),G=m*Math.sin(p-C),x=Math.abs(p-q-2*C)<=H?0:1,C&&jc(z,y,J,G)===u^x&&(J=(q+p)/2,z=m*Math.cos(J),y=m*Math.sin(J),J=G=null)):z=y=0;if(a){C=a*Math.cos(p-A);M=a*Math.sin(p-A);E=a*Math.cos(q+A);D=a*Math.sin(q+A);var L=Math.abs(q-p+2*A)<=H?0:1;A&&jc(C,M,E,D)===1-u^L&&(E=(q+p)/2,C=a*Math.cos(E),M=a*Math.sin(E),E=D=null)}else C=M=0;1E-6<t&&.001<(v=Math.min(Math.abs(m-a)/2,+f.apply(this,arguments)))?(x=a<m^u?0:1,L=q=v,t<H&&(t=
null==E?[C,M]:null==J?[z,y]:hd([z,y],[E,D],[J,G],[C,M]),L=z-t[0],q=y-t[1],p=J-t[0],A=G-t[1],q=1/Math.sin(Math.acos((L*p+q*A)/(Math.sqrt(L*L+q*q)*Math.sqrt(p*p+A*A)))/2),t=Math.sqrt(t[0]*t[0]+t[1]*t[1]),L=Math.min(v,(a-t)/(q-1)),q=Math.min(v,(m-t)/(q+1))),null!=J?(t=kc(null==E?[C,M]:[E,D],[z,y],m,q,u),p=kc([J,G],[C,M],m,q,u),v===q?P.push("M",t[0],"A",q,",",q," 0 0,",x," ",t[1],"A",m,",",m," 0 ",1-u^jc(t[1][0],t[1][1],p[1][0],p[1][1]),",",u," ",p[1],"A",q,",",q," 0 0,",x," ",p[0]):P.push("M",t[0],"A",
q,",",q," 0 1,",x," ",p[0])):P.push("M",z,",",y),null!=E?(m=kc([z,y],[E,D],a,-L,u),J=kc([C,M],null==J?[z,y]:[J,G],a,-L,u),v===L?P.push("L",J[0],"A",L,",",L," 0 0,",x," ",J[1],"A",a,",",a," 0 ",u^jc(J[1][0],J[1][1],m[1][0],m[1][1]),",",1-u," ",m[1],"A",L,",",L," 0 0,",x," ",m[0]):P.push("L",J[0],"A",L,",",L," 0 0,",x," ",m[0])):P.push("L",C,",",M)):(P.push("M",z,",",y),null!=J&&P.push("A",m,",",m," 0 ",x,",",u," ",J,",",G),P.push("L",C,",",M),null!=E&&P.push("A",a,",",a," 0 ",L,",",1-u," ",E,",",D));
P.push("Z");return P.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var d=fi,c=gi,f=ei,e=Cc,g=Rf,h=Sf,n=hi;a.innerRadius=function(b){if(!arguments.length)return d;d=W(b);return a};a.outerRadius=function(b){if(!arguments.length)return c;c=W(b);return a};a.cornerRadius=function(b){if(!arguments.length)return f;f=W(b);return a};a.padRadius=function(b){if(!arguments.length)return e;e=b==Cc?Cc:W(b);return a};a.startAngle=function(b){if(!arguments.length)return g;
g=W(b);return a};a.endAngle=function(b){if(!arguments.length)return h;h=W(b);return a};a.padAngle=function(b){if(!arguments.length)return n;n=W(b);return a};a.centroid=function(){var a=(+d.apply(this,arguments)+ +c.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-aa;return[Math.cos(b)*a,Math.sin(b)*a]};return a};var Cc="auto";n.svg.line=function(){return Tf(P)};var xd=n.map({linear:ya,"linear-closed":Uf,step:function(a){for(var b=0,d=a.length,c=a[0],f=[c[0],",",c[1]];++b<
d;)f.push("H",(c[0]+(c=a[b])[0])/2,"V",c[1]);1<d&&f.push("H",c[0]);return f.join("")},"step-before":yd,"step-after":zd,basis:Vf,"basis-open":function(a){if(4>a.length)return ya(a);for(var b=[],d=-1,c=a.length,f,e=[0],g=[0];3>++d;)f=a[d],e.push(f[0]),g.push(f[1]);b.push(ta(Sa,e)+","+ta(Sa,g));for(--d;++d<c;)f=a[d],e.shift(),e.push(f[0]),g.shift(),g.push(f[1]),Bd(b,e,g);return b.join("")},"basis-closed":function(a){for(var b,d=-1,c=a.length,f=c+4,e,g=[],h=[];4>++d;)e=a[d%c],g.push(e[0]),h.push(e[1]);
b=[ta(Sa,g),",",ta(Sa,h)];for(--d;++d<f;)e=a[d%c],g.shift(),g.push(e[0]),h.shift(),h.push(e[1]),Bd(b,g,h);return b.join("")},bundle:function(a,b){var d=a.length-1;if(d)for(var c=a[0][0],f=a[0][1],e=a[d][0]-c,g=a[d][1]-f,h=-1,m,n;++h<=d;)m=a[h],n=h/d,m[0]=b*m[0]+(1-b)*(c+n*e),m[1]=b*m[1]+(1-b)*(f+n*g);return Vf(a)},cardinal:function(a,b){return 3>a.length?ya(a):a[0]+lc(a,Ad(a,b))},"cardinal-open":function(a,b){return 4>a.length?ya(a):a[1]+lc(a.slice(1,-1),Ad(a,b))},"cardinal-closed":function(a,b){return 3>
a.length?Uf(a):a[0]+lc((a.push(a[0]),a),Ad([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=ya(a);else{var b=a[0],d=[],c,f,e,g;c=0;f=a.length-1;var h=[];e=a[1];for(g=h[0]=Cd(a[0],e);++c<f;)h[c]=(g+(g=Cd(e,e=a[c+1])))/2;h[c]=g;for(var m=-1,n=a.length-1;++m<n;)c=Cd(a[m],a[m+1]),1E-6>O(c)?h[m]=h[m+1]=0:(f=h[m]/c,e=h[m+1]/c,g=f*f+e*e,9<g&&(g=3*c/Math.sqrt(g),h[m]=g*f,h[m+1]=g*e));for(m=-1;++m<=n;)g=(a[Math.min(n,m+1)][0]-a[Math.max(0,m-1)][0])/(6*(1+h[m]*h[m])),d.push([g||0,
h[m]*g||0]);a=b+lc(a,d)}return a}});xd.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Wf=[0,2/3,1/3,0],Xf=[0,1/3,2/3,0],Sa=[0,1/6,2/3,1/6];n.svg.line.radial=function(){var a=Tf(Yf);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};yd.reverse=zd;zd.reverse=yd;n.svg.area=function(){return Zf(P)};n.svg.area.radial=function(){var a=Zf(Yf);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=
a.y1;delete a.y1;return a};n.svg.chord=function(){function a(a,e){var g=b(this,c,a,e),l=b(this,f,a,e);return"M"+g.p0+d(g.r,g.p1,g.a1-g.a0)+(g.a0==l.a0&&g.a1==l.a1?"Q 0,0 "+g.p0:"Q 0,0 "+l.p0+d(l.r,l.p1,l.a1-l.a0)+("Q 0,0 "+g.p0))+"Z"}function b(a,b,d,c){var f=b.call(a,d,c);b=e.call(a,f,c);d=g.call(a,f,c)-aa;a=h.call(a,f,c)-aa;return{r:b,a0:d,a1:a,p0:[b*Math.cos(d),b*Math.sin(d)],p1:[b*Math.cos(a),b*Math.sin(a)]}}function d(a,b,d){return"A"+a+","+a+" 0 "+ +(d>H)+",1 "+b}var c=dd,f=ed,e=ii,g=Rf,h=Sf;
a.radius=function(b){if(!arguments.length)return e;e=W(b);return a};a.source=function(b){if(!arguments.length)return c;c=W(b);return a};a.target=function(b){if(!arguments.length)return f;f=W(b);return a};a.startAngle=function(b){if(!arguments.length)return g;g=W(b);return a};a.endAngle=function(b){if(!arguments.length)return h;h=W(b);return a};return a};n.svg.diagonal=function(){function a(a,e){var g=b.call(this,a,e),h=d.call(this,a,e),m=(g.y+h.y)/2,g=[g,{x:g.x,y:m},{x:h.x,y:m},h],g=g.map(c);return"M"+
g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var b=dd,d=ed,c=$f;a.source=function(d){if(!arguments.length)return b;b=W(d);return a};a.target=function(b){if(!arguments.length)return d;d=W(b);return a};a.projection=function(b){if(!arguments.length)return c;c=b;return a};return a};n.svg.diagonal.radial=function(){var a=n.svg.diagonal(),b=$f,d=a.projection;a.projection=function(a){return arguments.length?d(ji(b=a)):b};return a};n.svg.symbol=function(){function a(a,c){return(pg.get(b.call(this,a,c))||ag)(d.call(this,
a,c))}var b=li,d=ki;a.type=function(d){if(!arguments.length)return b;b=W(d);return a};a.size=function(b){if(!arguments.length)return d;d=W(b);return a};return a};var pg=n.map({circle:ag,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*qg));var b=a*qg;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+
","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Dc);var b=a*Dc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Dc);var b=a*Dc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});n.svg.symbolTypes=pg.keys();var Dc=Math.sqrt(3),qg=Math.tan(30*N);S.transition=function(a){var b=bb||++rg;a=Ed(a);for(var d=[],c,f,e=Ec||{time:Date.now(),ease:sh,delay:0,duration:250},g=-1,h=this.length;++g<h;){d.push(c=[]);for(var m=this[g],n=-1,q=m.length;++n<q;)(f=
m[n])&&mc(f,n,a,b,e),c.push(f)}return Cb(d,a,b)};S.interrupt=function(a){return this.each(null==a?pc:bg(Ed(a)))};var pc=bg(Ed()),da=[],rg=0,bb,Ec;da.call=S.call;da.empty=S.empty;da.node=S.node;da.size=S.size;n.transition=function(a,b){return a&&a.transition?bb?a.transition(b):a:n.selection().transition(a)};n.transition.prototype=da;da.select=function(a){var b=this.id,d=this.namespace,c=[],f,e,g;a=Ea(a);for(var h=-1,m=this.length;++h<m;){c.push(f=[]);for(var n=this[h],q=-1,p=n.length;++q<p;)(g=n[q])&&
(e=a.call(g,g.__data__,q,h))?("__data__"in g&&(e.__data__=g.__data__),mc(e,q,d,b,g[d][b]),f.push(e)):f.push(null)}return Cb(c,d,b)};da.selectAll=function(a){var b=this.id,d=this.namespace,c=[],f,e,g,h;a=cb(a);for(var m=-1,n=this.length;++m<n;)for(var q=this[m],p=-1,t=q.length;++p<t;)if(f=q[p]){h=f[d][b];e=a.call(f,f.__data__,p,m);c.push(f=[]);for(var u=-1,v=e.length;++u<v;)(g=e[u])&&mc(g,u,d,b,h),f.push(g)}return Cb(c,d,b)};da.filter=function(a){var b=[],d,c,f;"function"!==typeof a&&(a=Xd(a));for(var e=
0,g=this.length;e<g;e++){b.push(d=[]);c=this[e];for(var h=0,m=c.length;h<m;h++)(f=c[h])&&a.call(f,f.__data__,h,e)&&d.push(f)}return Cb(b,this.namespace,this.id)};da.tween=function(a,b){var d=this.id,c=this.namespace;return 2>arguments.length?this.node()[c][d].tween.get(a):la(this,null==b?function(b){b[c][d].tween.remove(a)}:function(e){e[c][d].tween.set(a,b)})};da.attr=function(a,b){function d(){this.removeAttribute(m)}function c(){this.removeAttributeNS(m.space,m.local)}function e(a){return null==
a?d:(a+="",function(){var b=this.getAttribute(m),d;return b!==a&&(d=h(b,a),function(a){this.setAttribute(m,d(a))})})}function g(a){return null==a?c:(a+="",function(){var b=this.getAttributeNS(m.space,m.local),d;return b!==a&&(d=h(b,a),function(a){this.setAttributeNS(m.space,m.local,d(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var h="transform"==a?tf:$a,m=n.ns.qualify(a);return Dd(this,"attr."+a,b,m.local?g:e)};da.attrTween=function(a,b){function d(a,d){var c=b.call(this,
a,d,this.getAttribute(e));return c&&function(a){this.setAttribute(e,c(a))}}function c(a,d){var g=b.call(this,a,d,this.getAttributeNS(e.space,e.local));return g&&function(a){this.setAttributeNS(e.space,e.local,g(a))}}var e=n.ns.qualify(a);return this.tween("attr."+a,e.local?c:d)};da.style=function(a,b,d){function e(){this.style.removeProperty(a)}var f=arguments.length;if(3>f){if("string"!==typeof a){2>f&&(b="");for(d in a)this.style(d,a[d],b);return this}d=""}return Dd(this,"style."+a,b,function(b){return null==
b?e:(b+="",function(){var e=c(this).getComputedStyle(this,null).getPropertyValue(a),f;return e!==b&&(f=$a(e,b),function(b){this.style.setProperty(a,f(b),d)})})})};da.styleTween=function(a,b,d){3>arguments.length&&(d="");return this.tween("style."+a,function(e,f){var g=b.call(this,e,f,c(this).getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),d)}})};da.text=function(a){return Dd(this,"text",a,mi)};da.remove=function(){var a=this.namespace;return this.each("end.transition",
function(){var b;2>this[a].count&&(b=this.parentNode)&&b.removeChild(this)})};da.ease=function(a){var b=this.id,d=this.namespace;if(1>arguments.length)return this.node()[d][b].ease;"function"!==typeof a&&(a=n.ease.apply(n,arguments));return la(this,function(c){c[d][b].ease=a})};da.delay=function(a){var b=this.id,d=this.namespace;return 1>arguments.length?this.node()[d][b].delay:la(this,"function"===typeof a?function(c,e,g){c[d][b].delay=+a.call(c,c.__data__,e,g)}:(a=+a,function(c){c[d][b].delay=a}))};
da.duration=function(a){var b=this.id,d=this.namespace;return 1>arguments.length?this.node()[d][b].duration:la(this,"function"===typeof a?function(c,e,g){c[d][b].duration=Math.max(1,a.call(c,c.__data__,e,g))}:(a=Math.max(1,a),function(c){c[d][b].duration=a}))};da.each=function(a,b){var d=this.id,c=this.namespace;if(2>arguments.length){var e=Ec,g=bb;try{bb=d,la(this,function(b,e,f){Ec=b[c][d];a.call(b,b.__data__,e,f)})}finally{Ec=e,bb=g}}else la(this,function(e){e=e[c][d];(e.event||(e.event=n.dispatch("start",
"end","interrupt"))).on(a,b)});return this};da.transition=function(){for(var a=this.id,b=++rg,d=this.namespace,c=[],e,g,h,m,n=0,q=this.length;n<q;n++){c.push(e=[]);g=this[n];for(var p=0,t=g.length;p<t;p++){if(h=g[p])m=h[d][a],mc(h,p,d,b,{time:m.time,ease:m.ease,delay:m.delay+m.duration,duration:m.duration});e.push(h)}}return Cb(c,d,b)};n.svg.axis=function(){function a(a){a.each(function(){var a=n.select(this),p=this.__chart__||b,s=this.__chart__=b.copy(),t=null==m?s.ticks?s.ticks.apply(s,h):s.domain():
m,u=null==q?s.tickFormat?s.tickFormat.apply(s,h):P:q,v=a.selectAll(".tick").data(t,s),t=v.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),x=n.transition(v.exit()).style("opacity",1E-6).remove(),z=n.transition(v.order()).style("opacity",1),y=Math.max(c,0)+g,A=fc(s),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),n.transition(a));t.append("line");t.append("text");var C=t.select("line"),J=z.select("line"),v=v.select("text").text(u),E=t.select("text"),
M=z.select("text"),G="top"===d||"left"===d?-1:1,L,D,Y,R;"bottom"===d||"top"===d?(u=ni,L="x",Y="y",D="x2",R="y2",v.attr("dy",0>G?"0em":".71em").style("text-anchor","middle"),a.attr("d","M"+A[0]+","+G*e+"V0H"+A[1]+"V"+G*e)):(u=oi,L="y",Y="x",D="y2",R="x2",v.attr("dy",".32em").style("text-anchor",0>G?"end":"start"),a.attr("d","M"+G*e+","+A[0]+"H0V"+A[1]+"H"+G*e));C.attr(R,G*c);E.attr(Y,G*y);J.attr(D,0).attr(R,G*c);M.attr(L,0).attr(Y,G*y);if(s.rangeBand)var H=s,N=H.rangeBand()/2,p=s=function(a){return H(a)+
N};else p.rangeBand?p=s:x.call(u,s,p);t.call(u,p,s);z.call(u,s,s)})}var b=n.scale.linear(),d=sg,c=6,e=6,g=3,h=[10],m=null,q;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(b){if(!arguments.length)return d;d=b in Li?b+"":sg;return a};a.ticks=function(){if(!arguments.length)return h;h=za(arguments);return a};a.tickValues=function(b){if(!arguments.length)return m;m=b;return a};a.tickFormat=function(b){if(!arguments.length)return q;q=b;return a};a.tickSize=function(b){var d=
arguments.length;if(!d)return c;c=+b;e=+arguments[d-1];return a};a.innerTickSize=function(b){if(!arguments.length)return c;c=+b;return a};a.outerTickSize=function(b){if(!arguments.length)return e;e=+b;return a};a.tickPadding=function(b){if(!arguments.length)return g;g=+b;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var sg="bottom",Li={top:1,right:1,bottom:1,left:1};n.svg.brush=function(){function a(c){c.each(function(){var c=n.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=c.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");c.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var l=c.selectAll(".resize").data(y,P);l.exit().remove();l.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Mi[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");l.style("display",a.empty()?"none":null);c=n.transition(c);g=n.transition(g);h&&(l=fc(h),g.attr("x",l[0]).attr("width",l[1]-l[0]),d(c));m&&(l=fc(m),g.attr("y",l[0]).attr("height",l[1]-l[0]),e(c));b(c)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+q[+/e$/.test(a)]+","+p[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",
q[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",q[1]-q[0])}function e(a){a.select(".extent").attr("y",p[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",p[1]-p[0])}function f(){function f(){var a=n.mouse(A),c=!1;N&&(a[0]+=N[0],a[1]+=N[1]);D||(n.event.altKey?(R||(R=[(q[0]+q[1])/2,(p[0]+p[1])/2]),H[0]=q[+(a[0]<R[0])],H[1]=p[+(a[1]<R[1])]):R=null);M&&y(a,h,0)&&(d(E),c=!0);P&&y(a,m,1)&&(e(E),c=!0);c&&(b(E),G({type:"brush",mode:D?"move":"resize"}))}function y(a,b,c){var d=fc(b);b=d[0];
var e=d[1],d=H[c],f=c?p:q,g=f[1]-f[0];D&&(b-=d,e-=g+d);a=(c?x:v)?Math.max(b,Math.min(e,a[c])):a[c];D?b=(a+=d)+g:(R&&(d=Math.max(b,Math.min(e,2*R[c]-a))),d<a?(b=a,a=d):b=d);if(f[0]!=a||f[1]!=b)return c?u=null:t=null,f[0]=a,f[1]=b,!0}function z(){f();E.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);n.select("body").style("cursor",null);O.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);Y();G({type:"brushend"})}var A=this,J=n.select(n.event.target),G=g.of(A,arguments),E=n.select(A),L=J.datum(),M=!/^(n|s)$/.test(L)&&h,P=!/^(e|w)$/.test(L)&&m,D=J.classed("extent"),Y=Gb(A),R,H=n.mouse(A),N,O=n.select(c(A)).on("keydown.brush",function(){32==n.event.keyCode&&(D||(R=null,H[0]-=q[1],H[1]-=p[1],D=2),C())}).on("keyup.brush",function(){32==n.event.keyCode&&2==D&&(H[0]+=q[1],H[1]+=p[1],D=0,C())});if(n.event.changedTouches)O.on("touchmove.brush",f).on("touchend.brush",
z);else O.on("mousemove.brush",f).on("mouseup.brush",z);E.interrupt().selectAll("*").interrupt();if(D)H[0]=q[0]-H[0],H[1]=p[0]-H[1];else if(L){var U=+/w$/.test(L),L=+/^n/.test(L);N=[q[1-U]-H[0],p[1-L]-H[1]];H[0]=q[U];H[1]=p[L]}else n.event.altKey&&(R=H.slice());E.style("pointer-events","none").selectAll(".resize").style("display",null);n.select("body").style("cursor",J.style("cursor"));G({type:"brushstart"});f()}var g=Y(a,"brushstart","brush","brushend"),h=null,m=null,q=[0,0],p=[0,0],t,u,v=!0,x=!0,
y=Md[0];a.event=function(a){a.each(function(){var a=g.of(this,arguments),b={x:q,y:p,i:t,j:u},c=this.__chart__||b;this.__chart__=b;bb?n.select(this).transition().each("start.brush",function(){t=c.i;u=c.j;q=c.x;p=c.y;a({type:"brushstart"})}).tween("brush:brush",function(){var c=ec(q,b.x),d=ec(p,b.y);t=u=null;return function(e){q=b.x=c(e);p=b.y=d(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){t=b.i;u=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),
a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(b){if(!arguments.length)return h;h=b;y=Md[!h<<1|!m];return a};a.y=function(b){if(!arguments.length)return m;m=b;y=Md[!h<<1|!m];return a};a.clamp=function(b){if(!arguments.length)return h&&m?[v,x]:h?v:m?x:null;h&&m?(v=!!b[0],x=!!b[1]):h?v=!!b:m&&(x=!!b);return a};a.extent=function(b){var c,d,e,f,g;if(!arguments.length)return h&&(t?(c=t[0],d=t[1]):(c=q[0],d=q[1],h.invert&&(c=h.invert(c),d=h.invert(d)),d<c&&(g=c,c=d,d=g))),m&&(u?(e=
u[0],f=u[1]):(e=p[0],f=p[1],m.invert&&(e=m.invert(e),f=m.invert(f)),f<e&&(g=e,e=f,f=g))),h&&m?[[c,e],[d,f]]:h?[c,d]:m&&[e,f];h&&(c=b[0],d=b[1],m&&(c=c[0],d=d[0]),t=[c,d],h.invert&&(c=h(c),d=h(d)),d<c&&(g=c,c=d,d=g),c!=q[0]||d!=q[1])&&(q=[c,d]);m&&(e=b[0],f=b[1],h&&(e=e[1],f=f[1]),u=[e,f],m.invert&&(e=m(e),f=m(f)),f<e&&(g=e,e=f,f=g),e!=p[0]||f!=p[1])&&(p=[e,f]);return a};a.clear=function(){a.empty()||(q=[0,0],p=[0,0],t=u=null);return a};a.empty=function(){return!!h&&q[0]==q[1]||!!m&&p[0]==p[1]};return n.rebind(a,
g,"on")};var Mi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Md=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Nd=A.format=gg.timeFormat,tg=Nd.utc,ug=tg("%Y-%m-%dT%H:%M:%S.%LZ");Nd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Fd:ug;Fd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Fd.toString=ug.toString;A.second=Va(function(a){return new ga(1E3*Math.floor(a/1E3))},function(a,
b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});A.seconds=A.second.range;A.seconds.utc=A.second.utc.range;A.minute=Va(function(a){return new ga(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});A.minutes=A.minute.range;A.minutes.utc=A.minute.utc.range;A.hour=Va(function(a){var b=a.getTimezoneOffset()/60;return new ga(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},
function(a){return a.getHours()});A.hours=A.hour.range;A.hours.utc=A.hour.utc.range;A.month=Va(function(a){a=A.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});A.months=A.month.range;A.months.utc=A.month.utc.range;var nc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Od=[[A.second,1],[A.second,5],[A.second,15],[A.second,30],[A.minute,1],[A.minute,5],[A.minute,15],[A.minute,30],[A.hour,1],
[A.hour,3],[A.hour,6],[A.hour,12],[A.day,1],[A.day,2],[A.week,1],[A.month,1],[A.month,3],[A.year,1]],Ni=Nd.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",rb]]),pi={range:function(a,b,c){return n.range(Math.ceil(a/c)*
c,+b,c).map(ab)},floor:P,ceil:P};Od.year=A.year;A.scale=function(){return Gd(n.scale.linear(),Od,Ni)};var vg=Od.map(function(a){return[a[0].utc,a[1]]}),Oi=tg.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],
["%Y",rb]]);vg.year=A.year.utc;A.scale.utc=function(){return Gd(n.scale.linear(),vg,Oi)};n.text=Sc(function(a){return a.responseText});n.json=function(a,b){return Jb(a,"application/json",qi,b)};n.html=function(a,b){return Jb(a,"text/html",ri,b)};n.xml=Sc(function(a){return a.responseXML});"function"===typeof define&&define.amd?(this.d3=n,define(n)):"object"===typeof module&&module.exports?module.exports=n:this.d3=n}();var colorbrewer={Spectral:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(153,213,148)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(171,221,164)","rgb(43,131,186)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(171,221,164)","rgb(43,131,186)"],6:"rgb(213,62,79) rgb(252,141,89) rgb(254,224,139) rgb(230,245,152) rgb(153,213,148) rgb(50,136,189)".split(" "),7:"rgb(213,62,79) rgb(252,141,89) rgb(254,224,139) rgb(255,255,191) rgb(230,245,152) rgb(153,213,148) rgb(50,136,189)".split(" "),
8:"rgb(213,62,79) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(230,245,152) rgb(171,221,164) rgb(102,194,165) rgb(50,136,189)".split(" "),9:"rgb(213,62,79) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(255,255,191) rgb(230,245,152) rgb(171,221,164) rgb(102,194,165) rgb(50,136,189)".split(" "),10:"rgb(158,1,66) rgb(213,62,79) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(230,245,152) rgb(171,221,164) rgb(102,194,165) rgb(50,136,189) rgb(94,79,162)".split(" "),11:"rgb(158,1,66) rgb(213,62,79) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(255,255,191) rgb(230,245,152) rgb(171,221,164) rgb(102,194,165) rgb(50,136,189) rgb(94,79,162)".split(" "),
type:"div"},RdYlGn:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(145,207,96)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(166,217,106)","rgb(26,150,65)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(166,217,106)","rgb(26,150,65)"],6:"rgb(215,48,39) rgb(252,141,89) rgb(254,224,139) rgb(217,239,139) rgb(145,207,96) rgb(26,152,80)".split(" "),7:"rgb(215,48,39) rgb(252,141,89) rgb(254,224,139) rgb(255,255,191) rgb(217,239,139) rgb(145,207,96) rgb(26,152,80)".split(" "),8:"rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(217,239,139) rgb(166,217,106) rgb(102,189,99) rgb(26,152,80)".split(" "),
9:"rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(255,255,191) rgb(217,239,139) rgb(166,217,106) rgb(102,189,99) rgb(26,152,80)".split(" "),10:"rgb(165,0,38) rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(217,239,139) rgb(166,217,106) rgb(102,189,99) rgb(26,152,80) rgb(0,104,55)".split(" "),11:"rgb(165,0,38) rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(255,255,191) rgb(217,239,139) rgb(166,217,106) rgb(102,189,99) rgb(26,152,80) rgb(0,104,55)".split(" "),
type:"div"},RdBu:{3:["rgb(239,138,98)","rgb(247,247,247)","rgb(103,169,207)"],4:["rgb(202,0,32)","rgb(244,165,130)","rgb(146,197,222)","rgb(5,113,176)"],5:["rgb(202,0,32)","rgb(244,165,130)","rgb(247,247,247)","rgb(146,197,222)","rgb(5,113,176)"],6:"rgb(178,24,43) rgb(239,138,98) rgb(253,219,199) rgb(209,229,240) rgb(103,169,207) rgb(33,102,172)".split(" "),7:"rgb(178,24,43) rgb(239,138,98) rgb(253,219,199) rgb(247,247,247) rgb(209,229,240) rgb(103,169,207) rgb(33,102,172)".split(" "),8:"rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(209,229,240) rgb(146,197,222) rgb(67,147,195) rgb(33,102,172)".split(" "),
9:"rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(247,247,247) rgb(209,229,240) rgb(146,197,222) rgb(67,147,195) rgb(33,102,172)".split(" "),10:"rgb(103,0,31) rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(209,229,240) rgb(146,197,222) rgb(67,147,195) rgb(33,102,172) rgb(5,48,97)".split(" "),11:"rgb(103,0,31) rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(247,247,247) rgb(209,229,240) rgb(146,197,222) rgb(67,147,195) rgb(33,102,172) rgb(5,48,97)".split(" "),
type:"div"},PiYG:{3:["rgb(233,163,201)","rgb(247,247,247)","rgb(161,215,106)"],4:["rgb(208,28,139)","rgb(241,182,218)","rgb(184,225,134)","rgb(77,172,38)"],5:["rgb(208,28,139)","rgb(241,182,218)","rgb(247,247,247)","rgb(184,225,134)","rgb(77,172,38)"],6:"rgb(197,27,125) rgb(233,163,201) rgb(253,224,239) rgb(230,245,208) rgb(161,215,106) rgb(77,146,33)".split(" "),7:"rgb(197,27,125) rgb(233,163,201) rgb(253,224,239) rgb(247,247,247) rgb(230,245,208) rgb(161,215,106) rgb(77,146,33)".split(" "),8:"rgb(197,27,125) rgb(222,119,174) rgb(241,182,218) rgb(253,224,239) rgb(230,245,208) rgb(184,225,134) rgb(127,188,65) rgb(77,146,33)".split(" "),
9:"rgb(197,27,125) rgb(222,119,174) rgb(241,182,218) rgb(253,224,239) rgb(247,247,247) rgb(230,245,208) rgb(184,225,134) rgb(127,188,65) rgb(77,146,33)".split(" "),10:"rgb(142,1,82) rgb(197,27,125) rgb(222,119,174) rgb(241,182,218) rgb(253,224,239) rgb(230,245,208) rgb(184,225,134) rgb(127,188,65) rgb(77,146,33) rgb(39,100,25)".split(" "),11:"rgb(142,1,82) rgb(197,27,125) rgb(222,119,174) rgb(241,182,218) rgb(253,224,239) rgb(247,247,247) rgb(230,245,208) rgb(184,225,134) rgb(127,188,65) rgb(77,146,33) rgb(39,100,25)".split(" "),
type:"div"},PRGn:{3:["rgb(175,141,195)","rgb(247,247,247)","rgb(127,191,123)"],4:["rgb(123,50,148)","rgb(194,165,207)","rgb(166,219,160)","rgb(0,136,55)"],5:["rgb(123,50,148)","rgb(194,165,207)","rgb(247,247,247)","rgb(166,219,160)","rgb(0,136,55)"],6:"rgb(118,42,131) rgb(175,141,195) rgb(231,212,232) rgb(217,240,211) rgb(127,191,123) rgb(27,120,55)".split(" "),7:"rgb(118,42,131) rgb(175,141,195) rgb(231,212,232) rgb(247,247,247) rgb(217,240,211) rgb(127,191,123) rgb(27,120,55)".split(" "),8:"rgb(118,42,131) rgb(153,112,171) rgb(194,165,207) rgb(231,212,232) rgb(217,240,211) rgb(166,219,160) rgb(90,174,97) rgb(27,120,55)".split(" "),
9:"rgb(118,42,131) rgb(153,112,171) rgb(194,165,207) rgb(231,212,232) rgb(247,247,247) rgb(217,240,211) rgb(166,219,160) rgb(90,174,97) rgb(27,120,55)".split(" "),10:"rgb(64,0,75) rgb(118,42,131) rgb(153,112,171) rgb(194,165,207) rgb(231,212,232) rgb(217,240,211) rgb(166,219,160) rgb(90,174,97) rgb(27,120,55) rgb(0,68,27)".split(" "),11:"rgb(64,0,75) rgb(118,42,131) rgb(153,112,171) rgb(194,165,207) rgb(231,212,232) rgb(247,247,247) rgb(217,240,211) rgb(166,219,160) rgb(90,174,97) rgb(27,120,55) rgb(0,68,27)".split(" "),
type:"div"},RdYlBu:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(145,191,219)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(171,217,233)","rgb(44,123,182)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(171,217,233)","rgb(44,123,182)"],6:"rgb(215,48,39) rgb(252,141,89) rgb(254,224,144) rgb(224,243,248) rgb(145,191,219) rgb(69,117,180)".split(" "),7:"rgb(215,48,39) rgb(252,141,89) rgb(254,224,144) rgb(255,255,191) rgb(224,243,248) rgb(145,191,219) rgb(69,117,180)".split(" "),8:"rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,144) rgb(224,243,248) rgb(171,217,233) rgb(116,173,209) rgb(69,117,180)".split(" "),
9:"rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,144) rgb(255,255,191) rgb(224,243,248) rgb(171,217,233) rgb(116,173,209) rgb(69,117,180)".split(" "),10:"rgb(165,0,38) rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,144) rgb(224,243,248) rgb(171,217,233) rgb(116,173,209) rgb(69,117,180) rgb(49,54,149)".split(" "),11:"rgb(165,0,38) rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,144) rgb(255,255,191) rgb(224,243,248) rgb(171,217,233) rgb(116,173,209) rgb(69,117,180) rgb(49,54,149)".split(" "),
type:"div"},BrBG:{3:["rgb(216,179,101)","rgb(245,245,245)","rgb(90,180,172)"],4:["rgb(166,97,26)","rgb(223,194,125)","rgb(128,205,193)","rgb(1,133,113)"],5:["rgb(166,97,26)","rgb(223,194,125)","rgb(245,245,245)","rgb(128,205,193)","rgb(1,133,113)"],6:"rgb(140,81,10) rgb(216,179,101) rgb(246,232,195) rgb(199,234,229) rgb(90,180,172) rgb(1,102,94)".split(" "),7:"rgb(140,81,10) rgb(216,179,101) rgb(246,232,195) rgb(245,245,245) rgb(199,234,229) rgb(90,180,172) rgb(1,102,94)".split(" "),8:"rgb(140,81,10) rgb(191,129,45) rgb(223,194,125) rgb(246,232,195) rgb(199,234,229) rgb(128,205,193) rgb(53,151,143) rgb(1,102,94)".split(" "),
9:"rgb(140,81,10) rgb(191,129,45) rgb(223,194,125) rgb(246,232,195) rgb(245,245,245) rgb(199,234,229) rgb(128,205,193) rgb(53,151,143) rgb(1,102,94)".split(" "),10:"rgb(84,48,5) rgb(140,81,10) rgb(191,129,45) rgb(223,194,125) rgb(246,232,195) rgb(199,234,229) rgb(128,205,193) rgb(53,151,143) rgb(1,102,94) rgb(0,60,48)".split(" "),11:"rgb(84,48,5) rgb(140,81,10) rgb(191,129,45) rgb(223,194,125) rgb(246,232,195) rgb(245,245,245) rgb(199,234,229) rgb(128,205,193) rgb(53,151,143) rgb(1,102,94) rgb(0,60,48)".split(" "),
type:"div"},RdGy:{3:["rgb(239,138,98)","rgb(255,255,255)","rgb(153,153,153)"],4:["rgb(202,0,32)","rgb(244,165,130)","rgb(186,186,186)","rgb(64,64,64)"],5:["rgb(202,0,32)","rgb(244,165,130)","rgb(255,255,255)","rgb(186,186,186)","rgb(64,64,64)"],6:"rgb(178,24,43) rgb(239,138,98) rgb(253,219,199) rgb(224,224,224) rgb(153,153,153) rgb(77,77,77)".split(" "),7:"rgb(178,24,43) rgb(239,138,98) rgb(253,219,199) rgb(255,255,255) rgb(224,224,224) rgb(153,153,153) rgb(77,77,77)".split(" "),8:"rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(224,224,224) rgb(186,186,186) rgb(135,135,135) rgb(77,77,77)".split(" "),
9:"rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(255,255,255) rgb(224,224,224) rgb(186,186,186) rgb(135,135,135) rgb(77,77,77)".split(" "),10:"rgb(103,0,31) rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(224,224,224) rgb(186,186,186) rgb(135,135,135) rgb(77,77,77) rgb(26,26,26)".split(" "),11:"rgb(103,0,31) rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(255,255,255) rgb(224,224,224) rgb(186,186,186) rgb(135,135,135) rgb(77,77,77) rgb(26,26,26)".split(" "),
type:"div"},PuOr:{3:["rgb(241,163,64)","rgb(247,247,247)","rgb(153,142,195)"],4:["rgb(230,97,1)","rgb(253,184,99)","rgb(178,171,210)","rgb(94,60,153)"],5:["rgb(230,97,1)","rgb(253,184,99)","rgb(247,247,247)","rgb(178,171,210)","rgb(94,60,153)"],6:"rgb(179,88,6) rgb(241,163,64) rgb(254,224,182) rgb(216,218,235) rgb(153,142,195) rgb(84,39,136)".split(" "),7:"rgb(179,88,6) rgb(241,163,64) rgb(254,224,182) rgb(247,247,247) rgb(216,218,235) rgb(153,142,195) rgb(84,39,136)".split(" "),8:"rgb(179,88,6) rgb(224,130,20) rgb(253,184,99) rgb(254,224,182) rgb(216,218,235) rgb(178,171,210) rgb(128,115,172) rgb(84,39,136)".split(" "),
9:"rgb(179,88,6) rgb(224,130,20) rgb(253,184,99) rgb(254,224,182) rgb(247,247,247) rgb(216,218,235) rgb(178,171,210) rgb(128,115,172) rgb(84,39,136)".split(" "),10:"rgb(127,59,8) rgb(179,88,6) rgb(224,130,20) rgb(253,184,99) rgb(254,224,182) rgb(216,218,235) rgb(178,171,210) rgb(128,115,172) rgb(84,39,136) rgb(45,0,75)".split(" "),11:"rgb(127,59,8) rgb(179,88,6) rgb(224,130,20) rgb(253,184,99) rgb(254,224,182) rgb(247,247,247) rgb(216,218,235) rgb(178,171,210) rgb(128,115,172) rgb(84,39,136) rgb(45,0,75)".split(" "),
type:"div"},Set2:{3:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)"],4:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)"],5:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)"],6:"rgb(102,194,165) rgb(252,141,98) rgb(141,160,203) rgb(231,138,195) rgb(166,216,84) rgb(255,217,47)".split(" "),7:"rgb(102,194,165) rgb(252,141,98) rgb(141,160,203) rgb(231,138,195) rgb(166,216,84) rgb(255,217,47) rgb(229,196,148)".split(" "),8:"rgb(102,194,165) rgb(252,141,98) rgb(141,160,203) rgb(231,138,195) rgb(166,216,84) rgb(255,217,47) rgb(229,196,148) rgb(179,179,179)".split(" "),
type:"qual"},Accent:{3:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)"],4:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)"],5:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)"],6:"rgb(127,201,127) rgb(190,174,212) rgb(253,192,134) rgb(255,255,153) rgb(56,108,176) rgb(240,2,127)".split(" "),7:"rgb(127,201,127) rgb(190,174,212) rgb(253,192,134) rgb(255,255,153) rgb(56,108,176) rgb(240,2,127) rgb(191,91,23)".split(" "),
8:"rgb(127,201,127) rgb(190,174,212) rgb(253,192,134) rgb(255,255,153) rgb(56,108,176) rgb(240,2,127) rgb(191,91,23) rgb(102,102,102)".split(" "),type:"qual"},Set1:{3:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)"],4:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)"],5:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)"],6:"rgb(228,26,28) rgb(55,126,184) rgb(77,175,74) rgb(152,78,163) rgb(255,127,0) rgb(255,255,51)".split(" "),7:"rgb(228,26,28) rgb(55,126,184) rgb(77,175,74) rgb(152,78,163) rgb(255,127,0) rgb(255,255,51) rgb(166,86,40)".split(" "),
8:"rgb(228,26,28) rgb(55,126,184) rgb(77,175,74) rgb(152,78,163) rgb(255,127,0) rgb(255,255,51) rgb(166,86,40) rgb(247,129,191)".split(" "),9:"rgb(228,26,28) rgb(55,126,184) rgb(77,175,74) rgb(152,78,163) rgb(255,127,0) rgb(255,255,51) rgb(166,86,40) rgb(247,129,191) rgb(153,153,153)".split(" "),type:"qual"},Set3:{3:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)"],4:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)"],5:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)",
"rgb(251,128,114)","rgb(128,177,211)"],6:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98)".split(" "),7:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105)".split(" "),8:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229)".split(" "),9:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229) rgb(217,217,217)".split(" "),
10:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229) rgb(217,217,217) rgb(188,128,189)".split(" "),11:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229) rgb(217,217,217) rgb(188,128,189) rgb(204,235,197)".split(" "),12:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229) rgb(217,217,217) rgb(188,128,189) rgb(204,235,197) rgb(255,237,111)".split(" "),
type:"qual"},Dark2:{3:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)"],4:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)"],5:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)"],6:"rgb(27,158,119) rgb(217,95,2) rgb(117,112,179) rgb(231,41,138) rgb(102,166,30) rgb(230,171,2)".split(" "),7:"rgb(27,158,119) rgb(217,95,2) rgb(117,112,179) rgb(231,41,138) rgb(102,166,30) rgb(230,171,2) rgb(166,118,29)".split(" "),8:"rgb(27,158,119) rgb(217,95,2) rgb(117,112,179) rgb(231,41,138) rgb(102,166,30) rgb(230,171,2) rgb(166,118,29) rgb(102,102,102)".split(" "),
type:"qual"},Paired:{3:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)"],4:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)"],5:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)"],6:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28)".split(" "),7:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111)".split(" "),8:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0)".split(" "),
9:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0) rgb(202,178,214)".split(" "),10:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0) rgb(202,178,214) rgb(106,61,154)".split(" "),11:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0) rgb(202,178,214) rgb(106,61,154) rgb(255,255,153)".split(" "),
12:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0) rgb(202,178,214) rgb(106,61,154) rgb(255,255,153) rgb(177,89,40)".split(" "),type:"qual"},Pastel2:{3:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)"],4:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)"],5:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)"],6:"rgb(179,226,205) rgb(253,205,172) rgb(203,213,232) rgb(244,202,228) rgb(230,245,201) rgb(255,242,174)".split(" "),
7:"rgb(179,226,205) rgb(253,205,172) rgb(203,213,232) rgb(244,202,228) rgb(230,245,201) rgb(255,242,174) rgb(241,226,204)".split(" "),8:"rgb(179,226,205) rgb(253,205,172) rgb(203,213,232) rgb(244,202,228) rgb(230,245,201) rgb(255,242,174) rgb(241,226,204) rgb(204,204,204)".split(" "),type:"qual"},Pastel1:{3:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)"],4:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)"],5:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)",
"rgb(222,203,228)","rgb(254,217,166)"],6:"rgb(251,180,174) rgb(179,205,227) rgb(204,235,197) rgb(222,203,228) rgb(254,217,166) rgb(255,255,204)".split(" "),7:"rgb(251,180,174) rgb(179,205,227) rgb(204,235,197) rgb(222,203,228) rgb(254,217,166) rgb(255,255,204) rgb(229,216,189)".split(" "),8:"rgb(251,180,174) rgb(179,205,227) rgb(204,235,197) rgb(222,203,228) rgb(254,217,166) rgb(255,255,204) rgb(229,216,189) rgb(253,218,236)".split(" "),9:"rgb(251,180,174) rgb(179,205,227) rgb(204,235,197) rgb(222,203,228) rgb(254,217,166) rgb(255,255,204) rgb(229,216,189) rgb(253,218,236) rgb(242,242,242)".split(" "),
type:"qual"},OrRd:{3:["rgb(254,232,200)","rgb(253,187,132)","rgb(227,74,51)"],4:["rgb(254,240,217)","rgb(253,204,138)","rgb(252,141,89)","rgb(215,48,31)"],5:["rgb(254,240,217)","rgb(253,204,138)","rgb(252,141,89)","rgb(227,74,51)","rgb(179,0,0)"],6:"rgb(254,240,217) rgb(253,212,158) rgb(253,187,132) rgb(252,141,89) rgb(227,74,51) rgb(179,0,0)".split(" "),7:"rgb(254,240,217) rgb(253,212,158) rgb(253,187,132) rgb(252,141,89) rgb(239,101,72) rgb(215,48,31) rgb(153,0,0)".split(" "),8:"rgb(255,247,236) rgb(254,232,200) rgb(253,212,158) rgb(253,187,132) rgb(252,141,89) rgb(239,101,72) rgb(215,48,31) rgb(153,0,0)".split(" "),
9:"rgb(255,247,236) rgb(254,232,200) rgb(253,212,158) rgb(253,187,132) rgb(252,141,89) rgb(239,101,72) rgb(215,48,31) rgb(179,0,0) rgb(127,0,0)".split(" "),type:"seq"},PuBu:{3:["rgb(236,231,242)","rgb(166,189,219)","rgb(43,140,190)"],4:["rgb(241,238,246)","rgb(189,201,225)","rgb(116,169,207)","rgb(5,112,176)"],5:["rgb(241,238,246)","rgb(189,201,225)","rgb(116,169,207)","rgb(43,140,190)","rgb(4,90,141)"],6:"rgb(241,238,246) rgb(208,209,230) rgb(166,189,219) rgb(116,169,207) rgb(43,140,190) rgb(4,90,141)".split(" "),
7:"rgb(241,238,246) rgb(208,209,230) rgb(166,189,219) rgb(116,169,207) rgb(54,144,192) rgb(5,112,176) rgb(3,78,123)".split(" "),8:"rgb(255,247,251) rgb(236,231,242) rgb(208,209,230) rgb(166,189,219) rgb(116,169,207) rgb(54,144,192) rgb(5,112,176) rgb(3,78,123)".split(" "),9:"rgb(255,247,251) rgb(236,231,242) rgb(208,209,230) rgb(166,189,219) rgb(116,169,207) rgb(54,144,192) rgb(5,112,176) rgb(4,90,141) rgb(2,56,88)".split(" "),type:"seq"},BuPu:{3:["rgb(224,236,244)","rgb(158,188,218)","rgb(136,86,167)"],
4:["rgb(237,248,251)","rgb(179,205,227)","rgb(140,150,198)","rgb(136,65,157)"],5:["rgb(237,248,251)","rgb(179,205,227)","rgb(140,150,198)","rgb(136,86,167)","rgb(129,15,124)"],6:"rgb(237,248,251) rgb(191,211,230) rgb(158,188,218) rgb(140,150,198) rgb(136,86,167) rgb(129,15,124)".split(" "),7:"rgb(237,248,251) rgb(191,211,230) rgb(158,188,218) rgb(140,150,198) rgb(140,107,177) rgb(136,65,157) rgb(110,1,107)".split(" "),8:"rgb(247,252,253) rgb(224,236,244) rgb(191,211,230) rgb(158,188,218) rgb(140,150,198) rgb(140,107,177) rgb(136,65,157) rgb(110,1,107)".split(" "),
9:"rgb(247,252,253) rgb(224,236,244) rgb(191,211,230) rgb(158,188,218) rgb(140,150,198) rgb(140,107,177) rgb(136,65,157) rgb(129,15,124) rgb(77,0,75)".split(" "),type:"seq"},Oranges:{3:["rgb(254,230,206)","rgb(253,174,107)","rgb(230,85,13)"],4:["rgb(254,237,222)","rgb(253,190,133)","rgb(253,141,60)","rgb(217,71,1)"],5:["rgb(254,237,222)","rgb(253,190,133)","rgb(253,141,60)","rgb(230,85,13)","rgb(166,54,3)"],6:"rgb(254,237,222) rgb(253,208,162) rgb(253,174,107) rgb(253,141,60) rgb(230,85,13) rgb(166,54,3)".split(" "),
7:"rgb(254,237,222) rgb(253,208,162) rgb(253,174,107) rgb(253,141,60) rgb(241,105,19) rgb(217,72,1) rgb(140,45,4)".split(" "),8:"rgb(255,245,235) rgb(254,230,206) rgb(253,208,162) rgb(253,174,107) rgb(253,141,60) rgb(241,105,19) rgb(217,72,1) rgb(140,45,4)".split(" "),9:"rgb(255,245,235) rgb(254,230,206) rgb(253,208,162) rgb(253,174,107) rgb(253,141,60) rgb(241,105,19) rgb(217,72,1) rgb(166,54,3) rgb(127,39,4)".split(" "),type:"seq"},BuGn:{3:["rgb(229,245,249)","rgb(153,216,201)","rgb(44,162,95)"],
4:["rgb(237,248,251)","rgb(178,226,226)","rgb(102,194,164)","rgb(35,139,69)"],5:["rgb(237,248,251)","rgb(178,226,226)","rgb(102,194,164)","rgb(44,162,95)","rgb(0,109,44)"],6:"rgb(237,248,251) rgb(204,236,230) rgb(153,216,201) rgb(102,194,164) rgb(44,162,95) rgb(0,109,44)".split(" "),7:"rgb(237,248,251) rgb(204,236,230) rgb(153,216,201) rgb(102,194,164) rgb(65,174,118) rgb(35,139,69) rgb(0,88,36)".split(" "),8:"rgb(247,252,253) rgb(229,245,249) rgb(204,236,230) rgb(153,216,201) rgb(102,194,164) rgb(65,174,118) rgb(35,139,69) rgb(0,88,36)".split(" "),
9:"rgb(247,252,253) rgb(229,245,249) rgb(204,236,230) rgb(153,216,201) rgb(102,194,164) rgb(65,174,118) rgb(35,139,69) rgb(0,109,44) rgb(0,68,27)".split(" "),type:"seq"},YlOrBr:{3:["rgb(255,247,188)","rgb(254,196,79)","rgb(217,95,14)"],4:["rgb(255,255,212)","rgb(254,217,142)","rgb(254,153,41)","rgb(204,76,2)"],5:["rgb(255,255,212)","rgb(254,217,142)","rgb(254,153,41)","rgb(217,95,14)","rgb(153,52,4)"],6:"rgb(255,255,212) rgb(254,227,145) rgb(254,196,79) rgb(254,153,41) rgb(217,95,14) rgb(153,52,4)".split(" "),
7:"rgb(255,255,212) rgb(254,227,145) rgb(254,196,79) rgb(254,153,41) rgb(236,112,20) rgb(204,76,2) rgb(140,45,4)".split(" "),8:"rgb(255,255,229) rgb(255,247,188) rgb(254,227,145) rgb(254,196,79) rgb(254,153,41) rgb(236,112,20) rgb(204,76,2) rgb(140,45,4)".split(" "),9:"rgb(255,255,229) rgb(255,247,188) rgb(254,227,145) rgb(254,196,79) rgb(254,153,41) rgb(236,112,20) rgb(204,76,2) rgb(153,52,4) rgb(102,37,6)".split(" "),type:"seq"},YlGn:{3:["rgb(247,252,185)","rgb(173,221,142)","rgb(49,163,84)"],4:["rgb(255,255,204)",
"rgb(194,230,153)","rgb(120,198,121)","rgb(35,132,67)"],5:["rgb(255,255,204)","rgb(194,230,153)","rgb(120,198,121)","rgb(49,163,84)","rgb(0,104,55)"],6:"rgb(255,255,204) rgb(217,240,163) rgb(173,221,142) rgb(120,198,121) rgb(49,163,84) rgb(0,104,55)".split(" "),7:"rgb(255,255,204) rgb(217,240,163) rgb(173,221,142) rgb(120,198,121) rgb(65,171,93) rgb(35,132,67) rgb(0,90,50)".split(" "),8:"rgb(255,255,229) rgb(247,252,185) rgb(217,240,163) rgb(173,221,142) rgb(120,198,121) rgb(65,171,93) rgb(35,132,67) rgb(0,90,50)".split(" "),
9:"rgb(255,255,229) rgb(247,252,185) rgb(217,240,163) rgb(173,221,142) rgb(120,198,121) rgb(65,171,93) rgb(35,132,67) rgb(0,104,55) rgb(0,69,41)".split(" "),type:"seq"},Reds:{3:["rgb(254,224,210)","rgb(252,146,114)","rgb(222,45,38)"],4:["rgb(254,229,217)","rgb(252,174,145)","rgb(251,106,74)","rgb(203,24,29)"],5:["rgb(254,229,217)","rgb(252,174,145)","rgb(251,106,74)","rgb(222,45,38)","rgb(165,15,21)"],6:"rgb(254,229,217) rgb(252,187,161) rgb(252,146,114) rgb(251,106,74) rgb(222,45,38) rgb(165,15,21)".split(" "),
7:"rgb(254,229,217) rgb(252,187,161) rgb(252,146,114) rgb(251,106,74) rgb(239,59,44) rgb(203,24,29) rgb(153,0,13)".split(" "),8:"rgb(255,245,240) rgb(254,224,210) rgb(252,187,161) rgb(252,146,114) rgb(251,106,74) rgb(239,59,44) rgb(203,24,29) rgb(153,0,13)".split(" "),9:"rgb(255,245,240) rgb(254,224,210) rgb(252,187,161) rgb(252,146,114) rgb(251,106,74) rgb(239,59,44) rgb(203,24,29) rgb(165,15,21) rgb(103,0,13)".split(" "),type:"seq"},RdPu:{3:["rgb(253,224,221)","rgb(250,159,181)","rgb(197,27,138)"],
4:["rgb(254,235,226)","rgb(251,180,185)","rgb(247,104,161)","rgb(174,1,126)"],5:["rgb(254,235,226)","rgb(251,180,185)","rgb(247,104,161)","rgb(197,27,138)","rgb(122,1,119)"],6:"rgb(254,235,226) rgb(252,197,192) rgb(250,159,181) rgb(247,104,161) rgb(197,27,138) rgb(122,1,119)".split(" "),7:"rgb(254,235,226) rgb(252,197,192) rgb(250,159,181) rgb(247,104,161) rgb(221,52,151) rgb(174,1,126) rgb(122,1,119)".split(" "),8:"rgb(255,247,243) rgb(253,224,221) rgb(252,197,192) rgb(250,159,181) rgb(247,104,161) rgb(221,52,151) rgb(174,1,126) rgb(122,1,119)".split(" "),
9:"rgb(255,247,243) rgb(253,224,221) rgb(252,197,192) rgb(250,159,181) rgb(247,104,161) rgb(221,52,151) rgb(174,1,126) rgb(122,1,119) rgb(73,0,106)".split(" "),type:"seq"},Greens:{3:["rgb(229,245,224)","rgb(161,217,155)","rgb(49,163,84)"],4:["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(35,139,69)"],5:["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(49,163,84)","rgb(0,109,44)"],6:"rgb(237,248,233) rgb(199,233,192) rgb(161,217,155) rgb(116,196,118) rgb(49,163,84) rgb(0,109,44)".split(" "),
7:"rgb(237,248,233) rgb(199,233,192) rgb(161,217,155) rgb(116,196,118) rgb(65,171,93) rgb(35,139,69) rgb(0,90,50)".split(" "),8:"rgb(247,252,245) rgb(229,245,224) rgb(199,233,192) rgb(161,217,155) rgb(116,196,118) rgb(65,171,93) rgb(35,139,69) rgb(0,90,50)".split(" "),9:"rgb(247,252,245) rgb(229,245,224) rgb(199,233,192) rgb(161,217,155) rgb(116,196,118) rgb(65,171,93) rgb(35,139,69) rgb(0,109,44) rgb(0,68,27)".split(" "),type:"seq"},YlGnBu:{3:["rgb(237,248,177)","rgb(127,205,187)","rgb(44,127,184)"],
4:["rgb(255,255,204)","rgb(161,218,180)","rgb(65,182,196)","rgb(34,94,168)"],5:["rgb(255,255,204)","rgb(161,218,180)","rgb(65,182,196)","rgb(44,127,184)","rgb(37,52,148)"],6:"rgb(255,255,204) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(44,127,184) rgb(37,52,148)".split(" "),7:"rgb(255,255,204) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(12,44,132)".split(" "),8:"rgb(255,255,217) rgb(237,248,177) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(12,44,132)".split(" "),
9:"rgb(255,255,217) rgb(237,248,177) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(37,52,148) rgb(8,29,88)".split(" "),type:"seq"},Purples:{3:["rgb(239,237,245)","rgb(188,189,220)","rgb(117,107,177)"],4:["rgb(242,240,247)","rgb(203,201,226)","rgb(158,154,200)","rgb(106,81,163)"],5:["rgb(242,240,247)","rgb(203,201,226)","rgb(158,154,200)","rgb(117,107,177)","rgb(84,39,143)"],6:"rgb(242,240,247) rgb(218,218,235) rgb(188,189,220) rgb(158,154,200) rgb(117,107,177) rgb(84,39,143)".split(" "),
7:"rgb(242,240,247) rgb(218,218,235) rgb(188,189,220) rgb(158,154,200) rgb(128,125,186) rgb(106,81,163) rgb(74,20,134)".split(" "),8:"rgb(252,251,253) rgb(239,237,245) rgb(218,218,235) rgb(188,189,220) rgb(158,154,200) rgb(128,125,186) rgb(106,81,163) rgb(74,20,134)".split(" "),9:"rgb(252,251,253) rgb(239,237,245) rgb(218,218,235) rgb(188,189,220) rgb(158,154,200) rgb(128,125,186) rgb(106,81,163) rgb(84,39,143) rgb(63,0,125)".split(" "),type:"seq"},GnBu:{3:["rgb(224,243,219)","rgb(168,221,181)","rgb(67,162,202)"],
4:["rgb(240,249,232)","rgb(186,228,188)","rgb(123,204,196)","rgb(43,140,190)"],5:["rgb(240,249,232)","rgb(186,228,188)","rgb(123,204,196)","rgb(67,162,202)","rgb(8,104,172)"],6:"rgb(240,249,232) rgb(204,235,197) rgb(168,221,181) rgb(123,204,196) rgb(67,162,202) rgb(8,104,172)".split(" "),7:"rgb(240,249,232) rgb(204,235,197) rgb(168,221,181) rgb(123,204,196) rgb(78,179,211) rgb(43,140,190) rgb(8,88,158)".split(" "),8:"rgb(247,252,240) rgb(224,243,219) rgb(204,235,197) rgb(168,221,181) rgb(123,204,196) rgb(78,179,211) rgb(43,140,190) rgb(8,88,158)".split(" "),
9:"rgb(247,252,240) rgb(224,243,219) rgb(204,235,197) rgb(168,221,181) rgb(123,204,196) rgb(78,179,211) rgb(43,140,190) rgb(8,104,172) rgb(8,64,129)".split(" "),type:"seq"},Greys:{3:["rgb(240,240,240)","rgb(189,189,189)","rgb(99,99,99)"],4:["rgb(247,247,247)","rgb(204,204,204)","rgb(150,150,150)","rgb(82,82,82)"],5:["rgb(247,247,247)","rgb(204,204,204)","rgb(150,150,150)","rgb(99,99,99)","rgb(37,37,37)"],6:"rgb(247,247,247) rgb(217,217,217) rgb(189,189,189) rgb(150,150,150) rgb(99,99,99) rgb(37,37,37)".split(" "),
7:"rgb(247,247,247) rgb(217,217,217) rgb(189,189,189) rgb(150,150,150) rgb(115,115,115) rgb(82,82,82) rgb(37,37,37)".split(" "),8:"rgb(255,255,255) rgb(240,240,240) rgb(217,217,217) rgb(189,189,189) rgb(150,150,150) rgb(115,115,115) rgb(82,82,82) rgb(37,37,37)".split(" "),9:"rgb(255,255,255) rgb(240,240,240) rgb(217,217,217) rgb(189,189,189) rgb(150,150,150) rgb(115,115,115) rgb(82,82,82) rgb(37,37,37) rgb(0,0,0)".split(" "),type:"seq"},YlOrRd:{3:["rgb(255,237,160)","rgb(254,178,76)","rgb(240,59,32)"],
4:["rgb(255,255,178)","rgb(254,204,92)","rgb(253,141,60)","rgb(227,26,28)"],5:["rgb(255,255,178)","rgb(254,204,92)","rgb(253,141,60)","rgb(240,59,32)","rgb(189,0,38)"],6:"rgb(255,255,178) rgb(254,217,118) rgb(254,178,76) rgb(253,141,60) rgb(240,59,32) rgb(189,0,38)".split(" "),7:"rgb(255,255,178) rgb(254,217,118) rgb(254,178,76) rgb(253,141,60) rgb(252,78,42) rgb(227,26,28) rgb(177,0,38)".split(" "),8:"rgb(255,255,204) rgb(255,237,160) rgb(254,217,118) rgb(254,178,76) rgb(253,141,60) rgb(252,78,42) rgb(227,26,28) rgb(177,0,38)".split(" "),
type:"seq"},PuRd:{3:["rgb(231,225,239)","rgb(201,148,199)","rgb(221,28,119)"],4:["rgb(241,238,246)","rgb(215,181,216)","rgb(223,101,176)","rgb(206,18,86)"],5:["rgb(241,238,246)","rgb(215,181,216)","rgb(223,101,176)","rgb(221,28,119)","rgb(152,0,67)"],6:"rgb(241,238,246) rgb(212,185,218) rgb(201,148,199) rgb(223,101,176) rgb(221,28,119) rgb(152,0,67)".split(" "),7:"rgb(241,238,246) rgb(212,185,218) rgb(201,148,199) rgb(223,101,176) rgb(231,41,138) rgb(206,18,86) rgb(145,0,63)".split(" "),8:"rgb(247,244,249) rgb(231,225,239) rgb(212,185,218) rgb(201,148,199) rgb(223,101,176) rgb(231,41,138) rgb(206,18,86) rgb(145,0,63)".split(" "),
9:"rgb(247,244,249) rgb(231,225,239) rgb(212,185,218) rgb(201,148,199) rgb(223,101,176) rgb(231,41,138) rgb(206,18,86) rgb(152,0,67) rgb(103,0,31)".split(" "),type:"seq"},Blues:{3:["rgb(222,235,247)","rgb(158,202,225)","rgb(49,130,189)"],4:["rgb(239,243,255)","rgb(189,215,231)","rgb(107,174,214)","rgb(33,113,181)"],5:["rgb(239,243,255)","rgb(189,215,231)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],6:"rgb(239,243,255) rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(49,130,189) rgb(8,81,156)".split(" "),
7:"rgb(239,243,255) rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(66,146,198) rgb(33,113,181) rgb(8,69,148)".split(" "),8:"rgb(247,251,255) rgb(222,235,247) rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(66,146,198) rgb(33,113,181) rgb(8,69,148)".split(" "),9:"rgb(247,251,255) rgb(222,235,247) rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(66,146,198) rgb(33,113,181) rgb(8,81,156) rgb(8,48,107)".split(" "),type:"seq"},PuBuGn:{3:["rgb(236,226,240)","rgb(166,189,219)","rgb(28,144,153)"],
4:["rgb(246,239,247)","rgb(189,201,225)","rgb(103,169,207)","rgb(2,129,138)"],5:["rgb(246,239,247)","rgb(189,201,225)","rgb(103,169,207)","rgb(28,144,153)","rgb(1,108,89)"],6:"rgb(246,239,247) rgb(208,209,230) rgb(166,189,219) rgb(103,169,207) rgb(28,144,153) rgb(1,108,89)".split(" "),7:"rgb(246,239,247) rgb(208,209,230) rgb(166,189,219) rgb(103,169,207) rgb(54,144,192) rgb(2,129,138) rgb(1,100,80)".split(" "),8:"rgb(255,247,251) rgb(236,226,240) rgb(208,209,230) rgb(166,189,219) rgb(103,169,207) rgb(54,144,192) rgb(2,129,138) rgb(1,100,80)".split(" "),
9:"rgb(255,247,251) rgb(236,226,240) rgb(208,209,230) rgb(166,189,219) rgb(103,169,207) rgb(54,144,192) rgb(2,129,138) rgb(1,108,89) rgb(1,70,54)".split(" "),type:"seq"}};/*
 Use it if you like it
*/
function RGBColor(c){this.ok=!1;"#"==c.charAt(0)&&(c=c.substr(1,6));c=c.replace(/0x/,"");c=c.replace(/ /g,"");c=c.toLowerCase();var g={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",
darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",
fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",
lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",
navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",
slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},e;for(e in g)c==e&&(c=g[e]);var h=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},
{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}];for(e=0;e<h.length;e++){var m=h[e].process,p=h[e].re.exec(c);p&&(channels=m(p),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=0>this.r||isNaN(this.r)?0:255<this.r?255:this.r;this.g=
0>this.g||isNaN(this.g)?0:255<this.g?255:this.g;this.b=0>this.b||isNaN(this.b)?0:255<this.b?255:this.b;this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var c=this.r.toString(16),e=this.g.toString(16),g=this.b.toString(16);1==c.length&&(c="0"+c);1==e.length&&(e="0"+e);1==g.length&&(g="0"+g);return"#"+c+e+g};this.getHelpXML=function(){for(var c=[],e=0;e<h.length;e++)for(var m=h[e].example,p=0;p<m.length;p++)c[c.length]=m[p];for(var x in g)c[c.length]=x;m=
document.createElement("ul");m.setAttribute("id","rgbcolor-examples");for(e=0;e<c.length;e++)try{var y=document.createElement("li"),D=new RGBColor(c[e]),J=document.createElement("div");J.style.cssText="margin: 3px; border: 1px solid black; background:"+D.toHex()+"; color:"+D.toHex();J.appendChild(document.createTextNode("test"));var R=document.createTextNode(" "+c[e]+" -> "+D.toRGB()+" -> "+D.toHex());y.appendChild(J);y.appendChild(R);m.appendChild(y)}catch(M){}return m}};var saveAs=saveAs||"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(c){var g=c.document,e=c.URL||c.webkitURL||c,h=g.createElementNS("http://www.w3.org/1999/xhtml","a"),m=!c.externalHost&&"download"in h,p=c.webkitRequestFileSystem,q=c.requestFileSystem||p||c.mozRequestFileSystem,t=function(e){(c.setImmediate||c.setTimeout)(function(){throw e;},0)},u=0,v=[],x=function(c,e,g){e=[].concat(e);for(var h=e.length;h--;){var m=c["on"+e[h]];if("function"===
typeof m)try{m.call(c,g||c)}catch(p){t(p)}}},y=function(e,t){var y=this,D=e.type,ca=!1,$,L,G=function(){var g=(c.URL||c.webkitURL||c).createObjectURL(e);v.push(g);return g},U=function(){x(y,["writestart","progress","write","writeend"])},C=function(){if(ca||!$)$=G(e);L?L.location.href=$:window.open($,"_blank");y.readyState=y.DONE;U()},E=function(c){return function(){if(y.readyState!==y.DONE)return c.apply(this,arguments)}},Y={create:!0,exclusive:!1},T;y.readyState=y.INIT;t||(t="download");if(m)$=G(e),
g=c.document,h=g.createElementNS("http://www.w3.org/1999/xhtml","a"),h.href=$,h.download=t,D=g.createEvent("MouseEvents"),D.initMouseEvent("click",!0,!1,c,0,0,0,0,0,!1,!1,!1,!1,0,null),h.dispatchEvent(D),y.readyState=y.DONE,U();else{c.chrome&&D&&"application/octet-stream"!==D&&(T=e.slice||e.webkitSlice,e=T.call(e,0,e.size,"application/octet-stream"),ca=!0);p&&"download"!==t&&(t+=".download");if("application/octet-stream"===D||p)L=c;q?(u+=e.size,q(c.TEMPORARY,u,E(function(c){c.root.getDirectory("saved",
Y,E(function(c){var g=function(){c.getFile(t,Y,E(function(c){c.createWriter(E(function(g){g.onwriteend=function(e){L.location.href=c.toURL();v.push(c);y.readyState=y.DONE;x(y,"writeend",e)};g.onerror=function(){var c=g.error;c.code!==c.ABORT_ERR&&C()};["writestart","progress","write","abort"].forEach(function(c){g["on"+c]=y["on"+c]});g.write(e);y.abort=function(){g.abort();y.readyState=y.DONE};y.readyState=y.WRITING}),C)}),C)};c.getFile(t,{create:!1},E(function(c){c.remove();g()}),E(function(c){c.code===
c.NOT_FOUND_ERR?g():C()}))}),C)}),C)):C()}},D=y.prototype;D.abort=function(){this.readyState=this.DONE;x(this,"abort")};D.readyState=D.INIT=0;D.WRITING=1;D.DONE=2;D.error=D.onwritestart=D.onprogress=D.onwrite=D.onabort=D.onerror=D.onwriteend=null;c.addEventListener("unload",function(){for(var c=v.length;c--;){var g=v[c];"string"===typeof g?e.revokeObjectURL(g):g.remove()}v.length=0},!1);return function(c,e){return new y(c,e)}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||
this.content);"undefined"!==typeof module&&(module.exports=saveAs);var xiNET={svgns:"http://www.w3.org/2000/svg",xlinkNS:"http://www.w3.org/1999/xlink",linkWidth:1.3,homodimerLinkWidth:1.3};xiNET.highlightColour=new RGBColor("#fdc086");xiNET.selectedColour=new RGBColor("#ffff99");xiNET.defaultSelfLinkColour=new RGBColor("#9970ab");xiNET.defaultInterLinkColour=new RGBColor("#35978f");xiNET.homodimerLinkColour=new RGBColor("#a50f15");
xiNET.Controller=function(c){"string"===typeof c&&(c=document.getElementById(c));this.emptyElement(c);this.svgElement=document.createElementNS(xiNET.svgns,"svg");this.svgElement.setAttribute("id","networkSVG");this.svgElement.setAttribute("width","100%");this.svgElement.setAttribute("height","100%");this.svgElement.setAttribute("style","display:block;");this.svgElement.oncontextmenu=function(){return!1};var g=this;this.svgElement.onmousedown=function(c){g.mouseDown(c)};this.svgElement.onmousemove=
function(c){g.mouseMove(c)};this.svgElement.onmouseup=function(c){g.mouseUp(c)};this.svgElement.onmouseout=function(c){g.hideTooltip(c)};var e=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";document.attachEvent?this.svgElement.attachEvent("on"+e,function(c){g.mouseWheel(c)}):document.addEventListener&&this.svgElement.addEventListener(e,function(c){g.mouseWheel(c)},!1);this.lastMouseUp=(new Date).getTime();this.svgElement.ontouchstart=function(c){g.touchStart(c)};this.svgElement.ontouchmove=
function(c){g.touchMove(c)};this.svgElement.ontouchend=function(c){g.message("touch end");g.touchEnd(c)};document.onkeypress=function(c){if("a"==c.key){c="ProteinId,AnnotName,StartRes,EndRes,Color\n";for(var e=g.proteins.values(),p=e.length,q=0;q<p;q++)for(var t=e[q],u=t.annotations,v=u.length,x=0;x<v;x++){var y=u[x];c+=t.id+","+y.name+","+y.start+","+y.end+","+y.colour.toHex()+"\n"}c="data:application/txt;filename=annotations.csv,"+encodeURIComponent(c);window.open(c,"annotations.csv")}};c.appendChild(this.svgElement);
this.ambigShown=this.selfLinksShown=!0;c=document.createElementNS(xiNET.svgns,"rect");c.setAttribute("id","background_fill");c.setAttribute("x",0);c.setAttribute("y",0);c.setAttribute("width",5120);c.setAttribute("height",4096);c.setAttribute("fill-opacity","1");c.setAttribute("fill","#FFFFFF");this.svgElement.appendChild(c);this.container=document.createElementNS(xiNET.svgns,"g");this.container.setAttribute("id","container");this.p_pLinksWide=document.createElementNS(xiNET.svgns,"g");this.p_pLinksWide.setAttribute("id",
"p_pLinksWide");this.container.appendChild(this.p_pLinksWide);this.proteinLower=document.createElementNS(xiNET.svgns,"g");this.proteinLower.setAttribute("id","proteinLower");this.container.appendChild(this.proteinLower);this.highlights=document.createElementNS(xiNET.svgns,"g");this.highlights.setAttribute("class","highlights");this.container.appendChild(this.highlights);this.res_resLinks=document.createElementNS(xiNET.svgns,"g");this.res_resLinks.setAttribute("id","res_resLinks");this.container.appendChild(this.res_resLinks);
this.p_pLinks=document.createElementNS(xiNET.svgns,"g");this.p_pLinks.setAttribute("id","p_pLinks");this.container.appendChild(this.p_pLinks);this.proteinUpper=document.createElementNS(xiNET.svgns,"g");this.proteinUpper.setAttribute("id","proteinUpper");this.container.appendChild(this.proteinUpper);this.svgElement.appendChild(this.container);this.tooltip=document.createElementNS(xiNET.svgns,"text");this.tooltip.setAttribute("x",0);this.tooltip.setAttribute("y",0);c=document.createTextNode("tooltip");
this.tooltip.appendChild(c);this.tooltip_bg=document.createElementNS(xiNET.svgns,"rect");this.tooltip_bg.setAttribute("class","tooltip_bg");this.tooltip_bg.setAttribute("fill-opacity",.75);this.tooltip_bg.setAttribute("stroke-opacity",1);this.tooltip_bg.setAttribute("stroke-width",1);this.tooltip_subBg=document.createElementNS(xiNET.svgns,"rect");this.tooltip_subBg.setAttribute("fill","white");this.tooltip_subBg.setAttribute("stroke","white");this.tooltip_subBg.setAttribute("class","tooltip_bg");
this.tooltip_subBg.setAttribute("opacity",1);this.tooltip_subBg.setAttribute("stroke-width",1);this.svgElement.appendChild(this.tooltip_subBg);this.svgElement.appendChild(this.tooltip_bg);this.svgElement.appendChild(this.tooltip);this.clear()};xiNET.setCTM=function(c,g){c.setAttribute("transform","matrix("+g.a+","+g.b+","+g.c+","+g.d+","+g.e+","+g.f+")")};
xiNET.Controller.prototype.clear=function(){this.sequenceInitComplete=!1;this.force&&this.force.stop();this.force=null;this.emptyElement(this.p_pLinksWide);this.emptyElement(this.highlights);this.emptyElement(this.p_pLinks);this.emptyElement(this.res_resLinks);this.emptyElement(this.proteinLower);this.emptyElement(this.proteinUpper);this.panning=!1;this.dragElement=null;this.dragging=!1;this.dragStart={};this.rotating=!1;this.proteins=d3.map();this.proteinLinks=d3.map();this.matches=d3.map();this.subgraphs=
[];this.proteinCount=this.layoutXOffset=0;this.maxBlobRadius=30;Protein.MAXSIZE=100;this.layout=null;this.z=1;this.scores=null;this.selected=d3.map();this.selectedLinks=d3.map();this.hideTooltip();this.resetZoom();this.state=xiNET.Controller.MOUSE_UP};xiNET.Controller.prototype.emptyElement=function(c){for(;c.lastChild;)c.removeChild(c.lastChild)};
xiNET.Controller.prototype.setAnnotations=function(c){this.annotationSet=c;if(this.sequenceInitComplete){for(var g=this.proteins.values(),e=g.length,h=this,m=0;m<e;m++){var p=g[m];if("CUSTOM"===c.toUpperCase())p.setPositionalFeatures(p.customAnnotations);else if("SUPERFAM"===c.toUpperCase()||"SUPERFAMILY"===c.toUpperCase())xiNET_Storage.getSuperFamFeatures(p.id,function(c,e){h.proteins.get(c).setPositionalFeatures(e)});else if("UNIPROT"===c.toUpperCase()||"UNIPROTKB"===c.toUpperCase())xiNET_Storage.getUniProtFeatures(p.id,
function(c,e){h.proteins.get(c).setPositionalFeatures(e)});else if("LYSINES"===c.toUpperCase()){for(var q=p.sequence,t=[],u=0;u<p.size;u++)"K"===q[u]&&t.push(new Annotation("Lysine",u+1,u+1));p.setPositionalFeatures(t)}else p.setPositionalFeatures([])}return!0}return!1};
xiNET.Controller.prototype.initLayout=function(){if("undefined"!==typeof this.layout&&null!=this.layout)this.loadLayout();else{for(var c=this.proteins.values(),g=c.length,e=0;e<g;e++){var h=c[e];this.proteinLower.appendChild(h.lowerGroup);this.proteinUpper.appendChild(h.upperGroup);h.setForm(0)}this.autoLayout()}};
xiNET.Controller.prototype.initProteins=function(){for(var c=this.proteins.values(),g=c.length,e=Protein.MAXSIZE=0;e<g;e++){var h=c[e].size;h>Protein.MAXSIZE&&(Protein.MAXSIZE=h)}this.maxBlobRadius=10;Protein.UNITS_PER_RESIDUE=(this.svgElement.parentNode.clientWidth/2-Protein.LABELMAXLENGTH)/Protein.MAXSIZE;for(e=0;e<g;e++)c[e].init();this.sequenceInitComplete=!0;this.annotationSet?xlv.setAnnotations(this.annotationSet):this.setAnnotations("CUSTOM")};
xiNET.Controller.prototype.reset=function(){this.resetZoom();for(var c=this.proteins.values(),g=c.length,e=0;e<g;e++){var h=c[e];!1===h.isParked&&h.setForm(0)}this.autoLayout()};xiNET.Controller.prototype.resetZoom=function(){this.container.setAttribute("transform","scale(1)");this.scale()};
xiNET.Controller.prototype.exportSVG=function(){var c=this.svgElement.parentNode.innerHTML.replace(/<rect .*?\/rect>/i,""),g=c=c.replace("<svg ",'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events" '),c=document.getElementsByTagName("title")[0].innerHTML.slice(0,-4)+".svg",e=[],h;try{h=new TextEncoder("utf-8")}catch(m){h=void 0}if(h)e=h.encode(g);else for(h=0;h<g.length;h++){var p=g.charCodeAt(h);128>p?e.push(p):2048>p?e.push(192|
p>>6,128|p&63):55296>p||57344<=p?e.push(224|p>>12,128|p>>6&63,128|p&63):(h++,p=65536+((p&1023)<<10|g.charCodeAt(h)&1023),e.push(240|p>>18,128|p>>12&63,128|p>>6&63,128|p&63))}g=new Blob([new Uint8Array(e)],{type:"image/svg+xml;charset=utf-8"});navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(g,c):(e=document.createElement("a"),e.href=window.URL.createObjectURL(g),e.download=c,e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(e.href))};
xiNET.Controller.prototype.message=function(c,g){"undefined"!==typeof this.messageElement&&("object"===typeof c&&(c=JSON.stringify(c,null," "),c=c.replace(/\\u0000/gi,""),g=!0),g&&(c="<pre>"+c+"</pre>"),this.messageElement.innerHTML=c)};xiNET.Controller.prototype.addProtein=function(c,g,e,h,m,p){g=new Protein(c,this,m,g);g.setSequence(e);g.init();this.proteins.set(c,g)};
xiNET.Controller.prototype.addMatch=function(c,g,e,h,m,p,q,t,u,v,x,y,D,J,R){c=new Match(c,g,e,h,m,p,this,q,t,u,v,x,y,D,J,R);this.matches.set(m,c);return c};xiNET.Controller.prototype.addMatches=function(c){for(var g=c.length,e=0;e<g;e++)this.addMatch(c[e][0],c[e][1],c[e][2],c[e][3],c[e][4],c[e][5],c[e][6],c[e][7],c[e][8],c[e][9])};
xiNET.Controller.prototype.addAnnotation=function(c,g,e,h,m){c=c.toString().trim();if(c=this.proteins.get(c)){e=parseInt(e);h=parseInt(h);isNaN(e)&&isNaN(h)?(e=1,h=c.size):isNaN(e)?e=h:isNaN(h)&&(h=e);if(e>h){var p=e;e=h;h=p}g=new Annotation(g,e,h,m);null==c.customAnnotations&&(c.customAnnotations=[]);c.customAnnotations.push(g)}};
xiNET.Controller.prototype.addAnnotationByName=function(c,g,e,h,m){for(var p=this.proteins.values(),q=p.length,t=0;t<q;t++){var u=p[t];u.name==c&&this.addAnnotation(u.id,g,e,h,m)}};
xiNET.Controller.prototype.addAnnotations=function(c){c=d3.csv.parseRows(c);for(var g=c[0],e=0;e<g.length;e++)g[e]=g[e].trim().toUpperCase();var e=g.indexOf("PROTEINID"),h=g.indexOf("ANNOTNAME");-1===h&&(h=g.indexOf("NAME"));var m=g.indexOf("STARTRES");-1===m&&(m=g.indexOf("STARTRESIDUE"));var p=g.indexOf("ENDRES");-1===p&&(p=g.indexOf("ENDRESIDUE"));var q=g.indexOf("COLOR");-1===q&&(q=g.indexOf("COLOUR"));for(var g=c.length,t=1;t<g;t++)this.addAnnotation(c[t][e],c[t][h],c[t][m],c[t][p],c[t][q])};
xiNET.Controller.prototype.getLayout=function(){return JSON.stringify(this.proteins,null,"\t").replace(/\\u0000/gi,"")};xiNET.Controller.prototype.setLayout=function(c){this.layout="object"!==typeof c?JSON.parse(decodeURIComponent(c)):c};
xiNET.Controller.prototype.loadLayout=function(){for(var c in this.layout){var g=this.layout[c],e=this.proteins.get(c);void 0!==e&&(e.setPosition(g.x,g.y),"undefined"!==typeof g.stickZoom&&(e.stickZoom=g.stickZoom),"undefined"!==typeof g.rot&&(e.rotation=g.rot),"undefined"!==typeof g.form&&e.setForm(g.form),e.checkLinks(),e.setAllLineCoordinates(),"undefined"!==typeof g.parked&&e.setParked(g.parked),g.flipped&&e.toggleFlipped(),this.proteinLower.appendChild(e.lowerGroup),this.proteinUpper.appendChild(e.upperGroup))}for(var g=
this.proteins.values(),e=g.length,h=0;h<e;h++)c=g[h],null==c.x&&(c.setPosition(20,20),this.proteinLower.appendChild(c.lowerGroup),this.proteinUpper.appendChild(c.upperGroup),c.setForm(0))};xiNET.Controller.prototype.setLinkColour=function(c,g){var e=this.proteinLinks.get(c);"undefined"!==typeof e?(e.colour=new RGBColor(g),e.colourSpecified=!0):(e=this.proteins.get(c),"undefined"!==typeof e&&(e.internalLinkColour=new RGBColor(g)))};
xiNET.Controller.prototype.parkAll=function(){for(var c=this.proteins.values(),g=c.length,e=0;e<g;e++){var h=c[e];!1===h.isParked&&h.toggleParked()}};xiNET.Controller.prototype.setCutOff=function(c){this.cutOff=c;this.checkLinks()};xiNET.Controller.prototype.showSelfLinks=function(c){this.selfLinksShown=c;this.checkLinks()};xiNET.Controller.prototype.showAmbig=function(c){this.ambigShown=c;this.checkLinks()};xiNET.Controller.prototype.setMessageElement=function(c){this.messageElement=c};xiNET.Controller.MOUSE_UP=0;xiNET.Controller.PANNING=1;xiNET.Controller.DRAGGING=2;xiNET.Controller.ROTATING=3;xiNET.Controller.SCALING_PROTEIN=4;xiNET.Controller.SCALING_ALL_PROTEINS=5;xiNET.Controller.SELECTING=6;
xiNET.Controller.prototype.mouseDown=function(c){c.preventDefault();"undefined"!==typeof this.force&&null!=this.force&&this.force.stop();var g=this.getEventPoint(c);this.dragStart=this.mouseToSVG(g.x,g.y);var e;c.which?e=3===c.which:c.button&&(e=2===c.button);!0===c.ctrlKey||!0===c.shiftKey||e||(this.state=xiNET.Controller.PANNING,this.panned=!1);return!1};
xiNET.Controller.prototype.mouseMove=function(c){var g=this.getEventPoint(c);c=this.mouseToSVG(g.x,g.y);if(null!=this.dragElement){this.hideTooltip();var e=this.dragStart.x-c.x,h=this.dragStart.y-c.y;if(this.state===xiNET.Controller.DRAGGING){var m,p;if("undefined"===typeof this.dragElement.x){var q;q=this.dragElement.fromProtein?this.dragElement.fromProtein:this.dragElement.proteinLink.fromProtein;for(var t=this.proteins.values(),u=t.length,g=0;g<u;g++)t[g].subgraph=null;g=q.getSubgraph().nodes.values();
q=g.length;for(t=0;t<q;t++)u=g[t],m=u.x,p=u.y,m-=e,p-=h,u.setPosition(m,p),u.setAllLineCoordinates();for(t=0;t<q;t++)g[t].setAllLineCoordinates()}else m=this.dragElement.x,p=this.dragElement.y,this.dragElement.setPosition(m-e,p-h),this.dragElement.setAllLineCoordinates();this.dragStart=c}else this.state===xiNET.Controller.ROTATING?(c=Math.atan2(c.y-this.dragElement.y,c.x-this.dragElement.x),0===this.whichRotator&&(c+=Math.PI),this.dragElement.setRotation(360/(2*Math.PI)*c),this.dragElement.setAllLineCoordinates()):
Math.sqrt(e*e+h*h)>5*this.z&&(this.state=xiNET.Controller.DRAGGING)}else this.state===xiNET.Controller.PANNING?xiNET.setCTM(this.container,this.container.getCTM().translate(c.x-this.dragStart.x,c.y-this.dragStart.y)):this.showTooltip(g);return!1};
xiNET.Controller.prototype.mouseUp=function(c){var g=(new Date).getTime();this.preventDefaultsAndStopPropagation(c);if(150<g-this.lastMouseUp){var e,h;c.which?e=3===c.which:c.button&&(e=2===c.button);c.which?h=2===c.which:c.button&&(h=1===c.button);var m=this.getEventPoint(c),m=this.mouseToSVG(m.x,m.y);if(null!=this.dragElement)this.state!==xiNET.Controller.DRAGGING&&this.state!==xiNET.Controller.ROTATING?e?"undefined"===typeof this.dragElement.x?this.dragElement.intra?this.dragElement.proteinLink&&
this.dragElement.proteinLink.fromProtein.toggleFlipped():(void 0!==this.dragElement.hidden?this.dragElement.hidden=!0:this.dragElement.proteinLink.hidden=!0,this.dragElement.highlightLine.setAttribute("stroke-opacity","0"),this.checkLinks()):this.dragElement.setParked(!this.dragElement.isParked,m):h||("undefined"===typeof this.dragElement.x?this.dragElement.showID():c.shiftKey?this.dragElement.switchStickScale(m):!0===this.sequenceInitComplete&&(0===this.dragElement.form?this.dragElement.setForm(1,
m):this.dragElement.setForm(0,m))):this.state===xiNET.Controller.ROTATING&&this.dragElement.setRotation(5*Math.round(this.dragElement.rotation/5));else if(e){c=this.proteinLinks.values();e=c.length;for(h=0;h<e;h++)c[h].hidden=!1;this.checkLinks()}else!1===c.ctrlKey&&this.clearSelection();this.state===xiNET.Controller.SELECTING&&(clearInterval(this.marcher),this.svgElement.removeChild(this.marquee))}this.dragElement=null;this.whichRotator=-1;this.state=xiNET.Controller.MOUSE_UP;this.lastMouseUp=g;
return!1};xiNET.Controller.prototype.updateMarquee=function(c,g){var e=this.dragStart,h=[e.x,g.x].sort(sortByNumber),e=[e.y,g.y].sort(sortByNumber);c.setAttribute("x",h[0]);c.setAttribute("y",e[0]);c.setAttribute("width",h[1]-h[0]);c.setAttribute("height",e[1]-e[0])};function sortByNumber(c,g){return c-g}
xiNET.Controller.prototype.mouseWheel=function(c){this.preventDefaultsAndStopPropagation(c);var g=1+(c.wheelDelta?c.wheelDelta/3600:c.detail/-90),e=this.container;c=this.getEventPoint(c);c=this.mouseToSVG(c.x,c.y);g=this.svgElement.createSVGMatrix().translate(c.x,c.y).scale(g).translate(-c.x,-c.y);xiNET.setCTM(e,e.getCTM().multiply(g));this.scale();return!1};xiNET.Controller.prototype.clearSelection=function(){for(var c=this.selected.values(),g=c.length,e=0;e<g;e++)c[e].setSelected(!1);this.message("No selection.")};
xiNET.Controller.prototype.getEventPoint=function(c){var g=this.svgElement.createSVGPoint(),e=this.svgElement.parentNode,h=0,m=0;do h+=e.offsetTop||0,m+=e.offsetLeft||0,e=e.offsetParent;while(e);g.x=c.pageX-m;g.y=c.pageY-h;return g};function getScrollTop(){if("undefined"!=typeof pageYOffset)return pageYOffset;var c=document.body,g=document.documentElement,g=g.clientHeight?g:c;return g.scrollTop}
xiNET.Controller.prototype.mouseToSVG=function(c,g){var e=this.svgElement.createSVGPoint();e.x=c;e.y=g;return e=e.matrixTransform(this.container.getCTM().inverse())};xiNET.Controller.prototype.preventDefaultsAndStopPropagation=function(c){c.stopPropagation&&c.stopPropagation();null!=c.cancelBubble&&(c.cancelBubble=!0);c.preventDefault&&c.preventDefault()};xiNET.Controller.prototype.touchStart=function(c){c.preventDefault();"undefined"!==typeof this.force&&null!=this.force&&this.force.stop();c=this.getTouchEventPoint(c);this.dragStart=this.mouseToSVG(c.x,c.y);this.state=xiNET.Controller.PANNING};
xiNET.Controller.prototype.touchMove=function(c){this.preventDefaultsAndStopPropagation(c);this.message(this.dragStart);if(this.sequenceInitComplete){var g=this.getTouchEventPoint(c);c=this.mouseToSVG(g.x,g.y);if(null!=this.dragElement){this.hideTooltip();var e=this.dragStart.x-c.x,h=this.dragStart.y-c.y;if(this.state===xiNET.Controller.DRAGGING){var m,p;if("undefined"===typeof this.dragElement.x){var q;q=this.dragElement.fromProtein?this.dragElement.fromProtein:this.dragElement.proteinLink.fromProtein;
for(var t=this.proteins.values(),u=t.length,g=0;g<u;g++)t[g].subgraph=null;g=q.getSubgraph().nodes.values();q=g.length;for(t=0;t<q;t++)u=g[t],m=u.x,p=u.y,m-=e,p-=h,u.setPosition(m,p),u.setAllLineCoordinates();for(t=0;t<q;t++)g[t].setAllLineCoordinates()}else m=this.dragElement.x,p=this.dragElement.y,this.dragElement.setPosition(m-e,p-h),this.dragElement.setAllLineCoordinates();this.dragStart=c}else this.state===xiNET.Controller.ROTATING?(c=Math.atan2(c.y-this.dragElement.y,c.x-this.dragElement.x),
0===this.whichRotator&&(c+=Math.PI),this.dragElement.setRotation(360/(2*Math.PI)*c),this.dragElement.setAllLineCoordinates()):Math.sqrt(e*e+h*h)>5*this.z&&(this.state=xiNET.Controller.DRAGGING)}else xiNET.setCTM(this.container,this.container.getCTM().translate(c.x-this.dragStart.x,c.y-this.dragStart.y))}return!1};
xiNET.Controller.prototype.touchEnd=function(c){this.preventDefaultsAndStopPropagation(c);null!=this.dragElement?this.state!==xiNET.Controller.DRAGGING&&this.state!==xiNET.Controller.ROTATING?"undefined"===typeof this.dragElement.x?this.dragElement.showID():0===this.dragElement.form?this.dragElement.setForm(1):this.dragElement.setForm(0):this.state===xiNET.Controller.ROTATING&&this.dragElement.setRotation(5*Math.round(this.dragElement.rotation/5)):!1===c.ctrlKey&&this.clearSelection();this.state===
xiNET.Controller.SELECTING&&(clearInterval(this.marcher),this.svgElement.removeChild(this.marquee));this.dragElement=null;this.whichRotator=-1;this.state=xiNET.Controller.MOUSE_UP;return!1};
xiNET.Controller.prototype.gestureChange=function(c){this.preventDefaultsAndStopPropagation(c);var g=1+c.scale,e=this.container;c=this.getTouchEventPoint(c);c=this.mouseToSVG(c.x,c.y);g=this.svgElement.createSVGMatrix().translate(c.x,c.y).scale(g).translate(-c.x,-c.y);xiNET.setCTM(e,e.getCTM().multiply(g));this.scale();return!1};
xiNET.Controller.prototype.getTouchEventPoint=function(c){var g=this.svgElement.createSVGPoint(),e=this.svgElement.parentNode,h=0,m=0;do h+=e.offsetTop||0,m+=e.offsetLeft||0,e=e.offsetParent;while(e);h+=getScrollTop();g.x=c.touches[0].pageX-m;g.y=c.touches[0].pageY-h;return g};xiNET.Controller.prototype.autoLayout=function(){function c(c){function e(c){g.push(c.id);for(var h=0;h<c.proteinLinks.values().length;h++){var m=c.proteinLinks.values()[h];if(!0===m.check()&&(m=m.getOtherEnd(c),-1===g.indexOf(m.id))){e(m);break}}}var g=[];e(function(){for(var e=c.nodes.values(),g=e.length,h=0;h<g;h++)if(2>e[h].countExternalLinks())return e[h];console.error("missed linear subgraph start");return null}());return g}function g(c){return c*(2*m.maxBlobRadius+Protein.LABELMAXLENGTH)-m.maxBlobRadius}
this.force&&this.force.stop();for(var e=this.svgElement.parentNode.clientWidth,h=this.svgElement.parentNode.clientHeight,m=this,p=this.subgraphs.length=0;p<t;p++)q[p].subgraph=null;for(var q=this.proteins.values(),t=q.length,p=0;p<t;p++)q[p].getSubgraph();this.subgraphs.sort(function(c,e){return c.nodes.values().length-e.nodes.values().length});if(1===t){var u=q[0];u.setPosition(e/2,h/4*3)}else if(2===t)u=q[0],u.setPosition(e/2,.3*h),u.setAllLineCoordinates(),q=q[1],q.setPosition(e/2,.6*h),q.setAllLineCoordinates();
else{for(var v=[],q=[],p=this.subgraphs.length,u=0;u<p;u++){var x=this.subgraphs[u],y=x.nodes.values(),D=y.length,J=!0;if(1===D)J=!0;else{for(var R=!1,M=0;M<D;M++)if(2<y[M].countExternalLinks()){J=!1;break}else 2>y[M].countExternalLinks()&&(R=!0);R||(J=!1)}!0===J?v.push(x):q.push(x)}var R=J=x=0,P=-1;if(0<v.length)for(x++,u=0;u<v.length;u++)for(y=v[u].nodes.keys(),D=y.length,2<D&&(y=c(v[u])),M=0;M<D;M++){var p=this.proteins.get(y[M]),ca,$;!0===p.isParked?(R++,ca=g(P),$=R*m.maxBlobRadius,$>h&&(P--,
R=1,ca=g(P),$=R*m.maxBlobRadius)):(J++,(60>t||1<D)&&J++,ca=g(x),$=J*m.maxBlobRadius,(J+2*(D-1-M))*m.maxBlobRadius+this.maxBlobRadius>h&&(x++,J=1,60>t&&J++,ca=g(x),$=J*m.maxBlobRadius));p.setPosition(ca,$);p.setAllLineCoordinates()}this.layoutXOffset=g(x+3);if("undefined"===typeof this.force||null==this.force){t={NAME:"ALL",children:[]};for(u=0;u<q.length;u++)for(y=q[u].nodes.values(),D=y.length,M=0;M<D;M++)p=this.proteins.get(y[M].id),x={},x.id=p.id,x.x=p.x-this.layoutXOffset,x.y=p.y,x.px=p.x-this.layoutXOffset,
x.py=p.y,x.linkCount=p.proteinLinks.keys().length,x.size=30,t.children.push(x);y=d3.layout.pack().size([e-this.layoutXOffset,h]).value(function(c){return c.size}).sort(function(c,e){return e.linkCount-c.linkCount}).nodes(t);D=y.length;for(M=1;M<D;M++)t=y[M],u=this.proteins.get(t.id),t=Protein.rotatePointAboutPoint([t.x,t.y],[e-this.layoutXOffset/2,h/2],90),u.setPosition(t[0]+this.layoutXOffset,t[1]),u.setAllLineCoordinates(!1)}v=e-this.layoutXOffset;200>v&&(v=e);t={nodes:[],links:[]};e={};for(u=J=
0;u<q.length;u++)for(y=q[u].nodes.values(),D=y.length,M=0;M<D;M++)p=this.proteins.get(y[M].id),e[p.id]=J,J++,x={},x.id=p.id,x.x=p.x-this.layoutXOffset,x.y=p.y,x.px=p.x-this.layoutXOffset,x.py=p.y,t.nodes.push(x);for(u=0;u<q.length;u++)for(y=q[u].links.values(),M=y.length,p=0;p<M;p++)if(x=y[p],J=x.fromProtein,R=x.toProtein)J=e[J.id],R=e[R.id],J!==R&&("undefined"!==typeof J&&"undefined"!==typeof R?(P={},P.source=J,P.target=R,P.id=x.id,t.links.push(P)):alert("NOT RIGHT"));q=Math.sqrt(t.nodes.length/
(v*h));this.force=d3.layout.force().nodes(t.nodes).links(t.links).gravity(85*q).linkDistance(60).charge(-30/q).size([v,h]);D=this.force.nodes().length;this.force.links();this.force.on("tick",function(c){c=m.force.nodes();for(var e=0;e<D;e++){var g=c[e],h=m.proteins.get(g.id);h.setPosition(g.x+m.layoutXOffset,g.y);h.setAllLineCoordinates()}});this.force.start()}};xiNET.Controller.prototype.checkLinks=function(){for(var c=this.proteinLinks.values(),g=c.length,e=0;e<g;e++)c[e].check()};
xiNET.Controller.prototype.scale=function(){this.z=this.container.getScreenCTM().inverse().a;for(var c=this.proteins.values(),g=c.length,e=0;e<g;e++){var h=c[e];h.setPosition(h.x,h.y);0!==h.form&&h.setAllLineCoordinates()}c=this.proteinLinks.values();g=c.length;for(e=0;e<g;e++)if(h=c[e],h.fromProtein!==h.toProtein&&null!==h.toProtein&&!h.fromProtein.isParked&&!h.toProtein.isParked)if(0===h.fromProtein.form&&0===h.toProtein.form)h.line.setAttribute("stroke-width",this.z*xiNET.linkWidth),h.highlightLine.setAttribute("stroke-width",
10*this.z),h.fatLine.setAttribute("stroke-width",this.z*h.w),h.ambig&&h.dashedLine(!0);else for(var m=h.residueLinks.keys().length,p=0;p<m;p++){var q=h.residueLinks.values()[p];q.check()&&(h.residueLinks.values()[p].line.setAttribute("stroke-width",this.z*xiNET.linkWidth),h.residueLinks.values()[p].highlightLine.setAttribute("stroke-width",10*this.z),q.ambig&&q.dashedLine(!0))}};xiNET.Controller.prototype.showTooltip=function(c){var g;g=this.tooltip.getComputedTextLength()+16;var e=this.svgElement.parentNode.clientWidth,h=this.svgElement.parentNode.clientHeight;g=c.x+20+g<e?c.x:e-g-20;c=c.y+60<h?c.y:h-60;this.tooltip.setAttribute("x",g+22);this.tooltip.setAttribute("y",c+47);this.tooltip_bg.setAttribute("x",g+16);this.tooltip_bg.setAttribute("y",c+28);this.tooltip_subBg.setAttribute("x",g+16);this.tooltip_subBg.setAttribute("y",c+28)};
xiNET.Controller.prototype.setTooltip=function(c,g){if(c){this.tooltip.firstChild.data=c.toString().replace(/&(quot);/g,'"');this.tooltip.setAttribute("display","block");var e=this.tooltip.getComputedTextLength();this.tooltip_bg.setAttribute("width",e+16);this.tooltip_subBg.setAttribute("width",e+16);"undefined"!==typeof g&&null!=g?(this.tooltip_bg.setAttribute("fill",g),this.tooltip_bg.setAttribute("stroke",g),this.tooltip_bg.setAttribute("fill-opacity","0.5")):(this.tooltip_bg.setAttribute("fill",
"white"),this.tooltip_bg.setAttribute("stroke","grey"));this.tooltip_bg.setAttribute("height",28);this.tooltip_subBg.setAttribute("height",28);this.tooltip_bg.setAttribute("display","block");this.tooltip_subBg.setAttribute("display","block")}else this.hideTooltip()};xiNET.Controller.prototype.hideTooltip=function(c){this.tooltip.setAttribute("display","none");this.tooltip_bg.setAttribute("display","none");this.tooltip_subBg.setAttribute("display","none")};function Match(c,g,e,h,m,p,q,t,u,v,x,y,D,J,R,M){function P(c){if(c)if(c=c.toString().trim(),""!==c&&"-"!==c&&"n/a"!==c){$.lastIndex=0;c=c.replace($,"");L.lastIndex=0;c=c.split(L);for(var e=c.length,g=0;g<e;g++)c[g]=c[g].trim()}else c=null;else c=null;return c}function ca(c){if(c)if(c=c.toString().trim(),""!==c&&"-"!==c&&"n/a"!==c){$.lastIndex=0;c=c.toString().replace($,"");L.lastIndex=0;c=c.split(L);for(var e=c.length,g=0;g<e;g++){var h=parseInt(c[g]);isNaN(h)?console.debug("Absurd non-numerical position. Match id:"+
this.id+". So-called 'position':"+c[g]):c[g]=h}}else c=null;else c=null;return c}this.id=m.toString().trim();this.residueLinks=[];this.controller=q;this.dataSetId=R;M&&"true"==M.toLowerCase().trim()&&(this.manuallyDashed=!0);"undefined"!=typeof p&&p&&(p=parseFloat(p),isNaN(p)||(this.score=p,null==this.controller.scores&&(this.controller.scores={min:this.score,max:this.score}),this.score>this.controller.scores.max?this.controller.scores.max=this.score:this.score<this.controller.scores.min&&(this.controller.scores.min=
this.score)));"undefined"!=typeof y&&y&&(y=y.trim(),""!==y&&(this.autovalidated="t"==y||"true"==y||!0===y?!0:!1,this.controller.autoValidatedFound=!0));"undefined"!=typeof D&&D&&(D=D.trim(),""!==D&&(this.validated=D,this.controller.manualValidatedFound=!0));var $=/(['"])/g,L=/[;,]/g;m=/[^A-Z]/g;c=P(c);e=P(e);"undefined"!=typeof v&&null!=v?(v=v.trim())?(m.lastindex=0,this.pepSeq1=v.replace(m,"")):this.pepSeq1=null:this.pepSeq1=null;"undefined"!==typeof x&&null!=x?(x=x.trim())?(m.lastindex=0,this.pepSeq2=
x.replace(m,"")):this.pepSeq2=null:this.pepSeq2=null;g=ca(g);h=ca(h);t=ca(t);u=ca(u);this.type=null===e&&null===h&&null===u?0:null===e?1:2;var G,U,C,E;if(c){if(0===this.type)if(null!==g)for(v=0;v<g.length;v++)G=v,G>=c.length&&(G=c.length-1),G=c[G],C=g[v],C+=t[0]-1,this.associateWithLink(G,null,C,null,g[v],this.pepSeq1.length,null,null);else for(v=0;v<t.length;v++)G=v,G>=c.length&&(G=c.length-1),G=c[G],C=t[v],this.associateWithLink(G,null,C,null,null,null,null,null);else if(1===this.type)if(null!==
g)for(v=0;v<g.length;v++)G=v,G>=c.length&&(G=c.length-1),G=c[G],C=g[v],E=h?h[v]:g[v],null!==t&&(C+=t[0]-1),null!==u&&(E+=u[0]-1),this.associateWithLink(G,null,C,E,g[v],this.pepSeq1.length,null,null);else for(v=0;v<t.length;v++)G=v,G>=c.length&&(G=c.length-1),G=c[G],C=t[0],E=u[0],this.associateWithLink(G,null,C,E,null,null,null,null);else if(null!==g){if(null!==g)for(v=0;v<g.length;v++)for(x=0;x<h.length;x++)G=v,U=x,G>=c.length&&(G=c.length-1),U>=e.length&&(U=e.length-1),G=c[G],U=e[U],C=g[v]-0,E=h[x]-
0,null!==t&&(C+=t-1),null!==u&&(E+=u-1),this.associateWithLink(G,U,C,E,g[v]-0,this.pepSeq1.length,h[x],this.pepSeq2.length)}else for(v=0;v<t.length;v++)for(x=0;x<u.length;x++)G=v,U=x,G>=c.length&&(G=c.length-1),U>=e.length&&(U=e.length-1),G=c[G],U=e[U],C=t[v]-0,E=u[x]-0,this.associateWithLink(G,U,C,E,null,null,null,null);this.hd=!1;this.overlap=[];G===U&&(this.pepSeq1&&this.pepSeq2?(G=g[0],U=h[0],E=G+(this.pepSeq1.length-1),C=U+(this.pepSeq2.length-1),G>=U&&G<=C?(this.hd=!0,this.overlap[0]=G-1,this.overlap[1]=
E<C?E:C):U>=G&&U<=E&&(this.hd=!0,this.overlap[0]=U-1,this.overlap[1]=C<E?C:E)):C===E&&(this.hd=!0,this.overlap[0]=C-1,this.overlap[1]=E));this.protein1=c;this.pepPos1=g;this.linkPos1=t;this.protein2=e;this.pepPos2=h;this.linkPos2=u}}
Match.prototype.associateWithLink=function(c,g,e,h,m,p,q,t){var u,v,x;null===g?(v=this.controller.proteins.get(c),null===h?(u=""+c+"-null",x=null):(u=""+c+"-"+c,x=v)):c<=g?(u=""+c+"-"+g,v=this.controller.proteins.get(c),x=null!==g?this.controller.proteins.get(g):null):(u=""+g+"-"+c,v=this.controller.proteins.get(g),x=this.controller.proteins.get(c));var y=this.controller.proteinLinks.get(u);void 0===y&&(void 0!==v&&void 0!==x||alert("Something has gone wrong; a link has been added before a protein it links to. "+
c+"-"+g+" Are both of these IDs in your FASTA file?"),y=new ProteinLink(u,v,x,this.controller),this.controller.proteinLinks.set(u,y),v.addLink(y),null!==x&&x.addLink(y));u=!1;c===g||null===g?e-0<h-0||null===h?v=e+"-"+h:(v=h+"-"+e,u=!0):c<g?v=e+"-"+h:(v=h+"-"+e,u=!0);x=y.residueLinks.get(v);void 0===x&&(x=c===g?e-0<h-0||"n/a"===h?new ResidueLink(v,y,e,h,this.controller):new ResidueLink(v,y,h,e,this.controller):c==y.fromProtein.id?new ResidueLink(v,y,e,h,this.controller):new ResidueLink(v,y,h,e,this.controller),
y.residueLinks.set(v,x),y.residueLinks.keys().length>ProteinLink.maxNoResidueLinks&&(ProteinLink.maxNoResidueLinks=y.residueLinks.keys().length));if("undefined"===typeof x.matches||null==x.matches)x.matches=[];!1===u?x.matches.push([this,m,p,q,t]):x.matches.push([this,q,t,m,p]);this.residueLinks.push(x)};
Match.prototype.meetsFilterCriteria=function(){return this.isAmbig()&&!1===this.controller.ambigShown?!1:"function"==typeof this.controller.filter?this.controller.filter(this):"undefined"!==typeof this.controller.cutOff&&"undefined"!==typeof this.score?this.score>=this.controller.cutOff?!0:!1:!0};Match.prototype.isAmbig=function(){return 1<this.residueLinks.length||this.manuallyDashed?!0:!1};
Match.prototype.toTableRow=function(){var c;c="<tr>"+("<td><p>"+this.id+"</p></td>");c+="<td><p>"+this.protein1+"</p></td>";c+="<td><p>"+this.pepPos1+"</p></td>";c+="<td><p>"+this.pepSeq1+"</p></td>";c+="<td><p>"+this.linkPos1+"</p></td>";c+="<td><p>"+this.protein2+"</p></td>";c+="<td><p>"+this.pepPos2+"</p></td>";c+="<td><p>"+this.pepSeq2+"</p></td>";c+="<td><p>"+this.linkPos2+"</p></td>";c+="<td><p>"+("undefined"!==typeof this.score?this.score.toFixed(4):"undefined")+"</p></td>";!0===this.controller.autoValidatedFound&&
(c+="<td><p>"+this.autovalidated+"</p></td>");!0===this.controller.manualValidatedFound&&(c+="<td><p>"+this.validated+"</p></td>");return c+"</tr>"};xiNET.Link=function(){};xiNET.Link.prototype.mouseDown=function(c){this.controller.preventDefaultsAndStopPropagation(c);this.controller.force&&this.controller.force.stop();this.controller.dragElement=this;this.controller.clearSelection();this.setSelected(!0);c=this.controller.getEventPoint(c);this.controller.dragStart=this.controller.mouseToSVG(c.x,c.y);return!1};
xiNET.Link.prototype.mouseOver=function(c){this.controller.preventDefaultsAndStopPropagation(c);this.showHighlight(!0,!0);c=this.getFilteredMatches().map(function(c){return+c[0].score});c=Math.max.apply(Math,c).toFixed(2);c=isNaN(c)?this.tooltip:this.tooltip+", top score:"+c;this.controller.setTooltip(c);return!1};xiNET.Link.prototype.mouseOut=function(c){this.controller.preventDefaultsAndStopPropagation(c);this.showHighlight(!1,!0);this.controller.hideTooltip();return!1};
xiNET.Link.prototype.touchStart=function(c){this.controller.preventDefaultsAndStopPropagation(c);void 0!==this.controller.force&&this.controller.force.stop();this.controller.dragElement=this;this.controller.clearSelection();this.setSelected(!0);c=this.controller.getTouchEventPoint(c);this.controller.dragStart=this.controller.mouseToSVG(c.x,c.y);return!1};Protein.STICKHEIGHT=20;Protein.MAXSIZE=100;Protein.UNITS_PER_RESIDUE=1;Protein.LABELMAXLENGTH=60;Protein.labelY=-5;Protein.domainColours=d3.scale.ordinal().range(colorbrewer.Paired[5]);Protein.transitionTime=650;
function Protein(c,g,e,h){this.id=c;this.controller=g;this.accession=e;this.name=h;this.tooltip=this.name+" ["+this.id+"]";this.proteinLinks=d3.map();this.selfLink=null;this.y=this.x=40;this.previousRotation=this.rotation=0;this.stickZoom=1;this.form=0;this.isSelected=this.isFlipped=this.isParked=!1;this.customAnnotations=null;this.lowerRotator=new Rotator(this,0,this.controller);this.upperRotator=new Rotator(this,1,this.controller);this.lowerGroup=document.createElementNS(xiNET.svgns,"g");this.lowerGroup.setAttribute("class",
"protein lowerGroup");this.highlight=document.createElementNS(xiNET.svgns,"rect");void 0!==xiNET.highlightColour&&this.highlight.setAttribute("stroke",xiNET.highlightColour.toRGB());this.highlight.setAttribute("stroke-width","5");this.highlight.setAttribute("fill","none");this.lowerGroup.appendChild(this.highlight);this.rectDomains=document.createElementNS(xiNET.svgns,"g");this.rectDomains.setAttribute("opacity","0");this.lowerGroup.appendChild(this.rectDomains);this.peptides=document.createElementNS(xiNET.svgns,
"g");this.lowerGroup.appendChild(this.peptides);this.upperGroup=document.createElementNS(xiNET.svgns,"g");this.upperGroup.setAttribute("class","protein upperGroup");this.intraLinksHighlights=document.createElementNS(xiNET.svgns,"g");this.intraLinks=document.createElementNS(xiNET.svgns,"g");this.upperGroup.appendChild(this.intraLinksHighlights);this.upperGroup.appendChild(this.intraLinks);this.labelSVG=document.createElementNS(xiNET.svgns,"text");this.labelSVG.setAttribute("text-anchor","end");this.labelSVG.setAttribute("fill",
this.isDecoy()?"#FB8072":"black");this.labelSVG.setAttribute("x",0);this.labelSVG.setAttribute("y",10);this.labelSVG.setAttribute("class","protein xlv_text proteinLabel");this.labelSVG.setAttribute("font-family","Arial");this.labelSVG.setAttribute("font-size","16");this.labelText=this.name?this.name:null!=this.accession&""!==this.accession?this.accession:this.id;25<this.labelText.length&&(this.labelText=this.labelText.substr(0,16)+"...");this.labelTextNode=document.createTextNode(this.labelText);
this.labelSVG.appendChild(this.labelTextNode);d3.select(this.labelSVG).attr("transform","translate( -5 "+Protein.labelY+") rotate(0) scale(1, 1)");this.upperGroup.appendChild(this.labelSVG);this.ticks=document.createElementNS(xiNET.svgns,"g");this.outline=document.createElementNS(xiNET.svgns,"rect");this.outline.setAttribute("stroke","black");this.outline.setAttribute("stroke-width","1");this.outline.setAttribute("fill","#EEEEEE");this.upperGroup.appendChild(this.outline);this.upperGroup.appendChild(this.ticks);
this.circDomains=document.createElementNS(xiNET.svgns,"g");this.circDomains.setAttribute("opacity",1);this.upperGroup.appendChild(this.circDomains);this.scaleLabels=[];var m=this;this.upperGroup.onmousedown=function(c){m.mouseDown(c)};this.upperGroup.onmouseover=function(c){m.mouseOver(c)};this.upperGroup.onmouseout=function(c){m.mouseOut(c)};this.upperGroup.ontouchstart=function(c){m.touchStart(c)};this.isSelected=!1;this.showHighlight(!1)}
Protein.prototype.setSequence=function(c){/\d/.test(c)&&(this.labeling="",-1!==c.indexOf("K4")&&(this.labeling+="K4"),-1!==c.indexOf("K6")&&(this.labeling+="K6"),-1!==c.indexOf("K8")&&(this.labeling+="K8"),-1!==c.indexOf("K10")&&(this.labeling+="R4"),-1!==c.indexOf("R6")&&(this.labeling+="R6"),-1!==c.indexOf("R8")&&(this.labeling+="R8"),-1!==c.indexOf("R10")&&(this.labeling+="R10"));"undefined"!==typeof this.labeling&&(this.labelSVG.innerHTML="["+this.labeling+"] "+this.labelSVG.innerHTML);this.sequence=
c.replace(/[^A-Z]/g,"");this.size=this.sequence.length};Protein.prototype.init=function(){this.selfLink&&this.selfLink.initSelfLinkSVG();this.setAllLineCoordinates()};
Protein.prototype.mouseDown=function(c){this.controller.preventDefaultsAndStopPropagation(c);this.controller.force&&this.controller.force.stop();this.controller.dragElement=this;this.controller.clearSelection();this.setSelected(!0);c=this.controller.getEventPoint(c);this.controller.dragStart=this.controller.mouseToSVG(c.x,c.y);var g="",g=g+(this.name+" &nbsp;&nbsp;["+this.id+"]<p>");this.accession&&(g+="<a href='http://www.ebi.ac.uk/pdbe-apps/widgets/unipdb?uniprot="+this.accession+"' target='_blank'>PDB</a></p>");
this.controller.message(g);var e=this;this.accession&&xiNET_Storage.getUniProtTxt(this.accession,function(c,m){e.controller.message(g+"<pre>"+m+"</pre>")});return!1};
Protein.prototype.touchStart=function(c){this.controller.preventDefaultsAndStopPropagation(c);void 0!==this.controller.force&&this.controller.force.stop();this.controller.dragElement=this;this.controller.clearSelection();this.setSelected(!0);c=this.controller.getTouchEventPoint(c);this.controller.dragStart=this.controller.mouseToSVG(c.x,c.y);var g=this,e="",e=e+("<h5>"+this.name+" &nbsp;&nbsp;["+this.id+"] </h5><p>");"undefined"!==typeof this.accession&&(e+="<a href='http://www.ebi.ac.uk/pdbe-apps/widgets/unipdb?uniprot="+
this.accession+"' target='_blank'>PDB</a></p>");this.controller.message(e);g=this;xiNET_Storage.getUniProtTxt(this.accession,function(c,m){g.controller.message(e+"<pre>"+m+"</pre>")});return!1};Protein.prototype.mouseOver=function(c){this.controller.preventDefaultsAndStopPropagation(c);this.showHighlight(!0);this.controller.setTooltip(this.tooltip);return!1};
Protein.prototype.mouseOut=function(c){this.controller.preventDefaultsAndStopPropagation(c);this.showHighlight(!1);this.controller.hideTooltip();return!1};Protein.prototype.getBlobRadius=function(){return Math.sqrt(this.size/Math.PI)};Protein.prototype.isDecoy=function(){return this.name?-1===this.name.indexOf("DECOY_")&&"REV"!==this.name?!1:!0:!1};Protein.prototype.toJSON=function(){return{x:this.x,y:this.y,rot:this.rotation,form:this.form,stickZoom:this.stickZoom,parked:this.isParked,flipped:this.isFlipped}};
Protein.prototype.addLink=function(c){this.proteinLinks.has(c.id)||this.proteinLinks.set(c.id,c);c.selfLink()&&(this.selfLink=c,this.size&&this.selfLink.initSelfLinkSVG());null===c.toProtein&&(this.linkerModifications=c)};
Protein.prototype.showHighlight=function(c){!0===c?(this.highlight.setAttribute("stroke",xiNET.highlightColour.toRGB()),this.highlight.setAttribute("stroke-opacity","1")):(0==this.isSelected&&this.highlight.setAttribute("stroke-opacity","0"),this.highlight.setAttribute("stroke",xiNET.selectedColour.toRGB()))};
Protein.prototype.setSelected=function(c){c&&!1===this.isSelected?(this.controller.selected.set(this.id,this),this.isSelected=!0,this.highlight.setAttribute("stroke",xiNET.selectedColour.toRGB()),this.highlight.setAttribute("stroke-opacity","1")):!1===c&&!0===this.isSelected&&(this.controller.selected.remove(this.id),this.isSelected=!1,this.highlight.setAttribute("stroke-opacity","0"),this.highlight.setAttribute("stroke",xiNET.highlightColour.toRGB()))};
Protein.prototype.setRotation=function(c){this.rotation=c%360;0>this.rotation&&(this.rotation+=360);this.upperGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+") rotate("+this.rotation+")");this.lowerGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+") rotate("+this.rotation+")");var g=this.controller.svgElement;c=this.labelSVG.getAttribute("transform");var e=d3.transform(c);c=this.scaleLabels.length;if(90<=this.rotation&&
270>this.rotation){if(e=g.createSVGMatrix().translate(Math.abs(e.translate[0]),-Protein.labelY).rotate(180,0,0),this.labelSVG.transform.baseVal.initialize(g.createSVGTransformFromMatrix(e)),1===this.form){for(g=0;g<c;g++)this.scaleLabels[g].setAttribute("transform","scale(-1,1)");this.ticks.setAttribute("transform","scale(1,-1)")}}else if(e=g.createSVGMatrix().translate(-Math.abs(e.translate[0]),Protein.labelY),this.labelSVG.transform.baseVal.initialize(g.createSVGTransformFromMatrix(e)),1===this.form){for(g=
0;g<c;g++)this.scaleLabels[g].setAttribute("transform","scale(1,1)");this.ticks.setAttribute("transform","scale(1,1)")}};
Protein.prototype.setPosition=function(c,g){this.x=c;this.y=g;1===this.form&&!1===this.isParked?(this.upperGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+") rotate("+this.rotation+")"),this.lowerGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+") rotate("+this.rotation+")")):(this.upperGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+") "),this.lowerGroup.setAttribute("transform",
"translate("+this.x+" "+this.y+") scale("+this.controller.z+") "),null!=this.selfLink&&("undefined"!==typeof this.selfLink.fatLine&&this.selfLink.fatLine.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+")"),this.selfLink.line.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+")"),this.selfLink.highlightLine.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+")")))};Protein.rotOffset=17.5;
Protein.minXDist=30;Protein.prototype.switchStickScale=function(c){this.isParked&&this.toggleParked();if(0===this.form)this.toStick();else if(8<Protein.UNITS_PER_RESIDUE*this.stickZoom)this.stickZoom=.5,this.setPosition(c.x,c.y);else{this.stickZoom*=3;var g=this.x-c.x;c=this.y-c.y;if(0===this.rotation||180===this.rotation)c=0;this.setPosition(this.x+2*g,this.y+2*c)}this.scale();this.setAllLineCoordinates()};
Protein.prototype.scale=function(){var c=this.size*Protein.UNITS_PER_RESIDUE*this.stickZoom;if(1===this.form){var g=d3.transform(this.labelSVG.getAttribute("transform")),g=this.controller.svgElement.createSVGMatrix().rotate(g.rotate).translate(-(this.size/2*Protein.UNITS_PER_RESIDUE*this.stickZoom+10),Protein.labelY);this.labelSVG.transform.baseVal.initialize(this.controller.svgElement.createSVGTransformFromMatrix(g));if(this.annotations)for(var g=this.annotations.length,e=0;e<g;e++){var h=this.annotations[e];
h.pieSlice.setAttribute("d",this.getAnnotationRectPath(h));h.colouredRect.setAttribute("d",this.getAnnotationRectPath(h))}d3.select(this.peptides).attr("transform","scale("+this.stickZoom+", 1)");d3.select(this.outline).attr("width",c).attr("x",this.getResXwithStickZoom(.5));d3.select(this.highlight).attr("width",c+5).attr("x",this.getResXwithStickZoom(.5)-2.5);this.lowerRotator.svg.setAttribute("transform","translate("+(this.getResXwithStickZoom(.5)-Protein.rotOffset)+" 0)");this.upperRotator.svg.setAttribute("transform",
"translate("+(this.getResXwithStickZoom(this.size-0+.5)+Protein.rotOffset)+" 0)");if(null!=this.selfLink)for(g=this.selfLink.residueLinks.values(),e=g.length,h=0;h<e;h++){var m=g[h];m.shown&&(c=this.getResidueLinkPath(m),d3.select(m.line).attr("d",c),d3.select(m.highlightLine).attr("d",c))}if(null!=this.linkerModifications)for(g=this.linkerModifications.residueLinks.values(),e=g.length,h=0;h<e;h++)m=g[h],m.shown&&(c=this.getResidueLinkPath(m),d3.select(m.line).attr("d",c),d3.select(m.highlightLine).attr("d",
c));this.setScaleGroup();this.setRotation(this.rotation)}};
Protein.prototype.setScaleGroup=function(){function c(c,e,g){var h=document.createElementNS(xiNET.svgns,"g");h.setAttribute("transform","translate("+g+" 0)");g=document.createElementNS(xiNET.svgns,"text");g.setAttribute("class","protein xlv_text proteinLabel");g.setAttribute("font-family","'Courier New', monospace");g.setAttribute("font-size","14");g.setAttribute("text-anchor","middle");g.setAttribute("x",0);g.setAttribute("y",Protein.STICKHEIGHT+4);g.appendChild(document.createTextNode(e));h.appendChild(g);
c.scaleLabels.push(g);c.ticks.appendChild(h)}function g(c,e){var g=document.createElementNS(xiNET.svgns,"line");g.setAttribute("x1",e);g.setAttribute("y1",5);g.setAttribute("x2",e);g.setAttribute("y2",10);g.setAttribute("stroke","black");c.ticks.appendChild(g)}this.controller.emptyElement(this.ticks);this.scaleLabels=[];for(var e=Protein.UNITS_PER_RESIDUE*this.stickZoom,h=-1,m=this.getResXwithStickZoom(this.size),p=1;p<=this.size;p++){if(1===p||0===p%100&&200*e>Protein.minXDist||0===p%10&&20*e>Protein.minXDist){var q=
this.getResXwithStickZoom(p);(8<=e||1!==p)&&g(this,q);h=(h+1)%2;0===h&&q+Protein.minXDist<m&&c(this,p,q)}if(8<=e&&this.sequence){q=document.createElementNS(xiNET.svgns,"g");q.setAttribute("transform","translate("+this.getResXwithStickZoom(p)+" 0)");var t=document.createElementNS(xiNET.svgns,"text");t.setAttribute("font-family","'Courier New', monospace");t.setAttribute("font-size","10px");t.setAttribute("text-anchor","middle");t.setAttribute("x",0);t.setAttribute("y",3);t.appendChild(document.createTextNode(this.sequence[p-
1]));q.appendChild(t);this.scaleLabels.push(t);this.ticks.appendChild(q)}}c(this,this.size,m);8<e&&g(this,m)};Protein.prototype.toggleFlipped=function(){(this.isFlipped=!this.isFlipped)?(this.intraLinks.setAttribute("transform","scale (1 -1)"),this.intraLinksHighlights.setAttribute("transform","scale (1 -1)")):(this.intraLinks.setAttribute("transform","scale (1 1)"),this.intraLinksHighlights.setAttribute("transform","scale (1 1)"))};
Protein.prototype.setParked=function(c,g){this.isParked=c;if(!0!==this.busy)if(0==c)0===this.form?(d3.select(this.outline).transition().attr("stroke-opacity",1).attr("fill-opacity",1).attr("fill","#ffffff").duration(Protein.transitionTime),this.checkLinks(),d3.select(this.circDomains).transition().attr("opacity",1).attr("transform","scale(1, 1)").duration(Protein.transitionTime)):this.toStick(),this.scale(),this.setAllLineCoordinates();else if(1==c){this.isParked=!0;for(var e=this.proteinLinks.values().length,
h=0;h<e;h++){var m=this.proteinLinks.values()[h];m.hide();for(var m=m.residueLinks.values(),p=m.length,q=0;q<p;q++)m[q].hide()}1===this.form?(this.toCircle(g),e=this.getBlobRadius(),d3.select(this.outline).transition().attr("stroke-opacity",0).attr("fill-opacity",1).attr("fill","#EEEEEE").attr("x",-e).attr("y",-e).attr("width",2*e).attr("height",2*e).attr("rx",e).attr("ry",e).duration(Protein.transitionTime),d3.select(this.rectDomains).transition().attr("opacity",0).attr("transform","scale(1, 1)").duration(Protein.transitionTime)):
(d3.select(this.outline).transition().attr("stroke-opacity",0).attr("fill","#EEEEEE").duration(Protein.transitionTime),d3.select(this.circDomains).transition().attr("opacity",0).attr("transform","scale(1, 1)").duration(Protein.transitionTime))}};
Protein.prototype.setForm=function(c,g){if(!0!==this.busy)if(this.isParked)this.setParked(!1);else if(1==c)this.toStick();else{this.toCircle(g);var e=this.getBlobRadius();d3.select(this.outline).transition().attr("stroke-opacity",1).attr("fill-opacity",1).attr("fill","#ffffff").attr("x",-e).attr("y",-e).attr("width",2*e).attr("height",2*e).attr("rx",e).attr("ry",e).duration(Protein.transitionTime);d3.select(this.rectDomains).transition().attr("opacity",0).attr("transform","scale(1, 1)").duration(Protein.transitionTime);
d3.select(this.circDomains).transition().attr("opacity",1).attr("transform","scale(1, 1)").duration(Protein.transitionTime)}};
Protein.prototype.toCircle=function(c){function g(c){var e=d3.transform(v.labelSVG.getAttribute("transform")),e=v.controller.svgElement.createSVGMatrix().rotate(e.rotate).translate(q(M(c)),Protein.labelY);v.labelSVG.transform.baseVal.initialize(v.controller.svgElement.createSVGTransformFromMatrix(e));null!==t&&v.setPosition(t(M(c)),u(M(c)));e=m(M(c));v.stickZoom=h(M(c));v.setRotation(e);v.setAllLineCoordinates();if(1===c){c=v.proteinLinks.values();for(var e=c.length,p=0;p<e;p++){var x=c[p];if(null===
x.toProtein||x.getFromProtein()===v&&0===x.getToProtein().form||x.getToProtein()===v&&0===x.getFromProtein().form||x.getToProtein()==x.getFromProtein())for(var x=x.residueLinks.values(),y=x.length,D=0;D<y;D++)x[D].hide()}v.form=0;v.checkLinks();v.stickZoom=J;v.rotation=R;v.busy=!1;return!0}return 1<c?g(1):!1}this.busy=!0;this.removePeptides();this.upperGroup.contains(this.lowerRotator.svg)&&this.upperGroup.removeChild(this.lowerRotator.svg);this.upperGroup.contains(this.upperRotator.svg)&&this.upperGroup.removeChild(this.upperRotator.svg);
var e=this.getBlobRadius(),h=d3.interpolate(this.stickZoom,0),m=d3.interpolate(180<this.rotation?this.rotation-360:this.rotation,0),p=d3.transform(this.labelSVG.getAttribute("transform")).translate[0],q=d3.interpolate(p,-(e+5)),t=null,u=null;"undefined"!==typeof c&&null!==c&&(t=d3.interpolate(this.x,c.x),u=d3.interpolate(this.y,c.y));var v=this;d3.select(this.ticks).transition().attr("opacity",0).duration(Protein.transitionTime/4).each("end",function(){v.controller.emptyElement(this)});d3.select(this.highlight).transition().attr("width",
2*e+5).attr("height",2*e+5).attr("x",-e-2.5).attr("y",-e-2.5).attr("rx",e+2.5).attr("ry",e+2.5).duration(Protein.transitionTime);if(null!=this.selfLink)for(var e=this.selfLink.residueLinks.values(),p=e.length,x=0;x<p;x++){var y=e[x];!0===y.intra&&y.shown&&(c=d3.select(y.line),c.attr("d",this.getResidueLinkPath(y)),c.transition().attr("d",this.getAggregateSelfLinkPath()).duration(Protein.transitionTime),c=d3.select(y.highlightLine),c.attr("d",this.getResidueLinkPath(y)),c.transition().attr("d",this.getAggregateSelfLinkPath()).duration(Protein.transitionTime))}if(null!=
this.linkerModifications)for(e=this.linkerModifications.residueLinks.values(),p=e.length,x=0;x<p;x++)c=e[x],c.shown&&(c=d3.select(c.line),c.attr("fill","none"),c.attr("d","M 0,0 L 0,0"));v=this;if(this.annotations){c=this.annotations;for(var D=c.length,e=0;e<D;e++)p=c[e],x=p.colouredRect,d3.select(p.pieSlice).transition().attr("d",this.getAnnotationPieSliceApproximatePath(p)).duration(Protein.transitionTime).each("end",function(){for(var c=0;c<D;c++){var e=v.annotations[c];this===e.pieSlice&&d3.select(this).attr("d",
v.getAnnotationPieSliceArcPath(e))}}),d3.select(x).transition().attr("d",v.getAnnotationPieSliceApproximatePath(p)).duration(Protein.transitionTime)}var J=this.stickZoom,R=this.rotation,M=d3.ease("cubic-in-out");d3.timer(function(c){return g(c/Protein.transitionTime)})};Protein.prototype.getX=function(){return this.x};Protein.prototype.getY=function(){return this.y};
Protein.prototype.toStick=function(){function c(e){var g=d3.transform(y.labelSVG.getAttribute("transform")),g=y.controller.svgElement.createSVGMatrix().rotate(g.rotate).translate(t(D(e)),Protein.labelY);y.labelSVG.transform.baseVal.initialize(y.controller.svgElement.createSVGTransformFromMatrix(g));g=q(D(e));y.setRotation(g);g=m(D(e));d3.select(y.outline).attr("width",g).attr("x",-(g/2)+.5*Protein.UNITS_PER_RESIDUE*y.stickZoom);y.stickZoom=p(D(e));y.setAllLineCoordinates();return 1===e?(y.busy=!1,
!0):1<e?c(1):!1}this.busy=!0;this.form=1;this.upperGroup.appendChild(this.lowerRotator.svg);this.upperGroup.appendChild(this.upperRotator.svg);this.lowerRotator.svg.setAttribute("transform","translate("+(this.getResXwithStickZoom(.5)-Protein.rotOffset)+" 0)");this.upperRotator.svg.setAttribute("transform","translate("+(this.getResXwithStickZoom(this.size-0+.5)+Protein.rotOffset)+" 0)");for(var g=this.proteinLinks.values().length,e=0;e<g;e++){var h=this.proteinLinks.values()[e];h.shown&&h.hide()}var g=
this.size*Protein.UNITS_PER_RESIDUE*this.stickZoom,e=this.getBlobRadius(),m=d3.interpolate(2*e,g),p=d3.interpolate(0,this.stickZoom),q=d3.interpolate(0,180<this.rotation?this.rotation-360:this.rotation),t=d3.interpolate(-(e+5),-(this.size/2*Protein.UNITS_PER_RESIDUE*this.stickZoom+10)),e=this.stickZoom;this.stickZoom=0;this.checkLinks();this.stickZoom=e;d3.select(this.circDomains).transition().attr("opacity",0).duration(Protein.transitionTime);d3.select(this.rectDomains).transition().attr("opacity",
1).duration(Protein.transitionTime);d3.select(this.outline).transition().attr("stroke-opacity",1).attr("fill-opacity",0).attr("fill","#FFFFFF").attr("height",Protein.STICKHEIGHT).attr("y",-Protein.STICKHEIGHT/2).attr("rx",0).attr("ry",0).duration(Protein.transitionTime);d3.select(this.highlight).transition().attr("width",g+5).attr("height",Protein.STICKHEIGHT+5).attr("x",this.getResXwithStickZoom(.5)-2.5).attr("y",-Protein.STICKHEIGHT/2-2.5).attr("rx",0).attr("ry",0).duration(Protein.transitionTime);
if(null!=this.selfLink)for(g=this.selfLink.residueLinks.values(),e=g.length,h=0;h<e;h++){var u=g[h];u.shown&&(d3.select(u.line).attr("d",this.getAggregateSelfLinkPath()),d3.select(u.line).transition().attr("d",this.getResidueLinkPath(u)).duration(Protein.transitionTime),d3.select(u.highlightLine).attr("d",this.getAggregateSelfLinkPath()),d3.select(u.highlightLine).transition().attr("d",this.getResidueLinkPath(u)).duration(Protein.transitionTime))}if(null!=this.linkerModifications)for(g=this.linkerModifications.residueLinks.values(),
e=g.length,h=0;h<e;h++)if(u=g[h],u.shown){var v=this.getResidueLinkPath(u);d3.select(u.line).attr("d","M 0,0 L 0,0 L 0,0 L 0,0");d3.select(u.line).transition().attr("d",v).duration(Protein.transitionTime);d3.select(u.highlightLine).attr("d","M 0,0 L 0,0");d3.select(u.highlightLine).transition().attr("d",v).duration(Protein.transitionTime)}if(this.annotations)for(g=this.annotations,e=g.length,h=0;h<e;h++){var u=g[h],v=u.pieSlice,x=u.colouredRect;v.setAttribute("d",this.getAnnotationPieSliceApproximatePath(u));
d3.select(v).transition().attr("d",this.getAnnotationRectPath(u)).duration(Protein.transitionTime);d3.select(x).transition().attr("d",this.getAnnotationRectPath(u)).duration(Protein.transitionTime)}var y=this,D=d3.ease("cubic-in-out");d3.timer(function(e){return c(e/Protein.transitionTime)});d3.select(this.ticks).attr("opacity",0);this.setScaleGroup();d3.select(this.ticks).transition().attr("opacity",1).delay(.8*Protein.transitionTime).duration(Protein.transitionTime/2)};
Protein.prototype.getAggregateSelfLinkPath=function(){var c=this.getBlobRadius()+7,g=Protein.trig(c,70),e=Protein.trig(c,20),h=Protein.trig(c,85),m=Protein.trig(c,5);return"M 0,0 Q "+h.x+","+-h.y+" "+g.x+","+-g.y+" A "+c+" "+c+" 0 0 1 "+e.x+","+-e.y+" Q "+m.x+","+-m.y+" 0,0"};
Protein.prototype.getResidueLinkPath=function(c){var g=this.getResXwithStickZoom(c.fromResidue),e=0;8<=Protein.UNITS_PER_RESIDUE*this.stickZoom&&(e=-5);if(isNaN(parseFloat(c.toResidue))){!1===c.ambig&&c.line.setAttribute("fill",xiNET.defaultSelfLinkColour.toRGB());var h=[g,26],m=[g,18],p=Protein.rotatePointAboutPoint(h,m,60);return"M "+g+","+-1*e+" L "+h[0]+","+h[1]+" L "+p[0]+","+p[1]+" L "+m[0]+","+m[1]}var h=this.getResXwithStickZoom(c.toResidue),q,t,p=Math.abs(h-g)/2,m=-(Protein.STICKHEIGHT/2+
3);15>p&&(m=-28+p);var u=[g,e],v=[h,e];!0===c.intraMolecular?(q=g+(h-g)/2,e=[q,m-p],t=[q,m-p],c=[q,m-p],q=[q,m-p]):c.hd?(q=g+(h-g)/2,e=[q,m-p],t=[q,m-p],c=Protein.rotatePointAboutPoint([g,m-p],u,-20),q=Protein.rotatePointAboutPoint([h,m-p],v,20)):(c=[g,m],q=[h,e],e=[g,m],t=[h,m]);return" M "+u[0]+","+u[1]+" Q "+c[0]+","+c[1]+" "+e[0]+","+e[1]+" A "+p+","+p+"  0 0 1 "+t[0]+","+t[1]+" Q "+q[0]+","+q[1]+" "+v[0]+","+v[1]};
Protein.prototype.showPeptides=function(c){if(1===this.form)for(var g=-Protein.STICKHEIGHT/2,e=c.length,h=Protein.STICKHEIGHT/e,m=0;m<e;m++){var p=c[m],q=document.createElementNS(xiNET.svgns,"rect");q.setAttribute("class","protein");var t=p[1];if(0<t){var u=(p[0]+.5-this.size/2)*Protein.UNITS_PER_RESIDUE,t=t*Protein.UNITS_PER_RESIDUE;q.setAttribute("x",u);q.setAttribute("y",g);q.setAttribute("width",t);q.setAttribute("height",h);q.setAttribute("fill",xiNET.highlightColour.toRGB());this.peptides.appendChild(q)}p[2]&&
(q=document.createElementNS(xiNET.svgns,"rect"),q.setAttribute("class","protein"),u=(p[2]+.5-this.size/2)*Protein.UNITS_PER_RESIDUE,t=(p[3]-p[2])*Protein.UNITS_PER_RESIDUE,q.setAttribute("x",u),q.setAttribute("y",g),q.setAttribute("width",t),q.setAttribute("height",h),q.setAttribute("fill",xiNET.homodimerLinkColour.toRGB()),q.setAttribute("fill-opacity","0.5"),this.peptides.appendChild(q));g+=h}};Protein.prototype.removePeptides=function(){this.controller.emptyElement(this.peptides)};
Protein.prototype.getResXwithStickZoom=function(c){return(c-this.size/2)*Protein.UNITS_PER_RESIDUE*this.stickZoom};Protein.rotatePointAboutPoint=function(c,g,e){e=e/360*Math.PI*2;var h=Math.cos(e)*(c[0]-g[0])-Math.sin(e)*(c[1]-g[1])+g[0];c=Math.sin(e)*(c[0]-g[0])+Math.cos(e)*(c[1]-g[1])+g[1];return[h,c]};Protein.prototype.checkLinks=function(){for(var c=this.proteinLinks.values(),g=c.length,e=0;e<g;e++)c[e].check()};
Protein.prototype.setAllLineCoordinates=function(){for(var c=this.proteinLinks.values(),g=c.length,e=0;e<g;e++){var h=c[e];if(null!==h.getToProtein()&&0===h.getFromProtein().form&&0===h.getToProtein().form)h.setLineCoordinates(this);else for(var h=h.residueLinks.values(),m=h.length,p=0;p<m;p++){var q=h[p];q.setLineCoordinates(this);var t=q.proteinLink.getOtherEnd(this);t&&1===t.form&&8<t.stickZoom*Protein.UNITS_PER_RESIDUE&&q.setLineCoordinates(t)}}};
Protein.prototype.countExternalLinks=function(){if(this.isParked)return 0;for(var c=0,g=this.proteinLinks.keys().length,e=0;e<g;e++){var h=this.proteinLinks.values()[e];h.intra||!0===h.check()&&c++}return c};Protein.prototype.getSubgraph=function(c){null==this.subgraph&&(c={nodes:d3.map(),links:d3.map()},c.nodes.set(this.id,this),!1===this.isParked&&(this.subgraph=this.addConnectedNodes(c)),this.controller.subgraphs.push(c));return this.subgraph};
Protein.prototype.addConnectedNodes=function(c){for(var g=this.proteinLinks.values(),e=g.length,h=0;h<e;h++){var m=g[h];m.fromProtein===m.toProtein||!0!==m.check()||c.links.has(m.id)||(c.links.set(m.id,m),m=m.getFromProtein()===this?m.getToProtein():m.getFromProtein(),null===m||c.nodes.has(m.id)||(c.nodes.set(m.id,m),m.subgraph=c,m.addConnectedNodes(c)))}return c};
Protein.prototype.setPositionalFeatures=function(c){this.annotations=[];this.circDomains&&this.controller.emptyElement(this.circDomains);this.rectDomains&&this.controller.emptyElement(this.rectDomains);if(c){c.sort(function(c,e){return e.end-e.start-(c.end-c.start)});this.annotations=c;for(var g=0;g<c.length;g++){var e=c[g];e.start-=0;e.end-=0;e.pieSlice=document.createElementNS(xiNET.svgns,"path");e.colouredRect=document.createElementNS(xiNET.svgns,"path");0===this.form?(e.pieSlice.setAttribute("d",
this.getAnnotationPieSliceArcPath(e)),e.colouredRect.setAttribute("d",this.getAnnotationPieSliceApproximatePath(e))):(e.pieSlice.setAttribute("d",this.getAnnotationRectPath(e)),e.colouredRect.setAttribute("d",this.getAnnotationRectPath(e)));var h;null==e.colour?(h="alpha_helix"===e.name?new RGBColor("#7EB6FF88"):"beta_strand"===e.name?new RGBColor("#9AFF9A88"):"turn"===e.name?new RGBColor("#FF00AA88"):new RGBColor(Protein.domainColours(e.name)),e.colour=h):h=e.colour;e.pieSlice.setAttribute("fill",
h.toRGB());e.pieSlice.setAttribute("stroke",h.toRGB());e.pieSlice.setAttribute("stroke-width",1);e.pieSlice.setAttribute("fill-opacity","0.5");e.colouredRect.setAttribute("fill",h.toRGB());e.colouredRect.setAttribute("stroke",h.toRGB());e.colouredRect.setAttribute("stroke-width",1);e.colouredRect.setAttribute("fill-opacity","0.5");e.pieSlice.name=e.name+" ["+e.start+" - "+e.end+"]";var m=this.controller,p=this;e.pieSlice.onmouseover=function(c){var e=c.target.correspondingUseElement?c.target.correspondingUseElement:
c.target;m.preventDefaultsAndStopPropagation(c);m.setTooltip(e.name,e.getAttribute("fill"));p.showHighlight(!0)};e.colouredRect.onmouseover=function(c){var e=c.target.correspondingUseElement?c.target.correspondingUseElement:c.target;m.preventDefaultsAndStopPropagation(c);m.setTooltip(e.name,e.getAttribute("fill"));p.showHighlight(!0)};this.circDomains.appendChild(e.pieSlice);this.rectDomains.appendChild(e.colouredRect)}}};
Protein.trig=function(c,g){var e=g/360*Math.PI*2;return{x:c*Math.cos(e),y:c*Math.sin(e)}};Protein.stepsInArc=5;Protein.prototype.getAnnotationPieSliceArcPath=function(c){var g=(c.start-1)/this.size*360,e=c.end/this.size*360,h=0,m=1;180<e-g&&(m=h=1);1==c.start&&c.end==this.size&&(g=.5,e=359.5,m=1);c=this.getBlobRadius()-2;g=Protein.trig(c,g-90);e=Protein.trig(c,e-90);return"M0,0 L"+g.x+","+g.y+" A"+c+","+c+" 0 "+h+" "+m+" "+e.x+","+e.y+" Z"};
Protein.prototype.getAnnotationPieSliceApproximatePath=function(c){var g=(c.start-1)/this.size*360;c=c.end/this.size*360;var e=this.getBlobRadius()-2;Protein.trig(e,g-90);Protein.trig(e,c-90);for(var h="M 0,0",m=0;m<=Protein.stepsInArc;m++)var p=Protein.trig(e,g+m/5*(c-g)-90),h=h+(" L "+p.x+","+p.y);return h+=" L 0,0  Z"};
Protein.prototype.getAnnotationRectPath=function(c){var g=Protein.STICKHEIGHT/2,e=-Protein.STICKHEIGHT/2,h=this.getResXwithStickZoom(c.start-.5);c=(1+(c.end-c.start))*Protein.UNITS_PER_RESIDUE*this.stickZoom;for(var m="M "+h+","+g,p=0;p<=Protein.stepsInArc;p++)m+=" L "+(h+p/Protein.stepsInArc*c)+","+e;return m+(" L "+(h+c)+","+g+" Z")};function Annotation(c,g,e,h,m){this.name=c;this.start=g;this.end=e;void 0!==h&&null!==h&&(this.colour=new RGBColor(h.trim()));this.notes=m};ProteinLink.maxNoResidueLinks=0;ProteinLink.prototype=new xiNET.Link;
function ProteinLink(c,g,e,h){this.id=c;this.residueLinks=d3.map();this.controller=h;this.fromProtein=g;this.toProtein=e;this.ambig=!1;this.tooltip=this.id;this.hidden=this.shown=!1;this.selfLink()?(this.line=document.createElementNS(xiNET.svgns,"path"),this.highlightLine=document.createElementNS(xiNET.svgns,"path"),this.fatLine=document.createElementNS(xiNET.svgns,"path")):(this.line=document.createElementNS(xiNET.svgns,"line"),this.highlightLine=document.createElementNS(xiNET.svgns,"line"),this.fatLine=
document.createElementNS(xiNET.svgns,"line"));this.line.setAttribute("class","link");this.line.setAttribute("fill","none");this.line.setAttribute("stroke","black");this.line.setAttribute("stroke-width",1);this.line.setAttribute("stroke-linecap","round");this.highlightLine.setAttribute("class","link");this.highlightLine.setAttribute("fill","none");this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB());this.highlightLine.setAttribute("stroke-width","10");this.highlightLine.setAttribute("stroke-linecap",
"round");this.highlightLine.setAttribute("stroke-opacity","0");this.fatLine.setAttribute("class","link");this.fatLine.setAttribute("fill","none");this.fatLine.setAttribute("stroke","lightgray");this.fatLine.setAttribute("stroke-linecap","round");this.fatLine.setAttribute("stroke-linejoin","round");var m=this;this.line.onmousedown=function(c){m.mouseDown(c)};this.line.onmouseover=function(c){m.mouseOver(c)};this.line.onmouseout=function(c){m.mouseOut(c)};this.line.ontouchstart=function(c){m.touchStart(c)};
this.highlightLine.onmousedown=function(c){m.mouseDown(c)};this.highlightLine.onmouseover=function(c){m.mouseOver(c)};this.highlightLine.onmouseout=function(c){m.mouseOut(c)};this.highlightLine.ontouchstart=function(c){m.touchStart(c)};this.fatLine.onmousedown=function(c){m.mouseDown(c)};this.fatLine.onmousedown=function(c){m.mouseDown(c)};this.fatLine.onmouseover=function(c){m.mouseOver(c)};this.fatLine.onmouseout=function(c){m.mouseOut(c)};this.fatLine.ontouchstart=function(c){m.touchStart(c)};
this.isSelected=!1}ProteinLink.prototype.selfLink=function(){return this.fromProtein===this.toProtein};ProteinLink.prototype.initSelfLinkSVG=function(){var c=this.fromProtein.getAggregateSelfLinkPath();this.line.setAttribute("d",c);this.highlightLine.setAttribute("d",c);this.fatLine.setAttribute("d",c)};ProteinLink.prototype.getFromProtein=function(){return this.fromProtein};ProteinLink.prototype.getToProtein=function(){return this.toProtein};
ProteinLink.prototype.showHighlight=function(c,g){"undefined"===typeof g&&(g=!1);this.shown&&(c?(this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB()),this.highlightLine.setAttribute("stroke-opacity","1")):(this.highlightLine.setAttribute("stroke",xiNET.selectedColour.toRGB()),0==this.isSelected&&this.highlightLine.setAttribute("stroke-opacity","0")));if(g&&this.ambig)for(var e=this.residueLinks.values().length,h=0;h<e;h++)for(var m=this.residueLinks.values()[h],p=m.matches.length,
q=0;q<p;q++){var t=m.matches[q][0];if(t.isAmbig())for(var u=t.residueLinks.length,v=0;v<u;v++)m=t.residueLinks[v],!0===m.shown&&0==m.isSelected&&m.showHighlight(c,!1),!0===m.proteinLink.shown&&m.proteinLink.showHighlight(c,!1)}};
ProteinLink.prototype.setSelected=function(c){c&&!1===this.isSelected?(this.controller.selected.set(this.id,this),this.isSelected=!0,this.highlightLine.setAttribute("stroke",xiNET.selectedColour.toRGB()),this.highlightLine.setAttribute("stroke-opacity","1")):!1===c&&!0===this.isSelected&&(this.controller.selected.remove(this.id),this.isSelected=!1,this.highlightLine.setAttribute("stroke-opacity","0"),this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB()))};
ProteinLink.prototype.showID=function(){if("function"===typeof send_match_ids){var c,g=this.getFilteredMatches(),e=g.length;c="";for(var h=!0,m=0;m<e;m++)!0===h?h=!1:c+=",",c+=g[m];send_match_ids(c)}else{c="<h5>"+this.fromProtein.name+" ["+this.fromProtein.id+"] to "+this.toProtein.name+" ["+this.toProtein.id+"]</h5>";for(var e=this.residueLinks.values(),p=e.length,h=[],g=d3.map(),q=d3.map(),m=0;m<p;m++){var t=e[m],u=!1;if(t.matches)for(var v=t.matches.length,x=0;x<v;x++){var y=t.matches[x][0];if(y.meetsFilterCriteria())if(!1===
u&&(u=!0,h.push(t)),g.set(y.id),y.isAmbig())for(var D=0;D<y.residueLinks.length;D++)q.set(y.residueLinks[D].proteinLink.id);else this.ambig=!1}else h.push(t)}p=h.length;c+="<h5>"+p+" unique residue - residue linkage site";1<p&&(c+="s");c+=". "+g.values().length+" matches.</h5>";q="<table><tr><th>Id</th><th>Protein1</th>";q+="<th>PepPos1</th>";q+="<th>PepSeq1</th>";q+="<th>LinkPos1</th>";q+="<th>Protein2</th>";q+="<th>PepPos2</th>";q+="<th>PepSeq2</th>";q+="<th>LinkPos2</th>";q+="<th>Score</th>";!0===
this.controller.autoValidatedFound&&(q+="<th>Auto</th>");!0===this.controller.manualValidatedFound&&(q+="<th>Manual</th>");q+="</tr>";for(m=0;m<p;m++)for(g=h[m].getFilteredMatches(),e=g.length,t=0;t<e;t++)q+=g[t][0].toTableRow();q+="</table>";c+=q;this.controller.message(c)}};
ProteinLink.prototype.getFilteredMatches=function(){for(var c=this.residueLinks.values(),g=c.length,e=d3.map(),h=0;h<g;h++)for(var m=c[h],p=m.matches.length,q=0;q<p;q++){var t=m.matches[q];t[0].meetsFilterCriteria()&&e.set(t[0].id,t)}return e.values()};
ProteinLink.prototype.check=function(){if(this.fromProtein.isParked||null!==this.toProtein&&this.toProtein.isParked)return this.hide(),!1;if(this.selfLink()&&!1===this.controller.selfLinksShown){if(0===this.fromProtein.form)this.hide();else for(var c=this.residueLinks.values(),g=c.length,e=0;e<g;e++)c[e].hide();return!1}if(this.hidden){if(0===this.fromProtein.form&&null!==this.toProtein&&0===this.toProtein.form)this.hide();else for(c=this.residueLinks.values(),g=c.length,e=0;e<g;e++)c[e].hide();return!1}c=
this.residueLinks.values();g=c.length;this.hd=!1;if(0===this.fromProtein.form&&null!==this.toProtein&&0===this.toProtein.form){this.ambig=!0;for(var h=[],m=d3.map(),p=d3.map(),e=0;e<g;e++){var q=c[e],t=!1;if(q.matches)for(var u=q.matches.length,v=0;v<u;v++){var x=q.matches[v][0];if(x.meetsFilterCriteria()){!0===x.hd&&(this.hd=!0);!1===t&&(t=!0,h.push(q));m.set(x.id);if(x.isAmbig())for(var y=0;y<x.residueLinks.length;y++)p.set(x.residueLinks[y].proteinLink.id);else this.ambig=!1;1==x.manuallyDashed&&
(this.manuallyDashed=!0)}}else h.push(q)}c=h.length;if(0<c)return this.tooltip=this.id+", "+c+" unique cross-link",1<c&&(this.tooltip+="s"),this.tooltip+=" ("+m.keys().length,1===m.keys().length?this.tooltip+=" match)":this.tooltip+=" matches)",this.w=45/ProteinLink.maxNoResidueLinks*c,this.ambig=this.ambig&&1<p.keys().length,this.dashedLine(this.ambig||this.manuallyDashed),this.selfLink()&&(this.hd?(this.line.setAttribute("stroke",xiNET.homodimerLinkColour.toRGB()),this.line.setAttribute("stroke-width",
xiNET.homodimerLinkWidth)):(this.line.setAttribute("stroke","black"),this.line.setAttribute("stroke-width",1))),this.show(),!0;this.hide();return!1}if(null!==this.toProtein||0!==this.fromProtein.form){m=!1;for(p=0;p<g;p++)!0===c[p].check()&&(m=!0);return m}};ProteinLink.prototype.dashedLine=function(c){c?!0===this.selfLink()?this.line.setAttribute("stroke-dasharray","4, 4"):this.line.setAttribute("stroke-dasharray",4*this.controller.z+", "+4*this.controller.z):c||this.line.removeAttribute("stroke-dasharray")};
ProteinLink.prototype.show=function(){this.shown||(this.shown=!0,this.selfLink()?(1<ProteinLink.maxNoResidueLinks&&(this.fatLine.setAttribute("transform","translate("+this.fromProtein.x+" "+this.fromProtein.y+") scale("+this.controller.z+")"),this.controller.p_pLinksWide.appendChild(this.fatLine)),this.line.setAttribute("transform","translate("+this.fromProtein.x+" "+this.fromProtein.y+") scale("+this.controller.z+")"),this.highlightLine.setAttribute("transform","translate("+this.fromProtein.x+" "+
this.fromProtein.y+") scale("+this.controller.z+")")):(this.line.setAttribute("stroke-width",1*this.controller.z),this.highlightLine.setAttribute("stroke-width",10*this.controller.z),this.setLineCoordinates(this.fromProtein),this.setLineCoordinates(this.toProtein),1<ProteinLink.maxNoResidueLinks&&this.controller.p_pLinksWide.appendChild(this.fatLine)),this.controller.highlights.appendChild(this.highlightLine),this.controller.p_pLinks.appendChild(this.line));1<ProteinLink.maxNoResidueLinks&&(this.selfLink()?
this.fatLine.setAttribute("stroke-width",this.w):this.fatLine.setAttribute("stroke-width",this.controller.z*this.w))};ProteinLink.prototype.hide=function(){this.shown&&(this.shown=!1,this.selfLink(),1<ProteinLink.maxNoResidueLinks&&this.controller.p_pLinksWide.removeChild(this.fatLine),this.controller.highlights.removeChild(this.highlightLine),this.controller.p_pLinks.removeChild(this.line))};
ProteinLink.prototype.setLineCoordinates=function(c){null!==this.getToProtein()&&this.shown&&(this.getFromProtein()===c?(this.line.setAttribute("x1",c.x),this.line.setAttribute("y1",c.y),this.highlightLine.setAttribute("x1",c.x),this.highlightLine.setAttribute("y1",c.y),this.fatLine.setAttribute("x1",c.x),this.fatLine.setAttribute("y1",c.y)):this.getToProtein()===c&&(this.line.setAttribute("x2",c.x),this.line.setAttribute("y2",c.y),this.highlightLine.setAttribute("x2",c.x),this.highlightLine.setAttribute("y2",
c.y),this.fatLine.setAttribute("x2",c.x),this.fatLine.setAttribute("y2",c.y)))};ProteinLink.prototype.getOtherEnd=function(c){return this.fromProtein===c?this.toProtein:this.fromProtein};ResidueLink.prototype=new xiNET.Link;function ResidueLink(c,g,e,h,m,p){this.id=c;this.controller=m;this.proteinLink=g;this.fromResidue=e;this.toResidue=h;this.intra=!1;"undefined"!==typeof this.proteinLink&&this.proteinLink.fromProtein===this.proteinLink.toProtein&&(this.intra=!0);this.ambig=!1;this.tooltip=this.id;!0===p&&(this.flip=!0);this.dashed=this.shown=!1;this.curveMidX=null}
ResidueLink.prototype.initSVG=function(){if("undefined"===typeof this.line){this.intra||null===this.proteinLink.toProtein?(this.line=document.createElementNS(xiNET.svgns,"path"),this.line.setAttribute("stroke",xiNET.defaultSelfLinkColour.toRGB()),this.highlightLine=document.createElementNS(xiNET.svgns,"path")):(this.line=document.createElementNS(xiNET.svgns,"line"),this.line.setAttribute("stroke",xiNET.defaultInterLinkColour.toRGB()),this.line.setAttribute("stroke-linecap","round"),this.highlightLine=
document.createElementNS(xiNET.svgns,"line"),this.highlightLine.setAttribute("stroke-linecap","round"));this.line.setAttribute("class","link");this.line.setAttribute("fill","none");this.highlightLine.setAttribute("class","link");this.highlightLine.setAttribute("fill","none");this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB());this.highlightLine.setAttribute("stroke-width","10");this.highlightLine.setAttribute("stroke-opacity","0");"undefined"!==typeof this.colour&&this.line.setAttribute("stroke",
this.colour);var c=this;this.line.onmousedown=function(g){c.mouseDown(g)};this.line.onmouseover=function(g){c.mouseOver(g)};this.line.onmouseout=function(g){c.mouseOut(g)};this.line.ontouchstart=function(g){c.touchStart(g)};this.highlightLine.onmousedown=function(g){c.mouseDown(g)};this.highlightLine.onmouseover=function(g){c.mouseOver(g)};this.highlightLine.onmouseout=function(g){c.mouseOut(g)};this.highlightLine.ontouchstart=function(g){c.touchStart(g)}}this.isSelected=!1};
ResidueLink.prototype.getFromProtein=function(){return this.proteinLink.fromProtein};ResidueLink.prototype.getToProtein=function(){return this.proteinLink.toProtein};
ResidueLink.prototype.showHighlight=function(c,g){if(!(this.proteinLink.fromProtein.busy||this.proteinLink.toProtein&&this.proteinLink.toProtein.busy)){"undefined"===typeof g&&(g=!1);if(this.shown)if(c){this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB());this.highlightLine.setAttribute("stroke-opacity","0.7");for(var e=[],h=[],m=this.getFilteredMatches(),p=m.length,q=0;q<p;q++){var t=m[q][0],u=m[q][3]-1,v=m[q][4];e.push([m[q][1]-1,m[q][2],t.overlap[0],t.overlap[1]]);h.push([u,
v,t.overlap[0],t.overlap[1]])}this.proteinLink.fromProtein.showPeptides(e);null!==this.proteinLink.toProtein&&this.proteinLink.toProtein.showPeptides(h)}else this.highlightLine.setAttribute("stroke",xiNET.selectedColour.toRGB()),0==this.isSelected&&this.highlightLine.setAttribute("stroke-opacity","0"),this.proteinLink.fromProtein.removePeptides(),null!==this.proteinLink.toProtein&&this.proteinLink.toProtein.removePeptides();if(g&&this.ambig)for(e=this.matches?this.matches.length:0,q=0;q<e;q++)if(t=
this.matches[q][0],t.isAmbig())for(h=t.residueLinks.length,m=0;m<h;m++)p=t.residueLinks[m],p.showHighlight(c,!1),p.proteinLink.showHighlight(c,!1)}};
ResidueLink.prototype.setSelected=function(c){c&&!1===this.isSelected?(this.controller.selected.set(this.id,this),this.isSelected=!0,this.highlightLine.setAttribute("stroke",xiNET.selectedColour.toRGB()),this.highlightLine.setAttribute("stroke-opacity","0.7")):!1===c&&!0===this.isSelected&&(this.controller.selected.remove(this.id),this.isSelected=!1,this.highlightLine.setAttribute("stroke-opacity","0"),this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB()))};
ResidueLink.prototype.showID=function(){if("function"===typeof send_match_ids){for(var c=this.getFilteredMatches(),g=[],e=c.length,h=!0,m=0;m<e;m++)h?h=!1:g+=",",g+=c[m].id;send_match_ids(g)}else{c=this.getFromProtein();e=this.getToProtein();g="<h5>"+c.name+" ["+c.id+"], residue "+this.fromResidue+" to "+(e?e.name:"null")+" ["+(e?e.id:"")+"], residue "+this.toResidue+"</h5>";c=this.getFilteredMatches();e=c.length;g+="<p>"+e+" match";g=1<e?g+"es:</p>":g+":</p>";h="<table><tr><th>Id</th><th>Protein1</th>";
h+="<th>PepPos1</th>";h+="<th>PepSeq1</th>";h+="<th>LinkPos1</th>";h+="<th>Protein2</th>";h+="<th>PepPos2</th>";h+="<th>PepSeq2</th>";h+="<th>LinkPos2</th>";h+="<th>Score</th>";!0===this.controller.autoValidatedFound&&(h+="<th>Auto</th>");!0===this.controller.manualValidatedFound&&(h+="<th>Manual</th>");h+="</tr>";for(m=0;m<e;m++)h+=c[m][0].toTableRow();h+="</table><p>&nbsp;</p>";g+=h;this.controller.message(g)}};
ResidueLink.prototype.getFilteredMatches=function(){this.ambig=!0;this.intraMolecular=this.hd=!1;for(var c=[],g=this.matches?this.matches.length:0,e=0;e<g;e++){var h=this.matches[e][0];h.meetsFilterCriteria()&&(c.push(this.matches[e]),!1===h.isAmbig()&&(this.ambig=!1),!0===h.hd&&(this.hd=!0),1===h.type&&(this.intraMolecular=!0))}return c};
ResidueLink.prototype.check=function(c){if(this.controller.intraHidden&&this.intra||this.proteinLink.hidden)return this.hide(),!1;if("undefined"===typeof this.matches||null==this.matches)return this.ambig=!1,this.show(),!0;c=this.getFilteredMatches().length;if(0<c)return this.tooltip=this.proteinLink.fromProtein.labelText+"_"+this.fromResidue+"-"+(null!=this.proteinLink.toProtein?this.proteinLink.toProtein.labelText:"null")+"_"+this.toResidue+" ("+c,this.tooltip=1==c?this.tooltip+" match)":this.tooltip+
" matches)",this.show(),this.dashedLine(this.ambig),!0===this.intra&&(!0===this.hd?(this.line.setAttribute("stroke",xiNET.homodimerLinkColour.toRGB()),this.line.setAttribute("transform","scale(1, -1)"),this.line.setAttribute("stroke-width",xiNET.homodimerLinkWidth),this.highlightLine.setAttribute("transform","scale(1, -1)")):(this.line.setAttribute("stroke",xiNET.defaultSelfLinkColour.toRGB()),this.line.setAttribute("transform","scale(1, 1)"),this.line.setAttribute("stroke-width",xiNET.linkWidth),
this.highlightLine.setAttribute("transform","scale(1, 1)"))),!0;this.hide();return!1};ResidueLink.prototype.dashedLine=function(c){"undefined"===typeof this.line||isNaN(parseFloat(this.toResidue))||(c?this.intra?(this.dashed=!0,this.line.setAttribute("stroke-dasharray","4, 4")):(this.dashed=!0,this.line.setAttribute("stroke-dasharray",4*this.controller.z+", "+4*this.controller.z)):c||(this.dashed=!1,this.line.removeAttribute("stroke-dasharray")))};
ResidueLink.prototype.show=function(){this.controller.sequenceInitComplete&&!this.shown&&(this.shown=!0,"undefined"===typeof this.line&&this.initSVG(),this.intra||null===this.proteinLink.toProtein?(this.line.setAttribute("stroke-width",xiNET.linkWidth),this.line.setAttribute("d",this.proteinLink.fromProtein.getResidueLinkPath(this)),this.proteinLink.fromProtein.intraLinksHighlights.appendChild(this.highlightLine),this.proteinLink.fromProtein.intraLinks.appendChild(this.line)):(this.line.setAttribute("stroke-width",
this.controller.z*xiNET.linkWidth),this.highlightLine.setAttribute("stroke-width",10*this.controller.z),this.setLineCoordinates(this.proteinLink.fromProtein),this.setLineCoordinates(this.proteinLink.toProtein),this.controller.highlights.appendChild(this.highlightLine),this.controller.res_resLinks.appendChild(this.line)))};
ResidueLink.prototype.hide=function(){this.controller.sequenceInitComplete&&this.shown&&(this.shown=!1,this.intra||null===this.proteinLink.toProtein?(this.proteinLink.fromProtein.intraLinksHighlights.removeChild(this.highlightLine),this.proteinLink.fromProtein.intraLinks.removeChild(this.line)):(this.controller.res_resLinks.removeChild(this.line),this.controller.highlights.removeChild(this.highlightLine)))};
ResidueLink.prototype.setLineCoordinates=function(c){if(null!=c.x&&null!=c.y&&null!==this.getToProtein()&&this.shown){var g;this.getFromProtein()===c?(0===c.form?(g=c.x,c=c.y):(c=this.getResidueCoordinates(this.fromResidue,c),g=c[0],c=c[1]),this.line.setAttribute("x1",g),this.line.setAttribute("y1",c),this.highlightLine.setAttribute("x1",g),this.highlightLine.setAttribute("y1",c)):this.getToProtein()===c&&(0===c.form?(g=c.x,c=c.y):(c=this.getResidueCoordinates(this.toResidue,c),g=c[0],c=c[1]),this.line.setAttribute("x2",
g),this.line.setAttribute("y2",c),this.highlightLine.setAttribute("x2",g),this.highlightLine.setAttribute("y2",c))}};
ResidueLink.prototype.getResidueCoordinates=function(c,g){var e=g.getResXwithStickZoom(c)*this.controller.z,h=0;if(8<Protein.UNITS_PER_RESIDUE*g.stickZoom){var h=this.getFromProtein(),m=this.getToProtein(),p=Math.atan2(h.y-m.y,h.x-m.x)/(2*Math.PI)*360;0>p&&(p+=360);g===h?(h=p-h.rotation,0>h&&(h+=360),m=5,180>h&&(m=-5)):(h=p-m.rotation,0>h&&(h+=360),m=5,180<h&&(m=-5));h=m*this.controller.z}h=Protein.rotatePointAboutPoint([e,h],[0,0],g.rotation);e=h[0]+g.x;h=h[1]+g.y;return[e,h]};
ResidueLink.prototype.leastAmbiguousMatches=function(){};ResidueLink.prototype.toJSON=function(){for(var c=[],g=this.matches.length,e=0;e<g;e++)c.push(this.matches[e].id);return{}};function xiNET_Storage(){}xiNET_Storage.ns="xiNET.";xiNET_Storage.accessionFromId=function(c){c+="";return-1!==c.indexOf("|")?c.split("|")[1]:c};
xiNET_Storage.getUniProtTxt=function(c,g){function e(){d3.text("https://rest.uniprot.org/uniprotkb/"+h+".txt",function(e){"undefined"!==typeof Storage&&localStorage.setItem(xiNET_Storage.ns+"UniProtKB."+h,e);g(c,e)})}var h=xiNET_Storage.accessionFromId(c);if("undefined"!==typeof Storage){var m=localStorage.getItem(xiNET_Storage.ns+"UniProtKB."+h);m?g(c,m):e()}else e()};
xiNET_Storage.getSequence=function(c,g){function e(){d3.text("https://rest.uniprot.org/uniprotkb/"+h+".fasta",function(e,m){if(e)alert("Failed. Cannot fetch sequence data for "+h+". Is it a valid UniprotKB accession number?");else if(m){for(var t="",u=m.split("\n"),v=u.length,x=1;x<v;x++)var y=u[x],y=u[x],t=t+y;t=t.replace(/[^A-Z]/g,"");"undefined"!==typeof Storage&&localStorage.setItem(xiNET_Storage.ns+"UniProtKB.fasta."+h,t);g(c,t)}})}var h=xiNET_Storage.accessionFromId(c);if("undefined"!==typeof Storage){var m=
localStorage.getItem(xiNET_Storage.ns+"UniProtKB.fasta."+h);m?(console.log(h+" UniProt from local storage."),g(c,m)):e()}else e()};xiNET_Storage.getUniProtFeatures=function(c,g){xiNET_Storage.accessionFromId(c);xiNET_Storage.getUniProtTxt(c,function(c,h){var m=[];if(null!==h)for(var p=h.split("\n"),q=p.length,t=0;t<q;t++){var u=p[t];0===u.indexOf("FT")&&(u=u.split(/\s{2,}/g),4<u.length&&"CHAIN"!==u[1]&&m.push(new Annotation(u[1],u[2],u[3],null,u[4])))}g(c,m)})};
xiNET_Storage.getSuperFamFeatures=function(c,g){function e(){d3.xml("http://supfam.org/SUPERFAMILY/cgi-bin/das/up/features?segment="+m,function(c){c=(new XMLSerializer).serializeToString(c);"undefined"!==typeof Storage&&localStorage.setItem(xiNET_Storage.ns+"SuperFamDAS."+m,c);h(c)})}function h(e){if(window.DOMParser)var h=(new DOMParser).parseFromString(e,"text/xml");else h=new ActiveXObject("Microsoft.XMLDOM"),h.async=!1,h.loadXML(e);e=[];for(var h=h.getElementsByTagName("FEATURE"),m=h.length,p=
0;p<m;p++){var x=h[p],y=x.getElementsByTagName("TYPE")[0];if("miscellaneous"===y.getAttribute("category")){var y=y.getAttribute("id"),D=x.getElementsByTagName("START")[0].textContent,x=x.getElementsByTagName("END")[0].textContent;e.push(new Annotation(y,D,x))}}g(c,e)}var m=xiNET_Storage.accessionFromId(c);if("undefined"!==typeof Storage){var p=localStorage.getItem(xiNET_Storage.ns+"SuperFamDAS."+m);p?h(p):e()}else e()};function Rotator(c,g,e){var h=this;this.ctrl=e;this.proteinOrPartThereof=c;this.upperOrLower=g;this.svg=document.createElementNS(xiNET.svgns,"g");this.rotatorSymbol=document.createElementNS(xiNET.svgns,"g");c=document.createElementNS(xiNET.svgns,"circle");c.setAttribute("r",14);c.setAttribute("stroke","none");c.setAttribute("fill","gray");c.setAttribute("fill-opacity","0.0");this.svg.appendChild(c);c=document.createElementNS(xiNET.svgns,"circle");c.setAttribute("r",20);c.setAttribute("stroke","black");
c.setAttribute("stroke-width","1");c.setAttribute("fill","none");this.rotatorSymbol.appendChild(c);c=document.createElementNS(xiNET.svgns,"path");c.setAttribute("d","M 19.818182,-3 L 16,3.10345 L 23.636363,3.10345 L 19.818182,-3 z ");c.setAttribute("stroke","black");c.setAttribute("stroke-width","1");c.setAttribute("fill","black");this.rotatorSymbol.appendChild(c);c=document.createElementNS(xiNET.svgns,"path");c.setAttribute("d","M 19.818182,-3 L 16,3.10345 L 23.636363,3.10345 L 19.818182,-3 z ");
c.setAttribute("stroke","black");c.setAttribute("stroke-width","1");c.setAttribute("fill","black");c.setAttribute("transform","rotate(180)");this.rotatorSymbol.appendChild(c);this.rotatorSymbol.setAttribute("transform","rotate(45) scale (0.7, 0.7)");this.rotatorSymbol.setAttribute("display","none");this.inner=document.createElementNS(xiNET.svgns,"g");this.inner.setAttribute("class","PV_rotator");this.inner.appendChild(this.rotatorSymbol);this.svg.appendChild(this.inner);this.svg.onmouseover=function(c){h.rotatorMouseOver(c)};
this.svg.onmouseout=function(c){h.rotatorMouseOut(c)};this.svg.onmousedown=function(c){h.rotatorMouseDown(c)}}Rotator.prototype.rotatorMouseOver=function(c){this.ctrl.rotating||this.rotatorSymbol.setAttribute("display","block")};Rotator.prototype.rotatorMouseOut=function(c){this.rotatorSymbol.setAttribute("display","none")};
Rotator.prototype.rotatorMouseDown=function(c){this.ctrl.state=xiNET.Controller.ROTATING;this.ctrl.dragElement=this.proteinOrPartThereof;c=this.ctrl.getEventPoint(c);this.ctrl.mouseToSVG(c.x,c.y);this.ctrl.whichRotator=this.upperOrLower;return!1};xiNET.Controller.prototype.readCSV=function(c,g,e){function h(c){for(var e=1;e<U;e++)for(var g=t[e][c].replace(/(['"])/g,"").split(/[;,]/),h=0;h<g.length;h++){var m=g[h].trim();if("-"!==m.trim()&&"n/a"!==m.trim()){var p="",u="";if(-1===g[h].indexOf("|"))p=g[h].trim();else{var u=g[h].split("|"),p=u[1].trim(),u=u[2].trim(),v=u.indexOf("_");-1!==v&&(u=u.substring(0,v).trim())}q.proteins.has(m)||(p=new Protein(m,q,p,u),q.proteins.set(m,p))}}}function m(c){var e=c;-1!==c.indexOf("|")&&(c=c.split("|"),
3===c.length&&(e=c[2],c=e.indexOf("_"),-1!==c&&(e=e.substring(0,c))));return e}function p(){for(var c,e,g,h,m=1;m<U;m++){c=t[m][v];e=t[m][y];g=-1!==R?t[m][R]:m;-1!==J&&(h=t[m][J]);var p=/(.*)-(.*)-a(\d*)-b(\d*)/.exec(g),u=/(.*)-(.*)-(.*)/.exec(g);if(null!==p){for(var C=p[1],u=p[2],E=p[3]-0,Y=p[4]-0,p=t[m][M].toString().split(/[;,]/),T=0;T<p.length;T++)p[T]=parseInt(p[T])-E+1;for(var la=t[m][ca].toString().split(/[;,]/),T=0;T<la.length;T++)la[T]=parseInt(la[T])-Y+1;q.addMatch(c,p.join(";"),e,la.join(";"),
g,h,E,Y,C,u)}else if(-1===G||null===u||"intralink"!==t[m][G]&&"monolink"!==t[m][G])p=t[m],q.addMatch(c,p[x],e,p[D],g,h,p[M],p[ca],p[P],p[$],null,null,null,null,-1!=L?p[L]:null);else{C=u[1];E=parseInt(u[2].substring(1));p=t[m][M].toString().split(/[;,]/);for(T=0;T<p.length;T++)p[T]=parseInt(p[T])-E+1;"intralink"===t[m][G]?(Y=parseInt(u[3].substring(1)),q.addMatch(c,p.join(";"),null,null,g,h,E,Y,C,null)):q.addMatch(c,p.join(";"),null,null,g,h,E,null,C,null)}}}var q=this,t=d3.csv.parseRows(c);c=t[0];
for(var u=0;u<c.length;u++)c[u]=c[u].trim();var v=c.indexOf("Protein1"),x=c.indexOf("PepPos1"),y=c.indexOf("Protein2"),D=c.indexOf("PepPos2"),J=c.indexOf("Score"),R=c.indexOf("Id"),M=c.indexOf("LinkPos1"),P=c.indexOf("PepSeq1"),ca=c.indexOf("LinkPos2"),$=c.indexOf("PepSeq2"),L=c.indexOf("Dashed"),G=c.indexOf("Type");if(-1===v)alert("Failed to read column 'Protein1' from CSV file");else if(-1===y)alert("Failed to read column 'Protein2' from CSV file");else{if(-1===M&&(M=c.indexOf("AbsPos1"),-1===M)){alert("Failed to read column 'LinkPos1' from CSV file");
return}if(-1===ca&&(ca=c.indexOf("AbsPos2"),-1===ca)){alert("Failed to read column 'LinkPos2' from CSV file");return}-1===J&&(J=c.indexOf("ld-Score"));var U=t.length;if(g){g=g.split("\n");c=null;for(var C,E,u=0;u<g.length;u++){var Y=""+g[u];if(0!==Y.indexOf(";"))if(0===Y.indexOf(">")){if(null!==c){var T=m(c);E=new Protein(c,this,null,T);E.setSequence(C.trim());this.proteins.set(c,E);E=new Protein("decoy_reverse_"+c,this,null,"DECOY_"+T);E.setSequence(C.trim().split("").reverse().join(""));this.proteins.set("decoy_reverse_"+
c,E);E=new Protein("reverse_"+c,this,null,"DECOY_"+T);E.setSequence(C.trim().split("").reverse().join(""));this.proteins.set("reverse_"+c,E);C=""}E=Y.indexOf(" ");-1===E&&(E=Y.length);c=Y.substring(1,E).trim().replace(/(['"])/g,"");Y.substring(E).trim()}else C+=Y.trim()}T=m(c);E=new Protein(c,this,null,T);E.setSequence(C.trim());this.proteins.set(c,E);E=new Protein("decoy_reverse_"+c,this,null,"DECOY_"+T);E.setSequence(C.trim().split("").reverse().join(""));this.proteins.set("decoy_reverse_"+c,E);
E=new Protein("reverse_"+c,this,null,"DECOY_"+T);E.setSequence(C.trim().split("").reverse().join(""));this.proteins.set("reverse_"+c,E);q.initProteins();p();C=this.proteins.values();var Ea=C.length;for(g=0;g<Ea;g++)E=C[g],0===E.proteinLinks.keys().length&&this.proteins.remove(E.id);e&&q.addAnnotations(e);q.initLayout()}else{h(v);h(y);C=this.proteins.values();var Ea=C.length,cb=0;for(g=0;g<Ea;g++)xiNET_Storage.getSequence(C[g].id,function(c,g){q.proteins.get(c).setSequence(g);cb++;console.log("> "+
Ea+" "+cb);cb===Ea&&(e&&q.addAnnotations(e),q.initProteins(),p(),q.initLayout())})}}};
