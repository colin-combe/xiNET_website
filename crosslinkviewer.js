!function(){function c(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function f(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function e(a){return null===a?NaN:+a}function h(a){return!isNaN(a)}function m(a){return{left:function(b,d,k,g){3>arguments.length&&(k=0);4>arguments.length&&(g=b.length);for(;k<g;){var l=k+g>>>1;0>a(b[l],d)?k=l+1:g=l}return k},right:function(b,d,k,g){3>arguments.length&&(k=0);4>arguments.length&&(g=b.length);for(;k<g;){var l=k+g>>>1;0<a(b[l],
d)?g=l:k=l+1}return k}}}function p(a){return a.length}function q(a,b){for(var d in b)Object.defineProperty(a.prototype,d,{value:b[d],enumerable:!1})}function r(){this._=Object.create(null)}function t(a){return"__proto__"===(a+="")||"\x00"===a[0]?"\x00"+a:a}function v(a){return"\x00"===(a+="")[0]?a.slice(1):a}function x(a){return t(a)in this._}function y(a){return(a=t(a))in this._&&delete this._[a]}function J(){var a=[],b;for(b in this._)a.push(v(b));return a}function G(){var a=0,b;for(b in this._)++a;
return a}function F(){for(var a in this._)return!1;return!0}function C(){this._=Object.create(null)}function O(a){return a}function X(a,b,d){return function(){var k=d.apply(b,arguments);return k===b?a:k}}function Y(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var d=0,k=Xd.length;d<k;++d){var g=Xd[d]+b;if(g in a)return g}}function T(){}function z(){}function V(a){function b(){for(var b=d,k=-1,c=b.length,s;++k<c;)(s=b[k].on)&&s.apply(this,arguments);return a}var d=[],k=new r;b.on=
function(b,l){var c=k.get(b),s;if(2>arguments.length)return c&&c.on;c&&(c.on=null,d=d.slice(0,s=d.indexOf(c)).concat(d.slice(s+1)),k.remove(b));l&&d.push(k.set(b,{on:l}));return a};return b}function B(){n.event.preventDefault()}function w(){for(var a=n.event,b;b=a.sourceEvent;)a=b;return a}function D(a){for(var b=new z,d=0,k=arguments.length;++d<k;)b[arguments[d]]=V(b);b.of=function(d,k){return function(c){try{var s=c.sourceEvent=n.event;c.target=a;n.event=c;b[c.type].apply(d,k)}finally{n.event=s}}};
return b}function L(a){Rb(a,Z);return a}function U(a){return"function"===typeof a?a:function(){return Qc(a,this)}}function nb(a){return"function"===typeof a?a:function(){return Rc(a,this)}}function Yd(a,b){function d(){this.removeAttribute(a)}function k(){this.removeAttributeNS(a.space,a.local)}function g(){this.setAttribute(a,b)}function l(){this.setAttributeNS(a.space,a.local,b)}function c(){var d=b.apply(this,arguments);null==d?this.removeAttribute(a):this.setAttribute(a,d)}function s(){var d=
b.apply(this,arguments);null==d?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,d)}a=n.ns.qualify(a);return null==b?a.local?k:d:"function"===typeof b?a.local?s:c:a.local?l:g}function Zd(a){return a.trim().replace(/\s+/g," ")}function $d(a){return new RegExp("(?:^|\\s+)"+n.requote(a)+"(?:\\s+|$)","g")}function fa(a,b){function d(){for(var d=-1;++d<g;)a[d](this,b)}function k(){for(var d=-1,k=b.apply(this,arguments);++d<g;)a[d](this,k)}a=(a+"").trim().split(/^|\s+/).map(ug);
var g=a.length;return"function"===typeof b?k:d}function ug(a){var b=$d(a);return function(d,k){if(g=d.classList)return k?g.add(a):g.remove(a);var g=d.getAttribute("class")||"";k?(b.lastIndex=0,b.test(g)||d.setAttribute("class",Zd(g+" "+a))):d.setAttribute("class",Zd(g.replace(b," ")))}}function W(a,b,d){function k(){this.style.removeProperty(a)}function g(){this.style.setProperty(a,b,d)}function l(){var k=b.apply(this,arguments);null==k?this.style.removeProperty(a):this.style.setProperty(a,k,d)}return null==
b?k:"function"===typeof b?l:g}function ae(a,b){function d(){delete this[a]}function k(){this[a]=b}function g(){var d=b.apply(this,arguments);null==d?delete this[a]:this[a]=d}return null==b?d:"function"===typeof b?g:k}function be(a){function b(){var b=this.ownerDocument,d=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===d&&"http://www.w3.org/1999/xhtml"===b.documentElement.namespaceURI?b.createElement(a):b.createElementNS(d,a)}function d(){return this.ownerDocument.createElementNS(a.space,
a.local)}return"function"===typeof a?a:(a=n.ns.qualify(a)).local?d:b}function vg(){var a=this.parentNode;a&&a.removeChild(this)}function ce(a){return function(){return Sb(this,a)}}function sa(a){arguments.length||(a=f);return function(b,d){return b&&d?a(b.__data__,d.__data__):!b-!d}}function K(a,b){for(var d=0,k=a.length;d<k;d++)for(var g=a[d],l=0,c=g.length,s;l<c;l++)(s=g[l])&&b(s,l,d);return a}function de(a){Rb(a,Oa);return a}function wg(a){var b,d;return function(k,g,l){k=a[l].update;var c=k.length;
l!=d&&(d=l,b=0);for(g>=b&&(b=g+1);!(g=k[b])&&++b<c;);return g}}function Ab(a,b,d){function k(){var b=this[c];b&&(this.removeEventListener(a,b,b.$),delete this[c])}function g(){var g=A(b,Ja(arguments));k.call(this);this.addEventListener(a,this[c]=g,g.$=d);g._=b}function l(){var b=new RegExp("^__on([^.]+)"+n.requote(a)+"$"),d,k;for(k in this)if(d=k.match(b)){var g=this[k];this.removeEventListener(d[1],g,g.$);delete this[k]}}var c="__on"+a,s=a.indexOf("."),A=Ka;0<s&&(a=a.slice(0,s));var u=Sc.get(a);
u&&(a=u,A=ya);return s?b?g:k:b?T:l}function Ka(a,b){return function(d){var k=n.event;n.event=d;b[0]=this.__data__;try{a.apply(this,b)}finally{n.event=k}}}function ya(a,b){var d=Ka(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||b.compareDocumentPosition(this)&8)||d.call(this,a)}}function cb(a){var b=".dragsuppress-"+ ++xg,d="click"+b,k=n.select(c(a)).on("touchmove"+b,B).on("dragstart"+b,B).on("selectstart"+b,B);null==db&&(db="onselectstart"in a?!1:Y(a.style,"userSelect"));if(db){var g=
(a&&(a.ownerDocument||a.document||a).documentElement).style,l=g[db];g[db]="none"}return function(a){k.on(b,null);db&&(g[db]=l);if(a){var s=function(){k.on(d,null)};k.on(d,function(){B();s()},!0);setTimeout(s,0)}}}function Va(a,b){b.changedTouches&&(b=b.changedTouches[0]);var d=a.ownerSVGElement||a;if(d.createSVGPoint){var k=d.createSVGPoint();if(0>Tc&&(d=c(a),d.scrollX||d.scrollY)){var d=n.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),
g=d[0][0].getScreenCTM();Tc=!(g.f||g.e);d.remove()}Tc?(k.x=b.pageX,k.y=b.pageY):(k.x=b.clientX,k.y=b.clientY);k=k.matrixTransform(a.getScreenCTM().inverse());return[k.x,k.y]}k=a.getBoundingClientRect();return[b.clientX-k.left-a.clientLeft,b.clientY-k.top-a.clientTop]}function za(){return n.event.changedTouches[0].identifier}function Wa(a,b,d){return(b[0]-a[0])*(d[1]-a[1])-(b[1]-a[1])*(d[0]-a[0])}function ka(a){return 1<a?0:-1>a?Q:Math.acos(a)}function Fa(a){return 1<a?da:-1>a?-da:Math.asin(a)}function Aa(a){return((a=
Math.exp(a))+1/a)/2}function ha(a){return(a=Math.sin(a/2))*a}function la(){}function ua(a,b,d){return this instanceof ua?void(this.h=+a,this.s=+b,this.l=+d):2>arguments.length?a instanceof ua?new ua(a.h,a.s,a.l):ee(""+a,fe,ua):new ua(a,b,d)}function eb(a,b,d){function k(a){360<a?a-=360:0>a&&(a+=360);return 60>a?g+(l-g)*a/60:180>a?l:240>a?g+(l-g)*(240-a)/60:g}var g,l;a=isNaN(a)?0:0>(a%=360)?a+360:a;b=isNaN(b)?0:0>b?0:1<b?1:b;d=0>d?0:1<d?1:d;l=.5>=d?d*(1+b):d+b-d*b;g=2*d-l;return new pa(Math.round(255*
k(a+120)),Math.round(255*k(a)),Math.round(255*k(a-120)))}function ja(a,b,d){return this instanceof ja?void(this.h=+a,this.c=+b,this.l=+d):2>arguments.length?a instanceof ja?new ja(a.h,a.c,a.l):a instanceof na?ba(a.l,a.a,a.b):ba((a=ge((a=n.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ja(a,b,d)}function Pa(a,b,d){isNaN(a)&&(a=0);isNaN(b)&&(b=0);return new na(d,Math.cos(a*=R)*b,Math.sin(a)*b)}function na(a,b,d){return this instanceof na?void(this.l=+a,this.a=+b,this.b=+d):2>arguments.length?a instanceof na?new na(a.l,
a.a,a.b):a instanceof ja?Pa(a.h,a.c,a.l):ge((a=pa(a)).r,a.g,a.b):new na(a,b,d)}function ia(a,b,d){a=(a+16)/116;d=a-d/200;b=Uc(a+b/500)*he;a=Uc(a)*ie;d=Uc(d)*je;return new pa(Vc(3.2404542*b-1.5371385*a-.4985314*d),Vc(-.969266*b+1.8760108*a+.041556*d),Vc(.0556434*b-.2040259*a+1.0572252*d))}function ba(a,b,d){return 0<a?new ja(Math.atan2(d,b)*ca,Math.sqrt(b*b+d*d),a):new ja(NaN,NaN,a)}function Uc(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Wc(a){return.008856<a?Math.pow(a,1/3):7.787037*a+
4/29}function Vc(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function pa(a,b,d){return this instanceof pa?void(this.r=~~a,this.g=~~b,this.b=~~d):2>arguments.length?a instanceof pa?new pa(a.r,a.g,a.b):ee(""+a,pa,eb):new pa(a,b,d)}function Tb(a){return new pa(a>>16,a>>8&255,a&255)+""}function ob(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function ee(a,b,d){var k=0,g=0,l=0,c,s;if(c=/([a-z]+)\((.*)\)/.exec(a=a.toLowerCase()))switch(s=c[2].split(","),
c[1]){case "hsl":return d(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100);case "rgb":return b(Xc(s[0]),Xc(s[1]),Xc(s[2]))}if(d=Ub.get(a))return b(d.r,d.g,d.b);null==a||"#"!==a.charAt(0)||isNaN(d=parseInt(a.slice(1),16))||(4===a.length?(k=(d&3840)>>4,k|=k>>4,g=d&240,g|=g>>4,l=d&15,l|=l<<4):7===a.length&&(k=(d&16711680)>>16,g=(d&65280)>>8,l=d&255));return b(k,g,l)}function fe(a,b,d){var k=Math.min(a/=255,b/=255,d/=255),g=Math.max(a,b,d),l=g-k,c=(g+k)/2;l?(k=.5>c?l/(g+k):l/(2-g-k),a=60*(a==
g?(b-d)/l+(b<d?6:0):b==g?(d-a)/l+2:(a-b)/l+4)):(a=NaN,k=0<c&&1>c?0:a);return new ua(a,k,c)}function ge(a,b,d){a=Yc(a);b=Yc(b);d=Yc(d);var k=Wc((.4124564*a+.3575761*b+.1804375*d)/he),g=Wc((.2126729*a+.7151522*b+.072175*d)/ie);a=Wc((.0193339*a+.119192*b+.9503041*d)/je);return na(116*g-16,500*(k-g),200*(g-a))}function Yc(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Xc(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function $(a){return"function"===
typeof a?a:function(){return a}}function Zc(a){return function(b,d,k){2===arguments.length&&"function"===typeof d&&(k=d,d=null);return Vb(b,d,a,k)}}function Vb(a,b,d,k){function g(){var a=A.status,b,k;if(k=!a)k=(k=A.responseType)&&"text"!==k?A.response:A.responseText;if(k||200<=a&&300>a||304===a){try{b=d.call(l,A)}catch(g){c.error.call(l,g);return}c.load.call(l,b)}else c.error.call(l,A)}var l={},c=n.dispatch("beforesend","progress","load","error"),s={},A=new XMLHttpRequest,u=null;!this.XDomainRequest||
"withCredentials"in A||!/^(http(s)?:)?\/\//.test(a)||(A=new XDomainRequest);"onload"in A?A.onload=A.onerror=g:A.onreadystatechange=function(){3<A.readyState&&g()};A.onprogress=function(a){var b=n.event;n.event=a;try{c.progress.call(l,A)}finally{n.event=b}};l.header=function(a,b){a=(a+"").toLowerCase();if(2>arguments.length)return s[a];null==b?delete s[a]:s[a]=b+"";return l};l.mimeType=function(a){if(!arguments.length)return b;b=null==a?null:a+"";return l};l.responseType=function(a){if(!arguments.length)return u;
u=a;return l};l.response=function(a){d=a;return l};["get","post"].forEach(function(a){l[a]=function(){return l.send.apply(l,[a].concat(Ja(arguments)))}});l.send=function(d,k,g){2===arguments.length&&"function"===typeof k&&(g=k,k=null);A.open(d,a,!0);null==b||"accept"in s||(s.accept=b+",*/*");if(A.setRequestHeader)for(var e in s)A.setRequestHeader(e,s[e]);null!=b&&A.overrideMimeType&&A.overrideMimeType(b);null!=u&&(A.responseType=u);if(null!=g)l.on("error",g).on("load",function(a){g(null,a)});c.beforesend.call(l,
A);A.send(null==k?null:k);return l};l.abort=function(){A.abort();return l};n.rebind(l,c,"on");return null==k?l:l.get(zg(k))}function zg(a){return 1===a.length?function(b,d){a(null==b?d:null)}:a}function Wb(a,b,d){var k=arguments.length;2>k&&(b=0);3>k&&(d=Date.now());k={c:a,t:d+b,n:null};Xb?Xb.n=k:Yb=k;Xb=k;Zb||($b=clearTimeout($b),Zb=1,ke($c));return k}function $c(){var a=le(),a=me()-a;24<a?(isFinite(a)&&(clearTimeout($b),$b=setTimeout($c,a)),Zb=0):(Zb=1,ke($c))}function le(){for(var a=Date.now(),
b=Yb;b;)a>=b.t&&b.c(a-b.t)&&(b.c=null),b=b.n;return a}function me(){for(var a,b=Yb,d=Infinity;b;)b.c?(b.t<d&&(d=b.t),b=(a=b).n):b=a?a.n=b.n:Yb=b.n;Xb=a;return d}function ad(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Ag(a){var b=a.decimal,d=a.thousands,k=a.grouping,g=a.currency,l=k&&d?function(a,b){for(var g=a.length,l=[],c=0,aa=k[0],e=0;0<g&&0<aa;){e+aa+1>b&&(aa=Math.max(1,b-e));l.push(a.substring(g-=aa,g+aa));if((e+=aa+1)>b)break;aa=k[c=(c+1)%k.length]}return l.reverse().join(d)}:
O;return function(a){a=ne.exec(a);var d=a[1]||" ",k=a[2]||">",c=a[3]||"-",M=a[4]||"",aa=a[5],e=+a[6],f=a[7],h=a[8],P=a[9],E=1,I="",m="",p=!1,B=!0;h&&(h=+h.substring(1));if(aa||"0"===d&&"="===k)aa=d="0",k="=";switch(P){case "n":f=!0;P="g";break;case "%":E=100;m="%";P="f";break;case "p":E=100;m="%";P="r";break;case "b":case "o":case "x":case "X":"#"===M&&(I="0"+P.toLowerCase());case "c":B=!1;case "d":p=!0;h=0;break;case "s":E=-1,P="r"}"$"===M&&(I=g[0],m=g[1]);"r"!=P||h||(P="g");if(null!=h)if("g"==P)h=
Math.max(1,Math.min(21,h));else if("e"==P||"f"==P)h=Math.max(0,Math.min(20,h));var P=Bg.get(P)||Cg,q=aa&&f;return function(a){var g=m;if(p&&a%1)return"";var N=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===c?"":c;0>E?(g=n.formatPrefix(a,h),a=g.scale(a),g=g.symbol+m):a*=E;a=P(a,h);var M=a.lastIndexOf("."),r;0>M?(M=B?a.lastIndexOf("e"):-1,0>M?(r=a,a=""):(r=a.substring(0,M),a=a.substring(M))):(r=a.substring(0,M),a=b+a.substring(M+1));!aa&&f&&(r=l(r,Infinity));var M=I.length+r.length+a.length+(q?0:N.length),w=M<
e?Array(M=e-M+1).join(d):"";q&&(r=l(w+r,w.length?e-a.length:Infinity));N+=I;a=r+a;return("<"===k?N+a+w:">"===k?w+N+a:"^"===k?w.substring(0,M>>=1)+N+a+w.substring(M):N+(q?a:w+a))+g}}}function Cg(a){return a+""}function Qa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function fb(a,b,d){function k(b){var d=a(b),k=l(d,1);return b-d<k-b?d:k}function g(d){b(d=a(new ma(d-1)),1);return d}function l(a,d){b(a=new ma(+a),d);return a}function c(a,k,l){a=g(a);var s=[];if(1<
l)for(;a<k;)d(a)%l||s.push(new Date(+a)),b(a,1);else for(;a<k;)s.push(new Date(+a)),b(a,1);return s}a.floor=a;a.round=k;a.ceil=g;a.offset=l;a.range=c;var s=a.utc=ac(a);s.floor=s;s.round=ac(k);s.ceil=ac(g);s.offset=ac(l);s.range=function(a,b,d){try{ma=Qa;var k=new Qa;k._=a;return c(k,b,d)}finally{ma=Date}};return a}function ac(a){return function(b,d){try{ma=Qa;var k=new Qa;k._=b;return a(k,d)._}finally{ma=Date}}}function Dg(a){function b(a){function b(d){for(var g=[],l=-1,c=0,s,A;++l<k;)if(37===a.charCodeAt(l)){g.push(a.slice(c,
l));null!=(s=qe[c=a.charAt(++l)])&&(c=a.charAt(++l));if(A=q[c])c=A(d,null==s?"e"===c?" ":"0":s);g.push(c);c=l+1}g.push(a.slice(c,l));return g.join("")}var k=a.length;b.parse=function(b){var k={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(d(k,a,b,0)!=b.length)return null;"p"in k&&(k.H=k.H%12+12*k.p);b=null!=k.Z&&ma!==Qa;var g=new (b?Qa:ma);"j"in k?g.setFullYear(k.y,0,k.j):"W"in k||"U"in k?("w"in k||(k.w="W"in k?1:0),g.setFullYear(k.y,0,1),g.setFullYear(k.y,0,"W"in k?(k.w+6)%7+7*k.W-(g.getDay()+5)%7:k.w+
7*k.U-(g.getDay()+6)%7)):g.setFullYear(k.y,k.m,k.d);g.setHours(k.H+(k.Z/100|0),k.M+k.Z%100,k.S,k.L);return b?g._:g};b.toString=function(){return a};return b}function d(a,b,d,k){for(var g,l=0,c=b.length,s=d.length;l<c;){if(k>=s)return-1;g=b.charCodeAt(l++);if(37===g){if(g=b.charAt(l++),g=B[g in qe?b.charAt(l++):g],!g||0>(k=g(a,d,k)))return-1}else if(g!=d.charCodeAt(k++))return-1}return k}var k=a.dateTime,g=a.date,l=a.time,c=a.periods,s=a.days,A=a.shortDays,u=a.months,M=a.shortMonths;b.utc=function(a){function d(a){try{ma=
Qa;var b=new ma;b._=a;return k(b)}finally{ma=Date}}var k=b(a);d.parse=function(a){try{ma=Qa;var b=k.parse(a);return b&&b._}finally{ma=Date}};d.toString=k.toString;return d};b.multi=b.utc.multi=Eg;var aa=n.map(),e=bc(s),f=cc(s),h=bc(A),P=cc(A),E=bc(u),I=cc(u),m=bc(M),p=cc(M);c.forEach(function(a,b){aa.set(a.toLowerCase(),b)});var q={a:function(a){return A[a.getDay()]},A:function(a){return s[a.getDay()]},b:function(a){return M[a.getMonth()]},B:function(a){return u[a.getMonth()]},c:b(k),d:function(a,
b){return qa(a.getDate(),b,2)},e:function(a,b){return qa(a.getDate(),b,2)},H:function(a,b){return qa(a.getHours(),b,2)},I:function(a,b){return qa(a.getHours()%12||12,b,2)},j:function(a,b){return qa(1+H.dayOfYear(a),b,3)},L:function(a,b){return qa(a.getMilliseconds(),b,3)},m:function(a,b){return qa(a.getMonth()+1,b,2)},M:function(a,b){return qa(a.getMinutes(),b,2)},p:function(a){return c[+(12<=a.getHours())]},S:function(a,b){return qa(a.getSeconds(),b,2)},U:function(a,b){return qa(H.sundayOfYear(a),
b,2)},w:function(a){return a.getDay()},W:function(a,b){return qa(H.mondayOfYear(a),b,2)},x:b(g),X:b(l),y:function(a,b){return qa(a.getFullYear()%100,b,2)},Y:function(a,b){return qa(a.getFullYear()%1E4,b,4)},Z:Fg,"%":function(){return"%"}},B={a:function(a,b,d){h.lastIndex=0;return(b=h.exec(b.slice(d)))?(a.w=P.get(b[0].toLowerCase()),d+b[0].length):-1},A:function(a,b,d){e.lastIndex=0;return(b=e.exec(b.slice(d)))?(a.w=f.get(b[0].toLowerCase()),d+b[0].length):-1},b:function(a,b,d){m.lastIndex=0;return(b=
m.exec(b.slice(d)))?(a.m=p.get(b[0].toLowerCase()),d+b[0].length):-1},B:function(a,b,d){E.lastIndex=0;return(b=E.exec(b.slice(d)))?(a.m=I.get(b[0].toLowerCase()),d+b[0].length):-1},c:function(a,b,k){return d(a,q.c.toString(),b,k)},d:re,e:re,H:se,I:se,j:Gg,L:Hg,m:Ig,M:Jg,p:function(a,b,d){b=aa.get(b.slice(d,d+=2).toLowerCase());return null==b?-1:(a.p=b,d)},S:Kg,U:Lg,w:Mg,W:Ng,x:function(a,b,k){return d(a,q.x.toString(),b,k)},X:function(a,b,k){return d(a,q.X.toString(),b,k)},y:Og,Y:Pg,Z:Qg,"%":Rg};
return b}function qa(a,b,d){var k=0>a?"-":"";a=(k?-a:a)+"";var g=a.length;return k+(g<d?Array(d-g+1).join(b)+a:a)}function bc(a){return new RegExp("^(?:"+a.map(n.requote).join("|")+")","i")}function cc(a){for(var b=new r,d=-1,k=a.length;++d<k;)b.set(a[d].toLowerCase(),d);return b}function Mg(a,b,d){ea.lastIndex=0;return(b=ea.exec(b.slice(d,d+1)))?(a.w=+b[0],d+b[0].length):-1}function Lg(a,b,d){ea.lastIndex=0;return(b=ea.exec(b.slice(d)))?(a.U=+b[0],d+b[0].length):-1}function Ng(a,b,d){ea.lastIndex=
0;return(b=ea.exec(b.slice(d)))?(a.W=+b[0],d+b[0].length):-1}function Pg(a,b,d){ea.lastIndex=0;return(b=ea.exec(b.slice(d,d+4)))?(a.y=+b[0],d+b[0].length):-1}function Og(a,b,d){ea.lastIndex=0;if(b=ea.exec(b.slice(d,d+2))){var k=+b[0];a=(a.y=k+(68<k?1900:2E3),d+b[0].length)}else a=-1;return a}function Qg(a,b,d){return/^[+-]\d{4}$/.test(b=b.slice(d,d+5))?(a.Z=-b,d+5):-1}function Ig(a,b,d){ea.lastIndex=0;return(b=ea.exec(b.slice(d,d+2)))?(a.m=b[0]-1,d+b[0].length):-1}function re(a,b,d){ea.lastIndex=
0;return(b=ea.exec(b.slice(d,d+2)))?(a.d=+b[0],d+b[0].length):-1}function Gg(a,b,d){ea.lastIndex=0;return(b=ea.exec(b.slice(d,d+3)))?(a.j=+b[0],d+b[0].length):-1}function se(a,b,d){ea.lastIndex=0;return(b=ea.exec(b.slice(d,d+2)))?(a.H=+b[0],d+b[0].length):-1}function Jg(a,b,d){ea.lastIndex=0;return(b=ea.exec(b.slice(d,d+2)))?(a.M=+b[0],d+b[0].length):-1}function Kg(a,b,d){ea.lastIndex=0;return(b=ea.exec(b.slice(d,d+2)))?(a.S=+b[0],d+b[0].length):-1}function Hg(a,b,d){ea.lastIndex=0;return(b=ea.exec(b.slice(d,
d+3)))?(a.L=+b[0],d+b[0].length):-1}function Fg(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var d=S(b)/60|0,b=S(b)%60;return a+qa(d,"0",2)+qa(b,"0",2)}function Rg(a,b,d){te.lastIndex=0;return(a=te.exec(b.slice(d,d+1)))?d+a[0].length:-1}function Eg(a){for(var b=a.length,d=-1;++d<b;)a[d][0]=this(a[d][0]);return function(b){for(var d=0,l=a[d];!l[1](b);)l=a[++d];return l[0](b)}}function dd(){}function ue(a,b,d){var k=d.s=a+b,g=k-a;d.t=a-(k-g)+(b-g)}function dc(a,b){if(a&&ve.hasOwnProperty(a.type))ve[a.type](a,
b)}function ed(a,b,d){var k=-1;d=a.length-d;var g;for(b.lineStart();++k<d;)g=a[k],b.point(g[0],g[1],g[2]);b.lineEnd()}function we(a,b){var d=-1,k=a.length;for(b.polygonStart();++d<k;)ed(a[d],b,1);b.polygonEnd()}function Sg(){function a(a,b){a*=R;b=b*R/2+Q/4;var d=a-k,c=0<=d?1:-1,M=c*d,d=Math.cos(b),aa=Math.sin(b),e=l*aa,f=g*d+e*Math.cos(M),c=e*c*Math.sin(M);gb.add(Math.atan2(c,f));k=a;g=d;l=aa}var b,d,k,g,l;wa.point=function(c,s){wa.point=a;k=(b=c)*R;g=Math.cos(s=(d=s)*R/2+Q/4);l=Math.sin(s)};wa.lineEnd=
function(){a(b,d)}}function hb(a){var b=a[0];a=a[1];var d=Math.cos(a);return[d*Math.cos(b),d*Math.sin(b),Math.sin(a)]}function ec(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function pb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function fd(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function fc(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function gc(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function hc(a){return[Math.atan2(a[1],a[0]),Fa(a[2])]}function ic(a,
b){return 1E-6>S(a[0]-b[0])&&1E-6>S(a[1]-b[1])}function gd(a,b){a*=R;var d=Math.cos(b*=R);Cb(d*Math.cos(a),d*Math.sin(a),Math.sin(b))}function Cb(a,b,d){++Db;Ra+=(a-Ra)/Db;Sa+=(b-Sa)/Db;La+=(d-La)/Db}function xe(){function a(a,l){a*=R;var c=Math.cos(l*=R),s=c*Math.cos(a),c=c*Math.sin(a),A=Math.sin(l),u=Math.atan2(Math.sqrt((u=d*A-k*c)*u+(u=k*s-b*A)*u+(u=b*c-d*s)*u),b*s+d*c+k*A);qb+=u;Ba+=u*(b+(b=s));Ca+=u*(d+(d=c));ra+=u*(k+(k=A));Cb(b,d,k)}var b,d,k;Ga.point=function(g,l){g*=R;var c=Math.cos(l*=
R);b=c*Math.cos(g);d=c*Math.sin(g);k=Math.sin(l);Ga.point=a;Cb(b,d,k)}}function ye(){Ga.point=gd}function Tg(){function a(a,b){a*=R;var d=Math.cos(b*=R),c=d*Math.cos(a),d=d*Math.sin(a),M=Math.sin(b),aa=g*M-l*d,e=l*c-k*M,f=k*d-g*c,h=Math.sqrt(aa*aa+e*e+f*f),n=k*c+g*d+l*M,E=h&&-ka(n)/h,h=Math.atan2(h,n);Xa+=E*aa;Ya+=E*e;Ma+=E*f;qb+=h;Ba+=h*(k+(k=c));Ca+=h*(g+(g=d));ra+=h*(l+(l=M));Cb(k,g,l)}var b,d,k,g,l;Ga.point=function(c,s){b=c;d=s;Ga.point=a;c*=R;var A=Math.cos(s*=R);k=A*Math.cos(c);g=A*Math.sin(c);
l=Math.sin(s);Cb(k,g,l)};Ga.lineEnd=function(){a(b,d);Ga.lineEnd=ye;Ga.point=gd}}function ze(a,b){function d(d,g){return d=a(d,g),b(d[0],d[1])}a.invert&&b.invert&&(d.invert=function(d,g){return d=b.invert(d,g),d&&a.invert(d[0],d[1])});return d}function Eb(){return!0}function Ae(a,b,d,k,g){var l=[],c=[];a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,d=a[0],k=a[b];if(ic(d,k)){g.lineStart();for(k=0;k<b;++k)g.point((d=a[k])[0],d[1]);g.lineEnd()}else b=new jc(d,a,null,!0),d=new jc(d,null,b,!1),b.o=
d,l.push(b),c.push(d),b=new jc(k,a,null,!1),d=new jc(k,null,b,!0),b.o=d,l.push(b),c.push(d)}});c.sort(b);Be(l);Be(c);if(l.length){a=0;b=d;for(d=c.length;a<d;++a)c[a].e=b=!b;b=l[0];for(var s,A;;){for(var u=b,M=!0;u.v;)if((u=u.n)===b)return;s=u.z;g.lineStart();do{u.v=u.o.v=!0;if(u.e){if(M)for(a=0,d=s.length;a<d;++a)g.point((A=s[a])[0],A[1]);else k(u.x,u.n.x,1,g);u=u.n}else{if(M)for(s=u.p.z,a=s.length-1;0<=a;--a)g.point((A=s[a])[0],A[1]);else k(u.x,u.p.x,-1,g);u=u.p}u=u.o;s=u.z;M=!M}while(!u.v);g.lineEnd()}}}
function Be(a){if(b=a.length){for(var b,d=0,k=a[0],g;++d<b;)k.n=g=a[d],g.p=k,k=g;k.n=g=a[0];g.p=k}}function jc(a,b,d,k){this.x=a;this.z=b;this.o=d;this.e=k;this.v=!1;this.n=this.p=null}function Ce(a,b,d,k){return function(g,l){function c(b,d){var k=g(b,d);a(b=k[0],d=k[1])&&l.point(b,d)}function s(a,b){var d=g(a,b);h.point(d[0],d[1])}function A(){P.point=s;h.lineStart()}function u(){P.point=c;h.lineEnd()}function M(a,b){r.push([a,b]);var d=g(a,b);p.point(d[0],d[1])}function e(){p.lineStart();r=[]}
function f(){M(r[0][0],r[0][1]);p.lineEnd();var a=p.clean(),b=I.buffer(),d=b.length;r.pop();B.push(r);r=null;if(d)if(a&1){var a=b[0],d=a.length-1,b=-1,k;if(0<d){q||(l.polygonStart(),q=!0);for(l.lineStart();++b<d;)l.point((k=a[b])[0],k[1]);l.lineEnd()}}else 1<d&&a&2&&b.push(b.pop().concat(b.shift())),E.push(b.filter(Ug))}var h=b(l),m=g.invert(k[0],k[1]),P={point:c,lineStart:A,lineEnd:u,polygonStart:function(){P.point=M;P.lineStart=e;P.lineEnd=f;E=[];B=[]},polygonEnd:function(){P.point=c;P.lineStart=
A;P.lineEnd=u;E=n.merge(E);var a,b=m;a=B;var k=b[0],g=b[1],s=[Math.sin(k),-Math.cos(k),0],M=0,e=0;gb.reset();for(var aa=0,f=a.length;aa<f;++aa){var h=a[aa],ta=h.length;if(ta)for(var Ea=h[0],I=Ea[0],b=Ea[1]/2+Q/4,p=Math.sin(b),r=Math.cos(b),w=1;;){w===ta&&(w=0);var b=h[w],bd=b[0],t=b[1]/2+Q/4,pe=Math.sin(t),t=Math.cos(t),D=bd-I,v=0<=D?1:-1,x=v*D,z=x>Q,p=p*pe;gb.add(Math.atan2(p*v*Math.sin(x),r*t+p*Math.cos(x)));M+=z?D+v*xa:D;z^I>=k^bd>=k&&(Ea=pb(hb(Ea),hb(b)),gc(Ea),I=pb(s,Ea),gc(I),I=(z^0<=D?-1:1)*
Fa(I[2]),g>I||g===I&&(Ea[0]||Ea[1]))&&(e+=z^0<=D?1:-1);if(!w++)break;I=bd;p=pe;r=t;Ea=b}}a=(-1E-6>M||1E-6>M&&-1E-6>gb)^e&1;E.length?(q||(l.polygonStart(),q=!0),Ae(E,Vg,a,d,l)):a&&(q||(l.polygonStart(),q=!0),l.lineStart(),d(null,null,1,l),l.lineEnd());q&&(l.polygonEnd(),q=!1);E=B=null},sphere:function(){l.polygonStart();l.lineStart();d(null,null,1,l);l.lineEnd();l.polygonEnd()}},E,I=De(),p=b(I),q=!1,B,r;return P}}function Ug(a){return 1<a.length}function De(){var a=[],b;return{lineStart:function(){a.push(b=
[])},point:function(a,k){b.push([a,k])},lineEnd:T,buffer:function(){var d=a;a=[];b=null;return d},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function Vg(a,b){return(0>(a=a.x)[0]?a[1]-da-1E-6:da-a[1])-(0>(b=b.x)[0]?b[1]-da-1E-6:da-b[1])}function Wg(a){function b(a,b){return Math.cos(a)*Math.cos(b)>g}function d(a,b,d){var k=hb(a),l=hb(b),c=[1,0,0],l=pb(k,l),s=ec(l,l),k=l[0],N=s-k*k;if(!N)return!d&&a;s=g*s/N;N=-g*k/N;k=pb(c,l);c=fc(c,s);l=fc(l,N);fd(c,l);l=ec(c,k);s=ec(k,k);N=
l*l-s*(ec(c,c)-1);if(!(0>N)){var e=Math.sqrt(N),N=fc(k,(-l-e)/s);fd(N,c);N=hc(N);if(!d)return N;d=a[0];var f=b[0];a=a[1];b=b[1];var h;f<d&&(h=d,d=f,f=h);var n=f-d,m=1E-6>S(n-Q);!m&&b<a&&(h=a,a=b,b=h);if(m||1E-6>n?m?0<a+b^N[1]<(1E-6>S(N[0]-d)?a:b):a<=N[1]&&N[1]<=b:n>Q^(d<=N[0]&&N[0]<=f))return b=fc(k,(-l+e)/s),fd(b,c),[N,hc(b)]}}function k(b,d){var k=l?a:Q-a,g=0;b<-k?g|=1:b>k&&(g|=2);d<-k?g|=4:d>k&&(g|=8);return g}var g=Math.cos(a),l=0<g,c=1E-6<S(g),s=hd(a,6*R);return Ce(b,function(a){var g,s,e,f,
h;return{lineStart:function(){f=e=!1;h=1},point:function(n,P){var E=[n,P],I,m=b(n,P),p=l?m?0:k(n,P):m?k(n+(0>n?Q:-Q),P):0;!g&&(f=e=m)&&a.lineStart();m!==e&&(I=d(g,E),ic(g,I)||ic(E,I))&&(E[0]+=1E-6,E[1]+=1E-6,m=b(E[0],E[1]));if(m!==e)h=0,m?(a.lineStart(),I=d(E,g),a.point(I[0],I[1])):(I=d(g,E),a.point(I[0],I[1]),a.lineEnd()),g=I;else if(c&&g&&l^m){var q;p&s||!(q=d(E,g,!0))||(h=0,l?(a.lineStart(),a.point(q[0][0],q[0][1]),a.point(q[1][0],q[1][1]),a.lineEnd()):(a.point(q[1][0],q[1][1]),a.lineEnd(),a.lineStart(),
a.point(q[0][0],q[0][1])))}!m||g&&ic(g,E)||a.point(E[0],E[1]);g=E;e=m;s=p},lineEnd:function(){e&&a.lineEnd();g=null},clean:function(){return h|(f&&e)<<1}}},s,l?[0,-a]:[-Q,a-Q])}function Ee(a,b,d,k){return function(g){var l=g.a,c=g.b,s=l.x,l=l.y,A=0,u=1,M=c.x-s,c=c.y-l,e;e=a-s;if(M||!(0<e)){e/=M;if(0>M){if(e<A)return;e<u&&(u=e)}else if(0<M){if(e>u)return;e>A&&(A=e)}e=d-s;if(M||!(0>e)){e/=M;if(0>M){if(e>u)return;e>A&&(A=e)}else if(0<M){if(e<A)return;e<u&&(u=e)}e=b-l;if(c||!(0<e)){e/=c;if(0>c){if(e<
A)return;e<u&&(u=e)}else if(0<c){if(e>u)return;e>A&&(A=e)}e=k-l;if(c||!(0>e)){e/=c;if(0>c){if(e>u)return;e>A&&(A=e)}else if(0<c){if(e<A)return;e<u&&(u=e)}0<A&&(g.a={x:s+A*M,y:l+A*c});1>u&&(g.b={x:s+u*M,y:l+u*c});return g}}}}}}function Fe(a,b,d,k){function g(k,g){return 1E-6>S(k[0]-a)?0<g?0:3:1E-6>S(k[0]-d)?0<g?2:1:1E-6>S(k[1]-b)?0<g?1:0:0<g?3:2}function l(a,b){return c(a.x,b.x)}function c(a,b){var d=g(a,1),k=g(b,1);return d!==k?d-k:0===d?b[1]-a[1]:1===d?a[0]-b[0]:2===d?a[1]-b[1]:b[0]-a[0]}return function(s){function A(l,
s,A,u){var e=0,M=0;if(null==l||(e=g(l,A))!==(M=g(s,A))||0>c(l,s)^0<A){do u.point(0===e||3===e?a:d,1<e?k:b);while((e=(e+A+4)%4)!==M)}else u.point(s[0],s[1])}function u(g,l){a<=g&&g<=d&&b<=l&&l<=k&&s.point(g,l)}function e(g,l){g=Math.max(-1E9,Math.min(1E9,g));l=Math.max(-1E9,Math.min(1E9,l));var c=a<=g&&g<=d&&b<=l&&l<=k;P&&E.push([g,l]);if(D)p=g,q=l,B=c,D=!1,c&&(s.lineStart(),s.point(g,l));else if(c&&t)s.point(g,l);else{var A={a:{x:r,y:w},b:{x:g,y:l}};Ea(A)?(t||(s.lineStart(),s.point(A.a.x,A.a.y)),
s.point(A.b.x,A.b.y),c||s.lineEnd(),v=!1):c&&(s.lineStart(),s.point(g,l),v=!1)}r=g;w=l;t=c}var f=s,h=De(),Ea=Ee(a,b,d,k),m,P,E,I={point:u,lineStart:function(){I.point=e;P&&P.push(E=[]);D=!0;t=!1;r=w=NaN},lineEnd:function(){m&&(e(p,q),B&&t&&h.rejoin(),m.push(h.buffer()));I.point=u;t&&s.lineEnd()},polygonStart:function(){s=h;m=[];P=[];v=!0},polygonEnd:function(){s=f;m=n.merge(m);var b;b=[a,k];for(var d=0,g=P.length,c=b[1],N=0;N<g;++N)for(var u=1,e=P[N],M=e.length,h=e[0],ta;u<M;++u)ta=e[u],h[1]<=c?ta[1]>
c&&0<Wa(h,ta,b)&&++d:ta[1]<=c&&0>Wa(h,ta,b)&&--d,h=ta;b=0!==d;d=v&&b;g=m.length;if(d||g)s.polygonStart(),d&&(s.lineStart(),A(null,null,1,s),s.lineEnd()),g&&Ae(m,l,b,A,s),s.polygonEnd();m=P=E=null}},p,q,B,r,w,t,D,v;return I}}function id(a){var b=0,d=Q/3,k=jd(a);a=k(b,d);a.parallels=function(a){return arguments.length?k(b=a[0]*Q/180,d=a[1]*Q/180):[b/Q*180,d/Q*180]};return a}function Ge(a,b){function d(a,b){var d=Math.sqrt(l-2*g*Math.sin(b))/g;return[d*Math.sin(a*=g),c-d*Math.cos(a)]}var k=Math.sin(a),
g=(k+Math.sin(b))/2,l=1+k*(2*g-k),c=Math.sqrt(l)/g;d.invert=function(a,b){var d=c-b;return[Math.atan2(a,d)/g,Fa((l-(a*a+d*d)*g*g)/(2*g))]};return d}function Xg(){function a(a,b){kc+=g*a-k*b;k=a;g=b}var b,d,k,g;Za.point=function(l,c){Za.point=a;b=k=l;d=g=c};Za.lineEnd=function(){a(b,d)}}function Yg(){function a(a,b){c.push("M",a,",",b,l)}function b(a,b){c.push("M",a,",",b);s.point=d}function d(a,b){c.push("L",a,",",b)}function k(){s.point=a}function g(){c.push("Z")}var l=He(4.5),c=[],s={point:a,lineStart:function(){s.point=
b},lineEnd:k,polygonStart:function(){s.lineEnd=g},polygonEnd:function(){s.lineEnd=k;s.point=a},pointRadius:function(a){l=He(a);return s},result:function(){if(c.length){var a=c.join("");c=[];return a}}};return s}function He(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function ib(a,b){Ra+=a;Sa+=b;++La}function Ie(){function a(a,g){var l=a-b,c=g-d,l=Math.sqrt(l*l+c*c);Ba+=l*(b+a)/2;Ca+=l*(d+g)/2;ra+=l;ib(b=a,d=g)}var b,d;Ha.point=function(k,g){Ha.point=a;ib(b=k,d=g)}}
function Je(){Ha.point=ib}function Zg(){function a(a,b){var d=a-k,c=b-g,d=Math.sqrt(d*d+c*c);Ba+=d*(k+a)/2;Ca+=d*(g+b)/2;ra+=d;d=g*a-k*b;Xa+=d*(k+a);Ya+=d*(g+b);Ma+=3*d;ib(k=a,g=b)}var b,d,k,g;Ha.point=function(l,c){Ha.point=a;ib(b=k=l,d=g=c)};Ha.lineEnd=function(){a(b,d)}}function $g(a){function b(b,d){a.moveTo(b+c,d);a.arc(b,d,c,0,xa)}function d(b,d){a.moveTo(b,d);s.point=k}function k(b,d){a.lineTo(b,d)}function g(){s.point=b}function l(){a.closePath()}var c=4.5,s={point:b,lineStart:function(){s.point=
d},lineEnd:g,polygonStart:function(){s.lineEnd=l},polygonEnd:function(){s.lineEnd=g;s.point=b},pointRadius:function(a){c=a;return s},result:T};return s}function Ke(a){function b(a){return(s?k:d)(a)}function d(b){return Le(b,function(d,k){d=a(d,k);b.point(d[0],d[1])})}function k(b){function d(k,g){k=a(k,g);b.point(k[0],k[1])}function k(){w=NaN;va.point=l;b.lineStart()}function l(d,k){var c=hb([d,k]),N=a(d,k);g(w,t,r,D,v,x,w=N[0],t=N[1],r=d,D=c[0],v=c[1],x=c[2],s,b);b.point(w,t)}function c(){va.point=
d;b.lineEnd()}function N(){k();va.point=e;va.lineEnd=f}function e(a,b){l(h=a,b);n=w;m=t;p=D;q=v;B=x;va.point=l}function f(){g(w,t,r,D,v,x,n,m,h,p,q,B,s,b);va.lineEnd=c;c()}var h,n,m,p,q,B,r,w,t,D,v,x,va={point:d,lineStart:k,lineEnd:c,polygonStart:function(){b.polygonStart();va.lineStart=N},polygonEnd:function(){b.polygonEnd();va.lineStart=k}};return va}function g(b,d,k,s,e,f,h,n,m,I,p,q,B,r){var w=h-b,t=n-d,D=w*w+t*t;if(D>4*l&&B--){var v=s+I,x=e+p,z=f+q,va=Math.sqrt(v*v+x*x+z*z),y=Math.asin(z/=va),
L=1E-6>S(S(z)-1)||1E-6>S(k-m)?(k+m)/2:Math.atan2(x,v),U=a(L,y),y=U[0],U=U[1],C=y-b,F=U-d,W=t*C-w*F;if(W*W/D>l||.3<S((w*C+t*F)/D-.5)||s*I+e*p+f*q<c)g(b,d,k,s,e,f,y,U,L,v/=va,x/=va,z,B,r),r.point(y,U),g(y,U,L,v,x,z,h,n,m,I,p,q,B,r)}}var l=.5,c=Math.cos(30*R),s=16;b.precision=function(a){if(!arguments.length)return Math.sqrt(l);s=0<(l=a*a)&&16;return b};return b}function ah(a){var b=Ke(function(b,k){return a([b*ca,k*ca])});return function(a){return Me(b(a))}}function Ne(a){this.stream=a}function Le(a,
b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function $a(a){return jd(function(){return a})()}function jd(a){function b(a){a=s(a[0]*R,a[1]*R);return[a[0]*u+I,q-a[1]*u]}function d(a){return(a=s.invert((a[0]-I)/u,(q-a[1])/u))&&[a[0]*ca,a[1]*ca]}function k(){s=ze(c=kd(p,P,E),l);var a=l(h,m);I=e-a[0]*u;q=f+a[1]*u;return g()}function g(){v&&(v.valid=!1,
v=null);return b}var l,c,s,A=Ke(function(a,b){a=l(a,b);return[a[0]*u+I,q-a[1]*u]}),u=150,e=480,f=250,h=0,m=0,p=0,P=0,E=0,I,q,B=Oe,r=O,w=null,t=null,v;b.stream=function(a){v&&(v.valid=!1);v=Me(B(c,A(r(a))));v.valid=!0;return v};b.clipAngle=function(a){if(!arguments.length)return w;B=null==a?(w=a,Oe):Wg((w=+a)*R);return g()};b.clipExtent=function(a){if(!arguments.length)return t;r=(t=a)?Fe(a[0][0],a[0][1],a[1][0],a[1][1]):O;return g()};b.scale=function(a){if(!arguments.length)return u;u=+a;return k()};
b.translate=function(a){if(!arguments.length)return[e,f];e=+a[0];f=+a[1];return k()};b.center=function(a){if(!arguments.length)return[h*ca,m*ca];h=a[0]%360*R;m=a[1]%360*R;return k()};b.rotate=function(a){if(!arguments.length)return[p*ca,P*ca,E*ca];p=a[0]%360*R;P=a[1]%360*R;E=2<a.length?a[2]%360*R:0;return k()};n.rebind(b,A,"precision");return function(){l=a.apply(this,arguments);b.invert=l.invert&&d;return k()}}function Me(a){return Le(a,function(b,d){a.point(b*R,d*R)})}function Fb(a,b){return[a,
b]}function Pe(a,b){return[a>Q?a-xa:a<-Q?a+xa:a,b]}function kd(a,b,d){return a?b||d?ze(Qe(a),Re(b,d)):Qe(a):b||d?Re(b,d):Pe}function Se(a){return function(b,d){return b+=a,[b>Q?b-xa:b<-Q?b+xa:b,d]}}function Qe(a){var b=Se(a);b.invert=Se(-a);return b}function Re(a,b){function d(a,b){var d=Math.cos(b),e=Math.cos(a)*d,d=Math.sin(a)*d,f=Math.sin(b),h=f*k+e*g;return[Math.atan2(d*l-h*c,e*k-f*g),Fa(h*l+d*c)]}var k=Math.cos(a),g=Math.sin(a),l=Math.cos(b),c=Math.sin(b);d.invert=function(a,b){var d=Math.cos(b),
e=Math.cos(a)*d,d=Math.sin(a)*d,f=Math.sin(b),h=f*l-d*c;return[Math.atan2(d*l+f*c,e*k+h*g),Fa(h*k-e*g)]};return d}function hd(a,b){var d=Math.cos(a),k=Math.sin(a);return function(g,l,c,s){var A=c*b;if(null!=g){if(g=Te(d,g),l=Te(d,l),0<c?g<l:g>l)g+=c*xa}else g=a+c*xa,l=a-.5*A;for(var u;0<c?g>l:g<l;g-=A)s.point((u=hc([d,-k*Math.cos(g),-k*Math.sin(g)]))[0],u[1])}}function Te(a,b){var d=hb(b);d[0]-=a;gc(d);var k=ka(-d[1]);return((0>-d[2]?-k:k)+2*Math.PI-1E-6)%(2*Math.PI)}function Ue(a,b,d){var k=n.range(a,
b-1E-6,d).concat(b);return function(a){return k.map(function(b){return[a,b]})}}function Ve(a,b,d){var k=n.range(a,b-1E-6,d).concat(b);return function(a){return k.map(function(b){return[b,a]})}}function ld(a){return a.source}function md(a){return a.target}function bh(a,b,d,k){var g=Math.cos(b),l=Math.sin(b),c=Math.cos(k),s=Math.sin(k),A=g*Math.cos(a),u=g*Math.sin(a),e=c*Math.cos(d),f=c*Math.sin(d),h=2*Math.asin(Math.sqrt(ha(k-b)+g*c*ha(d-a))),n=1/Math.sin(h);d=h?function(a){var b=Math.sin(a*=h)*n,
d=Math.sin(h-a)*n;a=d*A+b*e;var k=d*u+b*f,b=d*l+b*s;return[Math.atan2(k,a)*ca,Math.atan2(b,Math.sqrt(a*a+k*k))*ca]}:function(){return[a*ca,b*ca]};d.distance=h;return d}function Gb(a,b){function d(b,d){var l=Math.cos(b),c=Math.cos(d),l=a(l*c);return[l*c*Math.sin(b),l*Math.sin(d)]}d.invert=function(a,d){var l=Math.sqrt(a*a+d*d),c=b(l),s=Math.sin(c),c=Math.cos(c);return[Math.atan2(a*s,l*c),Math.asin(l&&d*s/l)]};return d}function We(a,b){function d(a,b){0<l?b<-da+1E-6&&(b=-da+1E-6):b>da-1E-6&&(b=da-1E-6);
var d=l/Math.pow(Math.tan(Q/4+b/2),g);return[d*Math.sin(g*a),l-d*Math.cos(g*a)]}var k=Math.cos(a),g=a===b?Math.sin(a):Math.log(k/Math.cos(b))/Math.log(Math.tan(Q/4+b/2)/Math.tan(Q/4+a/2)),l=k*Math.pow(Math.tan(Q/4+a/2),g)/g;if(!g)return lc;d.invert=function(a,b){var d=l-b,k=(0<g?1:0>g?-1:0)*Math.sqrt(a*a+d*d);return[Math.atan2(a,d)/g,2*Math.atan(Math.pow(l/k,1/g))-da]};return d}function Xe(a,b){function d(a,b){var d=l-b;return[d*Math.sin(g*a),l-d*Math.cos(g*a)]}var k=Math.cos(a),g=a===b?Math.sin(a):
(k-Math.cos(b))/(b-a),l=k/g+a;if(1E-6>S(g))return Fb;d.invert=function(a,b){var d=l-b;return[Math.atan2(a,d)/g,l-(0<g?1:0>g?-1:0)*Math.sqrt(a*a+d*d)]};return d}function lc(a,b){return[a,Math.log(Math.tan(Q/4+b/2))]}function Ye(a){var b=$a(a),d=b.scale,k=b.translate,g=b.clipExtent,l;b.scale=function(){var a=d.apply(b,arguments);return a===b?l?b.clipExtent(null):b:a};b.translate=function(){var a=k.apply(b,arguments);return a===b?l?b.clipExtent(null):b:a};b.clipExtent=function(a){var c=g.apply(b,arguments);
if(c===b){if(l=null==a){var A=Q*d(),u=k();g([[u[0]-A,u[1]-A],[u[0]+A,u[1]+A]])}}else l&&(c=null);return c};return b.clipExtent(null)}function nd(a,b){return[Math.log(Math.tan(Q/4+b/2)),-a]}function rb(a){return a[0]}function Hb(a){return a[1]}function Ze(a){for(var b=a.length,d=[0,1],k=2,g=2;g<b;g++){for(;1<k&&0>=Wa(a[d[k-2]],a[d[k-1]],a[g]);)--k;d[k++]=g}return d.slice(0,k)}function ch(a,b){return a[0]-b[0]||a[1]-b[1]}function od(a,b,d){return(d[0]-b[0])*(a[1]-b[1])<(d[1]-b[1])*(a[0]-b[0])}function pd(a,
b,d,k){var g=a[0],l=d[0],c=b[0]-g,s=k[0]-l;a=a[1];d=d[1];b=b[1]-a;k=k[1]-d;l=(s*(a-d)-k*(g-l))/(k*c-s*b);return[g+l*c,a+l*b]}function $e(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function dh(){mc(this);this.edge=this.site=this.circle=null}function af(a){var b=bf.pop()||new dh;b.site=a;return b}function qd(a){sb(a);tb.remove(a);bf.push(a);mc(a)}function cf(a,b){var d=a.site,k=d.x,g=d.y,l=g-b;if(!l)return k;var c=a.P;if(!c)return-Infinity;var d=c.site,c=d.x,d=d.y,s=d-b;if(!s)return c;
var A=c-k,u=1/l-1/s,e=A/s;return u?(-e+Math.sqrt(e*e-2*u*(A*A/(-2*s)-d+s/2+g-l/2)))/u+k:(k+c)/2}function df(a){this.site=a;this.edges=[]}function ef(a,b){return b.angle-a.angle}function eh(){mc(this);this.x=this.y=this.arc=this.site=this.cy=null}function ub(a){var b=a.P,d=a.N;if(b&&d){var k=b.site,b=a.site,g=d.site;if(k!==g){var d=b.x,l=b.y,c=k.x-d,s=k.y-l,k=g.x-d,g=g.y-l,A=2*(c*g-s*k);if(!(-1E-12<=A)){var u=c*c+s*s,e=k*k+g*g,s=(g*u-s*e)/A,c=(c*e-k*u)/A,g=c+l,l=ff.pop()||new eh;l.arc=a;l.site=b;l.x=
s+d;l.y=g+Math.sqrt(s*s+c*c);l.cy=g;a.circle=l;a=null;for(b=Ib._;b;)if(l.y<b.y||l.y===b.y&&l.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}Ib.insert(a,l);a||(rd=l)}}}}function sb(a){var b=a.circle;b&&(b.P||(rd=b.N),Ib.remove(b),ff.push(b),mc(b),a.circle=null)}function fh(a,b){var d=a.b;if(d)return!0;var k=a.a,d=b[0][0],g=b[1][0],l=b[0][1],c=b[1][1],s=a.l,A=a.r,u=s.x,s=s.y,e=A.x,A=A.y,f=(u+e)/2,h;if(A===s){if(f<d||f>=g)return;if(u>e){if(!k)k={x:f,y:l};else if(k.y>=c)return;
d={x:f,y:c}}else{if(!k)k={x:f,y:c};else if(k.y<l)return;d={x:f,y:l}}}else if(h=(u-e)/(A-s),f=(s+A)/2-h*f,-1>h||1<h)if(u>e){if(!k)k={x:(l-f)/h,y:l};else if(k.y>=c)return;d={x:(c-f)/h,y:c}}else{if(!k)k={x:(c-f)/h,y:c};else if(k.y<l)return;d={x:(l-f)/h,y:l}}else if(s<A){if(!k)k={x:d,y:h*d+f};else if(k.x>=g)return;d={x:g,y:h*g+f}}else{if(!k)k={x:g,y:h*g+f};else if(k.x<d)return;d={x:d,y:h*d+f}}a.a=k;a.b=d;return!0}function gf(a,b){this.l=a;this.r=b;this.a=this.b=null}function Jb(a,b,d,k){var g=new gf(a,
b);vb.push(g);d&&nc(g,a,b,d);k&&nc(g,b,a,k);jb[a.i].edges.push(new oc(g,a,b));jb[b.i].edges.push(new oc(g,b,a));return g}function gh(a,b,d){a=new gf(a,null);a.a=b;a.b=d;vb.push(a);return a}function nc(a,b,d,k){a.a||a.b?a.l===d?a.b=k:a.a=k:(a.a=k,a.l=b,a.r=d)}function oc(a,b,d){var k=a.a,g=a.b;this.edge=a;this.site=b;this.angle=d?Math.atan2(d.y-b.y,d.x-b.x):a.l===b?Math.atan2(g.x-k.x,k.y-g.y):Math.atan2(k.x-g.x,g.y-k.y)}function sd(){this._=null}function mc(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function Kb(a,
b){var d=b.R,k=b.U;k?k.L===b?k.L=d:k.R=d:a._=d;d.U=k;b.U=d;b.R=d.L;b.R&&(b.R.U=b);d.L=b}function Lb(a,b){var d=b.L,k=b.U;k?k.L===b?k.L=d:k.R=d:a._=d;d.U=k;b.U=d;b.L=d.R;b.L&&(b.L.U=b);d.R=b}function hf(a){for(;a.L;)a=a.L;return a}function td(a,b){var d=a.sort(hh).pop(),k,g,l;vb=[];jb=Array(a.length);tb=new sd;for(Ib=new sd;;)if(l=rd,d&&(!l||d.y<l.y||d.y===l.y&&d.x<l.x)){if(d.x!==k||d.y!==g){jb[d.i]=new df(d);k=d;for(var c=k.x,s=k.y,A=l=g=void 0,u=void 0,e=tb._;e;)if(A=cf(e,s)-c,1E-6<A)e=e.L;else{var f=
e,u=s,h=f.N;h?u=cf(h,u):(f=f.site,u=f.y===u?f.x:Infinity);u=c-u;if(1E-6<u){if(!e.R){g=e;break}e=e.R}else{-1E-6<A?(g=e.P,l=e):-1E-6<u?(g=e,l=e.N):g=l=e;break}}c=af(k);tb.insert(g,c);if(g||l)if(g===l)sb(g),l=af(g.site),tb.insert(c,l),c.edge=l.edge=Jb(g.site,c.site),ub(g),ub(l);else if(l){sb(g);sb(l);var s=g.site,e=s.x,u=s.y,f=k.x-e,h=k.y-u,A=l.site,n=A.x-e,m=A.y-u,P=2*(f*m-h*n),E=f*f+h*h,I=n*n+m*m,e={x:(m*E-h*I)/P+e,y:(f*I-n*E)/P+u};nc(l.edge,s,A,e);c.edge=Jb(s,k,null,e);l.edge=Jb(k,A,null,e);ub(g);
ub(l)}else c.edge=Jb(g.site,c.site);k=d.x;g=d.y}d=a.pop()}else if(l){A=l.arc;l=A.circle;s=l.x;e=l.cy;l={x:s,y:e};f=A.P;u=A.N;c=[A];qd(A);for(A=f;A.circle&&1E-6>S(s-A.circle.x)&&1E-6>S(e-A.circle.cy);)f=A.P,c.unshift(A),qd(A),A=f;c.unshift(A);sb(A);for(f=u;f.circle&&1E-6>S(s-f.circle.x)&&1E-6>S(e-f.circle.cy);)u=f.N,c.push(f),qd(f),f=u;c.push(f);sb(f);s=c.length;e=void 0;for(e=1;e<s;++e)f=c[e],A=c[e-1],nc(f.edge,A.site,f.site,l);A=c[0];f=c[s-1];f.edge=Jb(A.site,f.site,null,l);ub(A);ub(f)}else break;
if(b){d=vb;k=Ee(b[0][0],b[0][1],b[1][0],b[1][1]);for(g=d.length;g--;)if(l=d[g],!fh(l,b)||!k(l)||1E-6>S(l.a.x-l.b.x)&&1E-6>S(l.a.y-l.b.y))l.a=l.b=null,d.splice(g,1);d=b[0][0];k=b[1][0];g=b[0][1];l=b[1][1];e=jb;for(u=e.length;u--;)if((f=e[u])&&f.prepare())for(n=f.edges,m=n.length,h=0;h<m;)if(P=n[h].end(),s=P.x,A=P.y,E=n[++h%m].start(),c=E.x,E=E.y,1E-6<S(s-c)||1E-6<S(A-E))n.splice(h,0,new oc(gh(f.site,P,1E-6>S(s-d)&&1E-6<l-A?{x:d,y:1E-6>S(c-d)?E:l}:1E-6>S(A-l)&&1E-6<k-s?{x:1E-6>S(E-l)?c:k,y:l}:1E-6>
S(s-k)&&1E-6<A-g?{x:k,y:1E-6>S(c-k)?E:g}:1E-6>S(A-g)&&1E-6<s-d?{x:1E-6>S(E-g)?c:d,y:g}:null),f.site,null)),++m}d={cells:jb,edges:vb};tb=Ib=vb=jb=null;return d}function hh(a,b){return b.y-a.y||b.x-a.x}function ih(a){return a.x}function jh(a){return a.y}function jf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Mb(a,b,d,k,g,c){if(!a(b,d,k,g,c)){var e=.5*(d+g),s=.5*(k+c);b=b.nodes;b[0]&&Mb(a,b[0],d,k,e,s);b[1]&&Mb(a,b[1],e,k,g,s);b[2]&&Mb(a,b[2],d,s,e,c);b[3]&&Mb(a,b[3],e,s,g,c)}}function kh(a,
b,d,k,g,c,e){var s=Infinity,A;(function M(a,f,h,n,m){if(!(f>c||h>e||n<k||m<g)){if(E=a.point){var E,I=b-a.x,p=d-a.y,I=I*I+p*p;I<s&&(I=Math.sqrt(s=I),k=b-I,g=d-I,c=b+I,e=d+I,A=E)}E=a.nodes;for(var I=.5*(f+n),p=.5*(h+m),q=(d>=p)<<1|b>=I,B=q+4;q<B;++q)if(a=E[q&3])switch(q&3){case 0:M(a,f,h,I,p);break;case 1:M(a,I,h,n,p);break;case 2:M(a,f,p,I,m);break;case 3:M(a,I,p,n,m)}}})(a,k,g,c,e);return A}function ud(a,b){a=n.rgb(a);b=n.rgb(b);var d=a.r,k=a.g,g=a.b,c=b.r-d,e=b.g-k,s=b.b-g;return function(a){return"#"+
ob(Math.round(d+c*a))+ob(Math.round(k+e*a))+ob(Math.round(g+s*a))}}function kf(a,b){var d={},k={},g;for(g in a)g in b?d[g]=kb(a[g],b[g]):k[g]=a[g];for(g in b)g in a||(k[g]=b[g]);return function(a){for(g in d)k[g]=d[g](a);return k}}function Ta(a,b){a=+a;b=+b;return function(d){return a*(1-d)+b*d}}function lf(a,b){var d=vd.lastIndex=wd.lastIndex=0,k,g,c,e=-1,s=[],A=[];a+="";for(b+="";(k=vd.exec(a))&&(g=wd.exec(b));)(c=g.index)>d&&(c=b.slice(d,c),s[e]?s[e]+=c:s[++e]=c),(k=k[0])===(g=g[0])?s[e]?s[e]+=
g:s[++e]=g:(s[++e]=null,A.push({i:e,x:Ta(k,g)})),d=wd.lastIndex;d<b.length&&(c=b.slice(d),s[e]?s[e]+=c:s[++e]=c);return 2>s.length?A[0]?(b=A[0].x,function(a){return b(a)+""}):function(){return b}:(b=A.length,function(a){for(var d=0,k;d<b;++d)s[(k=A[d]).i]=k.x(a);return s.join("")})}function kb(a,b){for(var d=n.interpolators.length,k;0<=--d&&!(k=n.interpolators[d](a,b)););return k}function pc(a,b){var d=[],k=[],g=a.length,c=b.length,e=Math.min(a.length,b.length),s;for(s=0;s<e;++s)d.push(kb(a[s],b[s]));
for(;s<g;++s)k[s]=a[s];for(;s<c;++s)k[s]=b[s];return function(a){for(s=0;s<e;++s)k[s]=d[s](a);return k}}function lh(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function mf(a){return function(b){return 1-a(1-b)}}function nf(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function mh(a){return a*a}function nh(a){return a*a*a}function oh(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,d=b*a;return 4*(.5>a?d:3*(a-b)+d-.75)}function ph(a){return 1-Math.cos(a*da)}function qh(a){return Math.pow(2,
10*(a-1))}function rh(a){return 1-Math.sqrt(1-a*a)}function sh(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function of(a,b){b-=a;return function(d){return Math.round(a+b*d)}}function pf(a){var b=[a.a,a.b],d=[a.c,a.d],k=qf(b),g=b[0]*d[0]+b[1]*d[1],c=-g;d[0]+=c*b[0];d[1]+=c*b[1];c=qf(d)||0;b[0]*d[1]<d[0]*b[1]&&(b[0]*=-1,b[1]*=-1,k*=-1,g*=-1);this.rotate=(k?Math.atan2(b[1],b[0]):Math.atan2(-d[0],d[1]))*ca;
this.translate=[a.e,a.f];this.scale=[k,c];this.skew=c?Math.atan2(g,c)*ca:0}function qf(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=b);return b}function wb(a){return a.length?a.pop()+",":""}function th(a,b,d,k){a[0]!==b[0]||a[1]!==b[1]?(d=d.push("translate(",null,",",null,")"),k.push({i:d-4,x:Ta(a[0],b[0])},{i:d-2,x:Ta(a[1],b[1])})):(b[0]||b[1])&&d.push("translate("+b+")")}function uh(a,b,d,k){a!==b?(180<a-b?b+=360:180<b-a&&(a+=360),k.push({i:d.push(wb(d)+"rotate(",null,")")-2,x:Ta(a,
b)})):b&&d.push(wb(d)+"rotate("+b+")")}function vh(a,b,d,k){a!==b?k.push({i:d.push(wb(d)+"skewX(",null,")")-2,x:Ta(a,b)}):b&&d.push(wb(d)+"skewX("+b+")")}function wh(a,b,d,k){a[0]!==b[0]||a[1]!==b[1]?(d=d.push(wb(d)+"scale(",null,",",null,")"),k.push({i:d-4,x:Ta(a[0],b[0])},{i:d-2,x:Ta(a[1],b[1])})):1===b[0]&&1===b[1]||d.push(wb(d)+"scale("+b+")")}function rf(a,b){var d=[],k=[];a=n.transform(a);b=n.transform(b);th(a.translate,b.translate,d,k);uh(a.rotate,b.rotate,d,k);vh(a.skew,b.skew,d,k);wh(a.scale,
b.scale,d,k);a=b=null;return function(a){for(var b=-1,c=k.length,s;++b<c;)d[(s=k[b]).i]=s.x(a);return d.join("")}}function xh(a,b){b=(b-=a=+a)||1/b;return function(d){return(d-a)/b}}function yh(a,b){b=(b-=a=+a)||1/b;return function(d){return Math.max(0,Math.min(1,(d-a)/b))}}function zh(a){var b=a.source;a=a.target;var d;var k=a;if(b===k)d=b;else{d=sf(b);for(var k=sf(k),g=d.pop(),c=k.pop(),e=null;g===c;)e=g,g=d.pop(),c=k.pop();d=e}for(k=[b];b!==d;)b=b.parent,k.push(b);for(b=k.length;a!==d;)k.splice(b,
0,a),a=a.parent;return k}function sf(a){for(var b=[],d=a.parent;null!=d;)b.push(a),a=d,d=d.parent;b.push(a);return b}function Ah(a){a.fixed|=2}function Bh(a){a.fixed&=-7}function Ch(a){a.fixed|=4;a.px=a.x;a.py=a.y}function Dh(a){a.fixed&=-5}function tf(a,b,d){var k=0,g=0;a.charge=0;if(!a.leaf)for(var c=a.nodes,e=c.length,s=-1,A;++s<e;)A=c[s],null!=A&&(tf(A,b,d),a.charge+=A.charge,k+=A.charge*A.cx,g+=A.charge*A.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),b*=d[a.point.index],
a.charge+=a.pointCharge=b,k+=b*a.point.x,g+=b*a.point.y);a.cx=k/a.charge;a.cy=g/a.charge}function Nb(a,b){n.rebind(a,b,"sort","children","value");a.nodes=a;a.links=Eh;return a}function Ob(a,b){for(var d=[a];null!=(a=d.pop());)if(b(a),(g=a.children)&&(k=g.length))for(var k,g;0<=--k;)d.push(g[k])}function Na(a,b){for(var d=[a],k=[];null!=(a=d.pop());)if(k.push(a),(e=a.children)&&(c=e.length))for(var g=-1,c,e;++g<c;)d.push(e[g]);for(;null!=(a=k.pop());)b(a)}function Fh(a){return a.children}function Gh(a){return a.value}
function Hh(a,b){return b.value-a.value}function Eh(a){return n.merge(a.map(function(a){return(a.children||[]).map(function(d){return{source:a,target:d}})}))}function Ih(a){return a.x}function Jh(a){return a.y}function Kh(a,b,d){a.y0=b;a.y=d}function xd(a){return n.range(a.length)}function yd(a){var b=-1;a=a[0].length;for(var d=[];++b<a;)d[b]=0;return d}function Lh(a){for(var b=1,d=0,k=a[0][1],g,c=a.length;b<c;++b)(g=a[b][1])>k&&(d=b,k=g);return d}function Mh(a){return a.reduce(Nh,0)}function Nh(a,
b){return a+b[1]}function Oh(a,b){return uf(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function uf(a,b){for(var d=-1,k=+a[0],g=(a[1]-k)/b,c=[];++d<=b;)c[d]=g*d+k;return c}function Ph(a){return[n.min(a),n.max(a)]}function Qh(a,b){return a.value-b.value}function zd(a,b){var d=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=d;d._pack_prev=b}function vf(a,b){a._pack_next=b;b._pack_prev=a}function wf(a,b){var d=b.x-a.x,k=b.y-a.y,g=a.r+b.r;return.999*g*g>d*d+k*k}function xf(a){function b(a){k=
Math.min(a.x-a.r,k);g=Math.max(a.x+a.r,g);c=Math.min(a.y-a.r,c);e=Math.max(a.y+a.r,e)}if((d=a.children)&&(m=d.length)){var d,k=Infinity,g=-Infinity,c=Infinity,e=-Infinity,s,A,u,f,h,n,m;d.forEach(Rh);s=d[0];s.x=-s.r;s.y=0;b(s);if(1<m&&(A=d[1],A.x=A.r,A.y=0,b(A),2<m))for(u=d[2],yf(s,A,u),b(u),zd(s,u),s._pack_prev=u,zd(u,A),A=s._pack_next,f=3;f<m;f++){yf(s,A,u=d[f]);var p=0,q=1,E=1;for(h=A._pack_next;h!==A;h=h._pack_next,q++)if(wf(h,u)){p=1;break}if(1==p)for(n=s._pack_prev;n!==h._pack_prev&&!wf(n,u);n=
n._pack_prev,E++);p?(q<E||q==E&&A.r<s.r?vf(s,A=h):vf(s=n,A),f--):(zd(s,u),A=u,b(u))}s=(k+g)/2;A=(c+e)/2;for(f=h=0;f<m;f++)u=d[f],u.x-=s,u.y-=A,h=Math.max(h,u.r+Math.sqrt(u.x*u.x+u.y*u.y));a.r=h;d.forEach(Sh)}}function Rh(a){a._pack_next=a._pack_prev=a}function Sh(a){delete a._pack_next;delete a._pack_prev}function zf(a,b,d,k){var g=a.children;a.x=b+=k*a.x;a.y=d+=k*a.y;a.r*=k;if(g){a=-1;for(var c=g.length;++a<c;)zf(g[a],b,d,k)}}function yf(a,b,d){var k=a.r+d.r,g=b.x-a.x,c=b.y-a.y;if(k&&(g||c)){var e=
b.r+d.r,s=g*g+c*c,e=e*e,k=k*k;b=.5+(k-e)/(2*s);e=Math.sqrt(Math.max(0,2*e*(k+s)-(k-=s)*k-e*e))/(2*s);d.x=a.x+b*g+e*c;d.y=a.y+b*c-e*g}else d.x=a.x+k,d.y=a.y}function Af(a,b){return a.parent==b.parent?1:2}function Ad(a){var b=a.children;return b.length?b[0]:a.t}function Bd(a){var b=a.children,d;return(d=b.length)?b[d-1]:a.t}function Th(a){return 1+n.max(a,function(a){return a.y})}function Uh(a){return a.reduce(function(a,d){return a+d.x},0)/a.length}function Bf(a){var b=a.children;return b&&b.length?
Bf(b[0]):a}function Cf(a){var b=a.children,d;return b&&(d=b.length)?Cf(b[d-1]):a}function Cd(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Df(a,b){var d=a.x+b[3],k=a.y+b[0],g=a.dx-b[1]-b[3],c=a.dy-b[0]-b[2];0>g&&(d+=g/2,g=0);0>c&&(k+=c/2,c=0);return{x:d,y:k,dx:g,dy:c}}function xb(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function qc(a){return a.rangeExtent?a.rangeExtent():xb(a.range())}function Vh(a,b,d,k){var g=d(a[0],a[1]),c=k(b[0],b[1]);return function(a){return c(g(a))}}function rc(a,
b){var d=0,k=a.length-1,g=a[d],c=a[k],e;c<g&&(e=d,d=k,k=e,e=g,g=c,c=e);a[d]=b.floor(g);a[k]=b.ceil(c);return a}function Ef(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:Wh}function Xh(a,b,d,k){var g=[],c=[],e=0,s=Math.min(a.length,b.length)-1;a[s]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++e<=s;)g.push(d(a[e-1],a[e])),c.push(k(b[e-1],b[e]));return function(b){var d=n.bisect(a,b,1,s)-1;return c[d](g[d](b))}}function Ff(a,b,d,k){function g(){var g=
2<Math.min(a.length,b.length)?Xh:Vh,u=k?yh:xh;e=g(a,b,u,d);s=g(b,a,u,kb);return c}function c(a){return e(a)}var e,s;c.invert=function(a){return s(a)};c.domain=function(b){if(!arguments.length)return a;a=b.map(Number);return g()};c.range=function(a){if(!arguments.length)return b;b=a;return g()};c.rangeRound=function(a){return c.range(a).interpolate(of)};c.clamp=function(a){if(!arguments.length)return k;k=a;return g()};c.interpolate=function(a){if(!arguments.length)return d;d=a;return g()};c.ticks=
function(b){return n.range.apply(n,ab(a,b))};c.tickFormat=function(b,d){return Dd(a,b,d)};c.nice=function(b){Gf(a,b);return g()};c.copy=function(){return Ff(a,b,d,k)};return g()}function Ed(a,b){return n.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Gf(a,b){rc(a,Ef(ab(a,b)[2]));rc(a,Ef(ab(a,b)[2]));return a}function ab(a,b){null==b&&(b=10);var d=xb(a),k=d[1]-d[0],c=Math.pow(10,Math.floor(Math.log(k/b)/Math.LN10)),k=b/k*c;.15>=k?c*=10:.35>=k?c*=5:.75>=k&&(c*=2);d[0]=Math.ceil(d[0]/
c)*c;d[1]=Math.floor(d[1]/c)*c+.5*c;d[2]=c;return d}function Dd(a,b,d){a=ab(a,b);if(d){b=ne.exec(d);b.shift();if("s"===b[8]){var k=n.formatPrefix(Math.max(S(a[0]),S(a[1])));b[7]||(b[7]="."+sc(k.scale(a[2])));b[8]="f";d=n.format(b.join(""));return function(a){return d(k.scale(a))+k.symbol}}b[7]||(b[7]="."+Yh(b[8],a));d=b.join("")}else d=",."+sc(a[2])+"f";return n.format(d)}function sc(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Yh(a,b){var d=sc(b[2]);return a in Zh?Math.abs(d-sc(Math.max(S(b[0]),
S(b[1]))))+ +("e"!==a):d-2*("%"===a)}function Hf(a,b,d,k){function c(a){return(d?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(b)}function l(a){return d?Math.pow(b,a):-Math.pow(b,-a)}function e(b){return a(c(b))}e.invert=function(b){return l(a.invert(b))};e.domain=function(b){if(!arguments.length)return k;d=0<=b[0];a.domain((k=b.map(Number)).map(c));return e};e.base=function(d){if(!arguments.length)return b;b=+d;a.domain(k.map(c));return e};e.nice=function(){var b=rc(k.map(c),d?Math:$h);a.domain(b);
k=b.map(l);return e};e.ticks=function(){var a=xb(k),e=[],u=a[0],a=a[1],f=Math.floor(c(u)),h=Math.ceil(c(a)),N=b%1?2:b;if(isFinite(h-f)){if(d){for(;f<h;f++)for(var n=1;n<N;n++)e.push(l(f)*n);e.push(l(f))}else for(e.push(l(f));f++<h;)for(n=N-1;0<n;n--)e.push(l(f)*n);for(f=0;e[f]<u;f++);for(h=e.length;e[h-1]>a;h--);e=e.slice(f,h)}return e};e.tickFormat=function(a,d){if(!arguments.length)return If;2>arguments.length?d=If:"function"!==typeof d&&(d=n.format(d));var k=Math.max(1,b*a/e.ticks().length);return function(a){var s=
a/l(Math.round(c(a)));s*b<b-.5&&(s*=b);return s<=k?d(a):""}};e.copy=function(){return Hf(a.copy(),b,d,k)};return Ed(e,a)}function Jf(a,b,d){function k(b){return a(c(b))}var c=tc(b),l=tc(1/b);k.invert=function(b){return l(a.invert(b))};k.domain=function(b){if(!arguments.length)return d;a.domain((d=b.map(Number)).map(c));return k};k.ticks=function(a){return n.range.apply(n,ab(d,a))};k.tickFormat=function(a,b){return Dd(d,a,b)};k.nice=function(a){return k.domain(Gf(d,a))};k.exponent=function(e){if(!arguments.length)return b;
c=tc(b=e);l=tc(1/b);a.domain(d.map(c));return k};k.copy=function(){return Jf(a.copy(),b,d)};return Ed(k,a)}function tc(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function Kf(a,b){function d(d){return l[((c.get(d)||("range"===b.t?c.set(d,a.push(d)):NaN))-1)%l.length]}function k(b,d){return n.range(a.length).map(function(a){return b+d*a})}var c,l,e;d.domain=function(k){if(!arguments.length)return a;a=[];c=new r;for(var l=-1,e=k.length,f;++l<e;)c.has(f=k[l])||c.set(f,a.push(f));
return d[b.t].apply(d,b.a)};d.range=function(a){if(!arguments.length)return l;l=a;e=0;b={t:"range",a:arguments};return d};d.rangePoints=function(c,g){2>arguments.length&&(g=0);var u=c[0],f=c[1],f=2>a.length?(u=(u+f)/2,0):(f-u)/(a.length-1+g);l=k(u+f*g/2,f);e=0;b={t:"rangePoints",a:arguments};return d};d.rangeRoundPoints=function(c,g){2>arguments.length&&(g=0);var u=c[0],f=c[1],h=2>a.length?(u=f=Math.round((u+f)/2),0):(f-u)/(a.length-1+g)|0;l=k(u+Math.round(h*g/2+(f-u-(a.length-1+g)*h)/2),h);e=0;b=
{t:"rangeRoundPoints",a:arguments};return d};d.rangeBands=function(c,g,f){2>arguments.length&&(g=0);3>arguments.length&&(f=g);var h=c[1]<c[0],n=c[h-0],m=(c[1-h]-n)/(a.length-g+2*f);l=k(n+m*f,m);h&&l.reverse();e=m*(1-g);b={t:"rangeBands",a:arguments};return d};d.rangeRoundBands=function(c,g,f){2>arguments.length&&(g=0);3>arguments.length&&(f=g);var h=c[1]<c[0],n=c[h-0],m=c[1-h],p=Math.floor((m-n)/(a.length-g+2*f));l=k(n+Math.round((m-n-(a.length-g)*p)/2),p);h&&l.reverse();e=Math.round(p*(1-g));b={t:"rangeRoundBands",
a:arguments};return d};d.rangeBand=function(){return e};d.rangeExtent=function(){return xb(b.a[0])};d.copy=function(){return Kf(a,b)};return d.domain(a)}function Lf(a,b){function d(){var d=0,e=b.length;for(c=[];++d<e;)c[d-1]=n.quantile(a,d/e);return k}function k(a){if(!isNaN(a=+a))return b[n.bisect(c,a)]}var c;k.domain=function(b){if(!arguments.length)return a;a=b.map(e).filter(h).sort(f);return d()};k.range=function(a){if(!arguments.length)return b;b=a;return d()};k.quantiles=function(){return c};
k.invertExtent=function(d){d=b.indexOf(d);return 0>d?[NaN,NaN]:[0<d?c[d-1]:a[0],d<c.length?c[d]:a[a.length-1]]};k.copy=function(){return Lf(a,b)};return d()}function Mf(a,b,d){function k(b){return d[Math.max(0,Math.min(e,Math.floor(l*(b-a))))]}function c(){l=d.length/(b-a);e=d.length-1;return k}var l,e;k.domain=function(d){if(!arguments.length)return[a,b];a=+d[0];b=+d[d.length-1];return c()};k.range=function(a){if(!arguments.length)return d;d=a;return c()};k.invertExtent=function(b){b=d.indexOf(b);
b=0>b?NaN:b/l+a;return[b,b+1/l]};k.copy=function(){return Mf(a,b,d)};return c()}function Nf(a,b){function d(d){if(d<=d)return b[n.bisect(a,d)]}d.domain=function(b){if(!arguments.length)return a;a=b;return d};d.range=function(a){if(!arguments.length)return b;b=a;return d};d.invertExtent=function(d){d=b.indexOf(d);return[a[d-1],a[d]]};d.copy=function(){return Nf(a,b)};return d}function Of(a){function b(a){return+a}b.invert=b;b.domain=b.range=function(d){if(!arguments.length)return a;a=d.map(b);return b};
b.ticks=function(b){return n.range.apply(n,ab(a,b))};b.tickFormat=function(b,k){return Dd(a,b,k)};b.copy=function(){return Of(a)};return b}function ai(){return 0}function bi(a){return a.innerRadius}function ci(a){return a.outerRadius}function Pf(a){return a.startAngle}function Qf(a){return a.endAngle}function di(a){return a&&a.padAngle}function uc(a,b,d,k){return 0<(a-d)*b-(b-k)*a?0:1}function vc(a,b,d,k,c){var l=a[0]-b[0],e=a[1]-b[1];c=(c?k:-k)/Math.sqrt(l*l+e*e);var e=c*e,l=-c*l,s=a[0]+e,f=a[1]+
l,u=b[0]+e,h=b[1]+l;a=(s+u)/2;b=(f+h)/2;c=u-s;var n=h-f,m=c*c+n*n;k=d-k;var h=s*h-u*f,p=(0>n?-1:1)*Math.sqrt(Math.max(0,k*k*m-h*h)),s=(h*n-c*p)/m,f=(-h*c-n*p)/m,u=(h*n+c*p)/m;c=(-h*c+n*p)/m;n=s-a;m=f-b;a=u-a;b=c-b;n*n+m*m>a*a+b*b&&(s=u,f=c);return[[s-e,f-l],[s*d/k,f*d/k]]}function Rf(a){function b(b){function e(){f.push("M",l(a(h),s))}for(var f=[],h=[],N=-1,n=b.length,m,p=$(d),E=$(k);++N<n;)c.call(this,m=b[N],N)?h.push([+p.call(this,m,N),+E.call(this,m,N)]):h.length&&(e(),h=[]);h.length&&e();return f.length?
f.join(""):null}var d=rb,k=Hb,c=Eb,l=Ia,e=l.key,s=.7;b.x=function(a){if(!arguments.length)return d;d=a;return b};b.y=function(a){if(!arguments.length)return k;k=a;return b};b.defined=function(a){if(!arguments.length)return c;c=a;return b};b.interpolate=function(a){if(!arguments.length)return e;e="function"===typeof a?l=a:(l=Fd.get(a)||Ia).key;return b};b.tension=function(a){if(!arguments.length)return s;s=a;return b};return b}function Ia(a){return 1<a.length?a.join("L"):a+"Z"}function Sf(a){return a.join("L")+
"Z"}function Gd(a){for(var b=0,d=a.length,k=a[0],c=[k[0],",",k[1]];++b<d;)c.push("V",(k=a[b])[1],"H",k[0]);return c.join("")}function Hd(a){for(var b=0,d=a.length,k=a[0],c=[k[0],",",k[1]];++b<d;)c.push("H",(k=a[b])[0],"V",k[1]);return c.join("")}function wc(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return Ia(a);var d=a.length!=b.length,k="",c=a[0],l=a[1],e=b[0],s=e,f=1;d&&(k+="Q"+(l[0]-2*e[0]/3)+","+(l[1]-2*e[1]/3)+","+l[0]+","+l[1],c=a[1],f=2);if(1<b.length)for(s=b[1],l=a[f],f++,
k+="C"+(c[0]+e[0])+","+(c[1]+e[1])+","+(l[0]-s[0])+","+(l[1]-s[1])+","+l[0]+","+l[1],c=2;c<b.length;c++,f++)l=a[f],s=b[c],k+="S"+(l[0]-s[0])+","+(l[1]-s[1])+","+l[0]+","+l[1];d&&(d=a[f],k+="Q"+(l[0]+2*s[0]/3)+","+(l[1]+2*s[1]/3)+","+d[0]+","+d[1]);return k}function Id(a,b){for(var d=[],k=(1-b)/2,c,l=a[0],e=a[1],s=1,f=a.length;++s<f;)c=l,l=e,e=a[s],d.push([k*(e[0]-c[0]),k*(e[1]-c[1])]);return d}function Tf(a){if(3>a.length)return Ia(a);var b=1,d=a.length,k=a[0],c=k[0],l=k[1],e=[c,c,c,(k=a[1])[0]],
s=[l,l,l,k[1]],c=[c,",",l,"L",Da(bb,e),",",Da(bb,s)];for(a.push(a[d-1]);++b<=d;)k=a[b],e.shift(),e.push(k[0]),s.shift(),s.push(k[1]),Jd(c,e,s);a.pop();c.push("L",k);return c.join("")}function Da(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Jd(a,b,d){a.push("C",Da(Uf,b),",",Da(Uf,d),",",Da(Vf,b),",",Da(Vf,d),",",Da(bb,b),",",Da(bb,d))}function Kd(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Wf(a){for(var b,d=-1,k=a.length,c,l;++d<k;)b=a[d],c=b[0],l=b[1]-da,b[0]=c*Math.cos(l),b[1]=c*
Math.sin(l);return a}function Xf(a){function b(b){function f(){A.push("M",s(a(p),n),h,u(a(m.reverse()),n),"Z")}for(var A=[],m=[],p=[],q=-1,B=b.length,r,w=$(d),t=$(c),v=d===k?function(){return x}:$(k),D=c===l?function(){return z}:$(l),x,z;++q<B;)e.call(this,r=b[q],q)?(m.push([x=+w.call(this,r,q),z=+t.call(this,r,q)]),p.push([+v.call(this,r,q),+D.call(this,r,q)])):m.length&&(f(),m=[],p=[]);m.length&&f();return A.length?A.join(""):null}var d=rb,k=rb,c=0,l=Hb,e=Eb,s=Ia,f=s.key,u=s,h="L",n=.7;b.x=function(a){if(!arguments.length)return k;
d=k=a;return b};b.x0=function(a){if(!arguments.length)return d;d=a;return b};b.x1=function(a){if(!arguments.length)return k;k=a;return b};b.y=function(a){if(!arguments.length)return l;c=l=a;return b};b.y0=function(a){if(!arguments.length)return c;c=a;return b};b.y1=function(a){if(!arguments.length)return l;l=a;return b};b.defined=function(a){if(!arguments.length)return e;e=a;return b};b.interpolate=function(a){if(!arguments.length)return f;f="function"===typeof a?s=a:(s=Fd.get(a)||Ia).key;u=s.reverse||
s;h=s.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return n;n=a;return b};return b}function ei(a){return a.radius}function Yf(a){return[a.x,a.y]}function fi(a){return function(){var b=a.apply(this,arguments),d=b[0],b=b[1]-da;return[d*Math.cos(b),d*Math.sin(b)]}}function gi(){return 64}function hi(){return"circle"}function Zf(a){a=Math.sqrt(a/Q);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function $f(a){return function(){var b,d,k;(b=this[a])&&(k=b[d=
b.active])&&(k.timer.c=null,k.timer.t=NaN,--b.count?delete b[d]:delete this[a],b.active+=.5,k.event&&k.event.interrupt.call(this,this.__data__,k.index))}}function Pb(a,b,d){Rb(a,ga);a.namespace=b;a.id=d;return a}function Ld(a,b,d,k){var c=a.id,l=a.namespace;return K(a,"function"===typeof d?function(a,e,f){a[l][c].tween.set(b,k(d.call(a,a.__data__,e,f)))}:(d=k(d),function(a){a[l][c].tween.set(b,d)}))}function ii(a){null==a&&(a="");return function(){this.textContent=a}}function Md(a){return null==a?
"__transition__":"__transition_"+a+"__"}function xc(a,b,d,k,c){function l(a){var b=u.delay;n.t=b+h;if(b<=a)return e(a-b);n.c=e}function e(d){var c=f.active,g=f[c];g&&(g.timer.c=null,g.timer.t=NaN,--f.count,delete f[c],g.event&&g.event.interrupt.call(a,a.__data__,g.index));for(var l in f)+l<k&&(c=f[l],c.timer.c=null,c.timer.t=NaN,--f.count,delete f[l]);n.c=s;Wb(function(){n.c&&s(d||1)&&(n.c=null,n.t=NaN);return 1},0,h);f.active=k;u.event&&u.event.start.call(a,a.__data__,b);q=[];u.tween.forEach(function(d,
k){(k=k.call(a,a.__data__,b))&&q.push(k)});p=u.ease;m=u.duration}function s(c){c/=m;for(var g=p(c),l=q.length;0<l;)q[--l].call(a,g);if(1<=c)return u.event&&u.event.end.call(a,a.__data__,b),--f.count?delete f[k]:delete a[d],1}var f=a[d]||(a[d]={active:0,count:0}),u=f[k],h,n,m,p,q;u||(h=c.time,n=Wb(l,0,h),u=f[k]={tween:new r,time:h,timer:n,delay:c.delay,duration:c.duration,ease:c.ease,index:b},c=null,++f.count)}function ji(a,b,d){a.attr("transform",function(a){var c=b(a);return"translate("+(isFinite(c)?
c:d(a))+",0)"})}function ki(a,b,d){a.attr("transform",function(a){var c=b(a);return"translate(0,"+(isFinite(c)?c:d(a))+")"})}function Nd(a){return a.toISOString()}function Od(a,b,d){function k(b){return a(b)}function c(a,d){var k=(a[1]-a[0])/d,g=n.bisect(yc,k);return g==yc.length?[b.year,ab(a.map(function(a){return a/31536E6}),d)[2]]:g?b[k/yc[g-1]<yc[g]/k?g-1:g]:[li,ab(a,d)[2]]}k.invert=function(b){return lb(a.invert(b))};k.domain=function(b){if(!arguments.length)return a.domain().map(lb);a.domain(b);
return k};k.nice=function(a,b){function d(c){return!isNaN(c)&&!a.range(c,lb(+c+1),b).length}var e=k.domain(),f=xb(e);if(f=null==a?c(f,10):"number"===typeof a&&c(f,a))a=f[0],b=f[1];return k.domain(rc(e,1<b?{floor:function(b){for(;d(b=a.floor(b));)b=lb(b-1);return b},ceil:function(b){for(;d(b=a.ceil(b));)b=lb(+b+1);return b}}:a))};k.ticks=function(a,b){var d=xb(k.domain()),e=null==a?c(d,10):"number"===typeof a?c(d,a):!a.range&&[{range:a},b];e&&(a=e[0],b=e[1]);return a.range(d[0],lb(+d[1]+1),1>b?1:b)};
k.tickFormat=function(){return d};k.copy=function(){return Od(a.copy(),b,d)};return Ed(k,a)}function lb(a){return new Date(a)}function mi(a){return JSON.parse(a.responseText)}function ni(a){var b=oa.createRange();b.selectNode(oa.body);return b.createContextualFragment(a.responseText)}var n={version:"3.5.17"},ag=[].slice,Ja=function(a){return ag.call(a)},oa=this.document;if(oa)try{Ja(oa.documentElement.childNodes)[0].nodeType}catch(Li){Ja=function(a){for(var b=a.length,d=Array(b);b--;)d[b]=a[b];return d}}Date.now||
(Date.now=function(){return+new Date});if(oa)try{oa.createElement("DIV").style.setProperty("opacity",0,"")}catch(Mi){var zc=this.Element.prototype,oi=zc.setAttribute,pi=zc.setAttributeNS,bg=this.CSSStyleDeclaration.prototype,qi=bg.setProperty;zc.setAttribute=function(a,b){oi.call(this,a,b+"")};zc.setAttributeNS=function(a,b,d){pi.call(this,a,b,d+"")};bg.setProperty=function(a,b,d){qi.call(this,a,b+"",d)}}n.ascending=f;n.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};n.min=function(a,b){var d=
-1,c=a.length,g,l;if(1===arguments.length){for(;++d<c;)if(null!=(l=a[d])&&l>=l){g=l;break}for(;++d<c;)null!=(l=a[d])&&g>l&&(g=l)}else{for(;++d<c;)if(null!=(l=b.call(a,a[d],d))&&l>=l){g=l;break}for(;++d<c;)null!=(l=b.call(a,a[d],d))&&g>l&&(g=l)}return g};n.max=function(a,b){var d=-1,c=a.length,g,l;if(1===arguments.length){for(;++d<c;)if(null!=(l=a[d])&&l>=l){g=l;break}for(;++d<c;)null!=(l=a[d])&&l>g&&(g=l)}else{for(;++d<c;)if(null!=(l=b.call(a,a[d],d))&&l>=l){g=l;break}for(;++d<c;)null!=(l=b.call(a,
a[d],d))&&l>g&&(g=l)}return g};n.extent=function(a,b){var d=-1,c=a.length,g,l,e;if(1===arguments.length){for(;++d<c;)if(null!=(l=a[d])&&l>=l){g=e=l;break}for(;++d<c;)null!=(l=a[d])&&(g>l&&(g=l),e<l&&(e=l))}else{for(;++d<c;)if(null!=(l=b.call(a,a[d],d))&&l>=l){g=e=l;break}for(;++d<c;)null!=(l=b.call(a,a[d],d))&&(g>l&&(g=l),e<l&&(e=l))}return[g,e]};n.sum=function(a,b){var d=0,c=a.length,g,l=-1;if(1===arguments.length)for(;++l<c;)h(g=+a[l])&&(d+=g);else for(;++l<c;)h(g=+b.call(a,a[l],l))&&(d+=g);return d};
n.mean=function(a,b){var d=0,c=a.length,g,l=-1,f=c;if(1===arguments.length)for(;++l<c;)h(g=e(a[l]))?d+=g:--f;else for(;++l<c;)h(g=e(b.call(a,a[l],l)))?d+=g:--f;if(f)return d/f};n.quantile=function(a,b){var d=(a.length-1)*b+1,c=Math.floor(d),g=+a[c-1];return(d-=c)?g+d*(a[c]-g):g};n.median=function(a,b){var d=[],c=a.length,g,l=-1;if(1===arguments.length)for(;++l<c;)h(g=e(a[l]))&&d.push(g);else for(;++l<c;)h(g=e(b.call(a,a[l],l)))&&d.push(g);if(d.length)return n.quantile(d.sort(f),.5)};n.variance=function(a,
b){var d=a.length,c=0,g,l,f=0,s=-1,A=0;if(1===arguments.length)for(;++s<d;)h(g=e(a[s]))&&(l=g-c,c+=l/++A,f+=l*(g-c));else for(;++s<d;)h(g=e(b.call(a,a[s],s)))&&(l=g-c,c+=l/++A,f+=l*(g-c));if(1<A)return f/(A-1)};n.deviation=function(){var a=n.variance.apply(this,arguments);return a?Math.sqrt(a):a};var cg=m(f);n.bisectLeft=cg.left;n.bisect=n.bisectRight=cg.right;n.bisector=function(a){return m(1===a.length?function(b,d){return f(a(b),d)}:a)};n.shuffle=function(a,b,d){3>(c=arguments.length)&&(d=a.length,
2>c&&(b=0));for(var c=d-b,g,l;c;)l=Math.random()*c--|0,g=a[c+b],a[c+b]=a[l+b],a[l+b]=g;return a};n.permute=function(a,b){for(var d=b.length,c=Array(d);d--;)c[d]=a[b[d]];return c};n.pairs=function(a){for(var b=0,d=a.length-1,c=a[0],g=Array(0>d?0:d);b<d;)g[b]=[c,c=a[++b]];return g};n.transpose=function(a){if(!(l=a.length))return[];for(var b=-1,d=n.min(a,p),c=Array(d);++b<d;)for(var g=-1,l,e=c[b]=Array(l);++g<l;)e[g]=a[g][b];return c};n.zip=function(){return n.transpose(arguments)};n.keys=function(a){var b=
[],d;for(d in a)b.push(d);return b};n.values=function(a){var b=[],d;for(d in a)b.push(a[d]);return b};n.entries=function(a){var b=[],d;for(d in a)b.push({key:d,value:a[d]});return b};n.merge=function(a){var b=a.length,d;d=-1;for(var c=0,g,l;++d<b;)c+=a[d].length;for(g=Array(c);0<=--b;)for(l=a[b],d=l.length;0<=--d;)g[--c]=l[d];return g};var S=Math.abs;n.range=function(a,b,d){3>arguments.length&&(d=1,2>arguments.length&&(b=a,a=0));if(Infinity===(b-a)/d)throw Error("infinite range");var c=[],g;g=S(d);
for(var l=1;g*l%1;)l*=10;g=l;var l=-1,e;a*=g;b*=g;d*=g;if(0>d)for(;(e=a+d*++l)>b;)c.push(e/g);else for(;(e=a+d*++l)<b;)c.push(e/g);return c};n.map=function(a,b){var d=new r;if(a instanceof r)a.forEach(function(a,b){d.set(a,b)});else if(Array.isArray(a)){var c=-1,g=a.length,l;if(1===arguments.length)for(;++c<g;)d.set(c,a[c]);else for(;++c<g;)d.set(b.call(a,l=a[c],c),l)}else for(c in a)d.set(c,a[c]);return d};q(r,{has:x,get:function(a){return this._[t(a)]},set:function(a,b){return this._[t(a)]=b},remove:y,
keys:J,values:function(){var a=[],b;for(b in this._)a.push(this._[b]);return a},entries:function(){var a=[],b;for(b in this._)a.push({key:v(b),value:this._[b]});return a},size:G,empty:F,forEach:function(a){for(var b in this._)a.call(this,v(b),this._[b])}});n.nest=function(){function a(b,g,f){if(f>=c.length)return e?e.call(d,g):l?g.sort(l):g;for(var h=-1,n=g.length,m=c[f++],p,q,B=new r,E;++h<n;)(E=B.get(p=m(q=g[h])))?E.push(q):B.set(p,[q]);b?(q=b(),g=function(d,c){q.set(d,a(b,c,f))}):(q={},g=function(d,
c){q[d]=a(b,c,f)});B.forEach(g);return q}function b(a,d){if(d>=c.length)return a;var l=[],e=g[d++];a.forEach(function(a,c){l.push({key:a,values:b(c,d)})});return e?l.sort(function(a,b){return e(a.key,b.key)}):l}var d={},c=[],g=[],l,e;d.map=function(b,d){return a(d,b,0)};d.entries=function(d){return b(a(n.map,d,0),0)};d.key=function(a){c.push(a);return d};d.sortKeys=function(a){g[c.length-1]=a;return d};d.sortValues=function(a){l=a;return d};d.rollup=function(a){e=a;return d};return d};n.set=function(a){var b=
new C;if(a)for(var d=0,c=a.length;d<c;++d)b.add(a[d]);return b};q(C,{has:x,add:function(a){this._[t(a+="")]=!0;return a},remove:y,values:J,size:G,empty:F,forEach:function(a){for(var b in this._)a.call(this,v(b))}});n.behavior={};n.rebind=function(a,b){for(var d=1,c=arguments.length,g;++d<c;)a[g=arguments[d]]=X(a,b,b[g]);return a};var Xd="webkit ms moz Moz o O".split(" ");n.dispatch=function(){for(var a=new z,b=-1,d=arguments.length;++b<d;)a[arguments[b]]=V(a);return a};z.prototype.on=function(a,b){var d=
a.indexOf("."),c="";0<=d&&(c=a.slice(d+1),a=a.slice(0,d));if(a)return 2>arguments.length?this[a].on(c):this[a].on(c,b);if(2===arguments.length){if(null==b)for(a in this)if(this.hasOwnProperty(a))this[a].on(c,null);return this}};n.event=null;n.requote=function(a){return a.replace(ri,"\\$&")};var ri=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Rb={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var d in b)a[d]=b[d]},Qc=function(a,b){return b.querySelector(a)},Rc=function(a,b){return b.querySelectorAll(a)},
Sb=function(a,b){var d=a.matches||a[Y(a,"matchesSelector")];Sb=function(a,b){return d.call(a,b)};return Sb(a,b)};"function"===typeof Sizzle&&(Qc=function(a,b){return Sizzle(a,b)[0]||null},Rc=Sizzle,Sb=Sizzle.matchesSelector);n.selection=function(){return n.select(oa.documentElement)};var Z=n.selection.prototype=[];Z.select=function(a){var b=[],d,c,g,l;a=U(a);for(var e=-1,s=this.length;++e<s;){b.push(d=[]);d.parentNode=(g=this[e]).parentNode;for(var f=-1,u=g.length;++f<u;)(l=g[f])?(d.push(c=a.call(l,
l.__data__,f,e)),c&&"__data__"in l&&(c.__data__=l.__data__)):d.push(null)}return L(b)};Z.selectAll=function(a){var b=[],d,c;a=nb(a);for(var g=-1,l=this.length;++g<l;)for(var e=this[g],s=-1,f=e.length;++s<f;)if(c=e[s])b.push(d=Ja(a.call(c,c.__data__,s,g))),d.parentNode=c;return L(b)};var Pd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};n.ns={prefix:Pd,qualify:function(a){var b=
a.indexOf(":"),d=a;0<=b&&"xmlns"!==(d=a.slice(0,b))&&(a=a.slice(b+1));return Pd.hasOwnProperty(d)?{space:Pd[d],local:a}:a}};Z.attr=function(a,b){if(2>arguments.length){if("string"===typeof a){var d=this.node();a=n.ns.qualify(a);return a.local?d.getAttributeNS(a.space,a.local):d.getAttribute(a)}for(b in a)this.each(Yd(b,a[b]));return this}return this.each(Yd(a,b))};Z.classed=function(a,b){if(2>arguments.length){if("string"===typeof a){var d=this.node(),c=(a=(a+"").trim().split(/^|\s+/)).length,g=-1;
if(b=d.classList)for(;++g<c;){if(!b.contains(a[g]))return!1}else for(b=d.getAttribute("class");++g<c;)if(!$d(a[g]).test(b))return!1;return!0}for(b in a)this.each(fa(b,a[b]));return this}return this.each(fa(a,b))};Z.style=function(a,b,d){var k=arguments.length;if(3>k){if("string"!==typeof a){2>k&&(b="");for(d in a)this.each(W(d,a[d],b));return this}if(2>k)return k=this.node(),c(k).getComputedStyle(k,null).getPropertyValue(a);d=""}return this.each(W(a,b,d))};Z.property=function(a,b){if(2>arguments.length){if("string"===
typeof a)return this.node()[a];for(b in a)this.each(ae(b,a[b]));return this}return this.each(ae(a,b))};Z.text=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};Z.html=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=
""}:function(){this.innerHTML=a}):this.node().innerHTML};Z.append=function(a){a=be(a);return this.select(function(){return this.appendChild(a.apply(this,arguments))})};Z.insert=function(a,b){a=be(a);b=U(b);return this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})};Z.remove=function(){return this.each(vg)};Z.data=function(a,b){function d(a,d){var c,k=a.length,g=d.length,l=Math.min(k,g),e=Array(g),h=Array(g),n=Array(k),m,N;if(b){var l=new r,p=Array(k),
q;for(c=-1;++c<k;)if(m=a[c])l.has(q=b.call(m,m.__data__,c))?n[c]=m:l.set(q,m),p[c]=q;for(c=-1;++c<g;)(m=l.get(q=b.call(d,N=d[c],c)))?!0!==m&&(e[c]=m,m.__data__=N):h[c]={__data__:N},l.set(q,!0);for(c=-1;++c<k;)c in p&&!0!==l.get(p[c])&&(n[c]=a[c])}else{for(c=-1;++c<l;)m=a[c],N=d[c],m?(m.__data__=N,e[c]=m):h[c]={__data__:N};for(;c<g;++c)h[c]={__data__:d[c]};for(;c<k;++c)n[c]=a[c]}h.update=e;h.parentNode=e.parentNode=n.parentNode=a.parentNode;s.push(h);f.push(e);u.push(n)}var c=-1,g=this.length,l,e;
if(!arguments.length){for(a=Array(g=(l=this[0]).length);++c<g;)if(e=l[c])a[c]=e.__data__;return a}var s=de([]),f=L([]),u=L([]);if("function"===typeof a)for(;++c<g;)d(l=this[c],a.call(l,l.parentNode.__data__,c));else for(;++c<g;)d(l=this[c],a);f.enter=function(){return s};f.exit=function(){return u};return f};Z.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};Z.filter=function(a){var b=[],d,c,g;"function"!==typeof a&&(a=ce(a));for(var l=0,e=this.length;l<
e;l++){b.push(d=[]);d.parentNode=(c=this[l]).parentNode;for(var s=0,f=c.length;s<f;s++)(g=c[s])&&a.call(g,g.__data__,s,l)&&d.push(g)}return L(b)};Z.order=function(){for(var a=-1,b=this.length;++a<b;)for(var d=this[a],c=d.length-1,g=d[c],l;0<=--c;)if(l=d[c])g&&g!==l.nextSibling&&g.parentNode.insertBefore(l,g),g=l;return this};Z.sort=function(a){a=sa.apply(this,arguments);for(var b=-1,d=this.length;++b<d;)this[b].sort(a);return this.order()};Z.each=function(a){return K(this,function(b,d,c){a.call(b,
b.__data__,d,c)})};Z.call=function(a){var b=Ja(arguments);a.apply(b[0]=this,b);return this};Z.empty=function(){return!this.node()};Z.node=function(){for(var a=0,b=this.length;a<b;a++)for(var d=this[a],c=0,g=d.length;c<g;c++){var l=d[c];if(l)return l}return null};Z.size=function(){var a=0;K(this,function(){++a});return a};var Oa=[];n.selection.enter=de;n.selection.enter.prototype=Oa;Oa.append=Z.append;Oa.empty=Z.empty;Oa.node=Z.node;Oa.call=Z.call;Oa.size=Z.size;Oa.select=function(a){for(var b=[],
d,c,g,l,e,s=-1,f=this.length;++s<f;){g=(l=this[s]).update;b.push(d=[]);d.parentNode=l.parentNode;for(var h=-1,n=l.length;++h<n;)(e=l[h])?(d.push(g[h]=c=a.call(l.parentNode,e.__data__,h,s)),c.__data__=e.__data__):d.push(null)}return L(b)};Oa.insert=function(a,b){2>arguments.length&&(b=wg(this));return Z.insert.call(this,a,b)};n.select=function(a){var b;"string"===typeof a?(b=[Qc(a,oa)],b.parentNode=oa.documentElement):(b=[a],b.parentNode=a&&(a.ownerDocument||a.document||a).documentElement);return L([b])};
n.selectAll=function(a){"string"===typeof a?(a=Ja(Rc(a,oa)),a.parentNode=oa.documentElement):(a=Ja(a),a.parentNode=null);return L([a])};Z.on=function(a,b,d){var c=arguments.length;if(3>c){if("string"!==typeof a){2>c&&(b=!1);for(d in a)this.each(Ab(d,a[d],b));return this}if(2>c)return(c=this.node()["__on"+a])&&c._;d=!1}return this.each(Ab(a,b,d))};var Sc=n.map({mouseenter:"mouseover",mouseleave:"mouseout"});oa&&Sc.forEach(function(a){"on"+a in oa&&Sc.remove(a)});var db,xg=0;n.mouse=function(a){return Va(a,
w())};var Tc=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;n.touch=function(a,b,d){3>arguments.length&&(d=b,b=w().changedTouches);if(b)for(var c=0,g=b.length,l;c<g;++c)if((l=b[c]).identifier===d)return Va(a,l)};n.behavior.drag=function(){function a(){this.on("mousedown.drag",g).on("touchstart.drag",l)}function b(a,b,c,g,l){return function(){var e=n.event.target.correspondingElement||n.event.target,f=this.parentNode,h=d.of(this,arguments),m=0,p=a(),q=".drag"+(null==p?"":"-"+p),B,r=n.select(c(e)).on(g+
q,function(){var a=b(f,p),d,c;a&&(d=a[0]-t[0],c=a[1]-t[1],m=m|d|c,t=a,h({type:"drag",x:a[0]+B[0],y:a[1]+B[1],dx:d,dy:c}))}).on(l+q,function(){b(f,p)&&(r.on(g+q,null).on(l+q,null),w(m),h({type:"dragend"}))}),w=cb(e),t=b(f,p);k?(B=k.apply(this,arguments),B=[B.x-t[0],B.y-t[1]]):B=[0,0];h({type:"dragstart"})}}var d=D(a,"drag","dragstart","dragend"),k=null,g=b(T,n.mouse,c,"mousemove","mouseup"),l=b(za,n.touch,O,"touchmove","touchend");a.origin=function(b){if(!arguments.length)return k;k=b;return a};return n.rebind(a,
d,"on")};n.touches=function(a,b){2>arguments.length&&(b=w().touches);return b?Ja(b).map(function(b){var c=Va(a,b);c.identifier=b.identifier;return c}):[]};var Q=Math.PI,xa=2*Q,si=xa-1E-6,da=Q/2,R=Q/180,ca=180/Q,Qb=Math.SQRT2;n.interpolateZoom=function(a,b){var d=a[0],c=a[1],g=a[2],l=b[2],e=b[0]-d,s=b[1]-c,f=e*e+s*s,h,n;if(1E-12>f)n=Math.log(l/g)/Qb,h=function(a){return[d+a*e,c+a*s,g*Math.exp(Qb*a*n)]};else{var m=Math.sqrt(f);h=(l*l-g*g+4*f)/(4*g*m);var l=(l*l-g*g-4*f)/(4*l*m),p=Math.log(Math.sqrt(h*
h+1)-h);n=(Math.log(Math.sqrt(l*l+1)-l)-p)/Qb;h=function(a){a*=n;var b=Aa(p),l,f=Qb*a+p;l=((f=Math.exp(2*f))-1)/(f+1);l*=b;var h=p,f=((h=Math.exp(h))-1/h)/2;l=g/(2*m)*(l-f);return[d+l*e,c+l*s,g*b/Aa(Qb*a+p)]}}h.duration=1E3*n;return h};n.behavior.zoom=function(){function a(a){a.on("mousedown.zoom",u).on(Qd+".zoom",p).on("dblclick.zoom",q).on("touchstart.zoom",m)}function b(a){return[(a[0]-r.x)/r.k,(a[1]-r.y)/r.k]}function d(a){r.k=Math.max(t[0],Math.min(t[1],a))}function k(a,b){b=[b[0]*r.k+r.x,b[1]*
r.k+r.y];r.x+=a[0]-b[0];r.y+=a[1]-b[1]}function g(b,c,g,l){b.__chart__={x:r.x,y:r.y,k:r.k};d(Math.pow(2,l));k(P=c,g);b=n.select(b);0<v&&(b=b.transition().duration(v));b.call(a.event)}function l(){y&&y.domain(z.range().map(function(a){return(a-r.x)/r.k}).map(z.invert));U&&U.domain(L.range().map(function(a){return(a-r.y)/r.k}).map(L.invert))}function e(a){oe++||a({type:"zoomstart"})}function f(a){l();a({type:"zoom",scale:r.k,translate:[r.x,r.y]})}function h(a){--oe||(a({type:"zoomend"}),P=null)}function u(){var a=
this,d=Bb.of(a,arguments),g=0,l=n.select(c(a)).on("mousemove.zoom",function(){g=1;k(n.mouse(a),u);f(d)}).on("mouseup.zoom",function(){l.on("mousemove.zoom",null).on("mouseup.zoom",null);m(g);h(d)}),u=b(n.mouse(a)),m=cb(a);Ac.call(a);e(d)}function m(){function a(){var d=n.touches(q);I=r.k;d.forEach(function(a){a.identifier in w&&(w[a.identifier]=b(a))});return d}function c(){var b=n.event.target;n.select(b).on(P,l).on(t,p);v.push(b);for(var b=n.event.changedTouches,d=0,k=b.length;d<k;++d)w[b[d].identifier]=
null;d=a();k=Date.now();1===d.length?(500>k-cd&&(b=d[0],g(q,b,w[b.identifier],Math.floor(Math.log(r.k)/Math.LN2)+1),B()),cd=k):1<d.length&&(b=d[0],k=d[1],d=b[0]-k[0],b=b[1]-k[1],aa=d*d+b*b)}function l(){var a=n.touches(q),b,c,g,e;Ac.call(q);for(var h=0,u=a.length;h<u;++h,e=null)if(g=a[h],e=w[g.identifier]){if(c)break;b=g;c=e}if(e){var A=(A=g[0]-b[0])*A+(A=g[1]-b[1])*A,a=aa&&Math.sqrt(A/aa);b=[(b[0]+g[0])/2,(b[1]+g[1])/2];c=[(c[0]+e[0])/2,(c[1]+e[1])/2];d(a*I)}cd=null;k(b,c);f(E)}function p(){if(n.event.touches.length){for(var b=
n.event.changedTouches,d=0,c=b.length;d<c;++d)delete w[b[d].identifier];for(var k in w)return void a()}n.selectAll(v).on(ta,null);D.on("mousedown.zoom",u).on("touchstart.zoom",m);yg();h(E)}var q=this,E=Bb.of(q,arguments),w={},aa=0,I,ta=".zoom-"+n.event.changedTouches[0].identifier,P="touchmove"+ta,t="touchend"+ta,v=[],D=n.select(q),yg=cb(q);c();e(E);D.on("mousedown.zoom",null).on("touchstart.zoom",c)}function p(){var a=Bb.of(this,arguments);x?clearTimeout(x):(Ac.call(this),w=b(P=E||n.mouse(this)),
e(a));x=setTimeout(function(){x=null;h(a)},50);B();d(Math.pow(2,.002*Bc())*r.k);k(P,w);f(a)}function q(){var a=n.mouse(this),d=Math.log(r.k)/Math.LN2;g(this,a,b(a),n.event.shiftKey?Math.ceil(d)-1:Math.floor(d)+1)}var r={x:0,y:0,k:1},w,P,E,I=[960,500],t=dg,v=250,oe=0,x,cd,Bb=D(a,"zoomstart","zoom","zoomend"),z,y,L,U;Qd||(Qd="onwheel"in oa?(Bc=function(){return-n.event.deltaY*(n.event.deltaMode?120:1)},"wheel"):"onmousewheel"in oa?(Bc=function(){return n.event.wheelDelta},"mousewheel"):(Bc=function(){return-n.event.detail},
"MozMousePixelScroll"));a.event=function(a){a.each(function(){var a=Bb.of(this,arguments),b=r;mb?n.select(this).transition().each("start.zoom",function(){r=this.__chart__||{x:0,y:0,k:1};e(a)}).tween("zoom:zoom",function(){var d=I[0],c=I[1],k=P?P[0]:d/2,g=P?P[1]:c/2,l=n.interpolateZoom([(k-r.x)/r.k,(g-r.y)/r.k,d/r.k],[(k-b.x)/b.k,(g-b.y)/b.k,d/b.k]);return function(b){b=l(b);var c=d/b[2];this.__chart__=r={x:k-b[0]*c,y:g-b[1]*c,k:c};f(a)}}).each("interrupt.zoom",function(){h(a)}).each("end.zoom",function(){h(a)}):
(this.__chart__=r,e(a),f(a),h(a))})};a.translate=function(b){if(!arguments.length)return[r.x,r.y];r={x:+b[0],y:+b[1],k:r.k};l();return a};a.scale=function(b){if(!arguments.length)return r.k;r={x:r.x,y:r.y,k:null};d(+b);l();return a};a.scaleExtent=function(b){if(!arguments.length)return t;t=null==b?dg:[+b[0],+b[1]];return a};a.center=function(b){if(!arguments.length)return E;E=b&&[+b[0],+b[1]];return a};a.size=function(b){if(!arguments.length)return I;I=b&&[+b[0],+b[1]];return a};a.duration=function(b){if(!arguments.length)return v;
v=+b;return a};a.x=function(b){if(!arguments.length)return y;y=b;z=b.copy();r={x:0,y:0,k:1};return a};a.y=function(b){if(!arguments.length)return U;U=b;L=b.copy();r={x:0,y:0,k:1};return a};return n.rebind(a,Bb,"on")};var dg=[0,Infinity],Bc,Qd;n.color=la;la.prototype.toString=function(){return this.rgb()+""};n.hsl=ua;var Rd=ua.prototype=new la;Rd.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);return new ua(this.h,this.s,this.l/a)};Rd.darker=function(a){a=Math.pow(.7,arguments.length?a:1);
return new ua(this.h,this.s,a*this.l)};Rd.rgb=function(){return eb(this.h,this.s,this.l)};n.hcl=ja;var Sd=ja.prototype=new la;Sd.brighter=function(a){return new ja(this.h,this.c,Math.min(100,this.l+Cc*(arguments.length?a:1)))};Sd.darker=function(a){return new ja(this.h,this.c,Math.max(0,this.l-Cc*(arguments.length?a:1)))};Sd.rgb=function(){return Pa(this.h,this.c,this.l).rgb()};n.lab=na;var Cc=18,he=.95047,ie=1,je=1.08883,Td=na.prototype=new la;Td.brighter=function(a){return new na(Math.min(100,this.l+
Cc*(arguments.length?a:1)),this.a,this.b)};Td.darker=function(a){return new na(Math.max(0,this.l-Cc*(arguments.length?a:1)),this.a,this.b)};Td.rgb=function(){return ia(this.l,this.a,this.b)};n.rgb=pa;var Dc=pa.prototype=new la;Dc.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,d=this.g,c=this.b;if(!b&&!d&&!c)return new pa(30,30,30);b&&30>b&&(b=30);d&&30>d&&(d=30);c&&30>c&&(c=30);return new pa(Math.min(255,b/a),Math.min(255,d/a),Math.min(255,c/a))};Dc.darker=function(a){a=Math.pow(.7,
arguments.length?a:1);return new pa(a*this.r,a*this.g,a*this.b)};Dc.hsl=function(){return fe(this.r,this.g,this.b)};Dc.toString=function(){return"#"+ob(this.r)+ob(this.g)+ob(this.b)};var Ub=n.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,
cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,
moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,
sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ub.forEach(function(a,b){Ub.set(a,new pa(b>>16,b>>8&255,b&255))});n.functor=$;n.xhr=Zc(O);n.dsv=function(a,b){function d(a,d,l){3>arguments.length&&(l=d,d=null);var e=Vb(a,
b,null==d?c:g(d),l);e.row=function(a){return arguments.length?e.response(null==(d=a)?c:g(a)):d};return e}function c(a){return d.parse(a.responseText)}function g(a){return function(b){return d.parse(b.responseText,a)}}function l(b){return b.map(e).join(a)}function e(a){return f.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var f=new RegExp('["'+a+"\n]"),h=a.charCodeAt(0);d.parse=function(a,b){var c;return d.parseRows(a,function(a,d){if(c)return c(a,d-1);var k=new Function("d","return {"+a.map(function(a,
b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");c=b?function(a,d){return b(k(a),d)}:k})};d.parseRows=function(a,b){function d(){if(e>=l)return k;if(n)return n=!1,c;var b=e;if(34===a.charCodeAt(b)){for(var g=b;g++<l;)if(34===a.charCodeAt(g)){if(34!==a.charCodeAt(g+1))break;++g}e=g+2;var f=a.charCodeAt(g+1);13===f?(n=!0,10===a.charCodeAt(g+2)&&++e):10===f&&(n=!0);return a.slice(b+1,g).replace(/""/g,'"')}for(;e<l;){f=a.charCodeAt(e++);g=1;if(10===f)n=!0;else if(13===f)n=!0,10===a.charCodeAt(e)&&
(++e,++g);else if(f!==h)continue;return a.slice(b,e-g)}return a.slice(b)}for(var c={},k={},g=[],l=a.length,e=0,f=0,s,n;(s=d())!==k;){for(var m=[];s!==c&&s!==k;)m.push(s),s=d();b&&null==(m=b(m,f++))||g.push(m)}return g};d.format=function(b){if(Array.isArray(b[0]))return d.formatRows(b);var c=new C,k=[];b.forEach(function(a){for(var b in a)c.has(b)||k.push(c.add(b))});return[k.map(e).join(a)].concat(b.map(function(b){return k.map(function(a){return e(b[a])}).join(a)})).join("\n")};d.formatRows=function(a){return a.map(l).join("\n")};
return d};n.csv=n.dsv(",","text/csv");n.tsv=n.dsv("\t","text/tab-separated-values");var Yb,Xb,Zb,$b,ke=this[Y(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};n.timer=function(){Wb.apply(this,arguments)};n.timer.flush=function(){le();me()};n.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var ti="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var d=Math.pow(10,3*S(8-b));return{scale:8<b?function(a){return a/d}:function(a){return a*d},
symbol:a}});n.formatPrefix=function(a,b){var d=0;if(a=+a)0>a&&(a*=-1),b&&(a=n.round(a,ad(a,b))),d=1+Math.floor(1E-12+Math.log(a)/Math.LN10),d=Math.max(-24,Math.min(24,3*Math.floor((d-1)/3)));return ti[8+d/3]};var ne=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Bg=n.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},
g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=n.round(a,ad(a,b))).toFixed(Math.max(0,Math.min(20,ad(a*(1+1E-15),b))))}}),H=n.time={},ma=Date;Qa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},
getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ua.setUTCDate.apply(this._,arguments)},setDay:function(){Ua.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ua.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ua.setUTCHours.apply(this._,
arguments)},setMilliseconds:function(){Ua.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ua.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ua.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ua.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ua.setTime.apply(this._,arguments)}};var Ua=Date.prototype;H.year=fb(function(a){a=H.day(a);a.setMonth(0,1);return a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});H.years=
H.year.range;H.years.utc=H.year.utc.range;H.day=fb(function(a){var b=new ma(2E3,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});H.days=H.day.range;H.days.utc=H.day.utc.range;H.dayOfYear=function(a){var b=H.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,b){b=7-b;var d=H[a]=
fb(function(a){(a=H.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var d=H.year(a).getDay();return Math.floor((H.dayOfYear(a)+(d+b)%7)/7)-(d!==b)});H[a+"s"]=d.range;H[a+"s"].utc=d.utc.range;H[a+"OfYear"]=function(a){var d=H.year(a).getDay();return Math.floor((H.dayOfYear(a)+(d+b)%7)/7)}});H.week=H.sunday;H.weeks=H.sunday.range;H.weeks.utc=H.sunday.utc.range;H.weekOfYear=H.sundayOfYear;var qe={"-":"",_:" ",0:"0"},ea=/^\s*\d+/,
te=/^%/;n.locale=function(a){return{numberFormat:Ag(a),timeFormat:Dg(a)}};var eg=n.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
n.format=eg.numberFormat;n.geo={};dd.prototype={s:0,t:0,add:function(a){ue(a,this.t,Ec);ue(Ec.s,this.s,this);this.s?this.t+=Ec.t:this.s=Ec.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Ec=new dd;n.geo.stream=function(a,b){if(a&&fg.hasOwnProperty(a.type))fg[a.type](a,b);else dc(a,b)};var fg={Feature:function(a,b){dc(a.geometry,b)},FeatureCollection:function(a,b){for(var d=a.features,c=-1,g=d.length;++c<g;)dc(d[c].geometry,b)}},ve={Sphere:function(a,b){b.sphere()},Point:function(a,
b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var d=a.coordinates,c=-1,g=d.length;++c<g;)a=d[c],b.point(a[0],a[1],a[2])},LineString:function(a,b){ed(a.coordinates,b,0)},MultiLineString:function(a,b){for(var d=a.coordinates,c=-1,g=d.length;++c<g;)ed(d[c],b,0)},Polygon:function(a,b){we(a.coordinates,b)},MultiPolygon:function(a,b){for(var d=a.coordinates,c=-1,g=d.length;++c<g;)we(d[c],b)},GeometryCollection:function(a,b){for(var d=a.geometries,c=-1,g=d.length;++c<g;)dc(d[c],
b)}};n.geo.area=function(a){yb=0;n.geo.stream(a,wa);return yb};var yb,gb=new dd,wa={sphere:function(){yb+=4*Q},point:T,lineStart:T,lineEnd:T,polygonStart:function(){gb.reset();wa.lineStart=Sg},polygonEnd:function(){var a=2*gb;yb+=0>a?4*Q+a:a;wa.lineStart=wa.lineEnd=wa.point=T}};n.geo.bounds=function(){function a(a,b){v.push(D=[m=a,q=a]);b<p&&(p=b);b>r&&(r=b)}function b(b,d){var c=hb([b*R,d*R]);if(I){var k=pb(I,c),k=pb([k[1],-k[0],0],k);gc(k);var k=hc(k),g=b-B,l=0<g?1:-1,e=k[0]*ca*l,g=180<S(g);g^(l*
B<e&&e<l*b)?(k=k[1]*ca,k>r&&(r=k)):(e=(e+360)%360-180,g^(l*B<e&&e<l*b))?(k=-k[1]*ca,k<p&&(p=k)):(d<p&&(p=d),d>r&&(r=d));g?b<B?f(m,b)>f(m,q)&&(q=b):f(b,q)>f(m,q)&&(m=b):q>=m?(b<m&&(m=b),b>q&&(q=b)):b>B?f(m,b)>f(m,q)&&(q=b):f(b,q)>f(m,q)&&(m=b)}else a(b,d);I=c;B=b}function d(){x.point=b}function c(){D[0]=m;D[1]=q;x.point=a;I=null}function g(a,d){if(I){var c=a-B;t+=180<S(c)?c+(0<c?360:-360):c}else w=a,E=d;wa.point(a,d);b(a,d)}function l(){wa.lineStart()}function e(){g(w,E);wa.lineEnd();1E-6<S(t)&&(m=
-(q=180));D[0]=m;D[1]=q;I=null}function f(a,b){return 0>(b-=a)?b+360:b}function h(a,b){return a[0]-b[0]}function u(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var m,p,q,r,B,w,E,I,t,v,D,x={point:a,lineStart:d,lineEnd:c,polygonStart:function(){x.point=g;x.lineStart=l;x.lineEnd=e;t=0;wa.polygonStart()},polygonEnd:function(){wa.polygonEnd();x.point=a;x.lineStart=d;x.lineEnd=c;0>gb?(m=-(q=180),p=-(r=90)):1E-6<t?r=90:-1E-6>t&&(p=-90);D[0]=m;D[1]=q}};return function(a){r=q=-(m=p=Infinity);v=[];
n.geo.stream(a,x);if(a=v.length){v.sort(h);for(var b=1,d=v[0],c,k=[d];b<a;++b)c=v[b],u(c[0],d)||u(c[1],d)?(f(d[0],c[1])>f(d[0],d[1])&&(d[1]=c[1]),f(c[0],d[1])>f(d[0],d[1])&&(d[0]=c[0])):k.push(d=c);var g=-Infinity,l;a=k.length-1;b=0;for(d=k[a];b<=a;d=c,++b)c=k[b],(l=f(d[1],c[0]))>g&&(g=l,m=c[0],q=d[1])}v=D=null;return Infinity===m||Infinity===p?[[NaN,NaN],[NaN,NaN]]:[[m,p],[q,r]]}}();n.geo.centroid=function(a){Db=qb=Ra=Sa=La=Ba=Ca=ra=Xa=Ya=Ma=0;n.geo.stream(a,Ga);a=Xa;var b=Ya,d=Ma,c=a*a+b*b+d*d;
return 1E-12>c&&(a=Ba,b=Ca,d=ra,1E-6>qb&&(a=Ra,b=Sa,d=La),c=a*a+b*b+d*d,1E-12>c)?[NaN,NaN]:[Math.atan2(b,a)*ca,Fa(d/Math.sqrt(c))*ca]};var Db,qb,Ra,Sa,La,Ba,Ca,ra,Xa,Ya,Ma,Ga={sphere:T,point:gd,lineStart:xe,lineEnd:ye,polygonStart:function(){Ga.lineStart=Tg},polygonEnd:function(){Ga.lineStart=xe}},Oe=Ce(Eb,function(a){var b=NaN,d=NaN,c=NaN,g;return{lineStart:function(){a.lineStart();g=1},point:function(l,e){var f=0<l?Q:-Q,h=S(l-b);if(1E-6>S(h-Q))a.point(b,d=0<(d+e)/2?da:-da),a.point(c,d),a.lineEnd(),
a.lineStart(),a.point(f,d),a.point(l,d),g=0;else if(c!==f&&h>=Q){1E-6>S(b-c)&&(b-=1E-6*c);1E-6>S(l-f)&&(l-=1E-6*f);var h=b,u=d,n=l,m,q,p=Math.sin(h-n);d=1E-6<S(p)?Math.atan((Math.sin(u)*(q=Math.cos(e))*Math.sin(n)-Math.sin(e)*(m=Math.cos(u))*Math.sin(h))/(m*q*p)):(u+e)/2;a.point(c,d);a.lineEnd();a.lineStart();a.point(f,d);g=0}a.point(b=l,d=e);c=f},lineEnd:function(){a.lineEnd();b=d=NaN},clean:function(){return 2-g}}},function(a,b,d,c){null==a?(d*=da,c.point(-Q,d),c.point(0,d),c.point(Q,d),c.point(Q,
0),c.point(Q,-d),c.point(0,-d),c.point(-Q,-d),c.point(-Q,0),c.point(-Q,d)):1E-6<S(a[0]-b[0])?(a=a[0]<b[0]?Q:-Q,d=d*a/2,c.point(-a,d),c.point(0,d),c.point(a,d)):c.point(b[0],b[1])},[-Q,-Q/2]);n.geo.clipExtent=function(){var a,b,d,c,g,l,e={stream:function(a){g&&(g.valid=!1);g=l(a);g.valid=!0;return g},extent:function(f){if(!arguments.length)return[[a,b],[d,c]];l=Fe(a=+f[0][0],b=+f[0][1],d=+f[1][0],c=+f[1][1]);g&&(g.valid=!1,g=null);return e}};return e.extent([[0,0],[960,500]])};(n.geo.conicEqualArea=
function(){return id(Ge)}).raw=Ge;n.geo.albers=function(){return n.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};n.geo.albersUsa=function(){function a(a){var b=a[0];a=a[1];g=null;(e(b,a),g)||(f(b,a),g)||h(b,a);return g}var b=n.geo.albers(),d=n.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=n.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g,l={point:function(a,b){g=[a,b]}},e,f,h;a.invert=function(a){var g=
b.scale(),l=b.translate(),e=(a[0]-l[0])/g,g=(a[1]-l[1])/g;return(.12<=g&&.234>g&&-.425<=e&&-.214>e?d:.166<=g&&.234>g&&-.214<=e&&-.115>e?c:b).invert(a)};a.stream=function(a){var g=b.stream(a),l=d.stream(a),e=c.stream(a);return{point:function(a,b){g.point(a,b);l.point(a,b);e.point(a,b)},sphere:function(){g.sphere();l.sphere();e.sphere()},lineStart:function(){g.lineStart();l.lineStart();e.lineStart()},lineEnd:function(){g.lineEnd();l.lineEnd();e.lineEnd()},polygonStart:function(){g.polygonStart();l.polygonStart();
e.polygonStart()},polygonEnd:function(){g.polygonEnd();l.polygonEnd();e.polygonEnd()}}};a.precision=function(g){if(!arguments.length)return b.precision();b.precision(g);d.precision(g);c.precision(g);return a};a.scale=function(g){if(!arguments.length)return b.scale();b.scale(g);d.scale(.35*g);c.scale(g);return a.translate(b.translate())};a.translate=function(g){if(!arguments.length)return b.translate();var n=b.scale(),m=+g[0],q=+g[1];e=b.translate(g).clipExtent([[m-.455*n,q-.238*n],[m+.455*n,q+.238*
n]]).stream(l).point;f=d.translate([m-.307*n,q+.201*n]).clipExtent([[m-.425*n+1E-6,q+.12*n+1E-6],[m-.214*n-1E-6,q+.234*n-1E-6]]).stream(l).point;h=c.translate([m-.205*n,q+.212*n]).clipExtent([[m-.214*n+1E-6,q+.166*n+1E-6],[m-.115*n-1E-6,q+.234*n-1E-6]]).stream(l).point;return a};return a.scale(1070)};var Fc,kc,Za={point:T,lineStart:T,lineEnd:T,polygonStart:function(){kc=0;Za.lineStart=Xg},polygonEnd:function(){Za.lineStart=Za.lineEnd=Za.point=T;Fc+=S(kc/2)}},Gc,Hc,Ic,Jc,ui={point:function(a,b){a<
Gc&&(Gc=a);a>Ic&&(Ic=a);b<Hc&&(Hc=b);b>Jc&&(Jc=b)},lineStart:T,lineEnd:T,polygonStart:T,polygonEnd:T},Ha={point:ib,lineStart:Ie,lineEnd:Je,polygonStart:function(){Ha.lineStart=Zg},polygonEnd:function(){Ha.point=ib;Ha.lineStart=Ie;Ha.lineEnd=Je}};n.geo.path=function(){function a(a){a&&("function"===typeof d&&e.pointRadius(+d.apply(this,arguments)),f&&f.valid||(f=l(e)),n.geo.stream(a,f));return e.result()}function b(){f=null;return a}var d=4.5,c,g,l,e,f;a.area=function(a){Fc=0;n.geo.stream(a,l(Za));
return Fc};a.centroid=function(a){Ra=Sa=La=Ba=Ca=ra=Xa=Ya=Ma=0;n.geo.stream(a,l(Ha));return Ma?[Xa/Ma,Ya/Ma]:ra?[Ba/ra,Ca/ra]:La?[Ra/La,Sa/La]:[NaN,NaN]};a.bounds=function(a){Ic=Jc=-(Gc=Hc=Infinity);n.geo.stream(a,l(ui));return[[Gc,Hc],[Ic,Jc]]};a.projection=function(a){if(!arguments.length)return c;l=(c=a)?a.stream||ah(a):O;return b()};a.context=function(a){if(!arguments.length)return g;e=null==(g=a)?new Yg:new $g(a);"function"!==typeof d&&e.pointRadius(d);return b()};a.pointRadius=function(b){if(!arguments.length)return d;
d="function"===typeof b?b:(e.pointRadius(+b),+b);return a};return a.projection(n.geo.albersUsa()).context(null)};n.geo.transform=function(a){return{stream:function(b){b=new Ne(b);for(var d in a)b[d]=a[d];return b}}};Ne.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
n.geo.projection=$a;n.geo.projectionMutator=jd;(n.geo.equirectangular=function(){return $a(Fb)}).raw=Fb.invert=Fb;n.geo.rotation=function(a){function b(b){b=a(b[0]*R,b[1]*R);return b[0]*=ca,b[1]*=ca,b}a=kd(a[0]%360*R,a[1]*R,2<a.length?a[2]*R:0);b.invert=function(b){b=a.invert(b[0]*R,b[1]*R);return b[0]*=ca,b[1]*=ca,b};return b};Pe.invert=Fb;n.geo.circle=function(){function a(){var a="function"===typeof b?b.apply(this,arguments):b,d=kd(-a[0]*R,-a[1]*R,0).invert,c=[];g(null,null,1,{point:function(a,
b){c.push(a=d(a,b));a[0]*=ca;a[1]*=ca}});return{type:"Polygon",coordinates:[c]}}var b=[0,0],d,c=6,g;a.origin=function(d){if(!arguments.length)return b;b=d;return a};a.angle=function(b){if(!arguments.length)return d;g=hd((d=+b)*R,c*R);return a};a.precision=function(b){if(!arguments.length)return c;g=hd(d*R,(c=+b)*R);return a};return a.angle(90)};n.geo.distance=function(a,b){var d=(b[0]-a[0])*R,c=a[1]*R,g=b[1]*R,l=Math.sin(d),d=Math.cos(d),e=Math.sin(c),c=Math.cos(c),f=Math.sin(g),g=Math.cos(g),h;return Math.atan2(Math.sqrt((h=
g*l)*h+(h=c*f-e*g*d)*h),e*f+c*g*d)};n.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return n.range(Math.ceil(l/p)*p,g,p).map(E).concat(n.range(Math.ceil(u/r)*r,h,r).map(I)).concat(n.range(Math.ceil(c/m)*m,d,m).filter(function(a){return 1E-6<S(a%p)}).map(B)).concat(n.range(Math.ceil(f/q)*q,e,q).filter(function(a){return 1E-6<S(a%r)}).map(w))}var d,c,g,l,e,f,h,u,m=10,q=m,p=90,r=360,B,w,E,I,t=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",
coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[E(l).concat(I(h).slice(1),E(g).reverse().slice(1),I(u).reverse().slice(1))]}};a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()};a.majorExtent=function(b){if(!arguments.length)return[[l,u],[g,h]];l=+b[0][0];g=+b[1][0];u=+b[0][1];h=+b[1][1];l>g&&(b=l,l=g,g=b);u>h&&(b=u,u=h,h=b);return a.precision(t)};a.minorExtent=function(b){if(!arguments.length)return[[c,f],[d,e]];c=+b[0][0];d=+b[1][0];
f=+b[0][1];e=+b[1][1];c>d&&(b=c,c=d,d=b);f>e&&(b=f,f=e,e=b);return a.precision(t)};a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()};a.majorStep=function(b){if(!arguments.length)return[p,r];p=+b[0];r=+b[1];return a};a.minorStep=function(b){if(!arguments.length)return[m,q];m=+b[0];q=+b[1];return a};a.precision=function(b){if(!arguments.length)return t;t=+b;B=Ue(f,e,90);w=Ve(c,d,t);E=Ue(u,h,90);I=Ve(l,g,t);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,
-80.000001],[180,80.000001]])};n.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[d||b.apply(this,arguments),g||c.apply(this,arguments)]}}var b=ld,d,c=md,g;a.distance=function(){return n.geo.distance(d||b.apply(this,arguments),g||c.apply(this,arguments))};a.source=function(c){if(!arguments.length)return b;b=c;d="function"===typeof c?null:c;return a};a.target=function(b){if(!arguments.length)return c;c=b;g="function"===typeof b?null:b;return a};a.precision=function(){return arguments.length?
a:0};return a};n.geo.interpolate=function(a,b){return bh(a[0]*R,a[1]*R,b[0]*R,b[1]*R)};n.geo.length=function(a){Kc=0;n.geo.stream(a,zb);return Kc};var Kc,zb={sphere:T,point:T,lineStart:function(){function a(a,l){var e=Math.sin(l*=R),f=Math.cos(l),h=S((a*=R)-b),u=Math.cos(h);Kc+=Math.atan2(Math.sqrt((h=f*Math.sin(h))*h+(h=c*e-d*f*u)*h),d*e+c*f*u);b=a;d=e;c=f}var b,d,c;zb.point=function(g,l){b=g*R;d=Math.sin(l*=R);c=Math.cos(l);zb.point=a};zb.lineEnd=function(){zb.point=zb.lineEnd=T}},lineEnd:T,polygonStart:T,
polygonEnd:T},gg=Gb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(n.geo.azimuthalEqualArea=function(){return $a(gg)}).raw=gg;var hg=Gb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},O);(n.geo.azimuthalEquidistant=function(){return $a(hg)}).raw=hg;(n.geo.conicConformal=function(){return id(We)}).raw=We;(n.geo.conicEquidistant=function(){return id(Xe)}).raw=Xe;var ig=Gb(function(a){return 1/a},Math.atan);(n.geo.gnomonic=function(){return $a(ig)}).raw=ig;lc.invert=
function(a,b){return[a,2*Math.atan(Math.exp(b))-da]};(n.geo.mercator=function(){return Ye(lc)}).raw=lc;var jg=Gb(function(){return 1},Math.asin);(n.geo.orthographic=function(){return $a(jg)}).raw=jg;var kg=Gb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(n.geo.stereographic=function(){return $a(kg)}).raw=kg;nd.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-da]};(n.geo.transverseMercator=function(){var a=Ye(nd),b=a.center,d=a.rotate;a.center=function(a){return a?b([-a[1],
a[0]]):(a=b(),[a[1],-a[0]])};a.rotate=function(a){return a?d([a[0],a[1],2<a.length?a[2]+90:90]):(a=d(),[a[0],a[1],a[2]-90])};return d([0,0,90])}).raw=nd;n.geom={};n.geom.hull=function(a){function b(a){if(3>a.length)return[];var b=$(d),e=$(c),f,h=a.length,u=[],n=[];for(f=0;f<h;f++)u.push([+b.call(this,a[f],f),+e.call(this,a[f],f),f]);u.sort(ch);for(f=0;f<h;f++)n.push([u[f][0],-u[f][1]]);var b=Ze(u),n=Ze(n),e=n[0]===b[0],h=n[n.length-1]===b[b.length-1],m=[];for(f=b.length-1;0<=f;--f)m.push(a[u[b[f]][2]]);
for(f=+e;f<n.length-h;++f)m.push(a[u[n[f]][2]]);return m}var d=rb,c=Hb;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(d=a,b):d};b.y=function(a){return arguments.length?(c=a,b):c};return b};n.geom.polygon=function(a){Rb(a,Lc);return a};var Lc=n.geom.polygon.prototype=[];Lc.area=function(){for(var a=-1,b=this.length,d,c=this[b-1],g=0;++a<b;)d=c,c=this[a],g+=d[1]*c[0]-d[0]*c[1];return.5*g};Lc.centroid=function(a){var b=-1,d=this.length,c=0,g=0,l,e=this[d-1],f;for(arguments.length||
(a=-1/(6*this.area()));++b<d;)l=e,e=this[b],f=l[0]*e[1]-e[0]*l[1],c+=(l[0]+e[0])*f,g+=(l[1]+e[1])*f;return[c*a,g*a]};Lc.clip=function(a){for(var b,d=$e(a),c=-1,g=this.length-$e(this),l,e,f=this[g-1],h,u,n;++c<g;){b=a.slice();a.length=0;h=this[c];u=b[(e=b.length-d)-1];for(l=-1;++l<e;)n=b[l],od(n,f,h)?(od(u,f,h)||a.push(pd(u,n,f,h)),a.push(n)):od(u,f,h)&&a.push(pd(u,n,f,h)),u=n;d&&a.push(a[0]);f=h}return a};var vb,jb,tb,bf=[],rd,Ib,ff=[];df.prototype.prepare=function(){for(var a=this.edges,b=a.length,
d;b--;)d=a[b].edge,d.b&&d.a||a.splice(b,1);a.sort(ef);return a.length};oc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};sd.prototype={insert:function(a,b){var d,c,g;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;d=a}else this._?(a=hf(this._),b.P=null,b.N=a,a.P=a.L=b,d=a):(b.P=b.N=null,this._=b,d=null);b.L=b.R=null;b.U=d;b.C=!0;for(a=b;d&&d.C;)c=d.U,d===
c.L?(g=c.R)&&g.C?(d.C=g.C=!1,c.C=!0,a=c):(a===d.R&&(Kb(this,d),a=d,d=a.U),d.C=!1,c.C=!0,Lb(this,c)):(g=c.L)&&g.C?(d.C=g.C=!1,c.C=!0,a=c):(a===d.L&&(Lb(this,d),a=d,d=a.U),d.C=!1,c.C=!0,Kb(this,c)),d=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,d=a.L,c=a.R,g,l;g=d?c?hf(c):d:c;b?b.L===a?b.L=g:b.R=g:this._=g;d&&c?(l=g.C,g.C=a.C,g.L=d,d.U=g,g!==c?(b=g.U,g.U=a.U,a=g.R,b.L=a,g.R=c,c.U=g):(g.U=b,b=g,a=g.R)):(l=a.C,a=g);a&&(a.U=b);if(!l)if(a&&a.C)a.C=!1;else{do{if(a===
this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,Kb(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,Lb(this,a),a=b.R);a.C=b.C;b.C=a.R.C=!1;Kb(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,Lb(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,Kb(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;Lb(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};n.geom.voronoi=function(a){function b(a){var b=Array(a.length),c=f[0][0],g=f[0][1],k=f[1][0],l=f[1][1];
td(d(a),f).cells.forEach(function(d,e){var f=d.edges,h=d.site;(b[e]=f.length?f.map(function(a){a=a.start();return[a.x,a.y]}):h.x>=c&&h.x<=k&&h.y>=g&&h.y<=l?[[c,l],[k,l],[k,g],[c,g]]:[]).point=a[e]});return b}function d(a){return a.map(function(a,b){return{x:1E-6*Math.round(l(a,b)/1E-6),y:1E-6*Math.round(e(a,b)/1E-6),i:b}})}var c=rb,g=Hb,l=c,e=g,f=Mc;if(a)return b(a);b.links=function(a){return td(d(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})};
b.triangles=function(a){var b=[];td(d(a)).cells.forEach(function(d,c){for(var g=d.site,k=d.edges.sort(ef),l=-1,e=k.length,f,h=k[e-1].edge,h=h.l===g?h.r:h.l;++l<e;)f=h,h=k[l].edge,h=h.l===g?h.r:h.l,c<f.i&&c<h.i&&0>(g.x-h.x)*(f.y-g.y)-(g.x-f.x)*(h.y-g.y)&&b.push([a[c],a[f.i],a[h.i]])});return b};b.x=function(a){return arguments.length?(l=$(c=a),b):c};b.y=function(a){return arguments.length?(e=$(g=a),b):g};b.clipExtent=function(a){if(!arguments.length)return f===Mc?null:f;f=null==a?Mc:a;return b};b.size=
function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):f===Mc?null:f&&f[1]};return b};var Mc=[[-1E6,-1E6],[1E6,1E6]];n.geom.delaunay=function(a){return n.geom.voronoi().triangles(a)};n.geom.quadtree=function(a,b,d,c,g){function l(a){function l(a,b,d,c,g,k,e,f){if(!isNaN(d)&&!isNaN(c))if(a.leaf){var h=a.x,s=a.y;if(null!=h){if(!(.01>S(h-d)+S(s-c))){var u=a.point;a.x=a.y=a.point=null;n(a,u,h,s,g,k,e,f)}n(a,b,d,c,g,k,e,f)}else a.x=d,a.y=c,a.point=b}else n(a,b,d,c,g,k,e,f)}function n(a,b,d,c,g,
k,e,f){var h=.5*(g+e),s=.5*(k+f),u=d>=h,m=c>=s,A=m<<1|u;a.leaf=!1;a=a.nodes[A]||(a.nodes[A]=jf());u?g=h:e=h;m?k=s:f=s;l(a,b,d,c,g,k,e,f)}var m,q=$(e),p=$(f),r,B,w,t,v,D,x,z;if(null!=b)v=b,D=d,x=c,z=g;else if(x=z=-(v=D=Infinity),r=[],B=[],t=a.length,h)for(w=0;w<t;++w)m=a[w],m.x<v&&(v=m.x),m.y<D&&(D=m.y),m.x>x&&(x=m.x),m.y>z&&(z=m.y),r.push(m.x),B.push(m.y);else for(w=0;w<t;++w){var y=+q(m=a[w],w);m=+p(m,w);y<v&&(v=y);m<D&&(D=m);y>x&&(x=y);m>z&&(z=m);r.push(y);B.push(m)}y=x-v;m=z-D;y>m?z=D+y:x=v+m;
var L=jf();L.add=function(a){l(L,a,+q(a,++w),+p(a,w),v,D,x,z)};L.visit=function(a){Mb(a,L,v,D,x,z)};L.find=function(a){return kh(L,a[0],a[1],v,D,x,z)};w=-1;if(null==b){for(;++w<t;)l(L,a[w],r[w],B[w],v,D,x,z);--w}else a.forEach(L.add);r=B=a=m=null;return L}var e=rb,f=Hb,h;if(h=arguments.length)return e=ih,f=jh,3===h&&(g=d,c=b,d=b=0),l(a);l.x=function(a){return arguments.length?(e=a,l):e};l.y=function(a){return arguments.length?(f=a,l):f};l.extent=function(a){if(!arguments.length)return null==b?null:
[[b,d],[c,g]];null==a?b=d=c=g=null:(b=+a[0][0],d=+a[0][1],c=+a[1][0],g=+a[1][1]);return l};l.size=function(a){if(!arguments.length)return null==b?null:[c-b,g-d];null==a?b=d=c=g=null:(b=d=0,c=+a[0],g=+a[1]);return l};return l};n.interpolateRgb=ud;n.interpolateObject=kf;n.interpolateNumber=Ta;n.interpolateString=lf;var vd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wd=new RegExp(vd.source,"g");n.interpolate=kb;n.interpolators=[function(a,b){var d=typeof b;return("string"===d?Ub.has(b.toLowerCase())||
/^(#|rgb\(|hsl\()/i.test(b)?ud:lf:b instanceof la?ud:Array.isArray(b)?pc:"object"===d&&isNaN(b)?kf:Ta)(a,b)}];n.interpolateArray=pc;var lg=function(){return O},vi=n.map({linear:lg,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return mh},cubic:function(){return nh},sin:function(){return ph},exp:function(){return qh},circle:function(){return rh},elastic:function(a,b){var d;2>arguments.length&&(b=.45);arguments.length?d=b/xa*Math.asin(1/a):(a=1,d=b/4);return function(c){return 1+
a*Math.pow(2,-10*c)*Math.sin((c-d)*xa/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return sh}}),wi=n.map({"in":O,out:mf,"in-out":nf,"out-in":function(a){return nf(mf(a))}});n.ease=function(a){var b=a.indexOf("-"),d=0<=b?a.slice(0,b):a,b=0<=b?a.slice(b+1):"in",d=vi.get(d)||lg,b=wi.get(b)||O;return lh(b(d.apply(null,ag.call(arguments,1))))};n.interpolateHcl=function(a,b){a=n.hcl(a);b=n.hcl(b);var d=a.h,c=a.c,g=a.l,l=b.h-d,e=b.c-c,f=b.l-g;isNaN(e)&&
(e=0,c=isNaN(c)?b.c:c);isNaN(l)?(l=0,d=isNaN(d)?b.h:d):180<l?l-=360:-180>l&&(l+=360);return function(a){return Pa(d+l*a,c+e*a,g+f*a)+""}};n.interpolateHsl=function(a,b){a=n.hsl(a);b=n.hsl(b);var d=a.h,c=a.s,g=a.l,l=b.h-d,e=b.s-c,f=b.l-g;isNaN(e)&&(e=0,c=isNaN(c)?b.s:c);isNaN(l)?(l=0,d=isNaN(d)?b.h:d):180<l?l-=360:-180>l&&(l+=360);return function(a){return eb(d+l*a,c+e*a,g+f*a)+""}};n.interpolateLab=function(a,b){a=n.lab(a);b=n.lab(b);var d=a.l,c=a.a,g=a.b,l=b.l-d,e=b.a-c,f=b.b-g;return function(a){return ia(d+
l*a,c+e*a,g+f*a)+""}};n.interpolateRound=of;n.transform=function(a){var b=oa.createElementNS(n.ns.prefix.svg,"g");return(n.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new pf(c?c.matrix:xi)})(a)};pf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var xi={a:1,b:0,c:0,d:1,e:0,f:0};n.interpolateTransform=rf;n.layout={};n.layout.bundle=function(){return function(a){for(var b=
[],d=-1,c=a.length;++d<c;)b.push(zh(a[d]));return b}};n.layout.chord=function(){function a(){var a={},d=[],p=n.range(e),r=[],B,w,t,v,D;c=[];g=[];B=0;for(v=-1;++v<e;){w=0;for(D=-1;++D<e;)w+=l[v][D];d.push(w);r.push(n.range(e));B+=w}h&&p.sort(function(a,b){return h(d[a],d[b])});m&&r.forEach(function(a,b){a.sort(function(a,d){return m(l[b][a],l[b][d])})});B=(xa-f*e)/B;w=0;for(v=-1;++v<e;){t=w;for(D=-1;++D<e;){var x=p[v],z=r[x][D],y=l[x][z],L=w,U=w+=y*B;a[x+"-"+z]={index:x,subindex:z,startAngle:L,endAngle:U,
value:y}}g[x]={index:x,startAngle:t,endAngle:w,value:d[x]};w+=f}for(v=-1;++v<e;)for(D=v-1;++D<e;)p=a[v+"-"+D],r=a[D+"-"+v],(p.value||r.value)&&c.push(p.value<r.value?{source:r,target:p}:{source:p,target:r});q&&b()}function b(){c.sort(function(a,b){return q((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var d={},c,g,l,e,f=0,h,m,q;d.matrix=function(a){if(!arguments.length)return l;e=(l=a)&&l.length;c=g=null;return d};d.padding=function(a){if(!arguments.length)return f;f=a;c=
g=null;return d};d.sortGroups=function(a){if(!arguments.length)return h;h=a;c=g=null;return d};d.sortSubgroups=function(a){if(!arguments.length)return m;m=a;c=null;return d};d.sortChords=function(a){if(!arguments.length)return q;q=a;c&&b();return d};d.chords=function(){c||a();return c};d.groups=function(){g||a();return g};return d};n.layout.force=function(){function a(a){return function(b,d,c,g){if(b.point!==a){c=b.cx-a.x;var k=b.cy-a.y;d=g-d;g=c*c+k*k;if(d*d/w<g)return g<r&&(d=b.charge/g,a.px-=c*
d,a.py-=k*d),!0;b.point&&g&&g<r&&(d=b.pointCharge/g,a.px-=c*d,a.py-=k*d)}return!b.charge}}function b(a){a.px=n.event.x;a.py=n.event.y;d.resume()}var d={},c=n.dispatch("start","tick","end"),g,e=[1,1],f,h,m=.9,u=yi,q=zi,p=-30,r=Ai,B=.1,w=.64,t=[],E=[],v,D,x;d.tick=function(){if(.005>(h*=.99))return g=null,c.end({type:"end",alpha:h=0}),!0;var b=t.length,d=E.length,f,u,q,r,w,N,M;for(f=0;f<d;++f)if(u=E[f],q=u.source,r=u.target,N=r.x-q.x,M=r.y-q.y,w=N*N+M*M)w=h*D[f]*((w=Math.sqrt(w))-v[f])/w,N*=w,M*=w,
r.x-=N*(w=q.weight+r.weight?q.weight/(q.weight+r.weight):.5),r.y-=M*w,q.x+=N*(w=1-w),q.y+=M*w;if(w=h*B)if(N=e[0]/2,M=e[1]/2,f=-1,w)for(;++f<b;)u=t[f],u.x+=(N-u.x)*w,u.y+=(M-u.y)*w;if(p)for(tf(d=n.geom.quadtree(t),h,x),f=-1;++f<b;)(u=t[f]).fixed||d.visit(a(u));for(f=-1;++f<b;)u=t[f],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*m,u.y-=(u.py-(u.py=u.y))*m);c.tick({type:"tick",alpha:h})};d.nodes=function(a){if(!arguments.length)return t;t=a;return d};d.links=function(a){if(!arguments.length)return E;
E=a;return d};d.size=function(a){if(!arguments.length)return e;e=a;return d};d.linkDistance=function(a){if(!arguments.length)return u;u="function"===typeof a?a:+a;return d};d.distance=d.linkDistance;d.linkStrength=function(a){if(!arguments.length)return q;q="function"===typeof a?a:+a;return d};d.friction=function(a){if(!arguments.length)return m;m=+a;return d};d.charge=function(a){if(!arguments.length)return p;p="function"===typeof a?a:+a;return d};d.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(r);
r=a*a;return d};d.gravity=function(a){if(!arguments.length)return B;B=+a;return d};d.theta=function(a){if(!arguments.length)return Math.sqrt(w);w=a*a;return d};d.alpha=function(a){if(!arguments.length)return h;a=+a;h?0<a?h=a:(g.c=null,g.t=NaN,g=null,c.end({type:"end",alpha:h=0})):0<a&&(c.start({type:"start",alpha:h=a}),g=Wb(d.tick));return d};d.start=function(){function a(d,k){if(!h){h=Array(c);for(l=0;l<c;++l)h[l]=[];for(l=0;l<g;++l){var e=E[l];h[e.source.index].push(e.target);h[e.target.index].push(e.source)}}for(var e=
h[b],l=-1,f=e.length,s;++l<f;)if(!isNaN(s=e[l][d]))return s;return Math.random()*k}var b,c=t.length,g=E.length,k=e[0],f=e[1],h,s;for(b=0;b<c;++b)(s=t[b]).index=b,s.weight=0;for(b=0;b<g;++b)s=E[b],"number"==typeof s.source&&(s.source=t[s.source]),"number"==typeof s.target&&(s.target=t[s.target]),++s.source.weight,++s.target.weight;for(b=0;b<c;++b)s=t[b],isNaN(s.x)&&(s.x=a("x",k)),isNaN(s.y)&&(s.y=a("y",f)),isNaN(s.px)&&(s.px=s.x),isNaN(s.py)&&(s.py=s.y);v=[];if("function"===typeof u)for(b=0;b<g;++b)v[b]=
+u.call(this,E[b],b);else for(b=0;b<g;++b)v[b]=u;D=[];if("function"===typeof q)for(b=0;b<g;++b)D[b]=+q.call(this,E[b],b);else for(b=0;b<g;++b)D[b]=q;x=[];if("function"===typeof p)for(b=0;b<c;++b)x[b]=+p.call(this,t[b],b);else for(b=0;b<c;++b)x[b]=p;return d.resume()};d.resume=function(){return d.alpha(.1)};d.stop=function(){return d.alpha(0)};d.drag=function(){f||(f=n.behavior.drag().origin(O).on("dragstart.force",Ah).on("drag.force",b).on("dragend.force",Bh));if(!arguments.length)return f;this.on("mouseover.force",
Ch).on("mouseout.force",Dh).call(f)};return n.rebind(d,c,"on")};var yi=20,zi=1,Ai=Infinity;n.layout.hierarchy=function(){function a(g){var e=[g],f=[],h;for(g.depth=0;null!=(h=e.pop());)if(f.push(h),(u=d.call(a,h,h.depth))&&(n=u.length)){for(var n,u,m;0<=--n;)e.push(m=u[n]),m.parent=h,m.depth=h.depth+1;c&&(h.value=0);h.children=u}else c&&(h.value=+c.call(a,h,h.depth)||0),delete h.children;Na(g,function(a){var d,g;b&&(d=a.children)&&d.sort(b);c&&(g=a.parent)&&(g.value+=a.value)});return f}var b=Hh,
d=Fh,c=Gh;a.sort=function(d){if(!arguments.length)return b;b=d;return a};a.children=function(b){if(!arguments.length)return d;d=b;return a};a.value=function(b){if(!arguments.length)return c;c=b;return a};a.revalue=function(b){c&&(Ob(b,function(a){a.children&&(a.value=0)}),Na(b,function(b){var d;b.children||(b.value=+c.call(a,b,b.depth)||0);if(d=b.parent)d.value+=b.value}));return b};return a};n.layout.partition=function(){function a(b,d,c,g){var e=b.children;b.x=d;b.y=b.depth*g;b.dx=c;b.dy=g;if(e&&
(f=e.length)){var k=-1,f,h;for(c=b.value?c/b.value:0;++k<f;)a(h=e[k],d,b=h.value*c,g),d+=b}}function b(a){a=a.children;var d=0;if(a&&(g=a.length))for(var c=-1,g;++c<g;)d=Math.max(d,b(a[c]));return 1+d}function d(d,e){var f=c.call(this,d,e);a(f[0],0,g[0],g[1]/b(f[0]));return f}var c=n.layout.hierarchy(),g=[1,1];d.size=function(a){if(!arguments.length)return g;g=a;return d};return Nb(d,c)};n.layout.pie=function(){function a(f){var h=f.length,m=f.map(function(d,c){return+b.call(a,d,c)}),u=+("function"===
typeof c?c.apply(this,arguments):c),q=("function"===typeof g?g.apply(this,arguments):g)-u,p=Math.min(Math.abs(q)/h,+("function"===typeof e?e.apply(this,arguments):e)),r=p*(0>q?-1:1),w=n.sum(m),B=w?(q-h*r)/w:0,h=n.range(h),t=[],v;null!=d&&h.sort(d===mg?function(a,b){return m[b]-m[a]}:function(a,b){return d(f[a],f[b])});h.forEach(function(a){t[a]={data:f[a],value:v=m[a],startAngle:u,endAngle:u+=v*B+r,padAngle:p}});return t}var b=Number,d=mg,c=0,g=xa,e=0;a.value=function(d){if(!arguments.length)return b;
b=d;return a};a.sort=function(b){if(!arguments.length)return d;d=b;return a};a.startAngle=function(b){if(!arguments.length)return c;c=b;return a};a.endAngle=function(b){if(!arguments.length)return g;g=b;return a};a.padAngle=function(b){if(!arguments.length)return e;e=b;return a};return a};var mg={};n.layout.stack=function(){function a(h,m){if(!(w=h.length))return h;var u=h.map(function(d,c){return b.call(a,d,c)}),q=u.map(function(b){return b.map(function(b,d){return[e.call(a,b,d),f.call(a,b,d)]})}),
p=d.call(a,q,m),u=n.permute(u,p),q=n.permute(q,p),p=c.call(a,q,m),r=u[0].length,w,B,t,v;for(t=0;t<r;++t)for(g.call(a,u[0][t],v=p[t],q[0][t][1]),B=1;B<w;++B)g.call(a,u[B][t],v+=q[B-1][t][1],q[B][t][1]);return h}var b=O,d=xd,c=yd,g=Kh,e=Ih,f=Jh;a.values=function(d){if(!arguments.length)return b;b=d;return a};a.order=function(b){if(!arguments.length)return d;d="function"===typeof b?b:Bi.get(b)||xd;return a};a.offset=function(b){if(!arguments.length)return c;c="function"===typeof b?b:Ci.get(b)||yd;return a};
a.x=function(b){if(!arguments.length)return e;e=b;return a};a.y=function(b){if(!arguments.length)return f;f=b;return a};a.out=function(b){if(!arguments.length)return g;g=b;return a};return a};var Bi=n.map({"inside-out":function(a){var b=a.length,d,c=a.map(Lh),g=a.map(Mh),e=n.range(b).sort(function(a,b){return c[a]-c[b]}),f=0,h=0,m=[],u=[];for(a=0;a<b;++a)d=e[a],f<h?(f+=g[d],m.push(d)):(h+=g[d],u.push(d));return u.reverse().concat(m)},reverse:function(a){return n.range(a.length).reverse()},"default":xd}),
Ci=n.map({silhouette:function(a){var b=a.length,d=a[0].length,c=[],g=0,e,f,h,n=[];for(f=0;f<d;++f){for(h=e=0;e<b;e++)h+=a[e][f][1];h>g&&(g=h);c.push(h)}for(f=0;f<d;++f)n[f]=(g-c[f])/2;return n},wiggle:function(a){var b=a.length,d=a[0],c=d.length,g,e,f,h,n,m,q,p,r,w=[];w[0]=p=r=0;for(e=1;e<c;++e){for(h=g=0;g<b;++g)h+=a[g][e][1];n=g=0;for(q=d[e][0]-d[e-1][0];g<b;++g){f=0;for(m=(a[g][e][1]-a[g][e-1][1])/(2*q);f<g;++f)m+=(a[f][e][1]-a[f][e-1][1])/q;n+=m*a[g][e][1]}w[e]=p-=h?n/h*q:0;p<r&&(r=p)}for(e=0;e<
c;++e)w[e]-=r;return w},expand:function(a){var b=a.length,d=a[0].length,c=1/b,g,e,f,h=[];for(e=0;e<d;++e){for(f=g=0;g<b;g++)f+=a[g][e][1];if(f)for(g=0;g<b;g++)a[g][e][1]/=f;else for(g=0;g<b;g++)a[g][e][1]=c}for(e=0;e<d;++e)h[e]=0;return h},zero:yd});n.layout.histogram=function(){function a(a,e){var f=[],h=a.map(d,this),m=c.call(this,h,e),q=g.call(this,m,h,e),p;e=-1;for(var r=h.length,w=q.length-1,B=b?1:1/r;++e<w;)p=f[e]=[],p.dx=q[e+1]-(p.x=q[e]),p.y=0;if(0<w)for(e=-1;++e<r;)p=h[e],p>=m[0]&&p<=m[1]&&
(p=f[n.bisect(q,p,1,w)-1],p.y+=B,p.push(a[e]));return f}var b=!0,d=Number,c=Ph,g=Oh;a.value=function(b){if(!arguments.length)return d;d=b;return a};a.range=function(b){if(!arguments.length)return c;c=$(b);return a};a.bins=function(b){if(!arguments.length)return g;g="number"===typeof b?function(a){return uf(a,b)}:$(b);return a};a.frequency=function(d){if(!arguments.length)return b;b=!!d;return a};return a};n.layout.pack=function(){function a(a,e){var f=b.call(this,a,e),h=f[0],n=c[0],m=c[1],q=null==
g?Math.sqrt:"function"===typeof g?g:function(){return g};h.x=h.y=0;Na(h,function(a){a.r=+q(a.value)});Na(h,xf);if(d){var p=d*(g?1:Math.max(2*h.r/n,2*h.r/m))/2;Na(h,function(a){a.r+=p});Na(h,xf);Na(h,function(a){a.r-=p})}zf(h,n/2,m/2,g?1:1/Math.max(2*h.r/n,2*h.r/m));return f}var b=n.layout.hierarchy().sort(Qh),d=0,c=[1,1],g;a.size=function(b){if(!arguments.length)return c;c=b;return a};a.radius=function(b){if(!arguments.length)return g;g=null==b||"function"===typeof b?b:+b;return a};a.padding=function(b){if(!arguments.length)return d;
d=+b;return a};return Nb(a,b)};n.layout.tree=function(){function a(a,n){var q=e.call(this,a,n),p=q[0],r=b(p);Na(r,d);r.parent.m=-r.z;Ob(r,c);if(m)Ob(p,g);else{var w=p,B=p,t=p;Ob(p,function(a){a.x<w.x&&(w=a);a.x>B.x&&(B=a);a.depth>t.depth&&(t=a)});var v=f(w,B)/2-w.x,D=h[0]/(B.x+f(B,w)/2+v),x=h[1]/(t.depth||1);Ob(p,function(a){a.x=(a.x+v)*D;a.y=a.depth*x})}return q}function b(a){a={A:null,children:[a]};for(var b=[a],d;null!=(d=b.pop());)for(var c=d.children,g,e=0,k=c.length;e<k;++e)b.push((c[e]=g={_:c[e],
parent:d,children:(g=c[e].children)&&g.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:e}).a=g);return a.children[0]}function d(a){var b=a.children,d=a.parent.children,c=a.i?d[a.i-1]:null;if(b.length){for(var g=0,e=0,k=a.children,l=k.length,h;0<=--l;)h=k[l],h.z+=g,h.m+=g,g+=h.s+(e+=h.c);b=(b[0].z+b[b.length-1].z)/2;c?(a.z=c.z+f(a._,c._),a.m=a.z-b):a.z=b}else c&&(a.z=c.z+f(a._,c._));b=a.parent;d=a.parent.A||d[0];if(c){e=g=a;k=g.parent.children[0];l=g.m;h=e.m;for(var n=c.m,s=k.m,m;c=Bd(c),g=Ad(g),
c&&g;){k=Ad(k);e=Bd(e);e.a=a;m=c.z+n-g.z-l+f(c._,g._);if(0<m){var q=c.a.parent===a.parent?c.a:d,p=a,r=m,w=r/(p.i-q.i);p.c-=w;p.s+=r;q.c+=w;p.z+=r;p.m+=r;l+=m;h+=m}n+=c.m;l+=g.m;s+=k.m;h+=e.m}c&&!Bd(e)&&(e.t=c,e.m+=n-h);g&&!Ad(k)&&(k.t=g,k.m+=l-s,d=a)}b.A=d}function c(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function g(a){a.x*=h[0];a.y=a.depth*h[1]}var e=n.layout.hierarchy().sort(null).value(null),f=Af,h=[1,1],m=null;a.separation=function(b){if(!arguments.length)return f;f=b;return a};a.size=function(b){if(!arguments.length)return m?
null:h;m=null==(h=b)?g:null;return a};a.nodeSize=function(b){if(!arguments.length)return m?h:null;m=null==(h=b)?null:g;return a};return Nb(a,e)};n.layout.cluster=function(){function a(a,e){var f=b.call(this,a,e),h=f[0],n,m=0;Na(h,function(a){var b=a.children;b&&b.length?(a.x=Uh(b),a.y=Th(b)):(a.x=n?m+=d(a,n):0,a.y=0,n=a)});var q=Bf(h),p=Cf(h),r=q.x-d(q,p)/2,w=p.x+d(p,q)/2;Na(h,g?function(a){a.x=(a.x-h.x)*c[0];a.y=(h.y-a.y)*c[1]}:function(a){a.x=(a.x-r)/(w-r)*c[0];a.y=(1-(h.y?a.y/h.y:1))*c[1]});return f}
var b=n.layout.hierarchy().sort(null).value(null),d=Af,c=[1,1],g=!1;a.separation=function(b){if(!arguments.length)return d;d=b;return a};a.size=function(b){if(!arguments.length)return g?null:c;g=null==(c=b);return a};a.nodeSize=function(b){if(!arguments.length)return g?c:null;g=null!=(c=b);return a};return Nb(a,b)};n.layout.treemap=function(){function a(a,b){for(var d=-1,c=a.length,g,e;++d<c;)e=(g=a[d]).value*(0>b?0:b),g.area=isNaN(e)||0>=e?0:e}function b(d){var g=d.children;if(g&&g.length){var e=
q(d),f=[],l=g.slice(),h=Infinity,n,m="slice"===w?e.dx:"dice"===w?e.dy:"slice-dice"===w?d.depth&1?e.dy:e.dx:Math.min(e.dx,e.dy);a(l,e.dx*e.dy/d.value);for(f.area=0;0<(d=l.length);){f.push(d=l[d-1]);f.area+=d.area;if(!(d="squarify"!==w)){n=m;d=f.area;for(var s=void 0,p=0,r=Infinity,A=-1,t=f.length;++A<t;)if(s=f[A].area)s<r&&(r=s),s>p&&(p=s);d*=d;n*=n;d=(n=d?Math.max(n*p*B/d,d/(n*r*B)):Infinity)<=h}d?(l.pop(),h=n):(f.area-=f.pop().area,c(f,m,e,!1),m=Math.min(e.dx,e.dy),f.length=f.area=0,h=Infinity)}f.length&&
(c(f,m,e,!0),f.length=f.area=0);g.forEach(b)}}function d(b){var g=b.children;if(g&&g.length){var e=q(b),f=g.slice(),l=[];a(f,e.dx*e.dy/b.value);for(l.area=0;b=f.pop();)l.push(b),l.area+=b.area,null!=b.z&&(c(l,b.z?e.dx:e.dy,e,!f.length),l.length=l.area=0);g.forEach(d)}}function c(a,b,d,g){var e=-1,k=a.length,l=d.x,h=d.y,n=b?f(a.area/b):0,m;if(b==d.dx){if(g||n>d.dy)n=d.dy;for(;++e<k;)m=a[e],m.x=l,m.y=h,m.dy=n,l+=m.dx=Math.min(d.x+d.dx-l,n?f(m.area/n):0);m.z=!0;m.dx+=d.x+d.dx-l;d.y+=n;d.dy-=n}else{if(g||
n>d.dx)n=d.dx;for(;++e<k;)m=a[e],m.x=l,m.y=h,m.dx=n,h+=m.dy=Math.min(d.y+d.dy-h,n?f(m.area/n):0);m.z=!1;m.dy+=d.y+d.dy-h;d.x+=n;d.dx-=n}}function g(c){c=r||e(c);var g=c[0];g.x=g.y=0;g.value?(g.dx=h[0],g.dy=h[1]):g.dx=g.dy=0;r&&e.revalue(g);a([g],g.dx*g.dy/g.value);(r?d:b)(g);p&&(r=c);return c}var e=n.layout.hierarchy(),f=Math.round,h=[1,1],m=null,q=Cd,p=!1,r,w="squarify",B=.5*(1+Math.sqrt(5));g.size=function(a){if(!arguments.length)return h;h=a;return g};g.padding=function(a){function b(d){var c=
a.call(g,d,d.depth);return null==c?Cd(d):Df(d,"number"===typeof c?[c,c,c,c]:c)}function d(b){return Df(b,a)}if(!arguments.length)return m;var c;q=null==(m=a)?Cd:"function"===(c=typeof a)?b:"number"===c?(a=[a,a,a,a],d):d;return g};g.round=function(a){if(!arguments.length)return f!=Number;f=a?Math.round:Number;return g};g.sticky=function(a){if(!arguments.length)return p;p=a;r=null;return g};g.ratio=function(a){if(!arguments.length)return B;B=a;return g};g.mode=function(a){if(!arguments.length)return w;
w=a+"";return g};return Nb(g,e)};n.random={normal:function(a,b){var d=arguments.length;2>d&&(b=1);1>d&&(a=0);return function(){var d,c;do d=2*Math.random()-1,c=2*Math.random()-1,c=d*d+c*c;while(!c||1<c);return a+b*d*Math.sqrt(-2*Math.log(c)/c)}},logNormal:function(){var a=n.random.normal.apply(n,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=n.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,d=0;d<a;d++)b+=Math.random();
return b}}};n.scale={};var Wh={floor:O,ceil:O};n.scale.linear=function(){return Ff([0,1],[0,1],kb,!1)};var Zh={s:1,g:1,p:1,r:1,e:1};n.scale.log=function(){return Hf(n.scale.linear().domain([0,1]),10,!0,[1,10])};var If=n.format(".0e"),$h={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};n.scale.pow=function(){return Jf(n.scale.linear(),1,[0,1])};n.scale.sqrt=function(){return n.scale.pow().exponent(.5)};n.scale.ordinal=function(){return Kf([],{t:"range",a:[[]]})};n.scale.category10=
function(){return n.scale.ordinal().range(Di)};n.scale.category20=function(){return n.scale.ordinal().range(Ei)};n.scale.category20b=function(){return n.scale.ordinal().range(Fi)};n.scale.category20c=function(){return n.scale.ordinal().range(Gi)};var Di=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Tb),Ei=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,
1556175,10410725].map(Tb),Fi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Tb),Gi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Tb);n.scale.quantile=function(){return Lf([],[])};n.scale.quantize=function(){return Mf(0,1,[0,1])};n.scale.threshold=
function(){return Nf([.5],[0,1])};n.scale.identity=function(){return Of([0,1])};n.svg={};n.svg.arc=function(){function a(){var a=Math.max(0,+d.apply(this,arguments)),m=Math.max(0,+c.apply(this,arguments)),p=f.apply(this,arguments)-da,q=h.apply(this,arguments)-da,r=Math.abs(q-p),w=p>q?0:1;m<a&&(B=m,m=a,a=B);if(r>=si)return b(m,w)+(a?b(a,1-w):"")+"Z";var B,t,v,D,x=0,z=0,y,L,U,C,F,W=[];if(D=(+n.apply(this,arguments)||0)/2)v=e===Nc?Math.sqrt(a*a+m*m):+e.apply(this,arguments),w||(z*=-1),m&&(z=Fa(v/m*Math.sin(D))),
a&&(x=Fa(v/a*Math.sin(D)));m?(v=m*Math.cos(p+z),D=m*Math.sin(p+z),y=m*Math.cos(q-z),L=m*Math.sin(q-z),t=Math.abs(q-p-2*z)<=Q?0:1,z&&uc(v,D,y,L)===w^t&&(y=(p+q)/2,v=m*Math.cos(y),D=m*Math.sin(y),y=L=null)):v=D=0;if(a){z=a*Math.cos(q-x);U=a*Math.sin(q-x);C=a*Math.cos(p+x);F=a*Math.sin(p+x);var G=Math.abs(p-q+2*x)<=Q?0:1;x&&uc(z,U,C,F)===1-w^G&&(C=(p+q)/2,z=a*Math.cos(C),U=a*Math.sin(C),C=F=null)}else z=U=0;1E-6<r&&.001<(B=Math.min(Math.abs(m-a)/2,+g.apply(this,arguments)))?(t=a<m^w?0:1,G=p=B,r<Q&&(r=
null==C?[z,U]:null==y?[v,D]:pd([v,D],[C,F],[y,L],[z,U]),G=v-r[0],p=D-r[1],q=y-r[0],x=L-r[1],p=1/Math.sin(Math.acos((G*q+p*x)/(Math.sqrt(G*G+p*p)*Math.sqrt(q*q+x*x)))/2),r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),G=Math.min(B,(a-r)/(p-1)),p=Math.min(B,(m-r)/(p+1))),null!=y?(r=vc(null==C?[z,U]:[C,F],[v,D],m,p,w),q=vc([y,L],[z,U],m,p,w),B===p?W.push("M",r[0],"A",p,",",p," 0 0,",t," ",r[1],"A",m,",",m," 0 ",1-w^uc(r[1][0],r[1][1],q[1][0],q[1][1]),",",w," ",q[1],"A",p,",",p," 0 0,",t," ",q[0]):W.push("M",r[0],"A",
p,",",p," 0 1,",t," ",q[0])):W.push("M",v,",",D),null!=C?(m=vc([v,D],[C,F],a,-G,w),y=vc([z,U],null==y?[v,D]:[y,L],a,-G,w),B===G?W.push("L",y[0],"A",G,",",G," 0 0,",t," ",y[1],"A",a,",",a," 0 ",w^uc(y[1][0],y[1][1],m[1][0],m[1][1]),",",1-w," ",m[1],"A",G,",",G," 0 0,",t," ",m[0]):W.push("L",y[0],"A",G,",",G," 0 0,",t," ",m[0])):W.push("L",z,",",U)):(W.push("M",v,",",D),null!=y&&W.push("A",m,",",m," 0 ",t,",",w," ",y,",",L),W.push("L",z,",",U),null!=C&&W.push("A",a,",",a," 0 ",G,",",1-w," ",C,",",F));
W.push("Z");return W.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var d=bi,c=ci,g=ai,e=Nc,f=Pf,h=Qf,n=di;a.innerRadius=function(b){if(!arguments.length)return d;d=$(b);return a};a.outerRadius=function(b){if(!arguments.length)return c;c=$(b);return a};a.cornerRadius=function(b){if(!arguments.length)return g;g=$(b);return a};a.padRadius=function(b){if(!arguments.length)return e;e=b==Nc?Nc:$(b);return a};a.startAngle=function(b){if(!arguments.length)return f;
f=$(b);return a};a.endAngle=function(b){if(!arguments.length)return h;h=$(b);return a};a.padAngle=function(b){if(!arguments.length)return n;n=$(b);return a};a.centroid=function(){var a=(+d.apply(this,arguments)+ +c.apply(this,arguments))/2,b=(+f.apply(this,arguments)+ +h.apply(this,arguments))/2-da;return[Math.cos(b)*a,Math.sin(b)*a]};return a};var Nc="auto";n.svg.line=function(){return Rf(O)};var Fd=n.map({linear:Ia,"linear-closed":Sf,step:function(a){for(var b=0,d=a.length,c=a[0],g=[c[0],",",c[1]];++b<
d;)g.push("H",(c[0]+(c=a[b])[0])/2,"V",c[1]);1<d&&g.push("H",c[0]);return g.join("")},"step-before":Gd,"step-after":Hd,basis:Tf,"basis-open":function(a){if(4>a.length)return Ia(a);for(var b=[],d=-1,c=a.length,g,e=[0],f=[0];3>++d;)g=a[d],e.push(g[0]),f.push(g[1]);b.push(Da(bb,e)+","+Da(bb,f));for(--d;++d<c;)g=a[d],e.shift(),e.push(g[0]),f.shift(),f.push(g[1]),Jd(b,e,f);return b.join("")},"basis-closed":function(a){for(var b,d=-1,c=a.length,g=c+4,e,f=[],h=[];4>++d;)e=a[d%c],f.push(e[0]),h.push(e[1]);
b=[Da(bb,f),",",Da(bb,h)];for(--d;++d<g;)e=a[d%c],f.shift(),f.push(e[0]),h.shift(),h.push(e[1]),Jd(b,f,h);return b.join("")},bundle:function(a,b){var d=a.length-1;if(d)for(var c=a[0][0],g=a[0][1],e=a[d][0]-c,f=a[d][1]-g,h=-1,m,n;++h<=d;)m=a[h],n=h/d,m[0]=b*m[0]+(1-b)*(c+n*e),m[1]=b*m[1]+(1-b)*(g+n*f);return Tf(a)},cardinal:function(a,b){return 3>a.length?Ia(a):a[0]+wc(a,Id(a,b))},"cardinal-open":function(a,b){return 4>a.length?Ia(a):a[1]+wc(a.slice(1,-1),Id(a,b))},"cardinal-closed":function(a,b){return 3>
a.length?Sf(a):a[0]+wc((a.push(a[0]),a),Id([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=Ia(a);else{var b=a[0],d=[],c,g,e,f;c=0;g=a.length-1;var h=[];e=a[1];for(f=h[0]=Kd(a[0],e);++c<g;)h[c]=(f+(f=Kd(e,e=a[c+1])))/2;h[c]=f;for(var m=-1,n=a.length-1;++m<n;)c=Kd(a[m],a[m+1]),1E-6>S(c)?h[m]=h[m+1]=0:(g=h[m]/c,e=h[m+1]/c,f=g*g+e*e,9<f&&(f=3*c/Math.sqrt(f),h[m]=f*g,h[m+1]=f*e));for(m=-1;++m<=n;)f=(a[Math.min(n,m+1)][0]-a[Math.max(0,m-1)][0])/(6*(1+h[m]*h[m])),d.push([f||0,
h[m]*f||0]);a=b+wc(a,d)}return a}});Fd.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Uf=[0,2/3,1/3,0],Vf=[0,1/3,2/3,0],bb=[0,1/6,2/3,1/6];n.svg.line.radial=function(){var a=Rf(Wf);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Gd.reverse=Hd;Hd.reverse=Gd;n.svg.area=function(){return Xf(O)};n.svg.area.radial=function(){var a=Xf(Wf);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=
a.y1;delete a.y1;return a};n.svg.chord=function(){function a(a,e){var f=b(this,c,a,e),l=b(this,g,a,e);return"M"+f.p0+d(f.r,f.p1,f.a1-f.a0)+(f.a0==l.a0&&f.a1==l.a1?"Q 0,0 "+f.p0:"Q 0,0 "+l.p0+d(l.r,l.p1,l.a1-l.a0)+("Q 0,0 "+f.p0))+"Z"}function b(a,b,d,c){var g=b.call(a,d,c);b=e.call(a,g,c);d=f.call(a,g,c)-da;a=h.call(a,g,c)-da;return{r:b,a0:d,a1:a,p0:[b*Math.cos(d),b*Math.sin(d)],p1:[b*Math.cos(a),b*Math.sin(a)]}}function d(a,b,d){return"A"+a+","+a+" 0 "+ +(d>Q)+",1 "+b}var c=ld,g=md,e=ei,f=Pf,h=Qf;
a.radius=function(b){if(!arguments.length)return e;e=$(b);return a};a.source=function(b){if(!arguments.length)return c;c=$(b);return a};a.target=function(b){if(!arguments.length)return g;g=$(b);return a};a.startAngle=function(b){if(!arguments.length)return f;f=$(b);return a};a.endAngle=function(b){if(!arguments.length)return h;h=$(b);return a};return a};n.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),h=d.call(this,a,e),m=(f.y+h.y)/2,f=[f,{x:f.x,y:m},{x:h.x,y:m},h],f=f.map(c);return"M"+
f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var b=ld,d=md,c=Yf;a.source=function(d){if(!arguments.length)return b;b=$(d);return a};a.target=function(b){if(!arguments.length)return d;d=$(b);return a};a.projection=function(b){if(!arguments.length)return c;c=b;return a};return a};n.svg.diagonal.radial=function(){var a=n.svg.diagonal(),b=Yf,d=a.projection;a.projection=function(a){return arguments.length?d(fi(b=a)):b};return a};n.svg.symbol=function(){function a(a,c){return(ng.get(b.call(this,a,c))||Zf)(d.call(this,
a,c))}var b=hi,d=gi;a.type=function(d){if(!arguments.length)return b;b=$(d);return a};a.size=function(b){if(!arguments.length)return d;d=$(b);return a};return a};var ng=n.map({circle:Zf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*og));var b=a*og;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+
","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Oc);var b=a*Oc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Oc);var b=a*Oc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});n.svg.symbolTypes=ng.keys();var Oc=Math.sqrt(3),og=Math.tan(30*R);Z.transition=function(a){var b=mb||++pg;a=Md(a);for(var d=[],c,g,e=Pc||{time:Date.now(),ease:oh,delay:0,duration:250},f=-1,h=this.length;++f<h;){d.push(c=[]);for(var m=this[f],n=-1,p=m.length;++n<p;)(g=
m[n])&&xc(g,n,a,b,e),c.push(g)}return Pb(d,a,b)};Z.interrupt=function(a){return this.each(null==a?Ac:$f(Md(a)))};var Ac=$f(Md()),ga=[],pg=0,mb,Pc;ga.call=Z.call;ga.empty=Z.empty;ga.node=Z.node;ga.size=Z.size;n.transition=function(a,b){return a&&a.transition?mb?a.transition(b):a:n.selection().transition(a)};n.transition.prototype=ga;ga.select=function(a){var b=this.id,d=this.namespace,c=[],g,e,f;a=U(a);for(var h=-1,m=this.length;++h<m;){c.push(g=[]);for(var n=this[h],p=-1,q=n.length;++p<q;)(f=n[p])&&
(e=a.call(f,f.__data__,p,h))?("__data__"in f&&(e.__data__=f.__data__),xc(e,p,d,b,f[d][b]),g.push(e)):g.push(null)}return Pb(c,d,b)};ga.selectAll=function(a){var b=this.id,d=this.namespace,c=[],g,e,f,h;a=nb(a);for(var m=-1,n=this.length;++m<n;)for(var p=this[m],q=-1,r=p.length;++q<r;)if(g=p[q]){h=g[d][b];e=a.call(g,g.__data__,q,m);c.push(g=[]);for(var w=-1,B=e.length;++w<B;)(f=e[w])&&xc(f,w,d,b,h),g.push(f)}return Pb(c,d,b)};ga.filter=function(a){var b=[],d,c,g;"function"!==typeof a&&(a=ce(a));for(var e=
0,f=this.length;e<f;e++){b.push(d=[]);c=this[e];for(var h=0,m=c.length;h<m;h++)(g=c[h])&&a.call(g,g.__data__,h,e)&&d.push(g)}return Pb(b,this.namespace,this.id)};ga.tween=function(a,b){var d=this.id,c=this.namespace;return 2>arguments.length?this.node()[c][d].tween.get(a):K(this,null==b?function(b){b[c][d].tween.remove(a)}:function(g){g[c][d].tween.set(a,b)})};ga.attr=function(a,b){function d(){this.removeAttribute(h)}function c(){this.removeAttributeNS(h.space,h.local)}function g(a){return null==
a?d:(a+="",function(){var b=this.getAttribute(h),d;return b!==a&&(d=f(b,a),function(a){this.setAttribute(h,d(a))})})}function e(a){return null==a?c:(a+="",function(){var b=this.getAttributeNS(h.space,h.local),d;return b!==a&&(d=f(b,a),function(a){this.setAttributeNS(h.space,h.local,d(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var f="transform"==a?rf:kb,h=n.ns.qualify(a);return Ld(this,"attr."+a,b,h.local?e:g)};ga.attrTween=function(a,b){function d(a,d){var c=b.call(this,
a,d,this.getAttribute(g));return c&&function(a){this.setAttribute(g,c(a))}}function c(a,d){var e=b.call(this,a,d,this.getAttributeNS(g.space,g.local));return e&&function(a){this.setAttributeNS(g.space,g.local,e(a))}}var g=n.ns.qualify(a);return this.tween("attr."+a,g.local?c:d)};ga.style=function(a,b,d){function e(){this.style.removeProperty(a)}var g=arguments.length;if(3>g){if("string"!==typeof a){2>g&&(b="");for(d in a)this.style(d,a[d],b);return this}d=""}return Ld(this,"style."+a,b,function(b){return null==
b?e:(b+="",function(){var g=c(this).getComputedStyle(this,null).getPropertyValue(a),e;return g!==b&&(e=kb(g,b),function(b){this.style.setProperty(a,e(b),d)})})})};ga.styleTween=function(a,b,d){3>arguments.length&&(d="");return this.tween("style."+a,function(e,g){var f=b.call(this,e,g,c(this).getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),d)}})};ga.text=function(a){return Ld(this,"text",a,ii)};ga.remove=function(){var a=this.namespace;return this.each("end.transition",
function(){var b;2>this[a].count&&(b=this.parentNode)&&b.removeChild(this)})};ga.ease=function(a){var b=this.id,d=this.namespace;if(1>arguments.length)return this.node()[d][b].ease;"function"!==typeof a&&(a=n.ease.apply(n,arguments));return K(this,function(c){c[d][b].ease=a})};ga.delay=function(a){var b=this.id,d=this.namespace;return 1>arguments.length?this.node()[d][b].delay:K(this,"function"===typeof a?function(c,e,f){c[d][b].delay=+a.call(c,c.__data__,e,f)}:(a=+a,function(c){c[d][b].delay=a}))};
ga.duration=function(a){var b=this.id,d=this.namespace;return 1>arguments.length?this.node()[d][b].duration:K(this,"function"===typeof a?function(c,e,f){c[d][b].duration=Math.max(1,a.call(c,c.__data__,e,f))}:(a=Math.max(1,a),function(c){c[d][b].duration=a}))};ga.each=function(a,b){var d=this.id,c=this.namespace;if(2>arguments.length){var e=Pc,f=mb;try{mb=d,K(this,function(b,e,g){Pc=b[c][d];a.call(b,b.__data__,e,g)})}finally{Pc=e,mb=f}}else K(this,function(e){e=e[c][d];(e.event||(e.event=n.dispatch("start",
"end","interrupt"))).on(a,b)});return this};ga.transition=function(){for(var a=this.id,b=++pg,d=this.namespace,c=[],e,f,h,m,n=0,p=this.length;n<p;n++){c.push(e=[]);f=this[n];for(var q=0,r=f.length;q<r;q++){if(h=f[q])m=h[d][a],xc(h,q,d,b,{time:m.time,ease:m.ease,delay:m.delay+m.duration,duration:m.duration});e.push(h)}}return Pb(c,d,b)};n.svg.axis=function(){function a(a){a.each(function(){var a=n.select(this),q=this.__chart__||b,r=this.__chart__=b.copy(),w=null==m?r.ticks?r.ticks.apply(r,h):r.domain():
m,B=null==p?r.tickFormat?r.tickFormat.apply(r,h):O:p,u=a.selectAll(".tick").data(w,r),w=u.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),t=n.transition(u.exit()).style("opacity",1E-6).remove(),v=n.transition(u.order()).style("opacity",1),D=Math.max(c,0)+f,x=qc(r),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),n.transition(a));w.append("line");w.append("text");var z=w.select("line"),y=v.select("line"),u=u.select("text").text(B),L=w.select("text"),
U=v.select("text"),C="top"===d||"left"===d?-1:1,W,G,F,H;"bottom"===d||"top"===d?(B=ji,W="x",F="y",G="x2",H="y2",u.attr("dy",0>C?"0em":".71em").style("text-anchor","middle"),a.attr("d","M"+x[0]+","+C*e+"V0H"+x[1]+"V"+C*e)):(B=ki,W="y",F="x",G="y2",H="x2",u.attr("dy",".32em").style("text-anchor",0>C?"end":"start"),a.attr("d","M"+C*e+","+x[0]+"H0V"+x[1]+"H"+C*e));z.attr(H,C*c);L.attr(F,C*D);y.attr(G,0).attr(H,C*c);U.attr(W,0).attr(F,C*D);if(r.rangeBand)var fa=r,K=fa.rangeBand()/2,q=r=function(a){return fa(a)+
K};else q.rangeBand?q=r:t.call(B,r,q);w.call(B,q,r);v.call(B,r,r)})}var b=n.scale.linear(),d=qg,c=6,e=6,f=3,h=[10],m=null,p;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(b){if(!arguments.length)return d;d=b in Hi?b+"":qg;return a};a.ticks=function(){if(!arguments.length)return h;h=Ja(arguments);return a};a.tickValues=function(b){if(!arguments.length)return m;m=b;return a};a.tickFormat=function(b){if(!arguments.length)return p;p=b;return a};a.tickSize=function(b){var d=
arguments.length;if(!d)return c;c=+b;e=+arguments[d-1];return a};a.innerTickSize=function(b){if(!arguments.length)return c;c=+b;return a};a.outerTickSize=function(b){if(!arguments.length)return e;e=+b;return a};a.tickPadding=function(b){if(!arguments.length)return f;f=+b;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var qg="bottom",Hi={top:1,right:1,bottom:1,left:1};n.svg.brush=function(){function a(c){c.each(function(){var c=n.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),f=c.selectAll(".background").data([0]);f.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");c.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var l=c.selectAll(".resize").data(x,O);l.exit().remove();l.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Ii[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");l.style("display",a.empty()?"none":null);c=n.transition(c);f=n.transition(f);h&&(l=qc(h),f.attr("x",l[0]).attr("width",l[1]-l[0]),d(c));m&&(l=qc(m),f.attr("y",l[0]).attr("height",l[1]-l[0]),e(c));b(c)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+p[+/e$/.test(a)]+","+q[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",
p[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",p[1]-p[0])}function e(a){a.select(".extent").attr("y",q[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",q[1]-q[0])}function g(){function g(){var a=n.mouse(z),c=!1;O&&(a[0]+=O[0],a[1]+=O[1]);F||(n.event.altKey?(fa||(fa=[(p[0]+p[1])/2,(q[0]+q[1])/2]),K[0]=p[+(a[0]<fa[0])],K[1]=q[+(a[1]<fa[1])]):fa=null);W&&D(a,h,0)&&(d(U),c=!0);G&&D(a,m,1)&&(e(U),c=!0);c&&(b(U),L({type:"brush",mode:F?"move":"resize"}))}function D(a,b,c){var d=qc(b);
b=d[0];var e=d[1],d=K[c],g=c?q:p,f=g[1]-g[0];F&&(b-=d,e-=f+d);a=(c?v:t)?Math.max(b,Math.min(e,a[c])):a[c];F?b=(a+=d)+f:(fa&&(d=Math.max(b,Math.min(e,2*fa[c]-a))),d<a?(b=a,a=d):b=d);if(g[0]!=a||g[1]!=b)return c?w=null:r=null,g[0]=a,g[1]=b,!0}function x(){g();U.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);n.select("body").style("cursor",null);J.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);H();L({type:"brushend"})}var z=this,y=n.select(n.event.target),L=f.of(z,arguments),U=n.select(z),C=y.datum(),W=!/^(n|s)$/.test(C)&&h,G=!/^(e|w)$/.test(C)&&m,F=y.classed("extent"),H=cb(z),fa,K=n.mouse(z),O,J=n.select(c(z)).on("keydown.brush",function(){32==n.event.keyCode&&(F||(fa=null,K[0]-=p[1],K[1]-=q[1],F=2),B())}).on("keyup.brush",function(){32==n.event.keyCode&&2==F&&(K[0]+=p[1],K[1]+=q[1],F=0,B())});if(n.event.changedTouches)J.on("touchmove.brush",g).on("touchend.brush",
x);else J.on("mousemove.brush",g).on("mouseup.brush",x);U.interrupt().selectAll("*").interrupt();if(F)K[0]=p[0]-K[0],K[1]=q[0]-K[1];else if(C){var T=+/w$/.test(C),C=+/^n/.test(C);O=[p[1-T]-K[0],q[1-C]-K[1]];K[0]=p[T];K[1]=q[C]}else n.event.altKey&&(fa=K.slice());U.style("pointer-events","none").selectAll(".resize").style("display",null);n.select("body").style("cursor",y.style("cursor"));L({type:"brushstart"});g()}var f=D(a,"brushstart","brush","brushend"),h=null,m=null,p=[0,0],q=[0,0],r,w,t=!0,v=
!0,x=Ud[0];a.event=function(a){a.each(function(){var a=f.of(this,arguments),b={x:p,y:q,i:r,j:w},c=this.__chart__||b;this.__chart__=b;mb?n.select(this).transition().each("start.brush",function(){r=c.i;w=c.j;p=c.x;q=c.y;a({type:"brushstart"})}).tween("brush:brush",function(){var c=pc(p,b.x),d=pc(q,b.y);r=w=null;return function(e){p=b.x=c(e);q=b.y=d(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){r=b.i;w=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),
a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(b){if(!arguments.length)return h;h=b;x=Ud[!h<<1|!m];return a};a.y=function(b){if(!arguments.length)return m;m=b;x=Ud[!h<<1|!m];return a};a.clamp=function(b){if(!arguments.length)return h&&m?[t,v]:h?t:m?v:null;h&&m?(t=!!b[0],v=!!b[1]):h?t=!!b:m&&(v=!!b);return a};a.extent=function(b){var c,d,e,g,f;if(!arguments.length)return h&&(r?(c=r[0],d=r[1]):(c=p[0],d=p[1],h.invert&&(c=h.invert(c),d=h.invert(d)),d<c&&(f=c,c=d,d=f))),m&&(w?(e=
w[0],g=w[1]):(e=q[0],g=q[1],m.invert&&(e=m.invert(e),g=m.invert(g)),g<e&&(f=e,e=g,g=f))),h&&m?[[c,e],[d,g]]:h?[c,d]:m&&[e,g];h&&(c=b[0],d=b[1],m&&(c=c[0],d=d[0]),r=[c,d],h.invert&&(c=h(c),d=h(d)),d<c&&(f=c,c=d,d=f),c!=p[0]||d!=p[1])&&(p=[c,d]);m&&(e=b[0],g=b[1],h&&(e=e[1],g=g[1]),w=[e,g],m.invert&&(e=m(e),g=m(g)),g<e&&(f=e,e=g,g=f),e!=q[0]||g!=q[1])&&(q=[e,g]);return a};a.clear=function(){a.empty()||(p=[0,0],q=[0,0],r=w=null);return a};a.empty=function(){return!!h&&p[0]==p[1]||!!m&&q[0]==q[1]};return n.rebind(a,
f,"on")};var Ii={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ud=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Vd=H.format=eg.timeFormat,rg=Vd.utc,sg=rg("%Y-%m-%dT%H:%M:%S.%LZ");Vd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Nd:sg;Nd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Nd.toString=sg.toString;H.second=fb(function(a){return new ma(1E3*Math.floor(a/1E3))},function(a,
b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});H.seconds=H.second.range;H.seconds.utc=H.second.utc.range;H.minute=fb(function(a){return new ma(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});H.minutes=H.minute.range;H.minutes.utc=H.minute.utc.range;H.hour=fb(function(a){var b=a.getTimezoneOffset()/60;return new ma(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},
function(a){return a.getHours()});H.hours=H.hour.range;H.hours.utc=H.hour.utc.range;H.month=fb(function(a){a=H.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});H.months=H.month.range;H.months.utc=H.month.utc.range;var yc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Wd=[[H.second,1],[H.second,5],[H.second,15],[H.second,30],[H.minute,1],[H.minute,5],[H.minute,15],[H.minute,30],[H.hour,1],
[H.hour,3],[H.hour,6],[H.hour,12],[H.day,1],[H.day,2],[H.week,1],[H.month,1],[H.month,3],[H.year,1]],Ji=Vd.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Eb]]),li={range:function(a,b,c){return n.range(Math.ceil(a/c)*
c,+b,c).map(lb)},floor:O,ceil:O};Wd.year=H.year;H.scale=function(){return Od(n.scale.linear(),Wd,Ji)};var tg=Wd.map(function(a){return[a[0].utc,a[1]]}),Ki=rg.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],
["%Y",Eb]]);tg.year=H.year.utc;H.scale.utc=function(){return Od(n.scale.linear(),tg,Ki)};n.text=Zc(function(a){return a.responseText});n.json=function(a,b){return Vb(a,"application/json",mi,b)};n.html=function(a,b){return Vb(a,"text/html",ni,b)};n.xml=Zc(function(a){return a.responseXML});"function"===typeof define&&define.amd?(this.d3=n,define(n)):"object"===typeof module&&module.exports?module.exports=n:this.d3=n}();!function(c,f){"function"==typeof define&&define.amd?define([],f):"object"==typeof module&&"undefined"!=typeof exports?module.exports=f():c.Papa=f()}(this,function s$$1(){function f(e){this._handle=null;this._halted=this._completed=this._finished=!1;this._input=null;this._baseIndex=0;this._partialLine="";this._start=this._rowCount=0;this._nextChunk=null;this.isFirstChunk=!0;this._completeResults={data:[],errors:[],meta:{}};(function(e){var f=J(e);f.chunkSize=parseInt(f.chunkSize);e.step||e.chunk||
(f.chunkSize=null);this._handle=new q(f);(this._handle.streamer=this)._config=f}).call(this,e);this.parseChunk=function(e,f){if(this.isFirstChunk&&F(this._config.beforeFirstChunk)){var h=this._config.beforeFirstChunk(e);void 0!==h&&(e=h)}this._halted=this.isFirstChunk=!1;var m=this._partialLine+e;this._partialLine="";h=this._handle.parse(m,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var p=h.meta.cursor;this._finished||(this._partialLine=m.substring(p-this._baseIndex),
this._baseIndex=p);h&&h.data&&(this._rowCount+=h.data.length);m=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(X)C.postMessage({results:h,workerId:z.WORKER_ID,finished:m});else if(F(this._config.chunk)&&!f){if(this._config.chunk(h,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=h=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(h.data),this._completeResults.errors=
this._completeResults.errors.concat(h.errors),this._completeResults.meta=h.meta),this._completed||!m||!F(this._config.complete)||h&&h.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),m||h&&h.meta.paused||this._nextChunk(),h}this._halted=!0};this._sendError=function(e){F(this._config.error)?this._config.error(e):X&&this._config.error&&C.postMessage({workerId:z.WORKER_ID,error:e,finished:!1})}}function e(e){var h;(e=e||{}).chunkSize||(e.chunkSize=z.RemoteChunkSize);
f.call(this,e);this._nextChunk=O?function(){this._readChunk();this._chunkLoaded()}:function(){this._readChunk()};this.stream=function(e){this._input=e;this._nextChunk()};this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(h=new XMLHttpRequest,this._config.withCredentials&&(h.withCredentials=this._config.withCredentials),O||(h.onload=G(this._chunkLoaded,this),h.onerror=G(this._chunkError,this)),h.open(this._config.downloadRequestBody?"POST":"GET",this._input,!O),this._config.downloadRequestHeaders){var e=
this._config.downloadRequestHeaders,f;for(f in e)h.setRequestHeader(f,e[f])}this._config.chunkSize&&h.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{h.send(this._config.downloadRequestBody)}catch(m){this._chunkError(m.message)}O&&0===h.status&&this._chunkError()}};this._chunkLoaded=function(){if(4===h.readyState)if(200>h.status||400<=h.status)this._chunkError();else{this._start+=this._config.chunkSize?this._config.chunkSize:h.responseText.length;var e;
if(!(e=!this._config.chunkSize)){e=this._start;var f;f=h.getResponseHeader("Content-Range");f=null===f?-1:parseInt(f.substring(f.lastIndexOf("/")+1));e=e>=f}this._finished=e;this.parseChunk(h.responseText)}};this._chunkError=function(e){this._sendError(Error(h.statusText||e))}}function h(e){var h,m;(e=e||{}).chunkSize||(e.chunkSize=z.LocalChunkSize);f.call(this,e);var p="undefined"!=typeof FileReader;this.stream=function(e){this._input=e;m=e.slice||e.webkitSlice||e.mozSlice;p?((h=new FileReader).onload=
G(this._chunkLoaded,this),h.onerror=G(this._chunkError,this)):h=new FileReaderSync;this._nextChunk()};this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()};this._readChunk=function(){var e=this._input;if(this._config.chunkSize)var f=Math.min(this._start+this._config.chunkSize,this._input.size),e=m.call(e,this._start,f);e=h.readAsText(e,this._config.encoding);p||this._chunkLoaded({target:{result:e}})};this._chunkLoaded=function(e){this._start+=
this._config.chunkSize;this._finished=!this._config.chunkSize||this._start>=this._input.size;this.parseChunk(e.target.result)};this._chunkError=function(){this._sendError(h.error)}}function m(e){var h;f.call(this,e=e||{});this.stream=function(e){return h=e,this._nextChunk()};this._nextChunk=function(){if(!this._finished){var e,f=this._config.chunkSize;return f?(e=h.substring(0,f),h=h.substring(f)):(e=h,h=""),this._finished=!h,this.parseChunk(e)}}}function p(e){f.call(this,e=e||{});var h=[],m=!0,p=
!1;this.pause=function(){f.prototype.pause.apply(this,arguments);this._input.pause()};this.resume=function(){f.prototype.resume.apply(this,arguments);this._input.resume()};this.stream=function(e){this._input=e;this._input.on("data",this._streamData);this._input.on("end",this._streamEnd);this._input.on("error",this._streamError)};this._checkIsFinished=function(){p&&1===h.length&&(this._finished=!0)};this._nextChunk=function(){this._checkIsFinished();h.length?this.parseChunk(h.shift()):m=!0};this._streamData=
G(function(e){try{h.push("string"==typeof e?e:e.toString(this._config.encoding)),m&&(m=!1,this._checkIsFinished(),this.parseChunk(h.shift()))}catch(f){this._streamError(f)}},this);this._streamError=G(function(e){this._streamCleanUp();this._sendError(e)},this);this._streamEnd=G(function(){this._streamCleanUp();p=!0;this._streamData("")},this);this._streamCleanUp=G(function(){this._input.removeListener("data",this._streamData);this._input.removeListener("end",this._streamEnd);this._input.removeListener("error",
this._streamError)},this)}function q(e){function f(h){return"greedy"===e.skipEmptyLines?""===h.join("").trim():1===h.length&&0===h[0].length}function h(){return K&&v&&(m("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+z.DefaultDelimiter+"'"),v=!1),e.skipEmptyLines&&(K.data=K.data.filter(function(e){return!f(e)})),e.header&&0===sa.length&&function(){function f(h,m){F(e.transformHeader)&&(h=e.transformHeader(h,m));sa.push(h)}if(K)if(Array.isArray(K.data[0])){for(var h=
0;e.header&&0===sa.length&&h<K.data.length;h++)K.data[h].forEach(f);K.data.splice(0,1)}else K.data.forEach(f)}(),function(){function f(h,p){var q,r,w=e.header?{}:[];for(r=0;r<h.length;r++){var t=r,v=h[r];e.header&&(t=r>=sa.length?"__parsed_extra":sa[r]);e.transform&&(v=e.transform(v,t));q=t;e.dynamicTypingFunction&&void 0===e.dynamicTyping[q]&&(e.dynamicTyping[q]=e.dynamicTypingFunction(q));var D=void 0;if(!0===(e.dynamicTyping[q]||e.dynamicTyping)){q=void 0;if(!(q="true"===v||"TRUE"===v)&&(q=void 0,
q="false"!==v&&"FALSE"!==v)){q=void 0;b:{if(C.test(v)&&(q=parseFloat(v),y<q&&q<x)){q=!0;break b}q=!1}q=q?parseFloat(v):G.test(v)?new Date(v):""===v?null:v}D=q}else D=v;v=D;"__parsed_extra"===t?(w[t]=w[t]||[],w[t].push(v)):w[t]=v}return e.header&&(r>sa.length?m("FieldMismatch","TooManyFields","Too many fields: expected "+sa.length+" fields but parsed "+r,T+p):r<sa.length&&m("FieldMismatch","TooFewFields","Too few fields: expected "+sa.length+" fields but parsed "+r,T+p)),w}if(!K||!e.header&&!e.dynamicTyping&&
!e.transform)return K;var h=1;!K.data.length||Array.isArray(K.data[0])?(K.data=K.data.map(f),h=K.data.length):K.data=f(K.data,0);e.header&&K.meta&&(K.meta.fields=sa);return T+=h,K}()}function m(e,f,h,p){e={type:e,code:f,message:h};void 0!==p&&(e.row=p);K.errors.push(e)}var p,q,v,x=Math.pow(2,53),y=-x,C=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,G=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,
W=this,O=0,T=0,V=!1,X=!1,sa=[],K={data:[],errors:[],meta:{}};if(F(e.step)){var Y=e.step;e.step=function(f){if(K=f,e.header&&0===sa.length)h();else if(h(),0!==K.data.length)O+=f.data.length,e.preview&&O>e.preview?q.abort():(K.data=K.data[0],Y(K,W))}}this.parse=function(m,x,y){var C=e.quoteChar||'"';(e.newline||(e.newline=function(e,f){e=e.substring(0,1048576);var h=new RegExp(r(f)+"([^]*?)"+r(f),"gm"),h=(e=e.replace(h,"")).split("\r"),m=e.split("\n"),m=1<m.length&&m[0].length<h[0].length;if(1===h.length||
m)return"\n";for(var p=m=0;p<h.length;p++)"\n"===h[p][0]&&m++;return m>=h.length/2?"\r\n":"\r"}(m,C)),v=!1,e.delimiter)?F(e.delimiter)&&(e.delimiter=e.delimiter(m),K.meta.delimiter=e.delimiter):(C=function(h,m,p,q,r){var v,x,D,y;r=r||[",","\t","|",";",z.RECORD_SEP,z.UNIT_SEP];for(var C=0;C<r.length;C++){var F=r[C],G=0,W=0,K=0;D=void 0;for(var L=(new t({comments:q,delimiter:F,newline:m,preview:10})).parse(h),U=0;U<L.data.length;U++)if(p&&f(L.data[U]))K++;else{var fa=L.data[U].length,W=W+fa;void 0!==
D?0<fa&&(G+=Math.abs(fa-D),D=fa):D=fa}0<L.data.length&&(W/=L.data.length-K);(void 0===x||G<=x)&&(void 0===y||y<W)&&1.99<W&&(x=G,v=F,y=W)}return{successful:!!(e.delimiter=v),bestDelimiter:v}}(m,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess),C.successful?e.delimiter=C.bestDelimiter:(v=!0,e.delimiter=z.DefaultDelimiter),K.meta.delimiter=e.delimiter);C=J(e);return e.preview&&e.header&&C.preview++,p=m,q=new t(C),K=q.parse(p,x,y),h(),V?{meta:{paused:!0}}:K||{meta:{paused:!1}}};this.paused=function(){return V};
this.pause=function(){V=!0;q.abort();p=F(e.chunk)?"":p.substring(q.getCharIndex())};this.resume=function(){W.streamer._halted?(V=!1,W.streamer.parseChunk(p,!0)):setTimeout(W.resume,3)};this.aborted=function(){return X};this.abort=function(){X=!0;q.abort();K.meta.aborted=!0;F(e.complete)&&e.complete(K);p=""}}function r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(e){var f,h=(e=e||{}).delimiter,m=e.newline,p=e.comments,q=e.step,t=e.preview,v=e.fastMode,x=f=void 0===e.quoteChar||null===
e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(x=e.escapeChar),("string"!=typeof h||-1<z.BAD_DELIMITERS.indexOf(h))&&(h=","),p===h)throw Error("Comment character same as delimiter");!0===p?p="#":("string"!=typeof p||-1<z.BAD_DELIMITERS.indexOf(p))&&(p=!1);"\n"!==m&&"\r"!==m&&"\r\n"!==m&&(m="\n");var y=0,C=!1;this.parse=function(z,G,O){function T(e){za.push(e);Fa=y}function J(e){var f=0;-1!==e&&(e=z.substring(ba+1,e))&&""===e.trim()&&(f=e.length);return f}function V(e){return O||(void 0===
e&&(e=z.substring(y)),ka.push(e),y=Ab,T(ka),Va&&Y()),X()}function K(e){y=e;T(ka);ka=[];ia=z.indexOf(m,y)}function X(e){return{data:za,errors:Wa,meta:{delimiter:h,linebreak:m,aborted:C,truncated:!!e,cursor:Fa+(G||0)}}}function Y(){q(X());za=[];Wa=[]}if("string"!=typeof z)throw Error("Input must be a string");var Ab=z.length,Ka=h.length,ya=m.length,cb=p.length,Va=F(q),za=[],Wa=[],ka=[],Fa=y=0;if(!z)return X();if(e.header&&!G){var Aa=z.split(m)[0].split(h),ha=[],la={},ua=!1,eb;for(eb in Aa){var ja=Aa[eb];
F(e.transformHeader)&&(ja=e.transformHeader(ja,eb));var Pa=ja,na=la[ja]||0;0<na&&(ua=!0,Pa=ja+"_"+na);for(la[ja]=na+1;ha.includes(Pa);)Pa=Pa+"_"+na;ha.push(Pa)}ua&&(Aa=z.split(m),Aa[0]=ha.join(h),z=Aa.join(m))}if(v||!1!==v&&-1===z.indexOf(f)){Ka=z.split(m);for(ya=0;ya<Ka.length;ya++){if(ka=Ka[ya],y+=ka.length,ya!==Ka.length-1)y+=m.length;else if(O)break;if(!p||ka.substring(0,cb)!==p){if(Va){if(za=[],T(ka.split(h)),Y(),C)break}else T(ka.split(h));if(t&&t<=ya)return za=za.slice(0,t),X(!0)}}return X()}for(var ha=
z.indexOf(h,y),ia=z.indexOf(m,y),Aa=new RegExp(r(x)+r(f),"g"),ba=z.indexOf(f,y);;)if(z[y]!==f)if(p&&0===ka.length&&z.substring(y,y+cb)===p){if(-1===ia)return X();y=ia+ya;ia=z.indexOf(m,y);ha=z.indexOf(h,y)}else if(-1!==ha&&(ha<ia||-1===ia))ka.push(z.substring(y,ha)),y=ha+Ka,ha=z.indexOf(h,y);else{if(-1===ia)break;if(ka.push(z.substring(y,ia)),K(ia+ya),Va&&(Y(),C))return X();if(t&&za.length>=t)return X(!0)}else for(ba=y,y++;;){if(-1===(ba=z.indexOf(f,ba+1)))return O||Wa.push({type:"Quotes",code:"MissingQuotes",
message:"Quoted field unterminated",row:za.length,index:y}),V();if(ba===Ab-1)return V(z.substring(y,ba).replace(Aa,f));if(f!==x||z[ba+1]!==x){if(f===x||0===ba||z[ba-1]!==x){-1!==ha&&ha<ba+1&&(ha=z.indexOf(h,ba+1));-1!==ia&&ia<ba+1&&(ia=z.indexOf(m,ba+1));la=J(-1===ia?ha:Math.min(ha,ia));if(z.substr(ba+1+la,Ka)===h){ka.push(z.substring(y,ba).replace(Aa,f));z[y=ba+1+la+Ka]!==f&&(ba=z.indexOf(f,y));ha=z.indexOf(h,y);ia=z.indexOf(m,y);break}la=J(ia);if(z.substring(ba+1+la,ba+1+la+ya)===m){if(ka.push(z.substring(y,
ba).replace(Aa,f)),K(ba+1+la+ya),ha=z.indexOf(h,y),ba=z.indexOf(f,y),Va&&(Y(),C))return X();if(t&&za.length>=t)return X(!0);break}Wa.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:za.length,index:y});ba++}}else ba++}return V()};this.abort=function(){C=!0};this.getCharIndex=function(){return y}}function v(e){var f=e.data;e=Y[f.workerId];var h=!1;if(f.error)e.userError(f.error,f.file);else if(f.results&&f.results.data){var m={abort:function(){h=!0;
x(f.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(F(e.userStep)){for(var p=0;p<f.results.data.length&&(e.userStep({data:f.results.data[p],errors:f.results.errors,meta:f.results.meta},m),!h);p++);delete f.results}else F(e.userChunk)&&(e.userChunk(f.results,m,f.file),delete f.results)}f.finished&&!h&&x(f.workerId,f.results)}function x(e,f){var h=Y[e];F(h.userComplete)&&h.userComplete(f);h.terminate();delete Y[e]}function y(){throw Error("Not implemented.");}function J(e){if("object"!=
typeof e||null===e)return e;var f=Array.isArray(e)?[]:{},h;for(h in e)f[h]=J(e[h]);return f}function G(e,f){return function(){e.apply(f,arguments)}}function F(e){return"function"==typeof e}var C="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==C?C:{},O=!C.document&&!!C.postMessage,X=C.IS_PAPA_WORKER||!1,Y={},T=0,z={parse:function(f,q){var r=(q=q||{}).dynamicTyping||!1;F(r)&&(q.dynamicTypingFunction=r,r={});if(q.dynamicTyping=r,q.transform=!!F(q.transform)&&q.transform,q.worker&&
z.WORKERS_SUPPORTED)return r=function(){if(!z.WORKERS_SUPPORTED)return!1;var e=(f=C.URL||C.webkitURL||null,h=s$$1.toString(),z.BLOB_URL||(z.BLOB_URL=f.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",h,")();"],{type:"text/javascript"})))),e=new C.Worker(e),f,h;return e.onmessage=v,e.id=
T++,Y[e.id]=e}(),r.userStep=q.step,r.userChunk=q.chunk,r.userComplete=q.complete,r.userError=q.error,q.step=F(q.step),q.chunk=F(q.chunk),q.complete=F(q.complete),q.error=F(q.error),delete q.worker,void r.postMessage({input:f,config:q,workerId:r.id});r=null;z.NODE_STREAM_INPUT;"string"==typeof f?(f=function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}(f),r=q.download?new e(q):new m(q)):!0===f.readable&&F(f.read)&&F(f.on)?r=new p(q):(C.File&&f instanceof File||f instanceof Object)&&(r=new h(q));
return r.stream(f)},unparse:function(e,f){function h(e,f,q){var r="";"string"==typeof e&&(e=JSON.parse(e));"string"==typeof f&&(f=JSON.parse(f));var w=Array.isArray(e)&&0<e.length,x=!Array.isArray(f[0]);if(w&&p){for(var z=0;z<e.length;z++)0<z&&(r+=t),r+=m(e[z],z);0<f.length&&(r+=v)}for(z=0;z<f.length;z++){var y=w?e.length:f[z].length,B=!1,D=w?0===Object.keys(f[z]).length:0===f[z].length;if(q&&!w&&(B="greedy"===q?""===f[z].join("").trim():1===f[z].length&&0===f[z][0].length),"greedy"===q&&w){for(var B=
[],C=0;C<y;C++)B.push(f[z][x?e[C]:C]);B=""===B.join("").trim()}if(!B){for(B=0;B<y;B++)0<B&&!D&&(r+=t),r+=m(f[z][w&&x?e[B]:B],B);z<f.length-1&&(!q||0<y&&!D)&&(r+=v)}}return r}function m(e,f){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var h=!1;F&&"string"==typeof e&&F.test(e)&&(e="'"+e,h=!0);var p=e.toString().replace(O,y);if(!(h=h||!0===q||"function"==typeof q&&q(e,f)||Array.isArray(q)&&q[f]))a:{for(var h=z.BAD_DELIMITERS,r=0;r<h.length;r++)if(-1<p.indexOf(h[r])){h=
!0;break a}h=!1}return h||-1<p.indexOf(t)||" "===p.charAt(0)||" "===p.charAt(p.length-1)?x+p+x:p}var q=!1,p=!0,t=",",v="\r\n",x='"',y=x+x,C=!1,G=null,F=!1;!function(){if("object"==typeof f){"string"!=typeof f.delimiter||z.BAD_DELIMITERS.filter(function(e){return-1!==f.delimiter.indexOf(e)}).length||(t=f.delimiter);("boolean"==typeof f.quotes||"function"==typeof f.quotes||Array.isArray(f.quotes))&&(q=f.quotes);"boolean"!=typeof f.skipEmptyLines&&"string"!=typeof f.skipEmptyLines||(C=f.skipEmptyLines);
"string"==typeof f.newline&&(v=f.newline);"string"==typeof f.quoteChar&&(x=f.quoteChar);"boolean"==typeof f.header&&(p=f.header);if(Array.isArray(f.columns)){if(0===f.columns.length)throw Error("Option columns is empty");G=f.columns}void 0!==f.escapeChar&&(y=f.escapeChar+x);("boolean"==typeof f.escapeFormulae||f.escapeFormulae instanceof RegExp)&&(F=f.escapeFormulae instanceof RegExp?f.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var O=new RegExp(r(x),"g");"string"==typeof e&&(e=JSON.parse(e));if(Array.isArray(e)){if(!e.length||
Array.isArray(e[0]))return h(null,e,C);if("object"==typeof e[0])return h(G||Object.keys(e[0]),e,C)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||G),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),h(e.fields||[],e.data||[],C);throw Error("Unable to serialize unrecognized input");
}};if(z.RECORD_SEP=String.fromCharCode(30),z.UNIT_SEP=String.fromCharCode(31),z.BYTE_ORDER_MARK="\ufeff",z.BAD_DELIMITERS=["\r","\n",'"',z.BYTE_ORDER_MARK],z.WORKERS_SUPPORTED=!O&&!!C.Worker,z.NODE_STREAM_INPUT=1,z.LocalChunkSize=10485760,z.RemoteChunkSize=5242880,z.DefaultDelimiter=",",z.Parser=t,z.ParserHandle=q,z.NetworkStreamer=e,z.FileStreamer=h,z.StringStreamer=m,z.ReadableStreamStreamer=p,C.jQuery){var V=C.jQuery;V.fn.parse=function(e){function f(){if(0!==q.length){var m,p,r,t=q[0];if(F(e.before)){var v=
e.before(t.file,t.inputElem);if("object"==typeof v){if("abort"===v.action)return m=t.file,p=t.inputElem,r=v.reason,void(F(e.error)&&e.error({name:"AbortError"},m,p,r));if("skip"===v.action)return void h();"object"==typeof v.config&&(t.instanceConfig=V.extend(t.instanceConfig,v.config))}else if("skip"===v)return void h()}var w=t.instanceConfig.complete;t.instanceConfig.complete=function(e){F(w)&&w(e,t.file,t.inputElem);h()};z.parse(t.file,t.instanceConfig)}else F(e.complete)&&e.complete()}function h(){q.splice(0,
1);f()}var m=e.config||{},q=[];return this.each(function(e){if("INPUT"!==V(this).prop("tagName").toUpperCase()||"file"!==V(this).attr("type").toLowerCase()||!C.FileReader||!this.files||0===this.files.length)return!0;for(e=0;e<this.files.length;e++)q.push({file:this.files[e],inputElem:this,instanceConfig:V.extend({},m)})}),f(),this}}return X&&(C.onmessage=function(e){e=e.data;void 0===z.WORKER_ID&&e&&(z.WORKER_ID=e.workerId);"string"==typeof e.input?C.postMessage({workerId:z.WORKER_ID,results:z.parse(e.input,
e.config),finished:!0}):(C.File&&e.input instanceof File||e.input instanceof Object)&&(e=z.parse(e.input,e.config))&&C.postMessage({workerId:z.WORKER_ID,results:e,finished:!0})}),(e.prototype=Object.create(f.prototype)).constructor=e,(h.prototype=Object.create(f.prototype)).constructor=h,(m.prototype=Object.create(m.prototype)).constructor=m,(p.prototype=Object.create(f.prototype)).constructor=p,z});var colorbrewer={Spectral:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(153,213,148)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(171,221,164)","rgb(43,131,186)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(171,221,164)","rgb(43,131,186)"],6:"rgb(213,62,79) rgb(252,141,89) rgb(254,224,139) rgb(230,245,152) rgb(153,213,148) rgb(50,136,189)".split(" "),7:"rgb(213,62,79) rgb(252,141,89) rgb(254,224,139) rgb(255,255,191) rgb(230,245,152) rgb(153,213,148) rgb(50,136,189)".split(" "),
8:"rgb(213,62,79) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(230,245,152) rgb(171,221,164) rgb(102,194,165) rgb(50,136,189)".split(" "),9:"rgb(213,62,79) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(255,255,191) rgb(230,245,152) rgb(171,221,164) rgb(102,194,165) rgb(50,136,189)".split(" "),10:"rgb(158,1,66) rgb(213,62,79) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(230,245,152) rgb(171,221,164) rgb(102,194,165) rgb(50,136,189) rgb(94,79,162)".split(" "),11:"rgb(158,1,66) rgb(213,62,79) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(255,255,191) rgb(230,245,152) rgb(171,221,164) rgb(102,194,165) rgb(50,136,189) rgb(94,79,162)".split(" "),
type:"div"},RdYlGn:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(145,207,96)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(166,217,106)","rgb(26,150,65)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(166,217,106)","rgb(26,150,65)"],6:"rgb(215,48,39) rgb(252,141,89) rgb(254,224,139) rgb(217,239,139) rgb(145,207,96) rgb(26,152,80)".split(" "),7:"rgb(215,48,39) rgb(252,141,89) rgb(254,224,139) rgb(255,255,191) rgb(217,239,139) rgb(145,207,96) rgb(26,152,80)".split(" "),8:"rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(217,239,139) rgb(166,217,106) rgb(102,189,99) rgb(26,152,80)".split(" "),
9:"rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(255,255,191) rgb(217,239,139) rgb(166,217,106) rgb(102,189,99) rgb(26,152,80)".split(" "),10:"rgb(165,0,38) rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(217,239,139) rgb(166,217,106) rgb(102,189,99) rgb(26,152,80) rgb(0,104,55)".split(" "),11:"rgb(165,0,38) rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(255,255,191) rgb(217,239,139) rgb(166,217,106) rgb(102,189,99) rgb(26,152,80) rgb(0,104,55)".split(" "),
type:"div"},RdBu:{3:["rgb(239,138,98)","rgb(247,247,247)","rgb(103,169,207)"],4:["rgb(202,0,32)","rgb(244,165,130)","rgb(146,197,222)","rgb(5,113,176)"],5:["rgb(202,0,32)","rgb(244,165,130)","rgb(247,247,247)","rgb(146,197,222)","rgb(5,113,176)"],6:"rgb(178,24,43) rgb(239,138,98) rgb(253,219,199) rgb(209,229,240) rgb(103,169,207) rgb(33,102,172)".split(" "),7:"rgb(178,24,43) rgb(239,138,98) rgb(253,219,199) rgb(247,247,247) rgb(209,229,240) rgb(103,169,207) rgb(33,102,172)".split(" "),8:"rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(209,229,240) rgb(146,197,222) rgb(67,147,195) rgb(33,102,172)".split(" "),
9:"rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(247,247,247) rgb(209,229,240) rgb(146,197,222) rgb(67,147,195) rgb(33,102,172)".split(" "),10:"rgb(103,0,31) rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(209,229,240) rgb(146,197,222) rgb(67,147,195) rgb(33,102,172) rgb(5,48,97)".split(" "),11:"rgb(103,0,31) rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(247,247,247) rgb(209,229,240) rgb(146,197,222) rgb(67,147,195) rgb(33,102,172) rgb(5,48,97)".split(" "),
type:"div"},PiYG:{3:["rgb(233,163,201)","rgb(247,247,247)","rgb(161,215,106)"],4:["rgb(208,28,139)","rgb(241,182,218)","rgb(184,225,134)","rgb(77,172,38)"],5:["rgb(208,28,139)","rgb(241,182,218)","rgb(247,247,247)","rgb(184,225,134)","rgb(77,172,38)"],6:"rgb(197,27,125) rgb(233,163,201) rgb(253,224,239) rgb(230,245,208) rgb(161,215,106) rgb(77,146,33)".split(" "),7:"rgb(197,27,125) rgb(233,163,201) rgb(253,224,239) rgb(247,247,247) rgb(230,245,208) rgb(161,215,106) rgb(77,146,33)".split(" "),8:"rgb(197,27,125) rgb(222,119,174) rgb(241,182,218) rgb(253,224,239) rgb(230,245,208) rgb(184,225,134) rgb(127,188,65) rgb(77,146,33)".split(" "),
9:"rgb(197,27,125) rgb(222,119,174) rgb(241,182,218) rgb(253,224,239) rgb(247,247,247) rgb(230,245,208) rgb(184,225,134) rgb(127,188,65) rgb(77,146,33)".split(" "),10:"rgb(142,1,82) rgb(197,27,125) rgb(222,119,174) rgb(241,182,218) rgb(253,224,239) rgb(230,245,208) rgb(184,225,134) rgb(127,188,65) rgb(77,146,33) rgb(39,100,25)".split(" "),11:"rgb(142,1,82) rgb(197,27,125) rgb(222,119,174) rgb(241,182,218) rgb(253,224,239) rgb(247,247,247) rgb(230,245,208) rgb(184,225,134) rgb(127,188,65) rgb(77,146,33) rgb(39,100,25)".split(" "),
type:"div"},PRGn:{3:["rgb(175,141,195)","rgb(247,247,247)","rgb(127,191,123)"],4:["rgb(123,50,148)","rgb(194,165,207)","rgb(166,219,160)","rgb(0,136,55)"],5:["rgb(123,50,148)","rgb(194,165,207)","rgb(247,247,247)","rgb(166,219,160)","rgb(0,136,55)"],6:"rgb(118,42,131) rgb(175,141,195) rgb(231,212,232) rgb(217,240,211) rgb(127,191,123) rgb(27,120,55)".split(" "),7:"rgb(118,42,131) rgb(175,141,195) rgb(231,212,232) rgb(247,247,247) rgb(217,240,211) rgb(127,191,123) rgb(27,120,55)".split(" "),8:"rgb(118,42,131) rgb(153,112,171) rgb(194,165,207) rgb(231,212,232) rgb(217,240,211) rgb(166,219,160) rgb(90,174,97) rgb(27,120,55)".split(" "),
9:"rgb(118,42,131) rgb(153,112,171) rgb(194,165,207) rgb(231,212,232) rgb(247,247,247) rgb(217,240,211) rgb(166,219,160) rgb(90,174,97) rgb(27,120,55)".split(" "),10:"rgb(64,0,75) rgb(118,42,131) rgb(153,112,171) rgb(194,165,207) rgb(231,212,232) rgb(217,240,211) rgb(166,219,160) rgb(90,174,97) rgb(27,120,55) rgb(0,68,27)".split(" "),11:"rgb(64,0,75) rgb(118,42,131) rgb(153,112,171) rgb(194,165,207) rgb(231,212,232) rgb(247,247,247) rgb(217,240,211) rgb(166,219,160) rgb(90,174,97) rgb(27,120,55) rgb(0,68,27)".split(" "),
type:"div"},RdYlBu:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(145,191,219)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(171,217,233)","rgb(44,123,182)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(171,217,233)","rgb(44,123,182)"],6:"rgb(215,48,39) rgb(252,141,89) rgb(254,224,144) rgb(224,243,248) rgb(145,191,219) rgb(69,117,180)".split(" "),7:"rgb(215,48,39) rgb(252,141,89) rgb(254,224,144) rgb(255,255,191) rgb(224,243,248) rgb(145,191,219) rgb(69,117,180)".split(" "),8:"rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,144) rgb(224,243,248) rgb(171,217,233) rgb(116,173,209) rgb(69,117,180)".split(" "),
9:"rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,144) rgb(255,255,191) rgb(224,243,248) rgb(171,217,233) rgb(116,173,209) rgb(69,117,180)".split(" "),10:"rgb(165,0,38) rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,144) rgb(224,243,248) rgb(171,217,233) rgb(116,173,209) rgb(69,117,180) rgb(49,54,149)".split(" "),11:"rgb(165,0,38) rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,144) rgb(255,255,191) rgb(224,243,248) rgb(171,217,233) rgb(116,173,209) rgb(69,117,180) rgb(49,54,149)".split(" "),
type:"div"},BrBG:{3:["rgb(216,179,101)","rgb(245,245,245)","rgb(90,180,172)"],4:["rgb(166,97,26)","rgb(223,194,125)","rgb(128,205,193)","rgb(1,133,113)"],5:["rgb(166,97,26)","rgb(223,194,125)","rgb(245,245,245)","rgb(128,205,193)","rgb(1,133,113)"],6:"rgb(140,81,10) rgb(216,179,101) rgb(246,232,195) rgb(199,234,229) rgb(90,180,172) rgb(1,102,94)".split(" "),7:"rgb(140,81,10) rgb(216,179,101) rgb(246,232,195) rgb(245,245,245) rgb(199,234,229) rgb(90,180,172) rgb(1,102,94)".split(" "),8:"rgb(140,81,10) rgb(191,129,45) rgb(223,194,125) rgb(246,232,195) rgb(199,234,229) rgb(128,205,193) rgb(53,151,143) rgb(1,102,94)".split(" "),
9:"rgb(140,81,10) rgb(191,129,45) rgb(223,194,125) rgb(246,232,195) rgb(245,245,245) rgb(199,234,229) rgb(128,205,193) rgb(53,151,143) rgb(1,102,94)".split(" "),10:"rgb(84,48,5) rgb(140,81,10) rgb(191,129,45) rgb(223,194,125) rgb(246,232,195) rgb(199,234,229) rgb(128,205,193) rgb(53,151,143) rgb(1,102,94) rgb(0,60,48)".split(" "),11:"rgb(84,48,5) rgb(140,81,10) rgb(191,129,45) rgb(223,194,125) rgb(246,232,195) rgb(245,245,245) rgb(199,234,229) rgb(128,205,193) rgb(53,151,143) rgb(1,102,94) rgb(0,60,48)".split(" "),
type:"div"},RdGy:{3:["rgb(239,138,98)","rgb(255,255,255)","rgb(153,153,153)"],4:["rgb(202,0,32)","rgb(244,165,130)","rgb(186,186,186)","rgb(64,64,64)"],5:["rgb(202,0,32)","rgb(244,165,130)","rgb(255,255,255)","rgb(186,186,186)","rgb(64,64,64)"],6:"rgb(178,24,43) rgb(239,138,98) rgb(253,219,199) rgb(224,224,224) rgb(153,153,153) rgb(77,77,77)".split(" "),7:"rgb(178,24,43) rgb(239,138,98) rgb(253,219,199) rgb(255,255,255) rgb(224,224,224) rgb(153,153,153) rgb(77,77,77)".split(" "),8:"rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(224,224,224) rgb(186,186,186) rgb(135,135,135) rgb(77,77,77)".split(" "),
9:"rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(255,255,255) rgb(224,224,224) rgb(186,186,186) rgb(135,135,135) rgb(77,77,77)".split(" "),10:"rgb(103,0,31) rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(224,224,224) rgb(186,186,186) rgb(135,135,135) rgb(77,77,77) rgb(26,26,26)".split(" "),11:"rgb(103,0,31) rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(255,255,255) rgb(224,224,224) rgb(186,186,186) rgb(135,135,135) rgb(77,77,77) rgb(26,26,26)".split(" "),
type:"div"},PuOr:{3:["rgb(241,163,64)","rgb(247,247,247)","rgb(153,142,195)"],4:["rgb(230,97,1)","rgb(253,184,99)","rgb(178,171,210)","rgb(94,60,153)"],5:["rgb(230,97,1)","rgb(253,184,99)","rgb(247,247,247)","rgb(178,171,210)","rgb(94,60,153)"],6:"rgb(179,88,6) rgb(241,163,64) rgb(254,224,182) rgb(216,218,235) rgb(153,142,195) rgb(84,39,136)".split(" "),7:"rgb(179,88,6) rgb(241,163,64) rgb(254,224,182) rgb(247,247,247) rgb(216,218,235) rgb(153,142,195) rgb(84,39,136)".split(" "),8:"rgb(179,88,6) rgb(224,130,20) rgb(253,184,99) rgb(254,224,182) rgb(216,218,235) rgb(178,171,210) rgb(128,115,172) rgb(84,39,136)".split(" "),
9:"rgb(179,88,6) rgb(224,130,20) rgb(253,184,99) rgb(254,224,182) rgb(247,247,247) rgb(216,218,235) rgb(178,171,210) rgb(128,115,172) rgb(84,39,136)".split(" "),10:"rgb(127,59,8) rgb(179,88,6) rgb(224,130,20) rgb(253,184,99) rgb(254,224,182) rgb(216,218,235) rgb(178,171,210) rgb(128,115,172) rgb(84,39,136) rgb(45,0,75)".split(" "),11:"rgb(127,59,8) rgb(179,88,6) rgb(224,130,20) rgb(253,184,99) rgb(254,224,182) rgb(247,247,247) rgb(216,218,235) rgb(178,171,210) rgb(128,115,172) rgb(84,39,136) rgb(45,0,75)".split(" "),
type:"div"},Set2:{3:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)"],4:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)"],5:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)"],6:"rgb(102,194,165) rgb(252,141,98) rgb(141,160,203) rgb(231,138,195) rgb(166,216,84) rgb(255,217,47)".split(" "),7:"rgb(102,194,165) rgb(252,141,98) rgb(141,160,203) rgb(231,138,195) rgb(166,216,84) rgb(255,217,47) rgb(229,196,148)".split(" "),8:"rgb(102,194,165) rgb(252,141,98) rgb(141,160,203) rgb(231,138,195) rgb(166,216,84) rgb(255,217,47) rgb(229,196,148) rgb(179,179,179)".split(" "),
type:"qual"},Accent:{3:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)"],4:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)"],5:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)"],6:"rgb(127,201,127) rgb(190,174,212) rgb(253,192,134) rgb(255,255,153) rgb(56,108,176) rgb(240,2,127)".split(" "),7:"rgb(127,201,127) rgb(190,174,212) rgb(253,192,134) rgb(255,255,153) rgb(56,108,176) rgb(240,2,127) rgb(191,91,23)".split(" "),
8:"rgb(127,201,127) rgb(190,174,212) rgb(253,192,134) rgb(255,255,153) rgb(56,108,176) rgb(240,2,127) rgb(191,91,23) rgb(102,102,102)".split(" "),type:"qual"},Set1:{3:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)"],4:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)"],5:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)"],6:"rgb(228,26,28) rgb(55,126,184) rgb(77,175,74) rgb(152,78,163) rgb(255,127,0) rgb(255,255,51)".split(" "),7:"rgb(228,26,28) rgb(55,126,184) rgb(77,175,74) rgb(152,78,163) rgb(255,127,0) rgb(255,255,51) rgb(166,86,40)".split(" "),
8:"rgb(228,26,28) rgb(55,126,184) rgb(77,175,74) rgb(152,78,163) rgb(255,127,0) rgb(255,255,51) rgb(166,86,40) rgb(247,129,191)".split(" "),9:"rgb(228,26,28) rgb(55,126,184) rgb(77,175,74) rgb(152,78,163) rgb(255,127,0) rgb(255,255,51) rgb(166,86,40) rgb(247,129,191) rgb(153,153,153)".split(" "),type:"qual"},Set3:{3:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)"],4:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)"],5:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)",
"rgb(251,128,114)","rgb(128,177,211)"],6:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98)".split(" "),7:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105)".split(" "),8:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229)".split(" "),9:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229) rgb(217,217,217)".split(" "),
10:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229) rgb(217,217,217) rgb(188,128,189)".split(" "),11:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229) rgb(217,217,217) rgb(188,128,189) rgb(204,235,197)".split(" "),12:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229) rgb(217,217,217) rgb(188,128,189) rgb(204,235,197) rgb(255,237,111)".split(" "),
type:"qual"},Dark2:{3:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)"],4:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)"],5:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)"],6:"rgb(27,158,119) rgb(217,95,2) rgb(117,112,179) rgb(231,41,138) rgb(102,166,30) rgb(230,171,2)".split(" "),7:"rgb(27,158,119) rgb(217,95,2) rgb(117,112,179) rgb(231,41,138) rgb(102,166,30) rgb(230,171,2) rgb(166,118,29)".split(" "),8:"rgb(27,158,119) rgb(217,95,2) rgb(117,112,179) rgb(231,41,138) rgb(102,166,30) rgb(230,171,2) rgb(166,118,29) rgb(102,102,102)".split(" "),
type:"qual"},Paired:{3:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)"],4:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)"],5:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)"],6:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28)".split(" "),7:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111)".split(" "),8:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0)".split(" "),
9:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0) rgb(202,178,214)".split(" "),10:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0) rgb(202,178,214) rgb(106,61,154)".split(" "),11:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0) rgb(202,178,214) rgb(106,61,154) rgb(255,255,153)".split(" "),
12:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0) rgb(202,178,214) rgb(106,61,154) rgb(255,255,153) rgb(177,89,40)".split(" "),type:"qual"},Pastel2:{3:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)"],4:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)"],5:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)"],6:"rgb(179,226,205) rgb(253,205,172) rgb(203,213,232) rgb(244,202,228) rgb(230,245,201) rgb(255,242,174)".split(" "),
7:"rgb(179,226,205) rgb(253,205,172) rgb(203,213,232) rgb(244,202,228) rgb(230,245,201) rgb(255,242,174) rgb(241,226,204)".split(" "),8:"rgb(179,226,205) rgb(253,205,172) rgb(203,213,232) rgb(244,202,228) rgb(230,245,201) rgb(255,242,174) rgb(241,226,204) rgb(204,204,204)".split(" "),type:"qual"},Pastel1:{3:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)"],4:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)"],5:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)",
"rgb(222,203,228)","rgb(254,217,166)"],6:"rgb(251,180,174) rgb(179,205,227) rgb(204,235,197) rgb(222,203,228) rgb(254,217,166) rgb(255,255,204)".split(" "),7:"rgb(251,180,174) rgb(179,205,227) rgb(204,235,197) rgb(222,203,228) rgb(254,217,166) rgb(255,255,204) rgb(229,216,189)".split(" "),8:"rgb(251,180,174) rgb(179,205,227) rgb(204,235,197) rgb(222,203,228) rgb(254,217,166) rgb(255,255,204) rgb(229,216,189) rgb(253,218,236)".split(" "),9:"rgb(251,180,174) rgb(179,205,227) rgb(204,235,197) rgb(222,203,228) rgb(254,217,166) rgb(255,255,204) rgb(229,216,189) rgb(253,218,236) rgb(242,242,242)".split(" "),
type:"qual"},OrRd:{3:["rgb(254,232,200)","rgb(253,187,132)","rgb(227,74,51)"],4:["rgb(254,240,217)","rgb(253,204,138)","rgb(252,141,89)","rgb(215,48,31)"],5:["rgb(254,240,217)","rgb(253,204,138)","rgb(252,141,89)","rgb(227,74,51)","rgb(179,0,0)"],6:"rgb(254,240,217) rgb(253,212,158) rgb(253,187,132) rgb(252,141,89) rgb(227,74,51) rgb(179,0,0)".split(" "),7:"rgb(254,240,217) rgb(253,212,158) rgb(253,187,132) rgb(252,141,89) rgb(239,101,72) rgb(215,48,31) rgb(153,0,0)".split(" "),8:"rgb(255,247,236) rgb(254,232,200) rgb(253,212,158) rgb(253,187,132) rgb(252,141,89) rgb(239,101,72) rgb(215,48,31) rgb(153,0,0)".split(" "),
9:"rgb(255,247,236) rgb(254,232,200) rgb(253,212,158) rgb(253,187,132) rgb(252,141,89) rgb(239,101,72) rgb(215,48,31) rgb(179,0,0) rgb(127,0,0)".split(" "),type:"seq"},PuBu:{3:["rgb(236,231,242)","rgb(166,189,219)","rgb(43,140,190)"],4:["rgb(241,238,246)","rgb(189,201,225)","rgb(116,169,207)","rgb(5,112,176)"],5:["rgb(241,238,246)","rgb(189,201,225)","rgb(116,169,207)","rgb(43,140,190)","rgb(4,90,141)"],6:"rgb(241,238,246) rgb(208,209,230) rgb(166,189,219) rgb(116,169,207) rgb(43,140,190) rgb(4,90,141)".split(" "),
7:"rgb(241,238,246) rgb(208,209,230) rgb(166,189,219) rgb(116,169,207) rgb(54,144,192) rgb(5,112,176) rgb(3,78,123)".split(" "),8:"rgb(255,247,251) rgb(236,231,242) rgb(208,209,230) rgb(166,189,219) rgb(116,169,207) rgb(54,144,192) rgb(5,112,176) rgb(3,78,123)".split(" "),9:"rgb(255,247,251) rgb(236,231,242) rgb(208,209,230) rgb(166,189,219) rgb(116,169,207) rgb(54,144,192) rgb(5,112,176) rgb(4,90,141) rgb(2,56,88)".split(" "),type:"seq"},BuPu:{3:["rgb(224,236,244)","rgb(158,188,218)","rgb(136,86,167)"],
4:["rgb(237,248,251)","rgb(179,205,227)","rgb(140,150,198)","rgb(136,65,157)"],5:["rgb(237,248,251)","rgb(179,205,227)","rgb(140,150,198)","rgb(136,86,167)","rgb(129,15,124)"],6:"rgb(237,248,251) rgb(191,211,230) rgb(158,188,218) rgb(140,150,198) rgb(136,86,167) rgb(129,15,124)".split(" "),7:"rgb(237,248,251) rgb(191,211,230) rgb(158,188,218) rgb(140,150,198) rgb(140,107,177) rgb(136,65,157) rgb(110,1,107)".split(" "),8:"rgb(247,252,253) rgb(224,236,244) rgb(191,211,230) rgb(158,188,218) rgb(140,150,198) rgb(140,107,177) rgb(136,65,157) rgb(110,1,107)".split(" "),
9:"rgb(247,252,253) rgb(224,236,244) rgb(191,211,230) rgb(158,188,218) rgb(140,150,198) rgb(140,107,177) rgb(136,65,157) rgb(129,15,124) rgb(77,0,75)".split(" "),type:"seq"},Oranges:{3:["rgb(254,230,206)","rgb(253,174,107)","rgb(230,85,13)"],4:["rgb(254,237,222)","rgb(253,190,133)","rgb(253,141,60)","rgb(217,71,1)"],5:["rgb(254,237,222)","rgb(253,190,133)","rgb(253,141,60)","rgb(230,85,13)","rgb(166,54,3)"],6:"rgb(254,237,222) rgb(253,208,162) rgb(253,174,107) rgb(253,141,60) rgb(230,85,13) rgb(166,54,3)".split(" "),
7:"rgb(254,237,222) rgb(253,208,162) rgb(253,174,107) rgb(253,141,60) rgb(241,105,19) rgb(217,72,1) rgb(140,45,4)".split(" "),8:"rgb(255,245,235) rgb(254,230,206) rgb(253,208,162) rgb(253,174,107) rgb(253,141,60) rgb(241,105,19) rgb(217,72,1) rgb(140,45,4)".split(" "),9:"rgb(255,245,235) rgb(254,230,206) rgb(253,208,162) rgb(253,174,107) rgb(253,141,60) rgb(241,105,19) rgb(217,72,1) rgb(166,54,3) rgb(127,39,4)".split(" "),type:"seq"},BuGn:{3:["rgb(229,245,249)","rgb(153,216,201)","rgb(44,162,95)"],
4:["rgb(237,248,251)","rgb(178,226,226)","rgb(102,194,164)","rgb(35,139,69)"],5:["rgb(237,248,251)","rgb(178,226,226)","rgb(102,194,164)","rgb(44,162,95)","rgb(0,109,44)"],6:"rgb(237,248,251) rgb(204,236,230) rgb(153,216,201) rgb(102,194,164) rgb(44,162,95) rgb(0,109,44)".split(" "),7:"rgb(237,248,251) rgb(204,236,230) rgb(153,216,201) rgb(102,194,164) rgb(65,174,118) rgb(35,139,69) rgb(0,88,36)".split(" "),8:"rgb(247,252,253) rgb(229,245,249) rgb(204,236,230) rgb(153,216,201) rgb(102,194,164) rgb(65,174,118) rgb(35,139,69) rgb(0,88,36)".split(" "),
9:"rgb(247,252,253) rgb(229,245,249) rgb(204,236,230) rgb(153,216,201) rgb(102,194,164) rgb(65,174,118) rgb(35,139,69) rgb(0,109,44) rgb(0,68,27)".split(" "),type:"seq"},YlOrBr:{3:["rgb(255,247,188)","rgb(254,196,79)","rgb(217,95,14)"],4:["rgb(255,255,212)","rgb(254,217,142)","rgb(254,153,41)","rgb(204,76,2)"],5:["rgb(255,255,212)","rgb(254,217,142)","rgb(254,153,41)","rgb(217,95,14)","rgb(153,52,4)"],6:"rgb(255,255,212) rgb(254,227,145) rgb(254,196,79) rgb(254,153,41) rgb(217,95,14) rgb(153,52,4)".split(" "),
7:"rgb(255,255,212) rgb(254,227,145) rgb(254,196,79) rgb(254,153,41) rgb(236,112,20) rgb(204,76,2) rgb(140,45,4)".split(" "),8:"rgb(255,255,229) rgb(255,247,188) rgb(254,227,145) rgb(254,196,79) rgb(254,153,41) rgb(236,112,20) rgb(204,76,2) rgb(140,45,4)".split(" "),9:"rgb(255,255,229) rgb(255,247,188) rgb(254,227,145) rgb(254,196,79) rgb(254,153,41) rgb(236,112,20) rgb(204,76,2) rgb(153,52,4) rgb(102,37,6)".split(" "),type:"seq"},YlGn:{3:["rgb(247,252,185)","rgb(173,221,142)","rgb(49,163,84)"],4:["rgb(255,255,204)",
"rgb(194,230,153)","rgb(120,198,121)","rgb(35,132,67)"],5:["rgb(255,255,204)","rgb(194,230,153)","rgb(120,198,121)","rgb(49,163,84)","rgb(0,104,55)"],6:"rgb(255,255,204) rgb(217,240,163) rgb(173,221,142) rgb(120,198,121) rgb(49,163,84) rgb(0,104,55)".split(" "),7:"rgb(255,255,204) rgb(217,240,163) rgb(173,221,142) rgb(120,198,121) rgb(65,171,93) rgb(35,132,67) rgb(0,90,50)".split(" "),8:"rgb(255,255,229) rgb(247,252,185) rgb(217,240,163) rgb(173,221,142) rgb(120,198,121) rgb(65,171,93) rgb(35,132,67) rgb(0,90,50)".split(" "),
9:"rgb(255,255,229) rgb(247,252,185) rgb(217,240,163) rgb(173,221,142) rgb(120,198,121) rgb(65,171,93) rgb(35,132,67) rgb(0,104,55) rgb(0,69,41)".split(" "),type:"seq"},Reds:{3:["rgb(254,224,210)","rgb(252,146,114)","rgb(222,45,38)"],4:["rgb(254,229,217)","rgb(252,174,145)","rgb(251,106,74)","rgb(203,24,29)"],5:["rgb(254,229,217)","rgb(252,174,145)","rgb(251,106,74)","rgb(222,45,38)","rgb(165,15,21)"],6:"rgb(254,229,217) rgb(252,187,161) rgb(252,146,114) rgb(251,106,74) rgb(222,45,38) rgb(165,15,21)".split(" "),
7:"rgb(254,229,217) rgb(252,187,161) rgb(252,146,114) rgb(251,106,74) rgb(239,59,44) rgb(203,24,29) rgb(153,0,13)".split(" "),8:"rgb(255,245,240) rgb(254,224,210) rgb(252,187,161) rgb(252,146,114) rgb(251,106,74) rgb(239,59,44) rgb(203,24,29) rgb(153,0,13)".split(" "),9:"rgb(255,245,240) rgb(254,224,210) rgb(252,187,161) rgb(252,146,114) rgb(251,106,74) rgb(239,59,44) rgb(203,24,29) rgb(165,15,21) rgb(103,0,13)".split(" "),type:"seq"},RdPu:{3:["rgb(253,224,221)","rgb(250,159,181)","rgb(197,27,138)"],
4:["rgb(254,235,226)","rgb(251,180,185)","rgb(247,104,161)","rgb(174,1,126)"],5:["rgb(254,235,226)","rgb(251,180,185)","rgb(247,104,161)","rgb(197,27,138)","rgb(122,1,119)"],6:"rgb(254,235,226) rgb(252,197,192) rgb(250,159,181) rgb(247,104,161) rgb(197,27,138) rgb(122,1,119)".split(" "),7:"rgb(254,235,226) rgb(252,197,192) rgb(250,159,181) rgb(247,104,161) rgb(221,52,151) rgb(174,1,126) rgb(122,1,119)".split(" "),8:"rgb(255,247,243) rgb(253,224,221) rgb(252,197,192) rgb(250,159,181) rgb(247,104,161) rgb(221,52,151) rgb(174,1,126) rgb(122,1,119)".split(" "),
9:"rgb(255,247,243) rgb(253,224,221) rgb(252,197,192) rgb(250,159,181) rgb(247,104,161) rgb(221,52,151) rgb(174,1,126) rgb(122,1,119) rgb(73,0,106)".split(" "),type:"seq"},Greens:{3:["rgb(229,245,224)","rgb(161,217,155)","rgb(49,163,84)"],4:["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(35,139,69)"],5:["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(49,163,84)","rgb(0,109,44)"],6:"rgb(237,248,233) rgb(199,233,192) rgb(161,217,155) rgb(116,196,118) rgb(49,163,84) rgb(0,109,44)".split(" "),
7:"rgb(237,248,233) rgb(199,233,192) rgb(161,217,155) rgb(116,196,118) rgb(65,171,93) rgb(35,139,69) rgb(0,90,50)".split(" "),8:"rgb(247,252,245) rgb(229,245,224) rgb(199,233,192) rgb(161,217,155) rgb(116,196,118) rgb(65,171,93) rgb(35,139,69) rgb(0,90,50)".split(" "),9:"rgb(247,252,245) rgb(229,245,224) rgb(199,233,192) rgb(161,217,155) rgb(116,196,118) rgb(65,171,93) rgb(35,139,69) rgb(0,109,44) rgb(0,68,27)".split(" "),type:"seq"},YlGnBu:{3:["rgb(237,248,177)","rgb(127,205,187)","rgb(44,127,184)"],
4:["rgb(255,255,204)","rgb(161,218,180)","rgb(65,182,196)","rgb(34,94,168)"],5:["rgb(255,255,204)","rgb(161,218,180)","rgb(65,182,196)","rgb(44,127,184)","rgb(37,52,148)"],6:"rgb(255,255,204) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(44,127,184) rgb(37,52,148)".split(" "),7:"rgb(255,255,204) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(12,44,132)".split(" "),8:"rgb(255,255,217) rgb(237,248,177) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(12,44,132)".split(" "),
9:"rgb(255,255,217) rgb(237,248,177) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(37,52,148) rgb(8,29,88)".split(" "),type:"seq"},Purples:{3:["rgb(239,237,245)","rgb(188,189,220)","rgb(117,107,177)"],4:["rgb(242,240,247)","rgb(203,201,226)","rgb(158,154,200)","rgb(106,81,163)"],5:["rgb(242,240,247)","rgb(203,201,226)","rgb(158,154,200)","rgb(117,107,177)","rgb(84,39,143)"],6:"rgb(242,240,247) rgb(218,218,235) rgb(188,189,220) rgb(158,154,200) rgb(117,107,177) rgb(84,39,143)".split(" "),
7:"rgb(242,240,247) rgb(218,218,235) rgb(188,189,220) rgb(158,154,200) rgb(128,125,186) rgb(106,81,163) rgb(74,20,134)".split(" "),8:"rgb(252,251,253) rgb(239,237,245) rgb(218,218,235) rgb(188,189,220) rgb(158,154,200) rgb(128,125,186) rgb(106,81,163) rgb(74,20,134)".split(" "),9:"rgb(252,251,253) rgb(239,237,245) rgb(218,218,235) rgb(188,189,220) rgb(158,154,200) rgb(128,125,186) rgb(106,81,163) rgb(84,39,143) rgb(63,0,125)".split(" "),type:"seq"},GnBu:{3:["rgb(224,243,219)","rgb(168,221,181)","rgb(67,162,202)"],
4:["rgb(240,249,232)","rgb(186,228,188)","rgb(123,204,196)","rgb(43,140,190)"],5:["rgb(240,249,232)","rgb(186,228,188)","rgb(123,204,196)","rgb(67,162,202)","rgb(8,104,172)"],6:"rgb(240,249,232) rgb(204,235,197) rgb(168,221,181) rgb(123,204,196) rgb(67,162,202) rgb(8,104,172)".split(" "),7:"rgb(240,249,232) rgb(204,235,197) rgb(168,221,181) rgb(123,204,196) rgb(78,179,211) rgb(43,140,190) rgb(8,88,158)".split(" "),8:"rgb(247,252,240) rgb(224,243,219) rgb(204,235,197) rgb(168,221,181) rgb(123,204,196) rgb(78,179,211) rgb(43,140,190) rgb(8,88,158)".split(" "),
9:"rgb(247,252,240) rgb(224,243,219) rgb(204,235,197) rgb(168,221,181) rgb(123,204,196) rgb(78,179,211) rgb(43,140,190) rgb(8,104,172) rgb(8,64,129)".split(" "),type:"seq"},Greys:{3:["rgb(240,240,240)","rgb(189,189,189)","rgb(99,99,99)"],4:["rgb(247,247,247)","rgb(204,204,204)","rgb(150,150,150)","rgb(82,82,82)"],5:["rgb(247,247,247)","rgb(204,204,204)","rgb(150,150,150)","rgb(99,99,99)","rgb(37,37,37)"],6:"rgb(247,247,247) rgb(217,217,217) rgb(189,189,189) rgb(150,150,150) rgb(99,99,99) rgb(37,37,37)".split(" "),
7:"rgb(247,247,247) rgb(217,217,217) rgb(189,189,189) rgb(150,150,150) rgb(115,115,115) rgb(82,82,82) rgb(37,37,37)".split(" "),8:"rgb(255,255,255) rgb(240,240,240) rgb(217,217,217) rgb(189,189,189) rgb(150,150,150) rgb(115,115,115) rgb(82,82,82) rgb(37,37,37)".split(" "),9:"rgb(255,255,255) rgb(240,240,240) rgb(217,217,217) rgb(189,189,189) rgb(150,150,150) rgb(115,115,115) rgb(82,82,82) rgb(37,37,37) rgb(0,0,0)".split(" "),type:"seq"},YlOrRd:{3:["rgb(255,237,160)","rgb(254,178,76)","rgb(240,59,32)"],
4:["rgb(255,255,178)","rgb(254,204,92)","rgb(253,141,60)","rgb(227,26,28)"],5:["rgb(255,255,178)","rgb(254,204,92)","rgb(253,141,60)","rgb(240,59,32)","rgb(189,0,38)"],6:"rgb(255,255,178) rgb(254,217,118) rgb(254,178,76) rgb(253,141,60) rgb(240,59,32) rgb(189,0,38)".split(" "),7:"rgb(255,255,178) rgb(254,217,118) rgb(254,178,76) rgb(253,141,60) rgb(252,78,42) rgb(227,26,28) rgb(177,0,38)".split(" "),8:"rgb(255,255,204) rgb(255,237,160) rgb(254,217,118) rgb(254,178,76) rgb(253,141,60) rgb(252,78,42) rgb(227,26,28) rgb(177,0,38)".split(" "),
type:"seq"},PuRd:{3:["rgb(231,225,239)","rgb(201,148,199)","rgb(221,28,119)"],4:["rgb(241,238,246)","rgb(215,181,216)","rgb(223,101,176)","rgb(206,18,86)"],5:["rgb(241,238,246)","rgb(215,181,216)","rgb(223,101,176)","rgb(221,28,119)","rgb(152,0,67)"],6:"rgb(241,238,246) rgb(212,185,218) rgb(201,148,199) rgb(223,101,176) rgb(221,28,119) rgb(152,0,67)".split(" "),7:"rgb(241,238,246) rgb(212,185,218) rgb(201,148,199) rgb(223,101,176) rgb(231,41,138) rgb(206,18,86) rgb(145,0,63)".split(" "),8:"rgb(247,244,249) rgb(231,225,239) rgb(212,185,218) rgb(201,148,199) rgb(223,101,176) rgb(231,41,138) rgb(206,18,86) rgb(145,0,63)".split(" "),
9:"rgb(247,244,249) rgb(231,225,239) rgb(212,185,218) rgb(201,148,199) rgb(223,101,176) rgb(231,41,138) rgb(206,18,86) rgb(152,0,67) rgb(103,0,31)".split(" "),type:"seq"},Blues:{3:["rgb(222,235,247)","rgb(158,202,225)","rgb(49,130,189)"],4:["rgb(239,243,255)","rgb(189,215,231)","rgb(107,174,214)","rgb(33,113,181)"],5:["rgb(239,243,255)","rgb(189,215,231)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],6:"rgb(239,243,255) rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(49,130,189) rgb(8,81,156)".split(" "),
7:"rgb(239,243,255) rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(66,146,198) rgb(33,113,181) rgb(8,69,148)".split(" "),8:"rgb(247,251,255) rgb(222,235,247) rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(66,146,198) rgb(33,113,181) rgb(8,69,148)".split(" "),9:"rgb(247,251,255) rgb(222,235,247) rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(66,146,198) rgb(33,113,181) rgb(8,81,156) rgb(8,48,107)".split(" "),type:"seq"},PuBuGn:{3:["rgb(236,226,240)","rgb(166,189,219)","rgb(28,144,153)"],
4:["rgb(246,239,247)","rgb(189,201,225)","rgb(103,169,207)","rgb(2,129,138)"],5:["rgb(246,239,247)","rgb(189,201,225)","rgb(103,169,207)","rgb(28,144,153)","rgb(1,108,89)"],6:"rgb(246,239,247) rgb(208,209,230) rgb(166,189,219) rgb(103,169,207) rgb(28,144,153) rgb(1,108,89)".split(" "),7:"rgb(246,239,247) rgb(208,209,230) rgb(166,189,219) rgb(103,169,207) rgb(54,144,192) rgb(2,129,138) rgb(1,100,80)".split(" "),8:"rgb(255,247,251) rgb(236,226,240) rgb(208,209,230) rgb(166,189,219) rgb(103,169,207) rgb(54,144,192) rgb(2,129,138) rgb(1,100,80)".split(" "),
9:"rgb(255,247,251) rgb(236,226,240) rgb(208,209,230) rgb(166,189,219) rgb(103,169,207) rgb(54,144,192) rgb(2,129,138) rgb(1,108,89) rgb(1,70,54)".split(" "),type:"seq"}};/*
 Use it if you like it
*/
function RGBColor(c){this.ok=!1;"#"==c.charAt(0)&&(c=c.substr(1,6));c=c.replace(/0x/,"");c=c.replace(/ /g,"");c=c.toLowerCase();var f={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",
darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",
fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",
lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",
navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",
slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},e;for(e in f)c==e&&(c=f[e]);var h=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},
{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}];for(e=0;e<h.length;e++){var m=h[e].process,p=h[e].re.exec(c);p&&(channels=m(p),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=0>this.r||isNaN(this.r)?0:255<this.r?255:this.r;this.g=
0>this.g||isNaN(this.g)?0:255<this.g?255:this.g;this.b=0>this.b||isNaN(this.b)?0:255<this.b?255:this.b;this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var c=this.r.toString(16),e=this.g.toString(16),f=this.b.toString(16);1==c.length&&(c="0"+c);1==e.length&&(e="0"+e);1==f.length&&(f="0"+f);return"#"+c+e+f};this.getHelpXML=function(){for(var c=[],e=0;e<h.length;e++)for(var m=h[e].example,p=0;p<m.length;p++)c[c.length]=m[p];for(var x in f)c[c.length]=x;m=
document.createElement("ul");m.setAttribute("id","rgbcolor-examples");for(e=0;e<c.length;e++)try{var y=document.createElement("li"),J=new RGBColor(c[e]),G=document.createElement("div");G.style.cssText="margin: 3px; border: 1px solid black; background:"+J.toHex()+"; color:"+J.toHex();G.appendChild(document.createTextNode("test"));var F=document.createTextNode(" "+c[e]+" -> "+J.toRGB()+" -> "+J.toHex());y.appendChild(G);y.appendChild(F);m.appendChild(y)}catch(C){}return m}};var saveAs=saveAs||"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(c){var f=c.document,e=c.URL||c.webkitURL||c,h=f.createElementNS("http://www.w3.org/1999/xhtml","a"),m=!c.externalHost&&"download"in h,p=c.webkitRequestFileSystem,q=c.requestFileSystem||p||c.mozRequestFileSystem,r=function(e){(c.setImmediate||c.setTimeout)(function(){throw e;},0)},t=0,v=[],x=function(c,e,f){e=[].concat(e);for(var h=e.length;h--;){var m=c["on"+e[h]];if("function"===
typeof m)try{m.call(c,f||c)}catch(p){r(p)}}},y=function(e,r){var y=this,O=e.type,J=!1,Y,T,z=function(){var f=(c.URL||c.webkitURL||c).createObjectURL(e);v.push(f);return f},V=function(){x(y,["writestart","progress","write","writeend"])},B=function(){if(J||!Y)Y=z(e);T?T.location.href=Y:window.open(Y,"_blank");y.readyState=y.DONE;V()},w=function(c){return function(){if(y.readyState!==y.DONE)return c.apply(this,arguments)}},D={create:!0,exclusive:!1},L;y.readyState=y.INIT;r||(r="download");if(m)Y=z(e),
f=c.document,h=f.createElementNS("http://www.w3.org/1999/xhtml","a"),h.href=Y,h.download=r,O=f.createEvent("MouseEvents"),O.initMouseEvent("click",!0,!1,c,0,0,0,0,0,!1,!1,!1,!1,0,null),h.dispatchEvent(O),y.readyState=y.DONE,V();else{c.chrome&&O&&"application/octet-stream"!==O&&(L=e.slice||e.webkitSlice,e=L.call(e,0,e.size,"application/octet-stream"),J=!0);p&&"download"!==r&&(r+=".download");if("application/octet-stream"===O||p)T=c;q?(t+=e.size,q(c.TEMPORARY,t,w(function(c){c.root.getDirectory("saved",
D,w(function(c){var f=function(){c.getFile(r,D,w(function(c){c.createWriter(w(function(f){f.onwriteend=function(e){T.location.href=c.toURL();v.push(c);y.readyState=y.DONE;x(y,"writeend",e)};f.onerror=function(){var c=f.error;c.code!==c.ABORT_ERR&&B()};["writestart","progress","write","abort"].forEach(function(c){f["on"+c]=y["on"+c]});f.write(e);y.abort=function(){f.abort();y.readyState=y.DONE};y.readyState=y.WRITING}),B)}),B)};c.getFile(r,{create:!1},w(function(c){c.remove();f()}),w(function(c){c.code===
c.NOT_FOUND_ERR?f():B()}))}),B)}),B)):B()}},J=y.prototype;J.abort=function(){this.readyState=this.DONE;x(this,"abort")};J.readyState=J.INIT=0;J.WRITING=1;J.DONE=2;J.error=J.onwritestart=J.onprogress=J.onwrite=J.onabort=J.onerror=J.onwriteend=null;c.addEventListener("unload",function(){for(var c=v.length;c--;){var f=v[c];"string"===typeof f?e.revokeObjectURL(f):f.remove()}v.length=0},!1);return function(c,e){return new y(c,e)}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||
this.content);"undefined"!==typeof module&&(module.exports=saveAs);var xiNET={svgns:"http://www.w3.org/2000/svg",xlinkNS:"http://www.w3.org/1999/xlink",linkWidth:1.3,homodimerLinkWidth:1.3};xiNET.highlightColour=new RGBColor("#fdc086");xiNET.selectedColour=new RGBColor("#ffff99");xiNET.defaultSelfLinkColour=new RGBColor("#9970ab");xiNET.defaultInterLinkColour=new RGBColor("#35978f");xiNET.homodimerLinkColour=new RGBColor("#a50f15");
xiNET.Controller=function(c){"string"===typeof c&&(c=document.getElementById(c));this.emptyElement(c);this.svgElement=document.createElementNS(xiNET.svgns,"svg");this.svgElement.setAttribute("id","networkSVG");this.svgElement.setAttribute("width","100%");this.svgElement.setAttribute("height","100%");this.svgElement.setAttribute("style","display:block;");this.svgElement.oncontextmenu=function(){return!1};var f=this;this.svgElement.onmousedown=function(c){f.mouseDown(c)};this.svgElement.onmousemove=
function(c){f.mouseMove(c)};this.svgElement.onmouseup=function(c){f.mouseUp(c)};this.svgElement.onmouseout=function(c){f.hideTooltip(c)};var e=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";document.attachEvent?this.svgElement.attachEvent("on"+e,function(c){f.mouseWheel(c)}):document.addEventListener&&this.svgElement.addEventListener(e,function(c){f.mouseWheel(c)},!1);this.lastMouseUp=(new Date).getTime();this.svgElement.ontouchstart=function(c){f.touchStart(c)};this.svgElement.ontouchmove=
function(c){f.touchMove(c)};this.svgElement.ontouchend=function(c){f.message("touch end");f.touchEnd(c)};document.onkeypress=function(c){if("a"==c.key){c="ProteinId,AnnotName,StartRes,EndRes,Color\n";for(var e=f.proteins.values(),p=e.length,q=0;q<p;q++)for(var r=e[q],t=r.annotations,v=t.length,x=0;x<v;x++){var y=t[x];c+=r.id+","+y.name+","+y.start+","+y.end+","+y.colour.toHex()+"\n"}c="data:application/txt;filename=annotations.csv,"+encodeURIComponent(c);window.open(c,"annotations.csv")}};c.appendChild(this.svgElement);
this.ambigShown=this.selfLinksShown=!0;c=document.createElementNS(xiNET.svgns,"rect");c.setAttribute("id","background_fill");c.setAttribute("x",0);c.setAttribute("y",0);c.setAttribute("width",5120);c.setAttribute("height",4096);c.setAttribute("fill-opacity","1");c.setAttribute("fill","#FFFFFF");this.svgElement.appendChild(c);this.container=document.createElementNS(xiNET.svgns,"g");this.container.setAttribute("id","container");this.p_pLinksWide=document.createElementNS(xiNET.svgns,"g");this.p_pLinksWide.setAttribute("id",
"p_pLinksWide");this.container.appendChild(this.p_pLinksWide);this.proteinLower=document.createElementNS(xiNET.svgns,"g");this.proteinLower.setAttribute("id","proteinLower");this.container.appendChild(this.proteinLower);this.highlights=document.createElementNS(xiNET.svgns,"g");this.highlights.setAttribute("class","highlights");this.container.appendChild(this.highlights);this.res_resLinks=document.createElementNS(xiNET.svgns,"g");this.res_resLinks.setAttribute("id","res_resLinks");this.container.appendChild(this.res_resLinks);
this.p_pLinks=document.createElementNS(xiNET.svgns,"g");this.p_pLinks.setAttribute("id","p_pLinks");this.container.appendChild(this.p_pLinks);this.proteinUpper=document.createElementNS(xiNET.svgns,"g");this.proteinUpper.setAttribute("id","proteinUpper");this.container.appendChild(this.proteinUpper);this.svgElement.appendChild(this.container);this.tooltip=document.createElementNS(xiNET.svgns,"text");this.tooltip.setAttribute("x",0);this.tooltip.setAttribute("y",0);c=document.createTextNode("tooltip");
this.tooltip.appendChild(c);this.tooltip_bg=document.createElementNS(xiNET.svgns,"rect");this.tooltip_bg.setAttribute("class","tooltip_bg");this.tooltip_bg.setAttribute("fill-opacity",.75);this.tooltip_bg.setAttribute("stroke-opacity",1);this.tooltip_bg.setAttribute("stroke-width",1);this.tooltip_subBg=document.createElementNS(xiNET.svgns,"rect");this.tooltip_subBg.setAttribute("fill","white");this.tooltip_subBg.setAttribute("stroke","white");this.tooltip_subBg.setAttribute("class","tooltip_bg");
this.tooltip_subBg.setAttribute("opacity",1);this.tooltip_subBg.setAttribute("stroke-width",1);this.svgElement.appendChild(this.tooltip_subBg);this.svgElement.appendChild(this.tooltip_bg);this.svgElement.appendChild(this.tooltip);this.clear()};xiNET.setCTM=function(c,f){c.setAttribute("transform","matrix("+f.a+","+f.b+","+f.c+","+f.d+","+f.e+","+f.f+")")};
xiNET.Controller.prototype.clear=function(){this.sequenceInitComplete=!1;this.force&&this.force.stop();this.force=null;this.emptyElement(this.p_pLinksWide);this.emptyElement(this.highlights);this.emptyElement(this.p_pLinks);this.emptyElement(this.res_resLinks);this.emptyElement(this.proteinLower);this.emptyElement(this.proteinUpper);this.panning=!1;this.dragElement=null;this.dragging=!1;this.dragStart={};this.rotating=!1;this.proteins=d3.map();this.proteinLinks=d3.map();this.matches=d3.map();this.subgraphs=
[];this.proteinCount=this.layoutXOffset=0;this.maxBlobRadius=30;Protein.MAXSIZE=100;this.layout=null;this.z=1;this.scores=null;this.selected=d3.map();this.selectedLinks=d3.map();this.hideTooltip();this.resetZoom();this.state=xiNET.Controller.MOUSE_UP};xiNET.Controller.prototype.emptyElement=function(c){for(;c.lastChild;)c.removeChild(c.lastChild)};
xiNET.Controller.prototype.setAnnotations=function(c){this.annotationSet=c;if(this.sequenceInitComplete){for(var f=this.proteins.values(),e=f.length,h=this,m=0;m<e;m++){var p=f[m];if("CUSTOM"===c.toUpperCase())p.setPositionalFeatures(p.customAnnotations);else if("SUPERFAM"===c.toUpperCase()||"SUPERFAMILY"===c.toUpperCase())xiNET_Storage.getSuperFamFeatures(p.id,function(c,e){h.proteins.get(c).setPositionalFeatures(e)});else if("UNIPROT"===c.toUpperCase()||"UNIPROTKB"===c.toUpperCase())xiNET_Storage.getUniProtFeatures(p.id,
function(c,e){h.proteins.get(c).setPositionalFeatures(e)});else if("LYSINES"===c.toUpperCase()){for(var q=p.sequence,r=[],t=0;t<p.size;t++)"K"===q[t]&&r.push(new Annotation("Lysine",t+1,t+1));p.setPositionalFeatures(r)}else p.setPositionalFeatures([])}return!0}return!1};
xiNET.Controller.prototype.initLayout=function(){if("undefined"!==typeof this.layout&&null!=this.layout)this.loadLayout();else{for(var c=this.proteins.values(),f=c.length,e=0;e<f;e++){var h=c[e];this.proteinLower.appendChild(h.lowerGroup);this.proteinUpper.appendChild(h.upperGroup);h.setForm(0)}this.autoLayout()}};
xiNET.Controller.prototype.initProteins=function(){for(var c=this.proteins.values(),f=c.length,e=Protein.MAXSIZE=0;e<f;e++){var h=c[e].size;h>Protein.MAXSIZE&&(Protein.MAXSIZE=h)}this.maxBlobRadius=10;Protein.UNITS_PER_RESIDUE=(this.svgElement.parentNode.clientWidth/2-Protein.LABELMAXLENGTH)/Protein.MAXSIZE;for(e=0;e<f;e++)c[e].init();this.sequenceInitComplete=!0;this.annotationSet?xlv.setAnnotations(this.annotationSet):this.setAnnotations("CUSTOM")};
xiNET.Controller.prototype.reset=function(){this.resetZoom();for(var c=this.proteins.values(),f=c.length,e=0;e<f;e++){var h=c[e];!1===h.isParked&&h.setForm(0)}this.autoLayout()};xiNET.Controller.prototype.resetZoom=function(){this.container.setAttribute("transform","scale(1)");this.scale()};
xiNET.Controller.prototype.exportSVG=function(){var c=this.svgElement.parentNode.innerHTML.replace(/<rect .*?\/rect>/i,""),f=c=c.replace("<svg ",'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events" '),c=document.getElementsByTagName("title")[0].innerHTML.slice(0,-4)+".svg",e=[],h;try{h=new TextEncoder("utf-8")}catch(m){h=void 0}if(h)e=h.encode(f);else for(h=0;h<f.length;h++){var p=f.charCodeAt(h);128>p?e.push(p):2048>p?e.push(192|
p>>6,128|p&63):55296>p||57344<=p?e.push(224|p>>12,128|p>>6&63,128|p&63):(h++,p=65536+((p&1023)<<10|f.charCodeAt(h)&1023),e.push(240|p>>18,128|p>>12&63,128|p>>6&63,128|p&63))}f=new Blob([new Uint8Array(e)],{type:"image/svg+xml;charset=utf-8"});navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(f,c):(e=document.createElement("a"),e.href=window.URL.createObjectURL(f),e.download=c,e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(e.href))};
xiNET.Controller.prototype.message=function(c,f){"undefined"!==typeof this.messageElement&&("object"===typeof c&&(c=JSON.stringify(c,null," "),c=c.replace(/\\u0000/gi,""),f=!0),f&&(c="<pre>"+c+"</pre>"),this.messageElement.innerHTML=c)};xiNET.Controller.prototype.addProtein=function(c,f,e,h,m,p){f=new Protein(c,this,m,f);f.setSequence(e);f.init();this.proteins.set(c,f)};
xiNET.Controller.prototype.addMatch=function(c,f,e,h,m,p,q,r,t,v,x,y,J,G,F){c=new Match(c,f,e,h,m,p,this,q,r,t,v,x,y,J,G,F);this.matches.set(m,c);return c};xiNET.Controller.prototype.addMatches=function(c){for(var f=c.length,e=0;e<f;e++)this.addMatch(c[e][0],c[e][1],c[e][2],c[e][3],c[e][4],c[e][5],c[e][6],c[e][7],c[e][8],c[e][9])};
xiNET.Controller.prototype.addAnnotation=function(c,f,e,h,m){c=c.toString().trim();if(c=this.proteins.get(c)){e=parseInt(e);h=parseInt(h);isNaN(e)&&isNaN(h)?(e=1,h=c.size):isNaN(e)?e=h:isNaN(h)&&(h=e);if(e>h){var p=e;e=h;h=p}f=new Annotation(f,e,h,m);null==c.customAnnotations&&(c.customAnnotations=[]);c.customAnnotations.push(f)}};
xiNET.Controller.prototype.addAnnotationByName=function(c,f,e,h,m){for(var p=this.proteins.values(),q=p.length,r=0;r<q;r++){var t=p[r];t.name==c&&this.addAnnotation(t.id,f,e,h,m)}};
xiNET.Controller.prototype.addAnnotations=function(c){c=Papa.parse(raw,{header:!0,dynamicTyping:!0,skipEmptyLines:!0}).data;for(var f=c[0],e=0;e<f.length;e++)f[e]=f[e].trim().toUpperCase();var e=f.indexOf("PROTEINID"),h=f.indexOf("ANNOTNAME");-1===h&&(h=f.indexOf("NAME"));var m=f.indexOf("STARTRES");-1===m&&(m=f.indexOf("STARTRESIDUE"));var p=f.indexOf("ENDRES");-1===p&&(p=f.indexOf("ENDRESIDUE"));var q=f.indexOf("COLOR");-1===q&&(q=f.indexOf("COLOUR"));for(var f=c.length,r=1;r<f;r++)this.addAnnotation(c[r][e],
c[r][h],c[r][m],c[r][p],c[r][q])};xiNET.Controller.prototype.getLayout=function(){return JSON.stringify(this.proteins,null,"\t").replace(/\\u0000/gi,"")};xiNET.Controller.prototype.setLayout=function(c){this.layout="object"!==typeof c?JSON.parse(decodeURIComponent(c)):c};
xiNET.Controller.prototype.loadLayout=function(){for(var c in this.layout){var f=this.layout[c],e=this.proteins.get(c);void 0!==e&&(e.setPosition(f.x,f.y),"undefined"!==typeof f.stickZoom&&(e.stickZoom=f.stickZoom),"undefined"!==typeof f.rot&&(e.rotation=f.rot),"undefined"!==typeof f.form&&e.setForm(f.form),e.checkLinks(),e.setAllLineCoordinates(),"undefined"!==typeof f.parked&&e.setParked(f.parked),f.flipped&&e.toggleFlipped(),this.proteinLower.appendChild(e.lowerGroup),this.proteinUpper.appendChild(e.upperGroup))}for(var f=
this.proteins.values(),e=f.length,h=0;h<e;h++)c=f[h],null==c.x&&(c.setPosition(20,20),this.proteinLower.appendChild(c.lowerGroup),this.proteinUpper.appendChild(c.upperGroup),c.setForm(0))};xiNET.Controller.prototype.setLinkColour=function(c,f){var e=this.proteinLinks.get(c);"undefined"!==typeof e?(e.colour=new RGBColor(f),e.colourSpecified=!0):(e=this.proteins.get(c),"undefined"!==typeof e&&(e.internalLinkColour=new RGBColor(f)))};
xiNET.Controller.prototype.parkAll=function(){for(var c=this.proteins.values(),f=c.length,e=0;e<f;e++){var h=c[e];!1===h.isParked&&h.toggleParked()}};xiNET.Controller.prototype.setCutOff=function(c){this.cutOff=c;this.checkLinks()};xiNET.Controller.prototype.showSelfLinks=function(c){this.selfLinksShown=c;this.checkLinks()};xiNET.Controller.prototype.showAmbig=function(c){this.ambigShown=c;this.checkLinks()};xiNET.Controller.prototype.setMessageElement=function(c){this.messageElement=c};xiNET.Controller.MOUSE_UP=0;xiNET.Controller.PANNING=1;xiNET.Controller.DRAGGING=2;xiNET.Controller.ROTATING=3;xiNET.Controller.SCALING_PROTEIN=4;xiNET.Controller.SCALING_ALL_PROTEINS=5;xiNET.Controller.SELECTING=6;
xiNET.Controller.prototype.mouseDown=function(c){c.preventDefault();"undefined"!==typeof this.force&&null!=this.force&&this.force.stop();var f=this.getEventPoint(c);this.dragStart=this.mouseToSVG(f.x,f.y);var e;c.which?e=3===c.which:c.button&&(e=2===c.button);!0===c.ctrlKey||!0===c.shiftKey||e||(this.state=xiNET.Controller.PANNING,this.panned=!1);return!1};
xiNET.Controller.prototype.mouseMove=function(c){var f=this.getEventPoint(c);c=this.mouseToSVG(f.x,f.y);if(null!=this.dragElement){this.hideTooltip();var e=this.dragStart.x-c.x,h=this.dragStart.y-c.y;if(this.state===xiNET.Controller.DRAGGING){var m,p;if("undefined"===typeof this.dragElement.x){var q;q=this.dragElement.fromProtein?this.dragElement.fromProtein:this.dragElement.proteinLink.fromProtein;for(var r=this.proteins.values(),t=r.length,f=0;f<t;f++)r[f].subgraph=null;f=q.getSubgraph().nodes.values();
q=f.length;for(r=0;r<q;r++)t=f[r],m=t.x,p=t.y,m-=e,p-=h,t.setPosition(m,p),t.setAllLineCoordinates();for(r=0;r<q;r++)f[r].setAllLineCoordinates()}else m=this.dragElement.x,p=this.dragElement.y,this.dragElement.setPosition(m-e,p-h),this.dragElement.setAllLineCoordinates();this.dragStart=c}else this.state===xiNET.Controller.ROTATING?(c=Math.atan2(c.y-this.dragElement.y,c.x-this.dragElement.x),0===this.whichRotator&&(c+=Math.PI),this.dragElement.setRotation(360/(2*Math.PI)*c),this.dragElement.setAllLineCoordinates()):
Math.sqrt(e*e+h*h)>5*this.z&&(this.state=xiNET.Controller.DRAGGING)}else this.state===xiNET.Controller.PANNING?xiNET.setCTM(this.container,this.container.getCTM().translate(c.x-this.dragStart.x,c.y-this.dragStart.y)):this.showTooltip(f);return!1};
xiNET.Controller.prototype.mouseUp=function(c){var f=(new Date).getTime();this.preventDefaultsAndStopPropagation(c);if(150<f-this.lastMouseUp){var e,h;c.which?e=3===c.which:c.button&&(e=2===c.button);c.which?h=2===c.which:c.button&&(h=1===c.button);var m=this.getEventPoint(c),m=this.mouseToSVG(m.x,m.y);if(null!=this.dragElement)this.state!==xiNET.Controller.DRAGGING&&this.state!==xiNET.Controller.ROTATING?e?"undefined"===typeof this.dragElement.x?this.dragElement.intra?this.dragElement.proteinLink&&
this.dragElement.proteinLink.fromProtein.toggleFlipped():(void 0!==this.dragElement.hidden?this.dragElement.hidden=!0:this.dragElement.proteinLink.hidden=!0,this.dragElement.highlightLine.setAttribute("stroke-opacity","0"),this.checkLinks()):this.dragElement.setParked(!this.dragElement.isParked,m):h||("undefined"===typeof this.dragElement.x?this.dragElement.showID():c.shiftKey?this.dragElement.switchStickScale(m):!0===this.sequenceInitComplete&&(0===this.dragElement.form?this.dragElement.setForm(1,
m):this.dragElement.setForm(0,m))):this.state===xiNET.Controller.ROTATING&&this.dragElement.setRotation(5*Math.round(this.dragElement.rotation/5));else if(e){c=this.proteinLinks.values();e=c.length;for(h=0;h<e;h++)c[h].hidden=!1;this.checkLinks()}else!1===c.ctrlKey&&this.clearSelection();this.state===xiNET.Controller.SELECTING&&(clearInterval(this.marcher),this.svgElement.removeChild(this.marquee))}this.dragElement=null;this.whichRotator=-1;this.state=xiNET.Controller.MOUSE_UP;this.lastMouseUp=f;
return!1};xiNET.Controller.prototype.updateMarquee=function(c,f){var e=this.dragStart,h=[e.x,f.x].sort(sortByNumber),e=[e.y,f.y].sort(sortByNumber);c.setAttribute("x",h[0]);c.setAttribute("y",e[0]);c.setAttribute("width",h[1]-h[0]);c.setAttribute("height",e[1]-e[0])};function sortByNumber(c,f){return c-f}
xiNET.Controller.prototype.mouseWheel=function(c){this.preventDefaultsAndStopPropagation(c);var f=1+(c.wheelDelta?c.wheelDelta/3600:c.detail/-90),e=this.container;c=this.getEventPoint(c);c=this.mouseToSVG(c.x,c.y);f=this.svgElement.createSVGMatrix().translate(c.x,c.y).scale(f).translate(-c.x,-c.y);xiNET.setCTM(e,e.getCTM().multiply(f));this.scale();return!1};xiNET.Controller.prototype.clearSelection=function(){for(var c=this.selected.values(),f=c.length,e=0;e<f;e++)c[e].setSelected(!1);this.message("No selection.")};
xiNET.Controller.prototype.getEventPoint=function(c){var f=this.svgElement.createSVGPoint(),e=this.svgElement.parentNode,h=0,m=0;do h+=e.offsetTop||0,m+=e.offsetLeft||0,e=e.offsetParent;while(e);f.x=c.pageX-m;f.y=c.pageY-h;return f};function getScrollTop(){if("undefined"!=typeof pageYOffset)return pageYOffset;var c=document.body,f=document.documentElement,f=f.clientHeight?f:c;return f.scrollTop}
xiNET.Controller.prototype.mouseToSVG=function(c,f){var e=this.svgElement.createSVGPoint();e.x=c;e.y=f;return e=e.matrixTransform(this.container.getCTM().inverse())};xiNET.Controller.prototype.preventDefaultsAndStopPropagation=function(c){c.stopPropagation&&c.stopPropagation();null!=c.cancelBubble&&(c.cancelBubble=!0);c.preventDefault&&c.preventDefault()};xiNET.Controller.prototype.touchStart=function(c){c.preventDefault();"undefined"!==typeof this.force&&null!=this.force&&this.force.stop();c=this.getTouchEventPoint(c);this.dragStart=this.mouseToSVG(c.x,c.y);this.state=xiNET.Controller.PANNING};
xiNET.Controller.prototype.touchMove=function(c){this.preventDefaultsAndStopPropagation(c);this.message(this.dragStart);if(this.sequenceInitComplete){var f=this.getTouchEventPoint(c);c=this.mouseToSVG(f.x,f.y);if(null!=this.dragElement){this.hideTooltip();var e=this.dragStart.x-c.x,h=this.dragStart.y-c.y;if(this.state===xiNET.Controller.DRAGGING){var m,p;if("undefined"===typeof this.dragElement.x){var q;q=this.dragElement.fromProtein?this.dragElement.fromProtein:this.dragElement.proteinLink.fromProtein;
for(var r=this.proteins.values(),t=r.length,f=0;f<t;f++)r[f].subgraph=null;f=q.getSubgraph().nodes.values();q=f.length;for(r=0;r<q;r++)t=f[r],m=t.x,p=t.y,m-=e,p-=h,t.setPosition(m,p),t.setAllLineCoordinates();for(r=0;r<q;r++)f[r].setAllLineCoordinates()}else m=this.dragElement.x,p=this.dragElement.y,this.dragElement.setPosition(m-e,p-h),this.dragElement.setAllLineCoordinates();this.dragStart=c}else this.state===xiNET.Controller.ROTATING?(c=Math.atan2(c.y-this.dragElement.y,c.x-this.dragElement.x),
0===this.whichRotator&&(c+=Math.PI),this.dragElement.setRotation(360/(2*Math.PI)*c),this.dragElement.setAllLineCoordinates()):Math.sqrt(e*e+h*h)>5*this.z&&(this.state=xiNET.Controller.DRAGGING)}else xiNET.setCTM(this.container,this.container.getCTM().translate(c.x-this.dragStart.x,c.y-this.dragStart.y))}return!1};
xiNET.Controller.prototype.touchEnd=function(c){this.preventDefaultsAndStopPropagation(c);null!=this.dragElement?this.state!==xiNET.Controller.DRAGGING&&this.state!==xiNET.Controller.ROTATING?"undefined"===typeof this.dragElement.x?this.dragElement.showID():0===this.dragElement.form?this.dragElement.setForm(1):this.dragElement.setForm(0):this.state===xiNET.Controller.ROTATING&&this.dragElement.setRotation(5*Math.round(this.dragElement.rotation/5)):!1===c.ctrlKey&&this.clearSelection();this.state===
xiNET.Controller.SELECTING&&(clearInterval(this.marcher),this.svgElement.removeChild(this.marquee));this.dragElement=null;this.whichRotator=-1;this.state=xiNET.Controller.MOUSE_UP;return!1};
xiNET.Controller.prototype.gestureChange=function(c){this.preventDefaultsAndStopPropagation(c);var f=1+c.scale,e=this.container;c=this.getTouchEventPoint(c);c=this.mouseToSVG(c.x,c.y);f=this.svgElement.createSVGMatrix().translate(c.x,c.y).scale(f).translate(-c.x,-c.y);xiNET.setCTM(e,e.getCTM().multiply(f));this.scale();return!1};
xiNET.Controller.prototype.getTouchEventPoint=function(c){var f=this.svgElement.createSVGPoint(),e=this.svgElement.parentNode,h=0,m=0;do h+=e.offsetTop||0,m+=e.offsetLeft||0,e=e.offsetParent;while(e);h+=getScrollTop();f.x=c.touches[0].pageX-m;f.y=c.touches[0].pageY-h;return f};xiNET.Controller.prototype.autoLayout=function(){function c(c){function e(c){f.push(c.id);for(var h=0;h<c.proteinLinks.values().length;h++){var m=c.proteinLinks.values()[h];if(!0===m.check()&&(m=m.getOtherEnd(c),-1===f.indexOf(m.id))){e(m);break}}}var f=[];e(function(){for(var e=c.nodes.values(),f=e.length,h=0;h<f;h++)if(2>e[h].countExternalLinks())return e[h];console.error("missed linear subgraph start");return null}());return f}function f(c){return c*(2*m.maxBlobRadius+Protein.LABELMAXLENGTH)-m.maxBlobRadius}
this.force&&this.force.stop();for(var e=this.svgElement.parentNode.clientWidth,h=this.svgElement.parentNode.clientHeight,m=this,p=this.subgraphs.length=0;p<r;p++)q[p].subgraph=null;for(var q=this.proteins.values(),r=q.length,p=0;p<r;p++)q[p].getSubgraph();this.subgraphs.sort(function(c,e){return c.nodes.values().length-e.nodes.values().length});if(1===r){var t=q[0];t.setPosition(e/2,h/4*3)}else if(2===r)t=q[0],t.setPosition(e/2,.3*h),t.setAllLineCoordinates(),q=q[1],q.setPosition(e/2,.6*h),q.setAllLineCoordinates();
else{for(var v=[],q=[],p=this.subgraphs.length,t=0;t<p;t++){var x=this.subgraphs[t],y=x.nodes.values(),J=y.length,G=!0;if(1===J)G=!0;else{for(var F=!1,C=0;C<J;C++)if(2<y[C].countExternalLinks()){G=!1;break}else 2>y[C].countExternalLinks()&&(F=!0);F||(G=!1)}!0===G?v.push(x):q.push(x)}var F=G=x=0,O=-1;if(0<v.length)for(x++,t=0;t<v.length;t++)for(y=v[t].nodes.keys(),J=y.length,2<J&&(y=c(v[t])),C=0;C<J;C++){var p=this.proteins.get(y[C]),X,Y;!0===p.isParked?(F++,X=f(O),Y=F*m.maxBlobRadius,Y>h&&(O--,F=
1,X=f(O),Y=F*m.maxBlobRadius)):(G++,(60>r||1<J)&&G++,X=f(x),Y=G*m.maxBlobRadius,(G+2*(J-1-C))*m.maxBlobRadius+this.maxBlobRadius>h&&(x++,G=1,60>r&&G++,X=f(x),Y=G*m.maxBlobRadius));p.setPosition(X,Y);p.setAllLineCoordinates()}this.layoutXOffset=f(x+3);if("undefined"===typeof this.force||null==this.force){r={NAME:"ALL",children:[]};for(t=0;t<q.length;t++)for(y=q[t].nodes.values(),J=y.length,C=0;C<J;C++)p=this.proteins.get(y[C].id),x={},x.id=p.id,x.x=p.x-this.layoutXOffset,x.y=p.y,x.px=p.x-this.layoutXOffset,
x.py=p.y,x.linkCount=p.proteinLinks.keys().length,x.size=30,r.children.push(x);y=d3.layout.pack().size([e-this.layoutXOffset,h]).value(function(c){return c.size}).sort(function(c,e){return e.linkCount-c.linkCount}).nodes(r);J=y.length;for(C=1;C<J;C++)r=y[C],t=this.proteins.get(r.id),r=Protein.rotatePointAboutPoint([r.x,r.y],[e-this.layoutXOffset/2,h/2],90),t.setPosition(r[0]+this.layoutXOffset,r[1]),t.setAllLineCoordinates(!1)}v=e-this.layoutXOffset;200>v&&(v=e);r={nodes:[],links:[]};e={};for(t=G=
0;t<q.length;t++)for(y=q[t].nodes.values(),J=y.length,C=0;C<J;C++)p=this.proteins.get(y[C].id),e[p.id]=G,G++,x={},x.id=p.id,x.x=p.x-this.layoutXOffset,x.y=p.y,x.px=p.x-this.layoutXOffset,x.py=p.y,r.nodes.push(x);for(t=0;t<q.length;t++)for(y=q[t].links.values(),C=y.length,p=0;p<C;p++)if(x=y[p],G=x.fromProtein,F=x.toProtein)G=e[G.id],F=e[F.id],G!==F&&("undefined"!==typeof G&&"undefined"!==typeof F?(O={},O.source=G,O.target=F,O.id=x.id,r.links.push(O)):alert("NOT RIGHT"));q=Math.sqrt(r.nodes.length/
(v*h));this.force=d3.layout.force().nodes(r.nodes).links(r.links).gravity(85*q).linkDistance(60).charge(-30/q).size([v,h]);J=this.force.nodes().length;this.force.links();this.force.on("tick",function(c){c=m.force.nodes();for(var e=0;e<J;e++){var f=c[e],h=m.proteins.get(f.id);h.setPosition(f.x+m.layoutXOffset,f.y);h.setAllLineCoordinates()}});this.force.start()}};xiNET.Controller.prototype.checkLinks=function(){for(var c=this.proteinLinks.values(),f=c.length,e=0;e<f;e++)c[e].check()};
xiNET.Controller.prototype.scale=function(){this.z=this.container.getScreenCTM().inverse().a;for(var c=this.proteins.values(),f=c.length,e=0;e<f;e++){var h=c[e];h.setPosition(h.x,h.y);0!==h.form&&h.setAllLineCoordinates()}c=this.proteinLinks.values();f=c.length;for(e=0;e<f;e++)if(h=c[e],h.fromProtein!==h.toProtein&&null!==h.toProtein&&!h.fromProtein.isParked&&!h.toProtein.isParked)if(0===h.fromProtein.form&&0===h.toProtein.form)h.line.setAttribute("stroke-width",this.z*xiNET.linkWidth),h.highlightLine.setAttribute("stroke-width",
10*this.z),h.fatLine.setAttribute("stroke-width",this.z*h.w),h.ambig&&h.dashedLine(!0);else for(var m=h.residueLinks.keys().length,p=0;p<m;p++){var q=h.residueLinks.values()[p];q.check()&&(h.residueLinks.values()[p].line.setAttribute("stroke-width",this.z*xiNET.linkWidth),h.residueLinks.values()[p].highlightLine.setAttribute("stroke-width",10*this.z),q.ambig&&q.dashedLine(!0))}};xiNET.Controller.prototype.showTooltip=function(c){var f;f=this.tooltip.getComputedTextLength()+16;var e=this.svgElement.parentNode.clientWidth,h=this.svgElement.parentNode.clientHeight;f=c.x+20+f<e?c.x:e-f-20;c=c.y+60<h?c.y:h-60;this.tooltip.setAttribute("x",f+22);this.tooltip.setAttribute("y",c+47);this.tooltip_bg.setAttribute("x",f+16);this.tooltip_bg.setAttribute("y",c+28);this.tooltip_subBg.setAttribute("x",f+16);this.tooltip_subBg.setAttribute("y",c+28)};
xiNET.Controller.prototype.setTooltip=function(c,f){if(c){this.tooltip.firstChild.data=c.toString().replace(/&(quot);/g,'"');this.tooltip.setAttribute("display","block");var e=this.tooltip.getComputedTextLength();this.tooltip_bg.setAttribute("width",e+16);this.tooltip_subBg.setAttribute("width",e+16);"undefined"!==typeof f&&null!=f?(this.tooltip_bg.setAttribute("fill",f),this.tooltip_bg.setAttribute("stroke",f),this.tooltip_bg.setAttribute("fill-opacity","0.5")):(this.tooltip_bg.setAttribute("fill",
"white"),this.tooltip_bg.setAttribute("stroke","grey"));this.tooltip_bg.setAttribute("height",28);this.tooltip_subBg.setAttribute("height",28);this.tooltip_bg.setAttribute("display","block");this.tooltip_subBg.setAttribute("display","block")}else this.hideTooltip()};xiNET.Controller.prototype.hideTooltip=function(c){this.tooltip.setAttribute("display","none");this.tooltip_bg.setAttribute("display","none");this.tooltip_subBg.setAttribute("display","none")};function Match(c,f,e,h,m,p,q,r,t,v,x,y,J,G,F,C){function O(c){if(c)if(c=c.toString().trim(),""!==c&&"-"!==c&&"n/a"!==c){Y.lastIndex=0;c=c.replace(Y,"");T.lastIndex=0;c=c.split(T);for(var e=c.length,f=0;f<e;f++)c[f]=c[f].trim()}else c=null;else c=null;return c}function X(c){if(c)if(c=c.toString().trim(),""!==c&&"-"!==c&&"n/a"!==c){Y.lastIndex=0;c=c.toString().replace(Y,"");T.lastIndex=0;c=c.split(T);for(var e=c.length,f=0;f<e;f++){var h=parseInt(c[f]);isNaN(h)?console.debug("Absurd non-numerical position. Match id:"+
this.id+". So-called 'position':"+c[f]):c[f]=h}}else c=null;else c=null;return c}this.id=m.toString().trim();this.residueLinks=[];this.controller=q;this.dataSetId=F;C&&"true"==C.toLowerCase().trim()&&(this.manuallyDashed=!0);"undefined"!=typeof p&&p&&(p=parseFloat(p),isNaN(p)||(this.score=p,null==this.controller.scores&&(this.controller.scores={min:this.score,max:this.score}),this.score>this.controller.scores.max?this.controller.scores.max=this.score:this.score<this.controller.scores.min&&(this.controller.scores.min=
this.score)));"undefined"!=typeof y&&y&&(y=y.trim(),""!==y&&(this.autovalidated="t"==y||"true"==y||!0===y?!0:!1,this.controller.autoValidatedFound=!0));"undefined"!=typeof J&&J&&(J=J.trim(),""!==J&&(this.validated=J,this.controller.manualValidatedFound=!0));var Y=/(['"])/g,T=/[;,]/g;m=/[^A-Z]/g;c=O(c);e=O(e);"undefined"!=typeof v&&null!=v?(v=v.trim())?(m.lastindex=0,this.pepSeq1=v.replace(m,"")):this.pepSeq1=null:this.pepSeq1=null;"undefined"!==typeof x&&null!=x?(x=x.trim())?(m.lastindex=0,this.pepSeq2=
x.replace(m,"")):this.pepSeq2=null:this.pepSeq2=null;f=X(f);h=X(h);r=X(r);t=X(t);this.type=null===e&&null===h&&null===t?0:null===e?1:2;var z,V,B,w;if(c){if(0===this.type)if(null!==f)for(v=0;v<f.length;v++)z=v,z>=c.length&&(z=c.length-1),z=c[z],B=f[v],B+=r[0]-1,this.associateWithLink(z,null,B,null,f[v],this.pepSeq1.length,null,null);else for(v=0;v<r.length;v++)z=v,z>=c.length&&(z=c.length-1),z=c[z],B=r[v],this.associateWithLink(z,null,B,null,null,null,null,null);else if(1===this.type)if(null!==f)for(v=
0;v<f.length;v++)z=v,z>=c.length&&(z=c.length-1),z=c[z],B=f[v],w=h?h[v]:f[v],null!==r&&(B+=r[0]-1),null!==t&&(w+=t[0]-1),this.associateWithLink(z,null,B,w,f[v],this.pepSeq1.length,null,null);else for(v=0;v<r.length;v++)z=v,z>=c.length&&(z=c.length-1),z=c[z],B=r[0],w=t[0],this.associateWithLink(z,null,B,w,null,null,null,null);else if(null!==f){if(null!==f)for(v=0;v<f.length;v++)for(x=0;x<h.length;x++)z=v,V=x,z>=c.length&&(z=c.length-1),V>=e.length&&(V=e.length-1),z=c[z],V=e[V],B=f[v]-0,w=h[x]-0,null!==
r&&(B+=r-1),null!==t&&(w+=t-1),this.associateWithLink(z,V,B,w,f[v]-0,this.pepSeq1.length,h[x],this.pepSeq2.length)}else for(v=0;v<r.length;v++)for(x=0;x<t.length;x++)z=v,V=x,z>=c.length&&(z=c.length-1),V>=e.length&&(V=e.length-1),z=c[z],V=e[V],B=r[v]-0,w=t[x]-0,this.associateWithLink(z,V,B,w,null,null,null,null);this.hd=!1;this.overlap=[];z===V&&(this.pepSeq1&&this.pepSeq2?(z=f[0],V=h[0],w=z+(this.pepSeq1.length-1),B=V+(this.pepSeq2.length-1),z>=V&&z<=B?(this.hd=!0,this.overlap[0]=z-1,this.overlap[1]=
w<B?w:B):V>=z&&V<=w&&(this.hd=!0,this.overlap[0]=V-1,this.overlap[1]=B<w?B:w)):B===w&&(this.hd=!0,this.overlap[0]=B-1,this.overlap[1]=w));this.protein1=c;this.pepPos1=f;this.linkPos1=r;this.protein2=e;this.pepPos2=h;this.linkPos2=t}}
Match.prototype.associateWithLink=function(c,f,e,h,m,p,q,r){var t,v,x;null===f?(v=this.controller.proteins.get(c),null===h?(t=""+c+"-null",x=null):(t=""+c+"-"+c,x=v)):c<=f?(t=""+c+"-"+f,v=this.controller.proteins.get(c),x=null!==f?this.controller.proteins.get(f):null):(t=""+f+"-"+c,v=this.controller.proteins.get(f),x=this.controller.proteins.get(c));var y=this.controller.proteinLinks.get(t);void 0===y&&(void 0!==v&&void 0!==x||alert("Something has gone wrong; a link has been added before a protein it links to. "+
c+"-"+f+" Are both of these IDs in your FASTA file?"),y=new ProteinLink(t,v,x,this.controller),this.controller.proteinLinks.set(t,y),v.addLink(y),null!==x&&x.addLink(y));t=!1;c===f||null===f?e-0<h-0||null===h?v=e+"-"+h:(v=h+"-"+e,t=!0):c<f?v=e+"-"+h:(v=h+"-"+e,t=!0);x=y.residueLinks.get(v);void 0===x&&(x=c===f?e-0<h-0||"n/a"===h?new ResidueLink(v,y,e,h,this.controller):new ResidueLink(v,y,h,e,this.controller):c==y.fromProtein.id?new ResidueLink(v,y,e,h,this.controller):new ResidueLink(v,y,h,e,this.controller),
y.residueLinks.set(v,x),y.residueLinks.keys().length>ProteinLink.maxNoResidueLinks&&(ProteinLink.maxNoResidueLinks=y.residueLinks.keys().length));if("undefined"===typeof x.matches||null==x.matches)x.matches=[];!1===t?x.matches.push([this,m,p,q,r]):x.matches.push([this,q,r,m,p]);this.residueLinks.push(x)};
Match.prototype.meetsFilterCriteria=function(){return this.isAmbig()&&!1===this.controller.ambigShown?!1:"function"==typeof this.controller.filter?this.controller.filter(this):"undefined"!==typeof this.controller.cutOff&&"undefined"!==typeof this.score?this.score>=this.controller.cutOff?!0:!1:!0};Match.prototype.isAmbig=function(){return 1<this.residueLinks.length||this.manuallyDashed?!0:!1};
Match.prototype.toTableRow=function(){var c;c="<tr>"+("<td><p>"+this.id+"</p></td>");c+="<td><p>"+this.protein1+"</p></td>";c+="<td><p>"+this.pepPos1+"</p></td>";c+="<td><p>"+this.pepSeq1+"</p></td>";c+="<td><p>"+this.linkPos1+"</p></td>";c+="<td><p>"+this.protein2+"</p></td>";c+="<td><p>"+this.pepPos2+"</p></td>";c+="<td><p>"+this.pepSeq2+"</p></td>";c+="<td><p>"+this.linkPos2+"</p></td>";c+="<td><p>"+("undefined"!==typeof this.score?this.score.toFixed(4):"undefined")+"</p></td>";!0===this.controller.autoValidatedFound&&
(c+="<td><p>"+this.autovalidated+"</p></td>");!0===this.controller.manualValidatedFound&&(c+="<td><p>"+this.validated+"</p></td>");return c+"</tr>"};xiNET.Link=function(){};xiNET.Link.prototype.mouseDown=function(c){this.controller.preventDefaultsAndStopPropagation(c);this.controller.force&&this.controller.force.stop();this.controller.dragElement=this;this.controller.clearSelection();this.setSelected(!0);c=this.controller.getEventPoint(c);this.controller.dragStart=this.controller.mouseToSVG(c.x,c.y);return!1};
xiNET.Link.prototype.mouseOver=function(c){this.controller.preventDefaultsAndStopPropagation(c);this.showHighlight(!0,!0);c=this.getFilteredMatches().map(function(c){return+c[0].score});c=Math.max.apply(Math,c).toFixed(2);c=isNaN(c)?this.tooltip:this.tooltip+", top score:"+c;this.controller.setTooltip(c);return!1};xiNET.Link.prototype.mouseOut=function(c){this.controller.preventDefaultsAndStopPropagation(c);this.showHighlight(!1,!0);this.controller.hideTooltip();return!1};
xiNET.Link.prototype.touchStart=function(c){this.controller.preventDefaultsAndStopPropagation(c);void 0!==this.controller.force&&this.controller.force.stop();this.controller.dragElement=this;this.controller.clearSelection();this.setSelected(!0);c=this.controller.getTouchEventPoint(c);this.controller.dragStart=this.controller.mouseToSVG(c.x,c.y);return!1};Protein.STICKHEIGHT=20;Protein.MAXSIZE=100;Protein.UNITS_PER_RESIDUE=1;Protein.LABELMAXLENGTH=60;Protein.labelY=-5;Protein.domainColours=d3.scale.ordinal().range(colorbrewer.Paired[5]);Protein.transitionTime=650;
function Protein(c,f,e,h){this.id=c;this.controller=f;this.accession=e;this.name=h;this.tooltip=this.name+" ["+this.id+"]";this.proteinLinks=d3.map();this.selfLink=null;this.y=this.x=40;this.previousRotation=this.rotation=0;this.stickZoom=1;this.form=0;this.isSelected=this.isFlipped=this.isParked=!1;this.customAnnotations=null;this.lowerRotator=new Rotator(this,0,this.controller);this.upperRotator=new Rotator(this,1,this.controller);this.lowerGroup=document.createElementNS(xiNET.svgns,"g");this.lowerGroup.setAttribute("class",
"protein lowerGroup");this.highlight=document.createElementNS(xiNET.svgns,"rect");void 0!==xiNET.highlightColour&&this.highlight.setAttribute("stroke",xiNET.highlightColour.toRGB());this.highlight.setAttribute("stroke-width","5");this.highlight.setAttribute("fill","none");this.lowerGroup.appendChild(this.highlight);this.rectDomains=document.createElementNS(xiNET.svgns,"g");this.rectDomains.setAttribute("opacity","0");this.lowerGroup.appendChild(this.rectDomains);this.peptides=document.createElementNS(xiNET.svgns,
"g");this.lowerGroup.appendChild(this.peptides);this.upperGroup=document.createElementNS(xiNET.svgns,"g");this.upperGroup.setAttribute("class","protein upperGroup");this.intraLinksHighlights=document.createElementNS(xiNET.svgns,"g");this.intraLinks=document.createElementNS(xiNET.svgns,"g");this.upperGroup.appendChild(this.intraLinksHighlights);this.upperGroup.appendChild(this.intraLinks);this.labelSVG=document.createElementNS(xiNET.svgns,"text");this.labelSVG.setAttribute("text-anchor","end");this.labelSVG.setAttribute("fill",
this.isDecoy()?"#FB8072":"black");this.labelSVG.setAttribute("x",0);this.labelSVG.setAttribute("y",10);this.labelSVG.setAttribute("class","protein xlv_text proteinLabel");this.labelSVG.setAttribute("font-family","Arial");this.labelSVG.setAttribute("font-size","16");this.labelText=this.name?this.name:null!=this.accession&""!==this.accession?this.accession:this.id;25<this.labelText.length&&(this.labelText=this.labelText.substr(0,16)+"...");this.labelTextNode=document.createTextNode(this.labelText);
this.labelSVG.appendChild(this.labelTextNode);d3.select(this.labelSVG).attr("transform","translate( -5 "+Protein.labelY+") rotate(0) scale(1, 1)");this.upperGroup.appendChild(this.labelSVG);this.ticks=document.createElementNS(xiNET.svgns,"g");this.outline=document.createElementNS(xiNET.svgns,"rect");this.outline.setAttribute("stroke","black");this.outline.setAttribute("stroke-width","1");this.outline.setAttribute("fill","#EEEEEE");this.upperGroup.appendChild(this.outline);this.upperGroup.appendChild(this.ticks);
this.circDomains=document.createElementNS(xiNET.svgns,"g");this.circDomains.setAttribute("opacity",1);this.upperGroup.appendChild(this.circDomains);this.scaleLabels=[];var m=this;this.upperGroup.onmousedown=function(c){m.mouseDown(c)};this.upperGroup.onmouseover=function(c){m.mouseOver(c)};this.upperGroup.onmouseout=function(c){m.mouseOut(c)};this.upperGroup.ontouchstart=function(c){m.touchStart(c)};this.isSelected=!1;this.showHighlight(!1)}
Protein.prototype.setSequence=function(c){/\d/.test(c)&&(this.labeling="",-1!==c.indexOf("K4")&&(this.labeling+="K4"),-1!==c.indexOf("K6")&&(this.labeling+="K6"),-1!==c.indexOf("K8")&&(this.labeling+="K8"),-1!==c.indexOf("K10")&&(this.labeling+="R4"),-1!==c.indexOf("R6")&&(this.labeling+="R6"),-1!==c.indexOf("R8")&&(this.labeling+="R8"),-1!==c.indexOf("R10")&&(this.labeling+="R10"));"undefined"!==typeof this.labeling&&(this.labelSVG.innerHTML="["+this.labeling+"] "+this.labelSVG.innerHTML);this.sequence=
c.replace(/[^A-Z]/g,"");this.size=this.sequence.length};Protein.prototype.init=function(){this.selfLink&&this.selfLink.initSelfLinkSVG();this.setAllLineCoordinates()};
Protein.prototype.mouseDown=function(c){this.controller.preventDefaultsAndStopPropagation(c);this.controller.force&&this.controller.force.stop();this.controller.dragElement=this;this.controller.clearSelection();this.setSelected(!0);c=this.controller.getEventPoint(c);this.controller.dragStart=this.controller.mouseToSVG(c.x,c.y);var f="",f=f+(this.name+" &nbsp;&nbsp;["+this.id+"]<p>");this.accession&&(f+="<a href='http://www.ebi.ac.uk/pdbe-apps/widgets/unipdb?uniprot="+this.accession+"' target='_blank'>PDB</a></p>");
this.controller.message(f);var e=this;this.accession&&xiNET_Storage.getUniProtTxt(this.accession,function(c,m){e.controller.message(f+"<pre>"+m+"</pre>")});return!1};
Protein.prototype.touchStart=function(c){this.controller.preventDefaultsAndStopPropagation(c);void 0!==this.controller.force&&this.controller.force.stop();this.controller.dragElement=this;this.controller.clearSelection();this.setSelected(!0);c=this.controller.getTouchEventPoint(c);this.controller.dragStart=this.controller.mouseToSVG(c.x,c.y);var f=this,e="",e=e+("<h5>"+this.name+" &nbsp;&nbsp;["+this.id+"] </h5><p>");"undefined"!==typeof this.accession&&(e+="<a href='http://www.ebi.ac.uk/pdbe-apps/widgets/unipdb?uniprot="+
this.accession+"' target='_blank'>PDB</a></p>");this.controller.message(e);f=this;xiNET_Storage.getUniProtTxt(this.accession,function(c,m){f.controller.message(e+"<pre>"+m+"</pre>")});return!1};Protein.prototype.mouseOver=function(c){this.controller.preventDefaultsAndStopPropagation(c);this.showHighlight(!0);this.controller.setTooltip(this.tooltip);return!1};
Protein.prototype.mouseOut=function(c){this.controller.preventDefaultsAndStopPropagation(c);this.showHighlight(!1);this.controller.hideTooltip();return!1};Protein.prototype.getBlobRadius=function(){return Math.sqrt(this.size/Math.PI)};Protein.prototype.isDecoy=function(){return this.name?-1===this.name.indexOf("DECOY_")&&"REV"!==this.name?!1:!0:!1};Protein.prototype.toJSON=function(){return{x:this.x,y:this.y,rot:this.rotation,form:this.form,stickZoom:this.stickZoom,parked:this.isParked,flipped:this.isFlipped}};
Protein.prototype.addLink=function(c){this.proteinLinks.has(c.id)||this.proteinLinks.set(c.id,c);c.selfLink()&&(this.selfLink=c,this.size&&this.selfLink.initSelfLinkSVG());null===c.toProtein&&(this.linkerModifications=c)};
Protein.prototype.showHighlight=function(c){!0===c?(this.highlight.setAttribute("stroke",xiNET.highlightColour.toRGB()),this.highlight.setAttribute("stroke-opacity","1")):(0==this.isSelected&&this.highlight.setAttribute("stroke-opacity","0"),this.highlight.setAttribute("stroke",xiNET.selectedColour.toRGB()))};
Protein.prototype.setSelected=function(c){c&&!1===this.isSelected?(this.controller.selected.set(this.id,this),this.isSelected=!0,this.highlight.setAttribute("stroke",xiNET.selectedColour.toRGB()),this.highlight.setAttribute("stroke-opacity","1")):!1===c&&!0===this.isSelected&&(this.controller.selected.remove(this.id),this.isSelected=!1,this.highlight.setAttribute("stroke-opacity","0"),this.highlight.setAttribute("stroke",xiNET.highlightColour.toRGB()))};
Protein.prototype.setRotation=function(c){this.rotation=c%360;0>this.rotation&&(this.rotation+=360);this.upperGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+") rotate("+this.rotation+")");this.lowerGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+") rotate("+this.rotation+")");var f=this.controller.svgElement;c=this.labelSVG.getAttribute("transform");var e=d3.transform(c);c=this.scaleLabels.length;if(90<=this.rotation&&
270>this.rotation){if(e=f.createSVGMatrix().translate(Math.abs(e.translate[0]),-Protein.labelY).rotate(180,0,0),this.labelSVG.transform.baseVal.initialize(f.createSVGTransformFromMatrix(e)),1===this.form){for(f=0;f<c;f++)this.scaleLabels[f].setAttribute("transform","scale(-1,1)");this.ticks.setAttribute("transform","scale(1,-1)")}}else if(e=f.createSVGMatrix().translate(-Math.abs(e.translate[0]),Protein.labelY),this.labelSVG.transform.baseVal.initialize(f.createSVGTransformFromMatrix(e)),1===this.form){for(f=
0;f<c;f++)this.scaleLabels[f].setAttribute("transform","scale(1,1)");this.ticks.setAttribute("transform","scale(1,1)")}};
Protein.prototype.setPosition=function(c,f){this.x=c;this.y=f;1===this.form&&!1===this.isParked?(this.upperGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+") rotate("+this.rotation+")"),this.lowerGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+") rotate("+this.rotation+")")):(this.upperGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+") "),this.lowerGroup.setAttribute("transform",
"translate("+this.x+" "+this.y+") scale("+this.controller.z+") "),null!=this.selfLink&&("undefined"!==typeof this.selfLink.fatLine&&this.selfLink.fatLine.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+")"),this.selfLink.line.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+")"),this.selfLink.highlightLine.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.controller.z+")")))};Protein.rotOffset=17.5;
Protein.minXDist=30;Protein.prototype.switchStickScale=function(c){this.isParked&&this.toggleParked();if(0===this.form)this.toStick();else if(8<Protein.UNITS_PER_RESIDUE*this.stickZoom)this.stickZoom=.5,this.setPosition(c.x,c.y);else{this.stickZoom*=3;var f=this.x-c.x;c=this.y-c.y;if(0===this.rotation||180===this.rotation)c=0;this.setPosition(this.x+2*f,this.y+2*c)}this.scale();this.setAllLineCoordinates()};
Protein.prototype.scale=function(){var c=this.size*Protein.UNITS_PER_RESIDUE*this.stickZoom;if(1===this.form){var f=d3.transform(this.labelSVG.getAttribute("transform")),f=this.controller.svgElement.createSVGMatrix().rotate(f.rotate).translate(-(this.size/2*Protein.UNITS_PER_RESIDUE*this.stickZoom+10),Protein.labelY);this.labelSVG.transform.baseVal.initialize(this.controller.svgElement.createSVGTransformFromMatrix(f));if(this.annotations)for(var f=this.annotations.length,e=0;e<f;e++){var h=this.annotations[e];
h.pieSlice.setAttribute("d",this.getAnnotationRectPath(h));h.colouredRect.setAttribute("d",this.getAnnotationRectPath(h))}d3.select(this.peptides).attr("transform","scale("+this.stickZoom+", 1)");d3.select(this.outline).attr("width",c).attr("x",this.getResXwithStickZoom(.5));d3.select(this.highlight).attr("width",c+5).attr("x",this.getResXwithStickZoom(.5)-2.5);this.lowerRotator.svg.setAttribute("transform","translate("+(this.getResXwithStickZoom(.5)-Protein.rotOffset)+" 0)");this.upperRotator.svg.setAttribute("transform",
"translate("+(this.getResXwithStickZoom(this.size-0+.5)+Protein.rotOffset)+" 0)");if(null!=this.selfLink)for(f=this.selfLink.residueLinks.values(),e=f.length,h=0;h<e;h++){var m=f[h];m.shown&&(c=this.getResidueLinkPath(m),d3.select(m.line).attr("d",c),d3.select(m.highlightLine).attr("d",c))}if(null!=this.linkerModifications)for(f=this.linkerModifications.residueLinks.values(),e=f.length,h=0;h<e;h++)m=f[h],m.shown&&(c=this.getResidueLinkPath(m),d3.select(m.line).attr("d",c),d3.select(m.highlightLine).attr("d",
c));this.setScaleGroup();this.setRotation(this.rotation)}};
Protein.prototype.setScaleGroup=function(){function c(c,e,f){var h=document.createElementNS(xiNET.svgns,"g");h.setAttribute("transform","translate("+f+" 0)");f=document.createElementNS(xiNET.svgns,"text");f.setAttribute("class","protein xlv_text proteinLabel");f.setAttribute("font-family","'Courier New', monospace");f.setAttribute("font-size","14");f.setAttribute("text-anchor","middle");f.setAttribute("x",0);f.setAttribute("y",Protein.STICKHEIGHT+4);f.appendChild(document.createTextNode(e));h.appendChild(f);
c.scaleLabels.push(f);c.ticks.appendChild(h)}function f(c,e){var f=document.createElementNS(xiNET.svgns,"line");f.setAttribute("x1",e);f.setAttribute("y1",5);f.setAttribute("x2",e);f.setAttribute("y2",10);f.setAttribute("stroke","black");c.ticks.appendChild(f)}this.controller.emptyElement(this.ticks);this.scaleLabels=[];for(var e=Protein.UNITS_PER_RESIDUE*this.stickZoom,h=-1,m=this.getResXwithStickZoom(this.size),p=1;p<=this.size;p++){if(1===p||0===p%100&&200*e>Protein.minXDist||0===p%10&&20*e>Protein.minXDist){var q=
this.getResXwithStickZoom(p);(8<=e||1!==p)&&f(this,q);h=(h+1)%2;0===h&&q+Protein.minXDist<m&&c(this,p,q)}if(8<=e&&this.sequence){q=document.createElementNS(xiNET.svgns,"g");q.setAttribute("transform","translate("+this.getResXwithStickZoom(p)+" 0)");var r=document.createElementNS(xiNET.svgns,"text");r.setAttribute("font-family","'Courier New', monospace");r.setAttribute("font-size","10px");r.setAttribute("text-anchor","middle");r.setAttribute("x",0);r.setAttribute("y",3);r.appendChild(document.createTextNode(this.sequence[p-
1]));q.appendChild(r);this.scaleLabels.push(r);this.ticks.appendChild(q)}}c(this,this.size,m);8<e&&f(this,m)};Protein.prototype.toggleFlipped=function(){(this.isFlipped=!this.isFlipped)?(this.intraLinks.setAttribute("transform","scale (1 -1)"),this.intraLinksHighlights.setAttribute("transform","scale (1 -1)")):(this.intraLinks.setAttribute("transform","scale (1 1)"),this.intraLinksHighlights.setAttribute("transform","scale (1 1)"))};
Protein.prototype.setParked=function(c,f){this.isParked=c;if(!0!==this.busy)if(0==c)0===this.form?(d3.select(this.outline).transition().attr("stroke-opacity",1).attr("fill-opacity",1).attr("fill","#ffffff").duration(Protein.transitionTime),this.checkLinks(),d3.select(this.circDomains).transition().attr("opacity",1).attr("transform","scale(1, 1)").duration(Protein.transitionTime)):this.toStick(),this.scale(),this.setAllLineCoordinates();else if(1==c){this.isParked=!0;for(var e=this.proteinLinks.values().length,
h=0;h<e;h++){var m=this.proteinLinks.values()[h];m.hide();for(var m=m.residueLinks.values(),p=m.length,q=0;q<p;q++)m[q].hide()}1===this.form?(this.toCircle(f),e=this.getBlobRadius(),d3.select(this.outline).transition().attr("stroke-opacity",0).attr("fill-opacity",1).attr("fill","#EEEEEE").attr("x",-e).attr("y",-e).attr("width",2*e).attr("height",2*e).attr("rx",e).attr("ry",e).duration(Protein.transitionTime),d3.select(this.rectDomains).transition().attr("opacity",0).attr("transform","scale(1, 1)").duration(Protein.transitionTime)):
(d3.select(this.outline).transition().attr("stroke-opacity",0).attr("fill","#EEEEEE").duration(Protein.transitionTime),d3.select(this.circDomains).transition().attr("opacity",0).attr("transform","scale(1, 1)").duration(Protein.transitionTime))}};
Protein.prototype.setForm=function(c,f){if(!0!==this.busy)if(this.isParked)this.setParked(!1);else if(1==c)this.toStick();else{this.toCircle(f);var e=this.getBlobRadius();d3.select(this.outline).transition().attr("stroke-opacity",1).attr("fill-opacity",1).attr("fill","#ffffff").attr("x",-e).attr("y",-e).attr("width",2*e).attr("height",2*e).attr("rx",e).attr("ry",e).duration(Protein.transitionTime);d3.select(this.rectDomains).transition().attr("opacity",0).attr("transform","scale(1, 1)").duration(Protein.transitionTime);
d3.select(this.circDomains).transition().attr("opacity",1).attr("transform","scale(1, 1)").duration(Protein.transitionTime)}};
Protein.prototype.toCircle=function(c){function f(c){var e=d3.transform(v.labelSVG.getAttribute("transform")),e=v.controller.svgElement.createSVGMatrix().rotate(e.rotate).translate(q(C(c)),Protein.labelY);v.labelSVG.transform.baseVal.initialize(v.controller.svgElement.createSVGTransformFromMatrix(e));null!==r&&v.setPosition(r(C(c)),t(C(c)));e=m(C(c));v.stickZoom=h(C(c));v.setRotation(e);v.setAllLineCoordinates();if(1===c){c=v.proteinLinks.values();for(var e=c.length,p=0;p<e;p++){var x=c[p];if(null===
x.toProtein||x.getFromProtein()===v&&0===x.getToProtein().form||x.getToProtein()===v&&0===x.getFromProtein().form||x.getToProtein()==x.getFromProtein())for(var x=x.residueLinks.values(),y=x.length,J=0;J<y;J++)x[J].hide()}v.form=0;v.checkLinks();v.stickZoom=G;v.rotation=F;v.busy=!1;return!0}return 1<c?f(1):!1}this.busy=!0;this.removePeptides();this.upperGroup.contains(this.lowerRotator.svg)&&this.upperGroup.removeChild(this.lowerRotator.svg);this.upperGroup.contains(this.upperRotator.svg)&&this.upperGroup.removeChild(this.upperRotator.svg);
var e=this.getBlobRadius(),h=d3.interpolate(this.stickZoom,0),m=d3.interpolate(180<this.rotation?this.rotation-360:this.rotation,0),p=d3.transform(this.labelSVG.getAttribute("transform")).translate[0],q=d3.interpolate(p,-(e+5)),r=null,t=null;"undefined"!==typeof c&&null!==c&&(r=d3.interpolate(this.x,c.x),t=d3.interpolate(this.y,c.y));var v=this;d3.select(this.ticks).transition().attr("opacity",0).duration(Protein.transitionTime/4).each("end",function(){v.controller.emptyElement(this)});d3.select(this.highlight).transition().attr("width",
2*e+5).attr("height",2*e+5).attr("x",-e-2.5).attr("y",-e-2.5).attr("rx",e+2.5).attr("ry",e+2.5).duration(Protein.transitionTime);if(null!=this.selfLink)for(var e=this.selfLink.residueLinks.values(),p=e.length,x=0;x<p;x++){var y=e[x];!0===y.intra&&y.shown&&(c=d3.select(y.line),c.attr("d",this.getResidueLinkPath(y)),c.transition().attr("d",this.getAggregateSelfLinkPath()).duration(Protein.transitionTime),c=d3.select(y.highlightLine),c.attr("d",this.getResidueLinkPath(y)),c.transition().attr("d",this.getAggregateSelfLinkPath()).duration(Protein.transitionTime))}if(null!=
this.linkerModifications)for(e=this.linkerModifications.residueLinks.values(),p=e.length,x=0;x<p;x++)c=e[x],c.shown&&(c=d3.select(c.line),c.attr("fill","none"),c.attr("d","M 0,0 L 0,0"));v=this;if(this.annotations){c=this.annotations;for(var J=c.length,e=0;e<J;e++)p=c[e],x=p.colouredRect,d3.select(p.pieSlice).transition().attr("d",this.getAnnotationPieSliceApproximatePath(p)).duration(Protein.transitionTime).each("end",function(){for(var c=0;c<J;c++){var e=v.annotations[c];this===e.pieSlice&&d3.select(this).attr("d",
v.getAnnotationPieSliceArcPath(e))}}),d3.select(x).transition().attr("d",v.getAnnotationPieSliceApproximatePath(p)).duration(Protein.transitionTime)}var G=this.stickZoom,F=this.rotation,C=d3.ease("cubic-in-out");d3.timer(function(c){return f(c/Protein.transitionTime)})};Protein.prototype.getX=function(){return this.x};Protein.prototype.getY=function(){return this.y};
Protein.prototype.toStick=function(){function c(e){var f=d3.transform(y.labelSVG.getAttribute("transform")),f=y.controller.svgElement.createSVGMatrix().rotate(f.rotate).translate(r(J(e)),Protein.labelY);y.labelSVG.transform.baseVal.initialize(y.controller.svgElement.createSVGTransformFromMatrix(f));f=q(J(e));y.setRotation(f);f=m(J(e));d3.select(y.outline).attr("width",f).attr("x",-(f/2)+.5*Protein.UNITS_PER_RESIDUE*y.stickZoom);y.stickZoom=p(J(e));y.setAllLineCoordinates();return 1===e?(y.busy=!1,
!0):1<e?c(1):!1}this.busy=!0;this.form=1;this.upperGroup.appendChild(this.lowerRotator.svg);this.upperGroup.appendChild(this.upperRotator.svg);this.lowerRotator.svg.setAttribute("transform","translate("+(this.getResXwithStickZoom(.5)-Protein.rotOffset)+" 0)");this.upperRotator.svg.setAttribute("transform","translate("+(this.getResXwithStickZoom(this.size-0+.5)+Protein.rotOffset)+" 0)");for(var f=this.proteinLinks.values().length,e=0;e<f;e++){var h=this.proteinLinks.values()[e];h.shown&&h.hide()}var f=
this.size*Protein.UNITS_PER_RESIDUE*this.stickZoom,e=this.getBlobRadius(),m=d3.interpolate(2*e,f),p=d3.interpolate(0,this.stickZoom),q=d3.interpolate(0,180<this.rotation?this.rotation-360:this.rotation),r=d3.interpolate(-(e+5),-(this.size/2*Protein.UNITS_PER_RESIDUE*this.stickZoom+10)),e=this.stickZoom;this.stickZoom=0;this.checkLinks();this.stickZoom=e;d3.select(this.circDomains).transition().attr("opacity",0).duration(Protein.transitionTime);d3.select(this.rectDomains).transition().attr("opacity",
1).duration(Protein.transitionTime);d3.select(this.outline).transition().attr("stroke-opacity",1).attr("fill-opacity",0).attr("fill","#FFFFFF").attr("height",Protein.STICKHEIGHT).attr("y",-Protein.STICKHEIGHT/2).attr("rx",0).attr("ry",0).duration(Protein.transitionTime);d3.select(this.highlight).transition().attr("width",f+5).attr("height",Protein.STICKHEIGHT+5).attr("x",this.getResXwithStickZoom(.5)-2.5).attr("y",-Protein.STICKHEIGHT/2-2.5).attr("rx",0).attr("ry",0).duration(Protein.transitionTime);
if(null!=this.selfLink)for(f=this.selfLink.residueLinks.values(),e=f.length,h=0;h<e;h++){var t=f[h];t.shown&&(d3.select(t.line).attr("d",this.getAggregateSelfLinkPath()),d3.select(t.line).transition().attr("d",this.getResidueLinkPath(t)).duration(Protein.transitionTime),d3.select(t.highlightLine).attr("d",this.getAggregateSelfLinkPath()),d3.select(t.highlightLine).transition().attr("d",this.getResidueLinkPath(t)).duration(Protein.transitionTime))}if(null!=this.linkerModifications)for(f=this.linkerModifications.residueLinks.values(),
e=f.length,h=0;h<e;h++)if(t=f[h],t.shown){var v=this.getResidueLinkPath(t);d3.select(t.line).attr("d","M 0,0 L 0,0 L 0,0 L 0,0");d3.select(t.line).transition().attr("d",v).duration(Protein.transitionTime);d3.select(t.highlightLine).attr("d","M 0,0 L 0,0");d3.select(t.highlightLine).transition().attr("d",v).duration(Protein.transitionTime)}if(this.annotations)for(f=this.annotations,e=f.length,h=0;h<e;h++){var t=f[h],v=t.pieSlice,x=t.colouredRect;v.setAttribute("d",this.getAnnotationPieSliceApproximatePath(t));
d3.select(v).transition().attr("d",this.getAnnotationRectPath(t)).duration(Protein.transitionTime);d3.select(x).transition().attr("d",this.getAnnotationRectPath(t)).duration(Protein.transitionTime)}var y=this,J=d3.ease("cubic-in-out");d3.timer(function(e){return c(e/Protein.transitionTime)});d3.select(this.ticks).attr("opacity",0);this.setScaleGroup();d3.select(this.ticks).transition().attr("opacity",1).delay(.8*Protein.transitionTime).duration(Protein.transitionTime/2)};
Protein.prototype.getAggregateSelfLinkPath=function(){var c=this.getBlobRadius()+7,f=Protein.trig(c,70),e=Protein.trig(c,20),h=Protein.trig(c,85),m=Protein.trig(c,5);return"M 0,0 Q "+h.x+","+-h.y+" "+f.x+","+-f.y+" A "+c+" "+c+" 0 0 1 "+e.x+","+-e.y+" Q "+m.x+","+-m.y+" 0,0"};
Protein.prototype.getResidueLinkPath=function(c){var f=this.getResXwithStickZoom(c.fromResidue),e=0;8<=Protein.UNITS_PER_RESIDUE*this.stickZoom&&(e=-5);if(isNaN(parseFloat(c.toResidue))){!1===c.ambig&&c.line.setAttribute("fill",xiNET.defaultSelfLinkColour.toRGB());var h=[f,26],m=[f,18],p=Protein.rotatePointAboutPoint(h,m,60);return"M "+f+","+-1*e+" L "+h[0]+","+h[1]+" L "+p[0]+","+p[1]+" L "+m[0]+","+m[1]}var h=this.getResXwithStickZoom(c.toResidue),q,r,p=Math.abs(h-f)/2,m=-(Protein.STICKHEIGHT/2+
3);15>p&&(m=-28+p);var t=[f,e],v=[h,e];!0===c.intraMolecular?(q=f+(h-f)/2,e=[q,m-p],r=[q,m-p],c=[q,m-p],q=[q,m-p]):c.hd?(q=f+(h-f)/2,e=[q,m-p],r=[q,m-p],c=Protein.rotatePointAboutPoint([f,m-p],t,-20),q=Protein.rotatePointAboutPoint([h,m-p],v,20)):(c=[f,m],q=[h,e],e=[f,m],r=[h,m]);return" M "+t[0]+","+t[1]+" Q "+c[0]+","+c[1]+" "+e[0]+","+e[1]+" A "+p+","+p+"  0 0 1 "+r[0]+","+r[1]+" Q "+q[0]+","+q[1]+" "+v[0]+","+v[1]};
Protein.prototype.showPeptides=function(c){if(1===this.form)for(var f=-Protein.STICKHEIGHT/2,e=c.length,h=Protein.STICKHEIGHT/e,m=0;m<e;m++){var p=c[m],q=document.createElementNS(xiNET.svgns,"rect");q.setAttribute("class","protein");var r=p[1];if(0<r){var t=(p[0]+.5-this.size/2)*Protein.UNITS_PER_RESIDUE,r=r*Protein.UNITS_PER_RESIDUE;q.setAttribute("x",t);q.setAttribute("y",f);q.setAttribute("width",r);q.setAttribute("height",h);q.setAttribute("fill",xiNET.highlightColour.toRGB());this.peptides.appendChild(q)}p[2]&&
(q=document.createElementNS(xiNET.svgns,"rect"),q.setAttribute("class","protein"),t=(p[2]+.5-this.size/2)*Protein.UNITS_PER_RESIDUE,r=(p[3]-p[2])*Protein.UNITS_PER_RESIDUE,q.setAttribute("x",t),q.setAttribute("y",f),q.setAttribute("width",r),q.setAttribute("height",h),q.setAttribute("fill",xiNET.homodimerLinkColour.toRGB()),q.setAttribute("fill-opacity","0.5"),this.peptides.appendChild(q));f+=h}};Protein.prototype.removePeptides=function(){this.controller.emptyElement(this.peptides)};
Protein.prototype.getResXwithStickZoom=function(c){return(c-this.size/2)*Protein.UNITS_PER_RESIDUE*this.stickZoom};Protein.rotatePointAboutPoint=function(c,f,e){e=e/360*Math.PI*2;var h=Math.cos(e)*(c[0]-f[0])-Math.sin(e)*(c[1]-f[1])+f[0];c=Math.sin(e)*(c[0]-f[0])+Math.cos(e)*(c[1]-f[1])+f[1];return[h,c]};Protein.prototype.checkLinks=function(){for(var c=this.proteinLinks.values(),f=c.length,e=0;e<f;e++)c[e].check()};
Protein.prototype.setAllLineCoordinates=function(){for(var c=this.proteinLinks.values(),f=c.length,e=0;e<f;e++){var h=c[e];if(null!==h.getToProtein()&&0===h.getFromProtein().form&&0===h.getToProtein().form)h.setLineCoordinates(this);else for(var h=h.residueLinks.values(),m=h.length,p=0;p<m;p++){var q=h[p];q.setLineCoordinates(this);var r=q.proteinLink.getOtherEnd(this);r&&1===r.form&&8<r.stickZoom*Protein.UNITS_PER_RESIDUE&&q.setLineCoordinates(r)}}};
Protein.prototype.countExternalLinks=function(){if(this.isParked)return 0;for(var c=0,f=this.proteinLinks.keys().length,e=0;e<f;e++){var h=this.proteinLinks.values()[e];h.intra||!0===h.check()&&c++}return c};Protein.prototype.getSubgraph=function(c){null==this.subgraph&&(c={nodes:d3.map(),links:d3.map()},c.nodes.set(this.id,this),!1===this.isParked&&(this.subgraph=this.addConnectedNodes(c)),this.controller.subgraphs.push(c));return this.subgraph};
Protein.prototype.addConnectedNodes=function(c){for(var f=this.proteinLinks.values(),e=f.length,h=0;h<e;h++){var m=f[h];m.fromProtein===m.toProtein||!0!==m.check()||c.links.has(m.id)||(c.links.set(m.id,m),m=m.getFromProtein()===this?m.getToProtein():m.getFromProtein(),null===m||c.nodes.has(m.id)||(c.nodes.set(m.id,m),m.subgraph=c,m.addConnectedNodes(c)))}return c};
Protein.prototype.setPositionalFeatures=function(c){this.annotations=[];this.circDomains&&this.controller.emptyElement(this.circDomains);this.rectDomains&&this.controller.emptyElement(this.rectDomains);if(c){c.sort(function(c,e){return e.end-e.start-(c.end-c.start)});this.annotations=c;for(var f=0;f<c.length;f++){var e=c[f];e.start-=0;e.end-=0;e.pieSlice=document.createElementNS(xiNET.svgns,"path");e.colouredRect=document.createElementNS(xiNET.svgns,"path");0===this.form?(e.pieSlice.setAttribute("d",
this.getAnnotationPieSliceArcPath(e)),e.colouredRect.setAttribute("d",this.getAnnotationPieSliceApproximatePath(e))):(e.pieSlice.setAttribute("d",this.getAnnotationRectPath(e)),e.colouredRect.setAttribute("d",this.getAnnotationRectPath(e)));var h;null==e.colour?(h="alpha_helix"===e.name?new RGBColor("#7EB6FF88"):"beta_strand"===e.name?new RGBColor("#9AFF9A88"):"turn"===e.name?new RGBColor("#FF00AA88"):new RGBColor(Protein.domainColours(e.name)),e.colour=h):h=e.colour;e.pieSlice.setAttribute("fill",
h.toRGB());e.pieSlice.setAttribute("stroke",h.toRGB());e.pieSlice.setAttribute("stroke-width",1);e.pieSlice.setAttribute("fill-opacity","0.5");e.colouredRect.setAttribute("fill",h.toRGB());e.colouredRect.setAttribute("stroke",h.toRGB());e.colouredRect.setAttribute("stroke-width",1);e.colouredRect.setAttribute("fill-opacity","0.5");e.pieSlice.name=e.name+" ["+e.start+" - "+e.end+"]";var m=this.controller,p=this;e.pieSlice.onmouseover=function(c){var e=c.target.correspondingUseElement?c.target.correspondingUseElement:
c.target;m.preventDefaultsAndStopPropagation(c);m.setTooltip(e.name,e.getAttribute("fill"));p.showHighlight(!0)};e.colouredRect.onmouseover=function(c){var e=c.target.correspondingUseElement?c.target.correspondingUseElement:c.target;m.preventDefaultsAndStopPropagation(c);m.setTooltip(e.name,e.getAttribute("fill"));p.showHighlight(!0)};this.circDomains.appendChild(e.pieSlice);this.rectDomains.appendChild(e.colouredRect)}}};
Protein.trig=function(c,f){var e=f/360*Math.PI*2;return{x:c*Math.cos(e),y:c*Math.sin(e)}};Protein.stepsInArc=5;Protein.prototype.getAnnotationPieSliceArcPath=function(c){var f=(c.start-1)/this.size*360,e=c.end/this.size*360,h=0,m=1;180<e-f&&(m=h=1);1==c.start&&c.end==this.size&&(f=.5,e=359.5,m=1);c=this.getBlobRadius()-2;f=Protein.trig(c,f-90);e=Protein.trig(c,e-90);return"M0,0 L"+f.x+","+f.y+" A"+c+","+c+" 0 "+h+" "+m+" "+e.x+","+e.y+" Z"};
Protein.prototype.getAnnotationPieSliceApproximatePath=function(c){var f=(c.start-1)/this.size*360;c=c.end/this.size*360;var e=this.getBlobRadius()-2;Protein.trig(e,f-90);Protein.trig(e,c-90);for(var h="M 0,0",m=0;m<=Protein.stepsInArc;m++)var p=Protein.trig(e,f+m/5*(c-f)-90),h=h+(" L "+p.x+","+p.y);return h+=" L 0,0  Z"};
Protein.prototype.getAnnotationRectPath=function(c){var f=Protein.STICKHEIGHT/2,e=-Protein.STICKHEIGHT/2,h=this.getResXwithStickZoom(c.start-.5);c=(1+(c.end-c.start))*Protein.UNITS_PER_RESIDUE*this.stickZoom;for(var m="M "+h+","+f,p=0;p<=Protein.stepsInArc;p++)m+=" L "+(h+p/Protein.stepsInArc*c)+","+e;return m+(" L "+(h+c)+","+f+" Z")};function Annotation(c,f,e,h,m){this.name=c;this.start=f;this.end=e;void 0!==h&&null!==h&&(this.colour=new RGBColor(h.trim()));this.notes=m};ProteinLink.maxNoResidueLinks=0;ProteinLink.prototype=new xiNET.Link;
function ProteinLink(c,f,e,h){this.id=c;this.residueLinks=d3.map();this.controller=h;this.fromProtein=f;this.toProtein=e;this.ambig=!1;this.tooltip=this.id;this.hidden=this.shown=!1;this.selfLink()?(this.line=document.createElementNS(xiNET.svgns,"path"),this.highlightLine=document.createElementNS(xiNET.svgns,"path"),this.fatLine=document.createElementNS(xiNET.svgns,"path")):(this.line=document.createElementNS(xiNET.svgns,"line"),this.highlightLine=document.createElementNS(xiNET.svgns,"line"),this.fatLine=
document.createElementNS(xiNET.svgns,"line"));this.line.setAttribute("class","link");this.line.setAttribute("fill","none");this.line.setAttribute("stroke","black");this.line.setAttribute("stroke-width",1);this.line.setAttribute("stroke-linecap","round");this.highlightLine.setAttribute("class","link");this.highlightLine.setAttribute("fill","none");this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB());this.highlightLine.setAttribute("stroke-width","10");this.highlightLine.setAttribute("stroke-linecap",
"round");this.highlightLine.setAttribute("stroke-opacity","0");this.fatLine.setAttribute("class","link");this.fatLine.setAttribute("fill","none");this.fatLine.setAttribute("stroke","lightgray");this.fatLine.setAttribute("stroke-linecap","round");this.fatLine.setAttribute("stroke-linejoin","round");var m=this;this.line.onmousedown=function(c){m.mouseDown(c)};this.line.onmouseover=function(c){m.mouseOver(c)};this.line.onmouseout=function(c){m.mouseOut(c)};this.line.ontouchstart=function(c){m.touchStart(c)};
this.highlightLine.onmousedown=function(c){m.mouseDown(c)};this.highlightLine.onmouseover=function(c){m.mouseOver(c)};this.highlightLine.onmouseout=function(c){m.mouseOut(c)};this.highlightLine.ontouchstart=function(c){m.touchStart(c)};this.fatLine.onmousedown=function(c){m.mouseDown(c)};this.fatLine.onmousedown=function(c){m.mouseDown(c)};this.fatLine.onmouseover=function(c){m.mouseOver(c)};this.fatLine.onmouseout=function(c){m.mouseOut(c)};this.fatLine.ontouchstart=function(c){m.touchStart(c)};
this.isSelected=!1}ProteinLink.prototype.selfLink=function(){return this.fromProtein===this.toProtein};ProteinLink.prototype.initSelfLinkSVG=function(){var c=this.fromProtein.getAggregateSelfLinkPath();this.line.setAttribute("d",c);this.highlightLine.setAttribute("d",c);this.fatLine.setAttribute("d",c)};ProteinLink.prototype.getFromProtein=function(){return this.fromProtein};ProteinLink.prototype.getToProtein=function(){return this.toProtein};
ProteinLink.prototype.showHighlight=function(c,f){"undefined"===typeof f&&(f=!1);this.shown&&(c?(this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB()),this.highlightLine.setAttribute("stroke-opacity","1")):(this.highlightLine.setAttribute("stroke",xiNET.selectedColour.toRGB()),0==this.isSelected&&this.highlightLine.setAttribute("stroke-opacity","0")));if(f&&this.ambig)for(var e=this.residueLinks.values().length,h=0;h<e;h++)for(var m=this.residueLinks.values()[h],p=m.matches.length,
q=0;q<p;q++){var r=m.matches[q][0];if(r.isAmbig())for(var t=r.residueLinks.length,v=0;v<t;v++)m=r.residueLinks[v],!0===m.shown&&0==m.isSelected&&m.showHighlight(c,!1),!0===m.proteinLink.shown&&m.proteinLink.showHighlight(c,!1)}};
ProteinLink.prototype.setSelected=function(c){c&&!1===this.isSelected?(this.controller.selected.set(this.id,this),this.isSelected=!0,this.highlightLine.setAttribute("stroke",xiNET.selectedColour.toRGB()),this.highlightLine.setAttribute("stroke-opacity","1")):!1===c&&!0===this.isSelected&&(this.controller.selected.remove(this.id),this.isSelected=!1,this.highlightLine.setAttribute("stroke-opacity","0"),this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB()))};
ProteinLink.prototype.showID=function(){if("function"===typeof send_match_ids){var c,f=this.getFilteredMatches(),e=f.length;c="";for(var h=!0,m=0;m<e;m++)!0===h?h=!1:c+=",",c+=f[m];send_match_ids(c)}else{c="<h5>"+this.fromProtein.name+" ["+this.fromProtein.id+"] to "+this.toProtein.name+" ["+this.toProtein.id+"]</h5>";for(var e=this.residueLinks.values(),p=e.length,h=[],f=d3.map(),q=d3.map(),m=0;m<p;m++){var r=e[m],t=!1;if(r.matches)for(var v=r.matches.length,x=0;x<v;x++){var y=r.matches[x][0];if(y.meetsFilterCriteria())if(!1===
t&&(t=!0,h.push(r)),f.set(y.id),y.isAmbig())for(var J=0;J<y.residueLinks.length;J++)q.set(y.residueLinks[J].proteinLink.id);else this.ambig=!1}else h.push(r)}p=h.length;c+="<h5>"+p+" unique residue - residue linkage site";1<p&&(c+="s");c+=". "+f.values().length+" matches.</h5>";q="<table><tr><th>Id</th><th>Protein1</th>";q+="<th>PepPos1</th>";q+="<th>PepSeq1</th>";q+="<th>LinkPos1</th>";q+="<th>Protein2</th>";q+="<th>PepPos2</th>";q+="<th>PepSeq2</th>";q+="<th>LinkPos2</th>";q+="<th>Score</th>";!0===
this.controller.autoValidatedFound&&(q+="<th>Auto</th>");!0===this.controller.manualValidatedFound&&(q+="<th>Manual</th>");q+="</tr>";for(m=0;m<p;m++)for(f=h[m].getFilteredMatches(),e=f.length,r=0;r<e;r++)q+=f[r][0].toTableRow();q+="</table>";c+=q;this.controller.message(c)}};
ProteinLink.prototype.getFilteredMatches=function(){for(var c=this.residueLinks.values(),f=c.length,e=d3.map(),h=0;h<f;h++)for(var m=c[h],p=m.matches.length,q=0;q<p;q++){var r=m.matches[q];r[0].meetsFilterCriteria()&&e.set(r[0].id,r)}return e.values()};
ProteinLink.prototype.check=function(){if(this.fromProtein.isParked||null!==this.toProtein&&this.toProtein.isParked)return this.hide(),!1;if(this.selfLink()&&!1===this.controller.selfLinksShown){if(0===this.fromProtein.form)this.hide();else for(var c=this.residueLinks.values(),f=c.length,e=0;e<f;e++)c[e].hide();return!1}if(this.hidden){if(0===this.fromProtein.form&&null!==this.toProtein&&0===this.toProtein.form)this.hide();else for(c=this.residueLinks.values(),f=c.length,e=0;e<f;e++)c[e].hide();return!1}c=
this.residueLinks.values();f=c.length;this.hd=!1;if(0===this.fromProtein.form&&null!==this.toProtein&&0===this.toProtein.form){this.ambig=!0;for(var h=[],m=d3.map(),p=d3.map(),e=0;e<f;e++){var q=c[e],r=!1;if(q.matches)for(var t=q.matches.length,v=0;v<t;v++){var x=q.matches[v][0];if(x.meetsFilterCriteria()){!0===x.hd&&(this.hd=!0);!1===r&&(r=!0,h.push(q));m.set(x.id);if(x.isAmbig())for(var y=0;y<x.residueLinks.length;y++)p.set(x.residueLinks[y].proteinLink.id);else this.ambig=!1;1==x.manuallyDashed&&
(this.manuallyDashed=!0)}}else h.push(q)}c=h.length;if(0<c)return this.tooltip=this.id+", "+c+" unique cross-link",1<c&&(this.tooltip+="s"),this.tooltip+=" ("+m.keys().length,1===m.keys().length?this.tooltip+=" match)":this.tooltip+=" matches)",this.w=45/ProteinLink.maxNoResidueLinks*c,this.ambig=this.ambig&&1<p.keys().length,this.dashedLine(this.ambig||this.manuallyDashed),this.selfLink()&&(this.hd?(this.line.setAttribute("stroke",xiNET.homodimerLinkColour.toRGB()),this.line.setAttribute("stroke-width",
xiNET.homodimerLinkWidth)):(this.line.setAttribute("stroke","black"),this.line.setAttribute("stroke-width",1))),this.show(),!0;this.hide();return!1}if(null!==this.toProtein||0!==this.fromProtein.form){m=!1;for(p=0;p<f;p++)!0===c[p].check()&&(m=!0);return m}};ProteinLink.prototype.dashedLine=function(c){c?!0===this.selfLink()?this.line.setAttribute("stroke-dasharray","4, 4"):this.line.setAttribute("stroke-dasharray",4*this.controller.z+", "+4*this.controller.z):c||this.line.removeAttribute("stroke-dasharray")};
ProteinLink.prototype.show=function(){this.shown||(this.shown=!0,this.selfLink()?(1<ProteinLink.maxNoResidueLinks&&(this.fatLine.setAttribute("transform","translate("+this.fromProtein.x+" "+this.fromProtein.y+") scale("+this.controller.z+")"),this.controller.p_pLinksWide.appendChild(this.fatLine)),this.line.setAttribute("transform","translate("+this.fromProtein.x+" "+this.fromProtein.y+") scale("+this.controller.z+")"),this.highlightLine.setAttribute("transform","translate("+this.fromProtein.x+" "+
this.fromProtein.y+") scale("+this.controller.z+")")):(this.line.setAttribute("stroke-width",1*this.controller.z),this.highlightLine.setAttribute("stroke-width",10*this.controller.z),this.setLineCoordinates(this.fromProtein),this.setLineCoordinates(this.toProtein),1<ProteinLink.maxNoResidueLinks&&this.controller.p_pLinksWide.appendChild(this.fatLine)),this.controller.highlights.appendChild(this.highlightLine),this.controller.p_pLinks.appendChild(this.line));1<ProteinLink.maxNoResidueLinks&&(this.selfLink()?
this.fatLine.setAttribute("stroke-width",this.w):this.fatLine.setAttribute("stroke-width",this.controller.z*this.w))};ProteinLink.prototype.hide=function(){this.shown&&(this.shown=!1,this.selfLink(),1<ProteinLink.maxNoResidueLinks&&this.controller.p_pLinksWide.removeChild(this.fatLine),this.controller.highlights.removeChild(this.highlightLine),this.controller.p_pLinks.removeChild(this.line))};
ProteinLink.prototype.setLineCoordinates=function(c){null!==this.getToProtein()&&this.shown&&(this.getFromProtein()===c?(this.line.setAttribute("x1",c.x),this.line.setAttribute("y1",c.y),this.highlightLine.setAttribute("x1",c.x),this.highlightLine.setAttribute("y1",c.y),this.fatLine.setAttribute("x1",c.x),this.fatLine.setAttribute("y1",c.y)):this.getToProtein()===c&&(this.line.setAttribute("x2",c.x),this.line.setAttribute("y2",c.y),this.highlightLine.setAttribute("x2",c.x),this.highlightLine.setAttribute("y2",
c.y),this.fatLine.setAttribute("x2",c.x),this.fatLine.setAttribute("y2",c.y)))};ProteinLink.prototype.getOtherEnd=function(c){return this.fromProtein===c?this.toProtein:this.fromProtein};ResidueLink.prototype=new xiNET.Link;function ResidueLink(c,f,e,h,m,p){this.id=c;this.controller=m;this.proteinLink=f;this.fromResidue=e;this.toResidue=h;this.intra=!1;"undefined"!==typeof this.proteinLink&&this.proteinLink.fromProtein===this.proteinLink.toProtein&&(this.intra=!0);this.ambig=!1;this.tooltip=this.id;!0===p&&(this.flip=!0);this.dashed=this.shown=!1;this.curveMidX=null}
ResidueLink.prototype.initSVG=function(){if("undefined"===typeof this.line){this.intra||null===this.proteinLink.toProtein?(this.line=document.createElementNS(xiNET.svgns,"path"),this.line.setAttribute("stroke",xiNET.defaultSelfLinkColour.toRGB()),this.highlightLine=document.createElementNS(xiNET.svgns,"path")):(this.line=document.createElementNS(xiNET.svgns,"line"),this.line.setAttribute("stroke",xiNET.defaultInterLinkColour.toRGB()),this.line.setAttribute("stroke-linecap","round"),this.highlightLine=
document.createElementNS(xiNET.svgns,"line"),this.highlightLine.setAttribute("stroke-linecap","round"));this.line.setAttribute("class","link");this.line.setAttribute("fill","none");this.highlightLine.setAttribute("class","link");this.highlightLine.setAttribute("fill","none");this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB());this.highlightLine.setAttribute("stroke-width","10");this.highlightLine.setAttribute("stroke-opacity","0");"undefined"!==typeof this.colour&&this.line.setAttribute("stroke",
this.colour);var c=this;this.line.onmousedown=function(f){c.mouseDown(f)};this.line.onmouseover=function(f){c.mouseOver(f)};this.line.onmouseout=function(f){c.mouseOut(f)};this.line.ontouchstart=function(f){c.touchStart(f)};this.highlightLine.onmousedown=function(f){c.mouseDown(f)};this.highlightLine.onmouseover=function(f){c.mouseOver(f)};this.highlightLine.onmouseout=function(f){c.mouseOut(f)};this.highlightLine.ontouchstart=function(f){c.touchStart(f)}}this.isSelected=!1};
ResidueLink.prototype.getFromProtein=function(){return this.proteinLink.fromProtein};ResidueLink.prototype.getToProtein=function(){return this.proteinLink.toProtein};
ResidueLink.prototype.showHighlight=function(c,f){if(!(this.proteinLink.fromProtein.busy||this.proteinLink.toProtein&&this.proteinLink.toProtein.busy)){"undefined"===typeof f&&(f=!1);if(this.shown)if(c){this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB());this.highlightLine.setAttribute("stroke-opacity","0.7");for(var e=[],h=[],m=this.getFilteredMatches(),p=m.length,q=0;q<p;q++){var r=m[q][0],t=m[q][3]-1,v=m[q][4];e.push([m[q][1]-1,m[q][2],r.overlap[0],r.overlap[1]]);h.push([t,
v,r.overlap[0],r.overlap[1]])}this.proteinLink.fromProtein.showPeptides(e);null!==this.proteinLink.toProtein&&this.proteinLink.toProtein.showPeptides(h)}else this.highlightLine.setAttribute("stroke",xiNET.selectedColour.toRGB()),0==this.isSelected&&this.highlightLine.setAttribute("stroke-opacity","0"),this.proteinLink.fromProtein.removePeptides(),null!==this.proteinLink.toProtein&&this.proteinLink.toProtein.removePeptides();if(f&&this.ambig)for(e=this.matches?this.matches.length:0,q=0;q<e;q++)if(r=
this.matches[q][0],r.isAmbig())for(h=r.residueLinks.length,m=0;m<h;m++)p=r.residueLinks[m],p.showHighlight(c,!1),p.proteinLink.showHighlight(c,!1)}};
ResidueLink.prototype.setSelected=function(c){c&&!1===this.isSelected?(this.controller.selected.set(this.id,this),this.isSelected=!0,this.highlightLine.setAttribute("stroke",xiNET.selectedColour.toRGB()),this.highlightLine.setAttribute("stroke-opacity","0.7")):!1===c&&!0===this.isSelected&&(this.controller.selected.remove(this.id),this.isSelected=!1,this.highlightLine.setAttribute("stroke-opacity","0"),this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB()))};
ResidueLink.prototype.showID=function(){if("function"===typeof send_match_ids){for(var c=this.getFilteredMatches(),f=[],e=c.length,h=!0,m=0;m<e;m++)h?h=!1:f+=",",f+=c[m].id;send_match_ids(f)}else{c=this.getFromProtein();e=this.getToProtein();f="<h5>"+c.name+" ["+c.id+"], residue "+this.fromResidue+" to "+(e?e.name:"null")+" ["+(e?e.id:"")+"], residue "+this.toResidue+"</h5>";c=this.getFilteredMatches();e=c.length;f+="<p>"+e+" match";f=1<e?f+"es:</p>":f+":</p>";h="<table><tr><th>Id</th><th>Protein1</th>";
h+="<th>PepPos1</th>";h+="<th>PepSeq1</th>";h+="<th>LinkPos1</th>";h+="<th>Protein2</th>";h+="<th>PepPos2</th>";h+="<th>PepSeq2</th>";h+="<th>LinkPos2</th>";h+="<th>Score</th>";!0===this.controller.autoValidatedFound&&(h+="<th>Auto</th>");!0===this.controller.manualValidatedFound&&(h+="<th>Manual</th>");h+="</tr>";for(m=0;m<e;m++)h+=c[m][0].toTableRow();h+="</table><p>&nbsp;</p>";f+=h;this.controller.message(f)}};
ResidueLink.prototype.getFilteredMatches=function(){this.ambig=!0;this.intraMolecular=this.hd=!1;for(var c=[],f=this.matches?this.matches.length:0,e=0;e<f;e++){var h=this.matches[e][0];h.meetsFilterCriteria()&&(c.push(this.matches[e]),!1===h.isAmbig()&&(this.ambig=!1),!0===h.hd&&(this.hd=!0),1===h.type&&(this.intraMolecular=!0))}return c};
ResidueLink.prototype.check=function(c){if(this.controller.intraHidden&&this.intra||this.proteinLink.hidden)return this.hide(),!1;if("undefined"===typeof this.matches||null==this.matches)return this.ambig=!1,this.show(),!0;c=this.getFilteredMatches().length;if(0<c)return this.tooltip=this.proteinLink.fromProtein.labelText+"_"+this.fromResidue+"-"+(null!=this.proteinLink.toProtein?this.proteinLink.toProtein.labelText:"null")+"_"+this.toResidue+" ("+c,this.tooltip=1==c?this.tooltip+" match)":this.tooltip+
" matches)",this.show(),this.dashedLine(this.ambig),!0===this.intra&&(!0===this.hd?(this.line.setAttribute("stroke",xiNET.homodimerLinkColour.toRGB()),this.line.setAttribute("transform","scale(1, -1)"),this.line.setAttribute("stroke-width",xiNET.homodimerLinkWidth),this.highlightLine.setAttribute("transform","scale(1, -1)")):(this.line.setAttribute("stroke",xiNET.defaultSelfLinkColour.toRGB()),this.line.setAttribute("transform","scale(1, 1)"),this.line.setAttribute("stroke-width",xiNET.linkWidth),
this.highlightLine.setAttribute("transform","scale(1, 1)"))),!0;this.hide();return!1};ResidueLink.prototype.dashedLine=function(c){"undefined"===typeof this.line||isNaN(parseFloat(this.toResidue))||(c?this.intra?(this.dashed=!0,this.line.setAttribute("stroke-dasharray","4, 4")):(this.dashed=!0,this.line.setAttribute("stroke-dasharray",4*this.controller.z+", "+4*this.controller.z)):c||(this.dashed=!1,this.line.removeAttribute("stroke-dasharray")))};
ResidueLink.prototype.show=function(){this.controller.sequenceInitComplete&&!this.shown&&(this.shown=!0,"undefined"===typeof this.line&&this.initSVG(),this.intra||null===this.proteinLink.toProtein?(this.line.setAttribute("stroke-width",xiNET.linkWidth),this.line.setAttribute("d",this.proteinLink.fromProtein.getResidueLinkPath(this)),this.proteinLink.fromProtein.intraLinksHighlights.appendChild(this.highlightLine),this.proteinLink.fromProtein.intraLinks.appendChild(this.line)):(this.line.setAttribute("stroke-width",
this.controller.z*xiNET.linkWidth),this.highlightLine.setAttribute("stroke-width",10*this.controller.z),this.setLineCoordinates(this.proteinLink.fromProtein),this.setLineCoordinates(this.proteinLink.toProtein),this.controller.highlights.appendChild(this.highlightLine),this.controller.res_resLinks.appendChild(this.line)))};
ResidueLink.prototype.hide=function(){this.controller.sequenceInitComplete&&this.shown&&(this.shown=!1,this.intra||null===this.proteinLink.toProtein?(this.proteinLink.fromProtein.intraLinksHighlights.removeChild(this.highlightLine),this.proteinLink.fromProtein.intraLinks.removeChild(this.line)):(this.controller.res_resLinks.removeChild(this.line),this.controller.highlights.removeChild(this.highlightLine)))};
ResidueLink.prototype.setLineCoordinates=function(c){if(null!=c.x&&null!=c.y&&null!==this.getToProtein()&&this.shown){var f;this.getFromProtein()===c?(0===c.form?(f=c.x,c=c.y):(c=this.getResidueCoordinates(this.fromResidue,c),f=c[0],c=c[1]),this.line.setAttribute("x1",f),this.line.setAttribute("y1",c),this.highlightLine.setAttribute("x1",f),this.highlightLine.setAttribute("y1",c)):this.getToProtein()===c&&(0===c.form?(f=c.x,c=c.y):(c=this.getResidueCoordinates(this.toResidue,c),f=c[0],c=c[1]),this.line.setAttribute("x2",
f),this.line.setAttribute("y2",c),this.highlightLine.setAttribute("x2",f),this.highlightLine.setAttribute("y2",c))}};
ResidueLink.prototype.getResidueCoordinates=function(c,f){var e=f.getResXwithStickZoom(c)*this.controller.z,h=0;if(8<Protein.UNITS_PER_RESIDUE*f.stickZoom){var h=this.getFromProtein(),m=this.getToProtein(),p=Math.atan2(h.y-m.y,h.x-m.x)/(2*Math.PI)*360;0>p&&(p+=360);f===h?(h=p-h.rotation,0>h&&(h+=360),m=5,180>h&&(m=-5)):(h=p-m.rotation,0>h&&(h+=360),m=5,180<h&&(m=-5));h=m*this.controller.z}h=Protein.rotatePointAboutPoint([e,h],[0,0],f.rotation);e=h[0]+f.x;h=h[1]+f.y;return[e,h]};
ResidueLink.prototype.leastAmbiguousMatches=function(){};ResidueLink.prototype.toJSON=function(){for(var c=[],f=this.matches.length,e=0;e<f;e++)c.push(this.matches[e].id);return{}};function xiNET_Storage(){}xiNET_Storage.ns="xiNET.";xiNET_Storage.accessionFromId=function(c){c+="";return-1!==c.indexOf("|")?c.split("|")[1]:c};
xiNET_Storage.getUniProtTxt=function(c,f){function e(){d3.text("https://rest.uniprot.org/uniprotkb/"+h+".txt",function(e){"undefined"!==typeof Storage&&localStorage.setItem(xiNET_Storage.ns+"UniProtKB."+h,e);f(c,e)})}var h=xiNET_Storage.accessionFromId(c);if("undefined"!==typeof Storage){var m=localStorage.getItem(xiNET_Storage.ns+"UniProtKB."+h);m?f(c,m):e()}else e()};
xiNET_Storage.getSequence=function(c,f){function e(){d3.text("https://rest.uniprot.org/uniprotkb/"+h+".fasta",function(e,m){if(e)alert("Failed. Cannot fetch sequence data for "+h+". Is it a valid UniprotKB accession number?");else if(m){for(var r="",t=m.split("\n"),v=t.length,x=1;x<v;x++)var y=t[x],y=t[x],r=r+y;r=r.replace(/[^A-Z]/g,"");"undefined"!==typeof Storage&&localStorage.setItem(xiNET_Storage.ns+"UniProtKB.fasta."+h,r);f(c,r)}})}var h=xiNET_Storage.accessionFromId(c);if("undefined"!==typeof Storage){var m=
localStorage.getItem(xiNET_Storage.ns+"UniProtKB.fasta."+h);m?(console.log(h+" UniProt from local storage."),f(c,m)):e()}else e()};xiNET_Storage.getUniProtFeatures=function(c,f){xiNET_Storage.accessionFromId(c);xiNET_Storage.getUniProtTxt(c,function(c,h){var m=[];if(null!==h)for(var p=h.split("\n"),q=p.length,r=0;r<q;r++){var t=p[r];0===t.indexOf("FT")&&(t=t.split(/\s{2,}/g),4<t.length&&"CHAIN"!==t[1]&&m.push(new Annotation(t[1],t[2],t[3],null,t[4])))}f(c,m)})};
xiNET_Storage.getSuperFamFeatures=function(c,f){function e(){d3.xml("http://supfam.org/SUPERFAMILY/cgi-bin/das/up/features?segment="+m,function(c){c=(new XMLSerializer).serializeToString(c);"undefined"!==typeof Storage&&localStorage.setItem(xiNET_Storage.ns+"SuperFamDAS."+m,c);h(c)})}function h(e){if(window.DOMParser)var h=(new DOMParser).parseFromString(e,"text/xml");else h=new ActiveXObject("Microsoft.XMLDOM"),h.async=!1,h.loadXML(e);e=[];for(var h=h.getElementsByTagName("FEATURE"),m=h.length,p=
0;p<m;p++){var x=h[p],y=x.getElementsByTagName("TYPE")[0];if("miscellaneous"===y.getAttribute("category")){var y=y.getAttribute("id"),J=x.getElementsByTagName("START")[0].textContent,x=x.getElementsByTagName("END")[0].textContent;e.push(new Annotation(y,J,x))}}f(c,e)}var m=xiNET_Storage.accessionFromId(c);if("undefined"!==typeof Storage){var p=localStorage.getItem(xiNET_Storage.ns+"SuperFamDAS."+m);p?h(p):e()}else e()};function Rotator(c,f,e){var h=this;this.ctrl=e;this.proteinOrPartThereof=c;this.upperOrLower=f;this.svg=document.createElementNS(xiNET.svgns,"g");this.rotatorSymbol=document.createElementNS(xiNET.svgns,"g");c=document.createElementNS(xiNET.svgns,"circle");c.setAttribute("r",14);c.setAttribute("stroke","none");c.setAttribute("fill","gray");c.setAttribute("fill-opacity","0.0");this.svg.appendChild(c);c=document.createElementNS(xiNET.svgns,"circle");c.setAttribute("r",20);c.setAttribute("stroke","black");
c.setAttribute("stroke-width","1");c.setAttribute("fill","none");this.rotatorSymbol.appendChild(c);c=document.createElementNS(xiNET.svgns,"path");c.setAttribute("d","M 19.818182,-3 L 16,3.10345 L 23.636363,3.10345 L 19.818182,-3 z ");c.setAttribute("stroke","black");c.setAttribute("stroke-width","1");c.setAttribute("fill","black");this.rotatorSymbol.appendChild(c);c=document.createElementNS(xiNET.svgns,"path");c.setAttribute("d","M 19.818182,-3 L 16,3.10345 L 23.636363,3.10345 L 19.818182,-3 z ");
c.setAttribute("stroke","black");c.setAttribute("stroke-width","1");c.setAttribute("fill","black");c.setAttribute("transform","rotate(180)");this.rotatorSymbol.appendChild(c);this.rotatorSymbol.setAttribute("transform","rotate(45) scale (0.7, 0.7)");this.rotatorSymbol.setAttribute("display","none");this.inner=document.createElementNS(xiNET.svgns,"g");this.inner.setAttribute("class","PV_rotator");this.inner.appendChild(this.rotatorSymbol);this.svg.appendChild(this.inner);this.svg.onmouseover=function(c){h.rotatorMouseOver(c)};
this.svg.onmouseout=function(c){h.rotatorMouseOut(c)};this.svg.onmousedown=function(c){h.rotatorMouseDown(c)}}Rotator.prototype.rotatorMouseOver=function(c){this.ctrl.rotating||this.rotatorSymbol.setAttribute("display","block")};Rotator.prototype.rotatorMouseOut=function(c){this.rotatorSymbol.setAttribute("display","none")};
Rotator.prototype.rotatorMouseDown=function(c){this.ctrl.state=xiNET.Controller.ROTATING;this.ctrl.dragElement=this.proteinOrPartThereof;c=this.ctrl.getEventPoint(c);this.ctrl.mouseToSVG(c.x,c.y);this.ctrl.whichRotator=this.upperOrLower;return!1};xiNET.Controller.prototype.readCSV=function(c,f,e){function h(c){for(var e=1;e<V;e++)for(var f=r[e][c].replace(/(['"])/g,"").split(/[;,]/),h=0;h<f.length;h++){var m=f[h].trim();if("-"!==m.trim()&&"n/a"!==m.trim()){var p="",t="";if(-1===f[h].indexOf("|"))p=f[h].trim();else{var t=f[h].split("|"),p=t[1].trim(),t=t[2].trim(),v=t.indexOf("_");-1!==v&&(t=t.substring(0,v).trim())}q.proteins.has(m)||(p=new Protein(m,q,p,t),q.proteins.set(m,p))}}}function m(c){var e=c;-1!==c.indexOf("|")&&(c=c.split("|"),
3===c.length&&(e=c[2],c=e.indexOf("_"),-1!==c&&(e=e.substring(0,c))));return e}function p(){for(var c,e,f,h,m=1;m<V;m++){c=r[m][v];e=r[m][y];f=-1!==F?r[m][F]:m;-1!==G&&(h=r[m][G]);var p=/(.*)-(.*)-a(\d*)-b(\d*)/.exec(f),t=/(.*)-(.*)-(.*)/.exec(f);if(null!==p){for(var w=p[1],t=p[2],B=p[3]-0,D=p[4]-0,p=r[m][C].toString().split(/[;,]/),L=0;L<p.length;L++)p[L]=parseInt(p[L])-B+1;for(var K=r[m][X].toString().split(/[;,]/),L=0;L<K.length;L++)K[L]=parseInt(K[L])-D+1;q.addMatch(c,p.join(";"),e,K.join(";"),
f,h,B,D,w,t)}else if(-1===z||null===t||"intralink"!==r[m][z]&&"monolink"!==r[m][z])p=r[m],q.addMatch(c,p[x],e,p[J],f,h,p[C],p[X],p[O],p[Y],null,null,null,null,-1!=T?p[T]:null);else{w=t[1];B=parseInt(t[2].substring(1));p=r[m][C].toString().split(/[;,]/);for(L=0;L<p.length;L++)p[L]=parseInt(p[L])-B+1;"intralink"===r[m][z]?(D=parseInt(t[3].substring(1)),q.addMatch(c,p.join(";"),null,null,f,h,B,D,w,null)):q.addMatch(c,p.join(";"),null,null,f,h,B,null,w,null)}}}var q=this,r=d3.csv.parseRows(c);c=r[0];
for(var t=0;t<c.length;t++)c[t]=c[t].trim();var v=c.indexOf("Protein1"),x=c.indexOf("PepPos1"),y=c.indexOf("Protein2"),J=c.indexOf("PepPos2"),G=c.indexOf("Score"),F=c.indexOf("Id"),C=c.indexOf("LinkPos1"),O=c.indexOf("PepSeq1"),X=c.indexOf("LinkPos2"),Y=c.indexOf("PepSeq2"),T=c.indexOf("Dashed"),z=c.indexOf("Type");if(-1===v)alert("Failed to read column 'Protein1' from CSV file");else if(-1===y)alert("Failed to read column 'Protein2' from CSV file");else{if(-1===C&&(C=c.indexOf("AbsPos1"),-1===C)){alert("Failed to read column 'LinkPos1' from CSV file");
return}if(-1===X&&(X=c.indexOf("AbsPos2"),-1===X)){alert("Failed to read column 'LinkPos2' from CSV file");return}-1===G&&(G=c.indexOf("ld-Score"));var V=r.length;if(f){f=f.split("\n");c=null;for(var B,w,t=0;t<f.length;t++){var D=""+f[t];if(0!==D.indexOf(";"))if(0===D.indexOf(">")){if(null!==c){var L=m(c);w=new Protein(c,this,null,L);w.setSequence(B.trim());this.proteins.set(c,w);w=new Protein("decoy_reverse_"+c,this,null,"DECOY_"+L);w.setSequence(B.trim().split("").reverse().join(""));this.proteins.set("decoy_reverse_"+
c,w);w=new Protein("reverse_"+c,this,null,"DECOY_"+L);w.setSequence(B.trim().split("").reverse().join(""));this.proteins.set("reverse_"+c,w);B=""}w=D.indexOf(" ");-1===w&&(w=D.length);c=D.substring(1,w).trim().replace(/(['"])/g,"");D.substring(w).trim()}else B+=D.trim()}L=m(c);w=new Protein(c,this,null,L);w.setSequence(B.trim());this.proteins.set(c,w);w=new Protein("decoy_reverse_"+c,this,null,"DECOY_"+L);w.setSequence(B.trim().split("").reverse().join(""));this.proteins.set("decoy_reverse_"+c,w);
w=new Protein("reverse_"+c,this,null,"DECOY_"+L);w.setSequence(B.trim().split("").reverse().join(""));this.proteins.set("reverse_"+c,w);q.initProteins();p();B=this.proteins.values();var U=B.length;for(f=0;f<U;f++)w=B[f],0===w.proteinLinks.keys().length&&this.proteins.remove(w.id);e&&q.addAnnotations(e);q.initLayout()}else{h(v);h(y);B=this.proteins.values();var U=B.length,nb=0;for(f=0;f<U;f++)xiNET_Storage.getSequence(B[f].id,function(c,f){q.proteins.get(c).setSequence(f);nb++;console.log("> "+U+" "+
nb);nb===U&&(e&&q.addAnnotations(e),q.initProteins(),p(),q.initLayout())})}}};
